<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>ç¬¬ä¸‰ç« â€”â€”ç¨‹åºçš„æœºå™¨çº§åˆ«è¡¨ç¤º | Rinevard</title>
    
    
        <meta name="keywords" content="ç¬¬ä¸‰ç« â€”â€”ç¨‹åºçš„æœºå™¨çº§åˆ«è¡¨ç¤º" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="img{     width: 75%; }    æ±‡ç¼–ç®€ä»‹CSAPP æ•™çš„æ˜¯ x86-64 æ±‡ç¼–è¯­è¨€ï¼Œä½¿ç”¨çš„æ˜¯ AT&amp;T è¯­æ³•é£æ ¼ã€‚ ä¸‹å›¾æ¦‚è¿°äº†ç¨‹åºçš„å·¥ä½œæ–¹å¼ï¼Œå³ä»å†…å­˜ä¸­è¯»å–æŒ‡ä»¤ï¼ŒCPU æ ¹æ®æŒ‡ä»¤åœ¨å¯„å­˜å™¨ä¸Šæ‰§è¡Œæ“ä½œæ¥ä¿®æ”¹å†…å­˜é‡Œçš„æ•°æ®ï¼š  ä¸‹å›¾æè¿°äº†å€ŸåŠ© gcc è¿›è¡Œç¼–è¯‘çš„è¿‡ç¨‹ï¼Œå…¶ä¸­ .s å°±æ˜¯æ±‡ç¼–æ–‡ä»¶ï¼š  ä¸€äº›æ±‡ç¼–æŒ‡ä»¤ç¤ºä¾‹ï¼š movq 7(%rdx, %rsi, 2), %rax è¡¨ç¤º">
<meta property="og:type" content="article">
<meta property="og:title" content="ç¬¬ä¸‰ç« â€”â€”ç¨‹åºçš„æœºå™¨çº§åˆ«è¡¨ç¤º">
<meta property="og:url" content="http://rinevard.github.io/wiki/learning/open-course/CMU-15-213/Notes/Chapter3-machine-level-program/index.html">
<meta property="og:site_name" content="Rinevard">
<meta property="og:description" content="img{     width: 75%; }    æ±‡ç¼–ç®€ä»‹CSAPP æ•™çš„æ˜¯ x86-64 æ±‡ç¼–è¯­è¨€ï¼Œä½¿ç”¨çš„æ˜¯ AT&amp;T è¯­æ³•é£æ ¼ã€‚ ä¸‹å›¾æ¦‚è¿°äº†ç¨‹åºçš„å·¥ä½œæ–¹å¼ï¼Œå³ä»å†…å­˜ä¸­è¯»å–æŒ‡ä»¤ï¼ŒCPU æ ¹æ®æŒ‡ä»¤åœ¨å¯„å­˜å™¨ä¸Šæ‰§è¡Œæ“ä½œæ¥ä¿®æ”¹å†…å­˜é‡Œçš„æ•°æ®ï¼š  ä¸‹å›¾æè¿°äº†å€ŸåŠ© gcc è¿›è¡Œç¼–è¯‘çš„è¿‡ç¨‹ï¼Œå…¶ä¸­ .s å°±æ˜¯æ±‡ç¼–æ–‡ä»¶ï¼š  ä¸€äº›æ±‡ç¼–æŒ‡ä»¤ç¤ºä¾‹ï¼š movq 7(%rdx, %rsi, 2), %rax è¡¨ç¤º">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://rinevard.github.io/images/learning/open-course/CMU-15213/Notes/Chapter3/st.png">
<meta property="og:image" content="http://rinevard.github.io/images/learning/open-course/CMU-15213/Notes/Chapter3/cpu-memory.png">
<meta property="og:image" content="http://rinevard.github.io/images/learning/open-course/CMU-15213/Notes/Chapter3/compile.png">
<meta property="og:image" content="http://rinevard.github.io/images/learning/open-course/CMU-15213/Notes/Chapter3/register-rax.png">
<meta property="og:image" content="http://rinevard.github.io/images/learning/open-course/CMU-15213/Notes/Chapter3/st.png">
<meta property="og:image" content="http://rinevard.github.io/images/learning/open-course/CMU-15213/Notes/Chapter3/array.png">
<meta property="og:image" content="http://rinevard.github.io/images/learning/open-course/CMU-15213/Notes/Chapter3/struct.png">
<meta property="og:image" content="http://rinevard.github.io/images/learning/open-course/CMU-15213/Notes/Chapter3/union.png">
<meta property="article:published_time" content="2025-03-14T08:41:28.000Z">
<meta property="article:modified_time" content="2025-03-14T08:47:55.347Z">
<meta property="article:author" content="Rinevard">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://rinevard.github.io/images/learning/open-course/CMU-15213/Notes/Chapter3/st.png">
    

    

    
        <link rel="icon" href="/css/images/jurorara.png" />
    

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/libs/open-sans/styles.css">

    
<link rel="stylesheet" href="/libs/source-code-pro/styles.css">


    
<link rel="stylesheet" href="/css/style.css">

    
<script src="/libs/jquery/2.1.3/jquery.min.js"></script>

    
<script src="/libs/jquery/plugins/cookie/1.4.1/jquery.cookie.js"></script>

    
    
        
<link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">

    
    
        
<link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">

    
    
    
    


    
<meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Rinevard" type="application/atom+xml">
</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Rinevard</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/">é¦–é¡µ</a>
                
                    <a class="main-nav-link" href="/archives">æ–‡ç« å†å²</a>
                
                    <a class="main-nav-link" href="/about">å…³äºæˆ‘</a>
                
            </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="æœç´¢" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'æ–‡ç« ',
            PAGES: 'é¡µé¢',
            CATEGORIES: 'åˆ†ç±»',
            TAGS: 'æ ‡ç­¾',
            UNTITLED: '(æœªå‘½å)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/">é¦–é¡µ</a></td>
                
                    <td><a class="main-nav-link" href="/archives">æ–‡ç« å†å²</a></td>
                
                    <td><a class="main-nav-link" href="/about">å…³äºæˆ‘</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="æœç´¢" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap" id='categories'>
        <h3 class="widget-title">
            <span>åˆ†ç±»</span>
            &nbsp;
            <a id='allExpand' href="#">
                <i class="fa fa-angle-double-down fa-2x"></i>
            </a>
        </h3>
        
        
        
         <ul class="unstyled" id="tree" > 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            gamejam
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/game-design/ldjam%E5%8F%82%E8%B5%9B%E6%8C%87%E5%8D%97/">Ludum Dareå‚åŠ æŒ‡å—</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            å…³äºæœ¬ç«™
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/about-blog/%E5%BB%BA%E7%AB%99%E8%BF%87%E7%A8%8B/">å»ºç«™è¿‡ç¨‹</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory open">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder-open"></i>
                            &nbsp;
                            å­¦ä¹ 
                        </a>
                         <ul class="unstyled" id="tree" > 
                    <li class="directory open">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder-open"></i>
                            &nbsp;
                            å…¬å¼€è¯¾
                        </a>
                         <ul class="unstyled" id="tree" > 
                    <li class="directory open">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder-open"></i>
                            &nbsp;
                            CMU-15-213
                        </a>
                         <ul class="unstyled" id="tree" > 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Labs
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/learning/open-course/CMU-15-213/Labs/Datalab/">Datalabè§£æ</a></li>  <li class="file"><a href="/wiki/learning/open-course/CMU-15-213/Labs/Bomblab/">Bomblabæ„Ÿæƒ³</a></li>  <li class="file"><a href="/wiki/learning/open-course/CMU-15-213/Labs/Attacklab/">Attackblabè®°å½•</a></li>  <li class="file"><a href="/wiki/learning/open-course/CMU-15-213/Labs/Cachelab/">Cachelabç†è®ºåˆ†æ</a></li>  <li class="file"><a href="/wiki/learning/open-course/CMU-15-213/Labs/Shlab/">Shlabè°ƒè¯•è®°å½•å’Œä¸€é”®æµ‹è¯•è„šæœ¬</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory open">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder-open"></i>
                            &nbsp;
                            Notes
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/learning/open-course/CMU-15-213/Notes/Chapter2-data-representation/">ç¬¬äºŒç« â€”â€”è®¡ç®—æœºå†…çš„ä¿¡æ¯è¡¨ç¤º</a></li>  <li class="file active"><a href="/wiki/learning/open-course/CMU-15-213/Notes/Chapter3-machine-level-program/">ç¬¬ä¸‰ç« â€”â€”ç¨‹åºçš„æœºå™¨çº§åˆ«è¡¨ç¤º</a></li>  <li class="file"><a href="/wiki/learning/open-course/CMU-15-213/Notes/Chapter5-optimization/">ç¬¬äº”ç« â€”â€”æ€§èƒ½ä¼˜åŒ–</a></li>  <li class="file"><a href="/wiki/learning/open-course/CMU-15-213/Notes/Chapter6-memory-and-cache/">ç¬¬å…­ç« â€”â€”å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„</a></li>  <li class="file"><a href="/wiki/learning/open-course/CMU-15-213/Notes/Chapter8-exception-control-flow/">ç¬¬å…«ç« â€”â€”å¼‚å¸¸æ§åˆ¶æµ</a></li>  <li class="file"><a href="/wiki/learning/open-course/CMU-15-213/Notes/Chapter10-system-io/">ç¬¬åç« â€”â€”ç³»ç»Ÿçº§I/O</a></li>  </ul> 
                    </li> 
                     </ul> 
                    </li> 
                     </ul> 
                    </li> 
                     <li class="file"><a href="/wiki/learning/%E8%BF%99%E6%98%AF%E5%93%AA%E9%87%8C/">è¿™é‡Œæœ‰ä»€ä¹ˆï¼Ÿ</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            æ‚è°ˆ
                        </a>
                         <ul class="unstyled" id="tree" > 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            äºŒæ¬¡å…ƒ
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/others/animation/%E6%AF%8D%E9%B8%A1%E5%8D%A1%E7%9A%84%E5%90%84%E7%A7%8D%E7%A5%9E%E5%A5%87%E5%81%87%E8%8D%AF/">æ¯é¸¡å¡çš„å„ç§ç¥å¥‡å‡è¯</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            ç¢ç¢å¿µ
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/others/thoughts/datalab%E5%92%8C%E6%88%91/">å†™å®Œäº†datalabï¼Œçªç„¶æ„Ÿè§‰å¥½å­¤å•</a></li>  <li class="file"><a href="/wiki/others/thoughts/%E7%8E%A9%E4%B9%90%E7%9A%84%E4%BA%BA/">ç©ä¹çš„äºº</a></li>  </ul> 
                    </li> 
                     </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            æ¸¸æˆè®¾è®¡
                        </a>
                         <ul class="unstyled" id="tree" > 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            ä½“éªŒ
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/game-design/%E5%AF%B9%E6%8E%A2%E7%B4%A2%E7%B1%BB%E6%B8%B8%E6%88%8F%E7%9A%84%E6%80%9D%E8%80%83/">æ¢ç´¢</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            æŠ€å·§
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/game-design/%E5%86%B0%E5%B1%B1%E4%B9%8B%E4%B8%8B%E7%9A%84%E6%B7%B1%E5%BA%A6/">æŠ€å·§çš„åˆ†ç±»ï¼Œå†°å±±ä¹‹ä¸‹çš„æ·±åº¦</a></li>  </ul> 
                    </li> 
                     </ul> 
                    </li> 
                     <li class="file"><a href="/wiki/%E6%AC%A2%E8%BF%8E%EF%BC%81/">æ¬¢è¿ï¼</a></li>  </ul> 
    </div>
    <script>
        $(document).ready(function() {
            var iconFolderOpenClass  = 'fa-folder-open';
            var iconFolderCloseClass = 'fa-folder';
            var iconAllExpandClass = 'fa-angle-double-down';
            var iconAllPackClass = 'fa-angle-double-up';
            // Handle directory-tree expansion:
            // å·¦é”®å•ç‹¬å±•å¼€ç›®å½•
            $(document).on('click', '#categories a[data-role="directory"]', function (event) {
                event.preventDefault();

                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconFolderOpenClass);
                var subtree = $(this).siblings('ul');
                icon.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
                if (expanded) {
                    if (typeof subtree != 'undefined') {
                        subtree.slideUp({ duration: 100 });
                    }
                    icon.addClass(iconFolderCloseClass);
                } else {
                    if (typeof subtree != 'undefined') {
                        subtree.slideDown({ duration: 100 });
                    }
                    icon.addClass(iconFolderOpenClass);
                }
            });
            // å³é”®å±•å¼€ä¸‹å±æ‰€æœ‰ç›®å½•
            $('#categories a[data-role="directory"]').bind("contextmenu", function(event){
                event.preventDefault();
                
                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconFolderOpenClass);
                var listNode = $(this).siblings('ul');
                var subtrees = $.merge(listNode.find('li ul'), listNode);
                var icons = $.merge(listNode.find('.fa'), icon);
                icons.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
                if(expanded) {
                    subtrees.slideUp({ duration: 100 });
                    icons.addClass(iconFolderCloseClass);
                } else {
                    subtrees.slideDown({ duration: 100 });
                    icons.addClass(iconFolderOpenClass);
                }
            })
            // å±•å¼€å…³é—­æ‰€æœ‰ç›®å½•æŒ‰é’®
            $(document).on('click', '#allExpand', function (event) {
                event.preventDefault();
                
                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconAllExpandClass);
                icon.removeClass(iconAllExpandClass).removeClass(iconAllPackClass);
                if(expanded) {
                    $('#sidebar .fa.fa-folder').removeClass('fa-folder').addClass('fa-folder-open')
                    $('#categories li ul').slideDown({ duration: 100 });
                    icon.addClass(iconAllPackClass);
                } else {
                    $('#sidebar .fa.fa-folder-open').removeClass('fa-folder-open').addClass('fa-folder')
                    $('#categories li ul').slideUp({ duration: 100 });
                    icon.addClass(iconAllExpandClass);
                }
            });  
        });
    </script>

    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
            <section id="main"><article id="post-learning/open-course/CMU-15-213/Notes/Chapter3-machine-level-program" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
                    <div class="article-meta">
                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/">å­¦ä¹ </a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/%E5%85%AC%E5%BC%80%E8%AF%BE/">å…¬å¼€è¯¾</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/%E5%85%AC%E5%BC%80%E8%AF%BE/CMU-15-213/">CMU-15-213</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0/%E5%85%AC%E5%BC%80%E8%AF%BE/CMU-15-213/Notes/">Notes</a>
    </div>

                        
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/wiki/learning/open-course/CMU-15-213/Notes/Chapter3-machine-level-program/">
            <time datetime="2025-03-14T08:41:28.000Z" itemprop="datePublished">2025-03-14</time>
        </a>
    </div>


                        
                        
                    </div>
                
                
    
        <h1 class="article-title" itemprop="name">
            ç¬¬ä¸‰ç« â€”â€”ç¨‹åºçš„æœºå™¨çº§åˆ«è¡¨ç¤º
        </h1>
    

            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
        
            
                <div id="toc" class="toc-article">
                <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B1%87%E7%BC%96%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">æ±‡ç¼–ç®€ä»‹</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6"><span class="toc-number">2.</span> <span class="toc-text">æ§åˆ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#if%EF%BC%8Cwhile%EF%BC%8Cdo-while"><span class="toc-number">2.1.</span> <span class="toc-text">ifï¼Œwhileï¼Œdo-while</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#switch"><span class="toc-number">2.2.</span> <span class="toc-text">switch</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%92%8C%E6%A0%88"><span class="toc-number">3.</span> <span class="toc-text">å‡½æ•°å’Œæ ˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%80%9F%E5%8A%A9%E6%A0%88%E6%9D%A5%E6%8E%A7%E5%88%B6%E8%BD%AC%E7%A7%BB"><span class="toc-number">3.1.</span> <span class="toc-text">å€ŸåŠ©æ ˆæ¥æ§åˆ¶è½¬ç§»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%80%9F%E5%8A%A9%E6%A0%88%E6%9D%A5%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE"><span class="toc-number">3.2.</span> <span class="toc-text">å€ŸåŠ©æ ˆæ¥å­˜å‚¨æ•°æ®</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">4.</span> <span class="toc-text">æ•°æ®ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#array-%E5%92%8C%E5%AF%BB%E5%9D%80"><span class="toc-number">4.1.</span> <span class="toc-text">array å’Œå¯»å€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#struct-%E5%92%8C%E5%AF%B9%E9%BD%90"><span class="toc-number">4.2.</span> <span class="toc-text">struct å’Œå¯¹é½</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#union"><span class="toc-number">4.3.</span> <span class="toc-text">union</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%95%BF%E6%A0%88%E5%B8%A7%E5%92%8C-rbp"><span class="toc-number">4.4.</span> <span class="toc-text">å˜é•¿æ ˆå¸§å’Œ%rbp</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%94%BB%E5%87%BB%E4%B8%8E%E9%98%B2%E5%BE%A1"><span class="toc-number">5.</span> <span class="toc-text">æ”»å‡»ä¸é˜²å¾¡</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%94%BB%E5%87%BB"><span class="toc-number">5.1.</span> <span class="toc-text">æ”»å‡»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%98%B2%E5%BE%A1"><span class="toc-number">5.2.</span> <span class="toc-text">é˜²å¾¡</span></a></li></ol></li></ol>
                </div>
            
        
        
            <style>
img{
    width: 75%;
}
</style>

<p><img src="/images/learning/open-course/CMU-15213/Notes/Chapter3/st.png"></p>
<h1 id="æ±‡ç¼–ç®€ä»‹"><a href="#æ±‡ç¼–ç®€ä»‹" class="headerlink" title="æ±‡ç¼–ç®€ä»‹"></a>æ±‡ç¼–ç®€ä»‹</h1><p>CSAPP æ•™çš„æ˜¯ x86-64 æ±‡ç¼–è¯­è¨€ï¼Œä½¿ç”¨çš„æ˜¯ AT&amp;T è¯­æ³•é£æ ¼ã€‚</p>
<p>ä¸‹å›¾æ¦‚è¿°äº†ç¨‹åºçš„å·¥ä½œæ–¹å¼ï¼Œå³ä»å†…å­˜ä¸­è¯»å–æŒ‡ä»¤ï¼ŒCPU æ ¹æ®æŒ‡ä»¤åœ¨å¯„å­˜å™¨ä¸Šæ‰§è¡Œæ“ä½œæ¥ä¿®æ”¹å†…å­˜é‡Œçš„æ•°æ®ï¼š</p>
<p><img src="/images/learning/open-course/CMU-15213/Notes/Chapter3/cpu-memory.png"></p>
<p>ä¸‹å›¾æè¿°äº†å€ŸåŠ© gcc è¿›è¡Œç¼–è¯‘çš„è¿‡ç¨‹ï¼Œå…¶ä¸­ .s å°±æ˜¯æ±‡ç¼–æ–‡ä»¶ï¼š</p>
<p><img src="/images/learning/open-course/CMU-15213/Notes/Chapter3/compile.png"></p>
<p>ä¸€äº›æ±‡ç¼–æŒ‡ä»¤ç¤ºä¾‹ï¼š</p>
<p><code>movq 7(%rdx, %rsi, 2), %rax</code> è¡¨ç¤ºæŠŠ 2 * %rsi + %rdx + 7 æŒ‡å‘çš„åœ°å€çš„å€¼å¤åˆ¶åˆ° %rax ä¸­</p>
<p><code>leaq 7(%rdx, %rsi, 2), %rax</code> è¡¨ç¤ºæŠŠ 2 * %rsi + %rdx + 7 å¤åˆ¶åˆ° %rax ä¸­ï¼Œleaq å¸¸è¢«ç¼–è¯‘å™¨ç”¨æ¥åšä¸€äº›èªæ˜çš„å¿«é€Ÿè®¡ç®—ï¼Œä¸è¿‡ leaq çš„ç¬¬ä¸‰ä¸ªé¡¹åªèƒ½æ˜¯ 1, 2, 4, 8.</p>
<p><code>salq $n, %rax</code> è¡¨ç¤ºæŠŠ %rax ä¸­çš„å€¼å·¦ç§» n ä½ (sal æ˜¯ shift arithmetic left çš„ç¼©å†™)</p>
<p><code>imulq %rdx, %rax</code> è¡¨ç¤ºæŠŠ %rdx ä¸­çš„å€¼ä¸ %rax ä¸­çš„å€¼ç›¸ä¹˜ï¼Œç»“æœå­˜å…¥ %rax (æœ‰ç¬¦å·æ•´æ•°ä¹˜æ³•)</p>
<p>æ“ä½œå¾ˆå¤šï¼Œæˆ‘ä»¬ä¸å†åˆ—ä¸¾æ›´å¤šï¼Œéšä¾¿æ‰¾ä¸ªä¹¦æŸ¥ä¸€æŸ¥å°±å¥½ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°è¿™äº›æ“ä½œéƒ½ä»¥ â€˜qâ€™ ç»“å°¾ï¼Œé‚£å¦‚æœæˆ‘ä¸å–œæ¬¢ â€˜qâ€™ï¼Œæˆ‘å¯ä»¥ç”¨ â€˜râ€™ ç»“å°¾å—ï¼Ÿä¸è¡Œï¼Œå› ä¸ºè¿™é‡Œçš„ â€˜qâ€™ å®é™…ä¸Šæ˜¯åœ¨æŒ‡å®šæ“ä½œçš„å¤§å°ã€‚è¿˜è®°å¾—å¯„å­˜å™¨é•¿ä»€ä¹ˆæ ·å—ï¼š</p>
<p><img src="/images/learning/open-course/CMU-15213/Notes/Chapter3/register-rax.png"></p>
<table>
<thead>
<tr>
<th>åç¼€</th>
<th>å…¨ç§°</th>
<th>å¤§å°(å­—èŠ‚)</th>
<th>ä½æ•°</th>
<th>æŒ‡ä»¤ç¤ºä¾‹</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td><code>b</code></td>
<td>byte</td>
<td>1</td>
<td>8 ä½</td>
<td><code>movb</code></td>
<td>ç§»åŠ¨å•å­—èŠ‚(8 ä½)æ•°æ®</td>
</tr>
<tr>
<td><code>w</code></td>
<td>word</td>
<td>2</td>
<td>16 ä½</td>
<td><code>movw</code></td>
<td>ç§»åŠ¨å­—(16 ä½)æ•°æ®</td>
</tr>
<tr>
<td><code>l</code></td>
<td>long</td>
<td>4</td>
<td>32 ä½</td>
<td><code>movl</code></td>
<td>ç§»åŠ¨åŒå­—(32 ä½)æ•°æ®</td>
</tr>
<tr>
<td><code>q</code></td>
<td>quadword</td>
<td>8</td>
<td>64 ä½</td>
<td><code>movq</code></td>
<td>ç§»åŠ¨å››å­—(64 ä½)æ•°æ®</td>
</tr>
</tbody></table>
<p>æˆ‘ä»¬ä¹Ÿæœ‰ pushq å’Œ popq ä¹‹ç±»çš„å’Œæ ˆç›¸å…³çš„æ“ä½œã€‚æ ˆæ˜¯ä»€ä¹ˆï¼Ÿè¯·çœ‹ä¸‹é›†â€”â€”å‡½æ•°å’Œæ ˆã€‚ï¼ˆåœ¨â€œæ§åˆ¶â€è¿™ä¸€èŠ‚åé¢ï¼‰</p>
<h1 id="æ§åˆ¶"><a href="#æ§åˆ¶" class="headerlink" title="æ§åˆ¶"></a>æ§åˆ¶</h1><p>æˆ‘å·²ç»ä¼šåŠ å‡ä¹˜é™¤äº†ï¼Œé‚£ä½ èƒ½æ•™æ•™æˆ‘æ€ä¹ˆå†™æ¡ä»¶ï¼ˆifï¼‰å’Œå¾ªç¯ï¼ˆfor, whileï¼‰å—ï¼Ÿ</p>
<p>ä¹æ„æ•ˆåŠ³ã€‚ğŸ˜</p>
<h2 id="ifï¼Œwhileï¼Œdo-while"><a href="#ifï¼Œwhileï¼Œdo-while" class="headerlink" title="ifï¼Œwhileï¼Œdo-while"></a>ifï¼Œwhileï¼Œdo-while</h2><p>æ— è®ºæ˜¯æ¡ä»¶è¿˜æ˜¯å¾ªç¯ï¼Œæˆ‘ä»¬éƒ½åœ¨åšä¸¤ä»¶äº‹â€”â€”åˆ¤æ–­æ¡ä»¶æ˜¯å¦æ»¡è¶³å’Œæ ¹æ®æ¡ä»¶è·³åˆ°æŸä¸ªåœ°æ–¹æ‰§è¡Œè¯­å¥ã€‚</p>
<p>è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æ±‡ç¼–é‡Œçš„ä¸€ä¸ªå…¸å‹çš„ do-while å¾ªç¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">long fact_do(long n)</span><br><span class="line">n in %rdi</span><br><span class="line">1 fact_do:</span><br><span class="line">2   movl $1, %eax     Set result = 1</span><br><span class="line">3 .L2: loop:</span><br><span class="line">4   imulq %rdi, %rax  Compute result *= n</span><br><span class="line">5   subq $1, %rdi     Decrement n</span><br><span class="line">6   cmpq $1, %rdi     Compare n:1</span><br><span class="line">7   jg .L2            If &gt;, goto loop</span><br><span class="line">8   rep ; ret         Return</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é€šè¿‡â€œcmpqâ€å’Œâ€œjgâ€æ¥åˆ¤æ–­æ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼Œé€šè¿‡â€œjgâ€æ¥è·³è½¬ä»¥æ‰§è¡Œå¾ªç¯ã€‚é‚£ä¹ˆï¼Œcmpq å®é™…ä¸Šæ˜¯åœ¨åšä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>åœ¨æ±‡ç¼–ä¸­ï¼Œæˆ‘ä»¬æœ‰å‡ ä¸ªç‰¹æ®Šçš„æ ‡å¿—å¯„å­˜å™¨ CFã€ZFã€SFã€OF æ¥è®°å½•æœ€è¿‘çš„æ“ä½œæ˜¯å¦äº§ç”Ÿäº† unsigned çš„æº¢å‡ºã€äº§ç”Ÿ 0ã€äº§ç”Ÿè´Ÿæ•°ã€äº§ç”Ÿäº†è¡¥ç æº¢å‡ºã€‚cmp å’Œ test ä¸¤ä¸ªæŒ‡ä»¤å‡è£…æ‰§è¡Œå‡æ³•å’ŒæŒ‰ä½ä¸å¹¶ä¿®æ”¹è¿™äº›æ ‡å¿—å¯„å­˜å™¨ã€‚</p>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œcmpq $1, %rdi å°±æ˜¯åœ¨å‡è£…åš %rdi - 1ï¼Œå¹¶æ ¹æ®è®¡ç®—ç»“æœä¿®æ”¹æ ‡å¿—å¯„å­˜å™¨ã€‚è€Œ jg åˆ™æ ¹æ®æ ‡å¿—å¯„å­˜å™¨çš„å€¼æ¥è¿›è¡Œè·³è½¬ã€‚jg çš„æ•ˆæœæ˜¯ï¼Œå¦‚æœ ~(SF ^ OF) &amp; ~ZF ä¸ºçœŸï¼Œå°±è¿›è¡Œè·³è½¬ã€‚</p>
<p>jg çš„è·³è½¬æ¡ä»¶çœ‹èµ·æ¥å¾ˆå¤æ‚ï¼Œä½†å®ƒå’Œ cmpq x, y è”åŠ¨çš„æ•ˆæœæ˜¯â€”â€”å¦‚æœ y &gt; xï¼Œè·³è½¬ï¼Œå› æ­¤å®ƒå«åš jg.</p>
<p>ä¸‹è¡¨æ˜¯ CMP å’Œ TEST çš„æ¦‚è¿°ï¼š</p>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Based on</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>CMP Sâ‚, Sâ‚‚</td>
<td>Sâ‚‚ - Sâ‚</td>
<td>Compare</td>
</tr>
<tr>
<td>TEST Sâ‚, Sâ‚‚</td>
<td>Sâ‚ &amp; Sâ‚‚</td>
<td>Test</td>
</tr>
</tbody></table>
<p>è¿™é‡Œæ˜¯ä¸€äº›è·³è½¬è¯­å¥ç¤ºä¾‹ï¼š</p>
<table>
<thead>
<tr>
<th>Instruction</th>
<th>Synonym</th>
<th>Jump condition</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>jmp Label</td>
<td></td>
<td>1</td>
<td>Direct jump<br>ä¾‹ï¼šjmp 0x400123<br>ç›´æ¥è·³è½¬åˆ°å…·ä½“åœ°å€</td>
</tr>
<tr>
<td>jmp *Operand</td>
<td></td>
<td>1</td>
<td>Indirect jump<br>ä¾‹ï¼šjmp *%rax<br>è·³è½¬ç›®æ ‡åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®š</td>
</tr>
<tr>
<td>je Label</td>
<td>jz</td>
<td>ZF</td>
<td>Equal &#x2F; zero</td>
</tr>
<tr>
<td>js Label</td>
<td></td>
<td>SF</td>
<td>Negative</td>
</tr>
<tr>
<td>jg Label</td>
<td>jnle</td>
<td>~(SF ^ OF) &amp; ~ZF</td>
<td>Greater (signed &gt;)</td>
</tr>
<tr>
<td>jge Label</td>
<td>jnl</td>
<td>~(SF ^ OF)</td>
<td>Greater or equal (signed &gt;&#x3D;)</td>
</tr>
</tbody></table>
<h2 id="switch"><a href="#switch" class="headerlink" title="switch"></a>switch</h2><p>è¦æ³¨æ„çš„æ˜¯ï¼Œswitch å’Œ if çš„æ±‡ç¼–æœ‰æœ¬è´¨åŒºåˆ«ã€‚switch åŸºäºè·³è½¬è¡¨ï¼ˆç±»ä¼¼å“ˆå¸Œè¡¨ï¼‰ï¼Œå®ƒå…ˆæŠŠ case åŒæ—¶å¢å‡ä¸€ä¸ªå€¼æ¥è®©æœ€å°çš„ case å˜ä¸º 0ï¼Œç„¶åå»ºç«‹è·³è½¬è¡¨ï¼Œå¹¶æ ¹æ® case çš„å€¼æ¥è®¡ç®—åˆé€‚çš„è·³è½¬åœ°å€ã€‚</p>
<p>ä»¥è¿™ä¸ª C ä»£ç ä¸ºä¾‹ï¼Œå®ƒå¯èƒ½è¢«ç¼–è¯‘æˆä¸‹é¢çš„æ±‡ç¼–ä»£ç ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(n) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>: <span class="keyword">return</span> <span class="string">&quot;one&quot;</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>: <span class="keyword">return</span> <span class="string">&quot;three&quot;</span>;</span><br><span class="line">    <span class="keyword">default</span>: <span class="keyword">return</span> <span class="string">&quot;other&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cmpl    $2, %eax                        # æ£€æŸ¥æ˜¯å¦è¶…å‡ºèŒƒå›´(&gt;2), è¿™é‡Œ%eax = x-1,</span><br><span class="line">                                        # å› ä¸ºæœ€å°caseæ˜¯1</span><br><span class="line">        ja      .L_default              # å¦‚æœè¶…å‡ºèŒƒå›´åˆ™è·³è½¬åˆ°default</span><br><span class="line">        jmp     *.L_table(,%rax,4)      # ä½¿ç”¨è·³è½¬è¡¨: base + index*4</span><br><span class="line"></span><br><span class="line">.section .rodata</span><br><span class="line">.align 4</span><br><span class="line">.L_table:</span><br><span class="line">        .long   .L_case1                # case 1, %eax = 0</span><br><span class="line">        .long   .L_default              # case 2, %eax = 1</span><br><span class="line">        .long   .L_case2                # case 3, %eax = 2</span><br></pre></td></tr></table></figure>

<h1 id="å‡½æ•°å’Œæ ˆ"><a href="#å‡½æ•°å’Œæ ˆ" class="headerlink" title="å‡½æ•°å’Œæ ˆ"></a>å‡½æ•°å’Œæ ˆ</h1><p>å•Šå“ˆå“ˆï¼Œæˆ‘ä»¬åˆè¦è®¨è®ºå¯„å­˜å™¨äº†ã€‚è¿˜è®°å¾— %rsp å—ï¼Ÿå®ƒå°±æ˜¯å­˜å‚¨æ ˆæŒ‡é’ˆçš„å¯„å­˜å™¨ã€‚ä¸‹å›¾å·¦è¾¹æ˜¯æ ˆçš„ç»“æ„ï¼Œå³è¾¹æ˜¯å¯„å­˜å™¨ï¼š</p>
<p><img src="/images/learning/open-course/CMU-15213/Notes/Chapter3/st.png"></p>
<p>é‚£ä¹ˆï¼Œæ ˆå’Œå‡½æ•°æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ</p>
<h2 id="å€ŸåŠ©æ ˆæ¥æ§åˆ¶è½¬ç§»"><a href="#å€ŸåŠ©æ ˆæ¥æ§åˆ¶è½¬ç§»" class="headerlink" title="å€ŸåŠ©æ ˆæ¥æ§åˆ¶è½¬ç§»"></a>å€ŸåŠ©æ ˆæ¥æ§åˆ¶è½¬ç§»</h2><p>æ ˆçš„ç¬¬ä¸€ä¸ªä½œç”¨æ˜¯â€œpassing controlâ€œï¼Œå³æ§åˆ¶è½¬ç§»ã€‚</p>
<p>è°ƒç”¨å‡½æ•°ï¼ˆcallqï¼‰æœ¬è´¨ä¸Šå°±æ˜¯è®©ç¨‹åºè®¡æ•°å™¨è·³è½¬ï¼ˆjmpï¼‰åˆ°äº†å‡½æ•°æ‰€åœ¨çš„æ±‡ç¼–åœ°å€ï¼Œå¹¶æŠŠè°ƒç”¨å®Œæˆååº”è¯¥æ‰§è¡Œçš„æŒ‡ä»¤åœ°å€å‹å…¥æ ˆä¸­ï¼ˆpushqï¼‰ã€‚è€Œå‡½æ•°è¿”å›ï¼ˆretqï¼‰æœ¬è´¨ä¸Šå°±æ˜¯æŠŠè°ƒç”¨å®Œæˆååº”è¯¥æ‰§è¡Œçš„æŒ‡ä»¤åœ°å€ pop å‡ºæ¥ï¼ˆpopqï¼‰ï¼Œå¹¶è·³è½¬å›å»ï¼ˆjmpï¼‰ã€‚</p>
<h2 id="å€ŸåŠ©æ ˆæ¥å­˜å‚¨æ•°æ®"><a href="#å€ŸåŠ©æ ˆæ¥å­˜å‚¨æ•°æ®" class="headerlink" title="å€ŸåŠ©æ ˆæ¥å­˜å‚¨æ•°æ®"></a>å€ŸåŠ©æ ˆæ¥å­˜å‚¨æ•°æ®</h2><p>æ ˆçš„å¦ä¸€ä¸ªä½œç”¨æ˜¯å­˜å‚¨æ•°æ®ã€‚</p>
<p>åœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œæ ˆæŒ‡é’ˆä¼šç§»åŠ¨å¹¶ä¸ºè¿™ä¸ªå‡½æ•°åˆ†é…ä¸€äº›æ ˆç©ºé—´ç”¨äºå­˜å‚¨å¯„å­˜å™¨çš„å€¼ã€å­˜å‚¨æœ¬åœ°å˜é‡ã€ä¼ å…¥çš„å‚æ•°ä¹‹ç±»çš„ä¸œè¥¿ã€‚æˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªè§£é‡Šã€‚</p>
<p>å¯„å­˜å™¨ï¼šåœ¨ä¸Šå›¾çš„å³è¾¹å¯ä»¥çœ‹åˆ°æœ‰ caller saved å’Œ callee saved çš„å¯„å­˜å™¨ï¼Œæ ‡æ³¨ caller saved çš„å¯„å­˜å™¨ç”±è°ƒç”¨è€…è´Ÿè´£ä¿å­˜ï¼Œæ ‡æ³¨ callee saved çš„å¯„å­˜å™¨ç”±è¢«è°ƒç”¨è€…è´Ÿè´£ä¿å­˜ã€‚æ¯”å¦‚è¯´ï¼Œåœ¨è¢«è°ƒç”¨çš„å‡½æ•°è¿”å›æ—¶ï¼Œè¢«è°ƒç”¨è€…è¦ç¡®ä¿ callee saved çš„å¯„å­˜å™¨å’Œè°ƒç”¨å‰æ²¡æœ‰åŒºåˆ«ã€‚</p>
<p>æœ¬åœ°å˜é‡ï¼šæœ‰æ—¶å€™å¯„å­˜å™¨ä¸è¶³ä»¥ä¿å­˜æ‰€æœ‰æœ¬åœ°å˜é‡ï¼Œå°±è¦æ”¾åˆ°æ ˆä¸­ã€‚</p>
<p>ä¼ å…¥çš„å‚æ•°ï¼šå‚æ•°ç¡®å®å¯ä»¥å­˜åœ¨å¯„å­˜å™¨ä¸­ï¼Œä½†æœ‰æ—¶å€™å¯„å­˜å™¨ä¸å¤Ÿå­˜ï¼Œä¹Ÿå°±åªèƒ½æ”¾åˆ°æ ˆä¸­äº†ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ç±»ä¼¼ movl -4(%rsp), %edx çš„æŒ‡ä»¤æ¥è·å–ä¼ å…¥çš„å‚æ•°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">é«˜åœ°å€</span><br><span class="line">            |  å‚æ•°7                |</span><br><span class="line">            |  å‚æ•°8                |</span><br><span class="line">            |  ...                 |  â† è°ƒç”¨å‰push</span><br><span class="line">            |  è¿”å›åœ°å€             |  â† callæŒ‡ä»¤è‡ªåŠ¨push</span><br><span class="line">            |  ä¿å­˜çš„å¯„å­˜å™¨å€¼        |  â† åˆšè¿›å…¥å‡½æ•°æ—¶push</span><br><span class="line">            |  æœ¬åœ°å˜é‡1            |</span><br><span class="line">            |  æœ¬åœ°å˜é‡2            |</span><br><span class="line">            |  ...                 |   â† å½“å‰rspæŒ‡å‘è¿™é‡Œ</span><br><span class="line">ä½åœ°å€</span><br></pre></td></tr></table></figure>

<p>å¯¹äº†ï¼Œæ ¹æ®ä¸Šé¢çš„æè¿°ï¼Œé€’å½’å°±æˆäº†è‡ªç„¶æ¶Œç°å‡ºçš„ç»“æœï¼ŒçœŸç¥å¥‡ï¼</p>
<h1 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h1><p>æˆ‘ä»¬æ¥èŠèŠ arrayã€structã€union éƒ½æ˜¯æ€ä¹ˆè¡¨ç¤ºåœ¨å†…å­˜ä¸­çš„ã€‚</p>
<h2 id="array-å’Œå¯»å€"><a href="#array-å’Œå¯»å€" class="headerlink" title="array å’Œå¯»å€"></a>array å’Œå¯»å€</h2><p>å…ˆè¯´ Arrayï¼ŒäºŒç»´ array å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/images/learning/open-course/CMU-15213/Notes/Chapter3/array.png"></p>
<p>ç®€å•æ˜“æ‡‚ã€‚å‡è®¾æˆ‘ä»¬æœ‰ T A[R][C]ï¼Œé‚£ä¹ˆ&amp;D[i][j] &#x3D; x0 + L(C * i + j). å…¶ä¸­ x0 ä¸ºæ•°ç»„çš„èµ·å§‹åœ°å€ï¼ŒL æ˜¯ sizeof(T). ç¼–è¯‘å™¨åœ¨å¯»å€æ—¶ä¹Ÿå°±æ˜¯è¿™ä¹ˆåšçš„ã€‚ä¸è¿‡ç¼–è¯‘å™¨ä¼šåšä¸€äº›èªæ˜çš„ä¼˜åŒ–æ¥é¿å…ä¹˜æ³•ï¼Œæ¯”å¦‚ç”¨ leaq æ¥åŠ å¿«è®¡ç®—ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># A in %rdi, i in %rsi, and j in %rdx</span><br><span class="line"></span><br><span class="line">1 leaq (%rsi,%rsi,2), %rax       # Compute 3i</span><br><span class="line">2 leaq (%rdi,%rax,4), %rax       # Compute xA + 12i</span><br><span class="line">3 movl (%rax,%rdx,4), %eax       # Read from M[xA + 12i + 4]</span><br></pre></td></tr></table></figure>

<h2 id="struct-å’Œå¯¹é½"><a href="#struct-å’Œå¯¹é½" class="headerlink" title="struct å’Œå¯¹é½"></a>struct å’Œå¯¹é½</h2><p>å†æ¥èŠèŠ structï¼Œçœ‹çœ‹è¿™å¼ å›¾å°±å·®ä¸å¤šäº†ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">struct rec &#123;</span><br><span class="line">    int i;</span><br><span class="line">    int a[2];</span><br><span class="line">    int *p;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><img src="/images/learning/open-course/CMU-15213/Notes/Chapter3/struct.png"></p>
<p>ä¸Šå›¾ä¸­ï¼Œ12 åˆ° 16 çš„â€œå¡«å……â€æ˜¯å‡ºäºæ•°æ®å¯¹é½çš„éœ€è¦ï¼Œå¯¹é½åŸåˆ™æ˜¯â€”â€”ä»»ä½• K å­—èŠ‚çš„åŸºæœ¬å¯¹è±¡çš„åœ°å€å¿…é¡»æ˜¯ K çš„å€æ•°ã€‚</p>
<table>
<thead>
<tr>
<th>K</th>
<th>type</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>char</td>
</tr>
<tr>
<td>2</td>
<td>short</td>
</tr>
<tr>
<td>4</td>
<td>int, float</td>
</tr>
<tr>
<td>8</td>
<td>long, double, char *</td>
</tr>
</tbody></table>
<h2 id="union"><a href="#union" class="headerlink" title="union"></a>union</h2><p>union å…è®¸æˆ‘ä»¬ç”¨ä¸åŒæ–¹å¼è§£é‡ŠåŒä¸€æ®µä½è¡¨ç¤ºï¼Œå¸¸ç”¨äºèŠ‚çœå†…å­˜ã€‚</p>
<p><img src="/images/learning/open-course/CMU-15213/Notes/Chapter3/union.png"></p>
<p>æœ€å¸¸è§çš„åº”ç”¨æ˜¯ï¼Œunion ä¸­çš„ä¸œè¥¿äº’æ–¥ï¼Œæ¯”å¦‚å®ç°æ¯”è¾ƒåŸºç¡€çš„åŠ¨æ€ç±»å‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">DynamicValue</span> &#123;</span><br><span class="line">    <span class="keyword">enum</span> <span class="title class_">Type</span> &#123; INT, DOUBLE, STRING &#125; type;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">union</span> <span class="title class_">Data</span> &#123;</span><br><span class="line">        <span class="type">int</span> i;</span><br><span class="line">        <span class="type">double</span> d;</span><br><span class="line">        <span class="type">char</span>* s;</span><br><span class="line">    &#125; data;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="å˜é•¿æ ˆå¸§å’Œ-rbp"><a href="#å˜é•¿æ ˆå¸§å’Œ-rbp" class="headerlink" title="å˜é•¿æ ˆå¸§å’Œ%rbp"></a>å˜é•¿æ ˆå¸§å’Œ%rbp</h2><p>æœ‰æ—¶æˆ‘ä»¬ä¼šç”¨åˆ°é•¿åº¦ä¸å®šçš„æ•°ç»„ï¼Œæ¯”å¦‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">coolArr</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">	<span class="type">int</span> A[n];</span><br><span class="line">	<span class="comment">// åšä¸€äº›cool things</span></span><br><span class="line">	<span class="keyword">return</span> A[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶æˆ‘ä»¬åœ¨è°ƒç”¨å‡½æ•°å‰æ˜¯æ— æ³•ç¡®å®šè¦ä¸ºå‡½æ•°åˆ†é…å¤šå°‘æ ˆç©ºé—´çš„ï¼Œç¼–è¯‘å‡ºæ¥çš„å‡½æ•°ä¼šå½¢å¦‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">collArr:</span><br><span class="line">	pushq %rbp</span><br><span class="line">	movq  %rsp, %rbp</span><br><span class="line">	...            # åšä¸€äº›cool things</span><br><span class="line">	leave          # ç­‰ä»·äº  movq %rbp, %rsp; popq %rbp</span><br><span class="line">	retq</span><br></pre></td></tr></table></figure>

<p>ç¼–è¯‘å™¨ä¼šç”¨ %rbp ä½œä¸ºåŸºæŒ‡é’ˆï¼ˆbase pointerï¼‰æ¥è®°å½•è¿›å…¥å‡½æ•°å‰çš„æ ˆæŒ‡é’ˆä½ç½®ï¼Œå¹¶åœ¨è¿”å›æ—¶å¤ä½ %rsp å’Œ %rbp çš„çŠ¶æ€ã€‚</p>
<h1 id="æ”»å‡»ä¸é˜²å¾¡"><a href="#æ”»å‡»ä¸é˜²å¾¡" class="headerlink" title="æ”»å‡»ä¸é˜²å¾¡"></a>æ”»å‡»ä¸é˜²å¾¡</h1><h2 id="æ”»å‡»"><a href="#æ”»å‡»" class="headerlink" title="æ”»å‡»"></a>æ”»å‡»</h2><p>æœ€å¸¸è§çš„æ”»å‡»æ˜¯ç¼“å†²åŒºæº¢å‡ºæ”»å‡»ï¼ŒCSAPP é‡Œè®²äº†æ ˆæº¢å‡ºæ”»å‡»ï¼Œå…·ä½“å¯ä»¥çœ‹çœ‹ attacklab. è¿™å¯ä»¥åˆ†ä¸ºæ¤å…¥æ¶æ„ä»£ç å’Œ ROP æ”»å‡»ã€‚</p>
<h2 id="é˜²å¾¡"><a href="#é˜²å¾¡" class="headerlink" title="é˜²å¾¡"></a>é˜²å¾¡</h2><p>å¯¹æ ˆæº¢å‡ºçš„é˜²å¾¡æ‰‹æ®µä¸»è¦æœ‰æ ˆç ´åæ£€æµ‹ã€æ ˆéšæœºåŒ–ã€é™åˆ¶å¯æ‰§è¡Œä»£ç åŒºåŸŸã€‚</p>
<p>æœ€æœ‰æ•ˆçš„æ‰‹æ®µæ˜¯æ ˆç ´åæ£€æµ‹ï¼Œåªè¦ä½ ç ´åä¸äº†æ ˆï¼Œè‡ªç„¶å°±æ²¡åŠæ³•æ”»å‡»äº†ã€‚å¸¸ç”¨çš„æ‰‹æ®µæ˜¯é‡‘ä¸é›€å€¼ï¼Œå³åœ¨è°ƒç”¨å…è®¸ç”¨æˆ·ä¿®æ”¹æ ˆçš„å‡½æ•°æ—¶ï¼Œåœ¨æ ˆé‡Œæ”¾ä¸€ä¸ªéšæœºå€¼ï¼Œç„¶ååœ¨å‡½æ•°è¿”å›æ—¶åˆ¤æ–­è¿™ä¸ªå€¼æ˜¯å¦è¢«æ”¹å˜ã€‚</p>
<p>æ ˆéšæœºåŒ–æ˜¯æŒ‡æ¯æ¬¡è¿è¡Œä»£ç æ—¶ï¼Œæ ˆçš„åœ°å€éƒ½ä¸ä¸€æ ·ã€‚</p>
<p>é™åˆ¶å¯æ‰§è¡Œä»£ç åŒºåŸŸå¯ä»¥é˜²å¾¡æ¤å…¥æ¶æ„ä»£ç åˆ°æ ˆé‡Œï¼Œåªè¦ä¸å…è®¸æ‰§è¡Œæ ˆé‡Œçš„ä»£ç å°±è¡Œäº†ã€‚</p>

            </div>
        
        <footer class="article-footer">
        </footer>
    </div>
</article>


    
<nav id="article-nav">
    
        <a href="/wiki/learning/open-course/CMU-15-213/Notes/Chapter5-optimization/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
            <div class="article-nav-title">
                
                    ç¬¬äº”ç« â€”â€”æ€§èƒ½ä¼˜åŒ–
                
            </div>
        </a>
    
    
        <a href="/wiki/learning/open-course/CMU-15-213/Labs/Attacklab/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
            <div class="article-nav-title">Attackblabè®°å½•</div>
        </a>
    
</nav>





     
<section id="comments">
<div class="giscus"></div>
<script
  src="https://giscus.app/client.js"
  data-repo="rinevard/rinevard.github.io"
  data-repo-id="R_kgDOLkoe9A"
  data-category="Announcements"
  data-category-id="DIC_kwDOLkoe9M4CjJnR"
  data-mapping="pathname"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="top"
  data-theme="preferred_color_scheme"
  data-lang="zh-CN"
  data-loading="lazy"
  crossorigin="anonymous"
  async
></script>

</section>
 




<!-- baidu url auto push script -->
<script type="text/javascript">
    !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=window.location.href,o=document.referrer;if(!e.test(r)){var n="//api.share.baidu.com/s.gif";o?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var t=new Image;t.src=n}}(window);
</script>     
</section>
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            Rinevard &copy; 2025 
            <a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/80x15.png" /></a>
            <br> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme - <a target="_blank" rel="noopener" href="https://github.com/zthxxx/hexo-theme-Wikitten">wikitten</a>
            
        </div>
    </div>
</footer>

        

    
        
<script src="/libs/lightgallery/js/lightgallery.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-pager.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-zoom.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-hash.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-share.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-video.min.js"></script>

    
    
        
<script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>

    
    
        <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true,
            TeX: {
                equationNumbers: {
                  autoNumber: 'AMS'
                }
            }
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    



<!-- Custom Scripts -->

<script src="/js/main.js"></script>


    </div>
</body>
</html>