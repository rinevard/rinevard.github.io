{"meta":{"title":"Rinevard","subtitle":"","description":"","author":"Rinevard","url":"http://rinevard.github.io","root":"/"},"pages":[{"title":"Categories","date":"2025-02-06T02:38:03.136Z","updated":"2025-02-06T02:38:03.136Z","comments":true,"path":"categories/index.html","permalink":"http://rinevard.github.io/categories/index.html","excerpt":"","text":"è¿™é‡Œä»€ä¹ˆä¹Ÿæ²¡æœ‰å“¦~æ–‡ä»¶å¤¹å·²ç»å¾ˆæ–¹ä¾¿äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ç”¨åˆ†ç±»å‘¢ï¼Ÿ"},{"title":"About","date":"2025-10-31T13:50:13.873Z","updated":"2025-10-31T13:50:13.873Z","comments":true,"path":"about/index.html","permalink":"http://rinevard.github.io/about/index.html","excerpt":"","text":"è¿™é‡Œæ˜¯ Rinevard. å–œæ¬¢ç‹¬ç«‹æ¸¸æˆä¹‹ç±»çš„æ–°é²œäº‹ç‰©ã€‚æˆ‘åº”è¯¥ä¸»è¦ä¼šåœ¨ç«™é‡Œæ”¾ä¸€äº›æ‚è°ˆå’Œæ¸¸æˆç›¸å…³çš„æ–‡ç« ï¼Œæ¬¢è¿æ¥çœ‹ï¼ å¶å°”ä¼šå‡ºç°çš„çˆ±å¥½æ˜¯å–åï¼Œæˆ‘è¿˜ç”¨è¿‡ Lyraineã€é²¤é±¼ã€æ±ŸçŸ¥é¹¤ï¼ˆè¯»èµ·æ¥å’Œ rinevard è›®åƒçš„ï¼‰ä¹‹ç±»çš„åå­—ã€‚ å¦‚æœæƒ³å’Œæˆ‘è”ç³»ï¼Œæ¬¢è¿å‘é‚®ä»¶åˆ° rinevard@outlook.comï¼ï¼ˆä¸è¿‡ä¸ä¸€å®šä¼šçœ‹ï¼‰ æˆ‘çš„ Github è´¦å·: Rinevard. å¦å¤–ï¼Œæ¬¢è¿åˆ°æˆ‘çš„ itch ä¸»é¡µä¸Šç©æˆ‘çš„æ¸¸æˆï¼"},{"title":"æ¢ç´¢çš„å¥–åŠ±","date":"2025-02-11T02:04:52.000Z","updated":"2025-08-20T11:13:48.889Z","comments":true,"path":"secret/index.html","permalink":"http://rinevard.github.io/secret/index.html","excerpt":"","text":"/* éšè—æ–‡æœ¬ç›¸å…³æ ·å¼ */ .secret-text::selection { color: white; background: black; } .secret-text { background: transparent; cursor: default; /* é¼ æ ‡æ ·å¼ä¿æŒé»˜è®¤ */ } #output { white-space: pre; font-family: monospace; font-size: 12px; line-height: 12px; letter-spacing: unset; transform: unset; overflow-y: hidden; background: transparent; cursor: default; /* é¼ æ ‡æ ·å¼ä¿æŒé»˜è®¤ */ } /* è‰ä¹¦æ•ˆæœç›¸å…³æ ·å¼ */ .cursive-text { font-family: 'Brush Script MT', cursive; font-size: 20px; color: darkred; /* text-align: center; */ margin: 20px 0; /* padding: 20px; */ line-height: 1.5; cursor: default; } /* è‰ä¹¦æ•ˆæœç›¸å…³æ ·å¼ */ .center-cursive-text { font-family: 'Brush Script MT', cursive; font-size: 20px; color: darkred; text-align: center; margin: 20px 0; /* padding: 20px; */ line-height: 1.5; cursor: default; } /* éšè—è‰ä¹¦ */ .hidden-fancy-text { font-family: 'Brush Script MT', cursive; font-size: 22px; /* text-align: center; */ margin: 20px 0; /* padding: 20px; */ line-height: 1.5; color: transparent; cursor: default; } .hidden-fancy-text::selection { color: darkred; background: white; } /* äººè¿¹ç½•è‡³çš„è·¯ */ .paths-container { display: flex; justify-content: center; margin: 20px 0; font-family: 'Brush Script MT', cursive; font-size: 20px; } /* ä¿®æ”¹é“¾æ¥æ ·å¼ */ .paths-container a.path { padding: 15px; text-decoration: none !important; border: none; /* ç§»é™¤å¯èƒ½çš„è¾¹æ¡† */ background: none; /* ç§»é™¤å¯èƒ½çš„èƒŒæ™¯ */ } /* æœ‰äººçš„è·¯å¾„æ ·å¼ */ .paths-container a.path-visible { color: #5a3921 !important; /* ä½¿ç”¨ !important æ¥ç¡®ä¿ä¼˜å…ˆçº§ */ } /* éšè—çš„è·¯å¾„æ ·å¼ */ .paths-container a.path-hidden { color: transparent !important; /* ä½¿ç”¨ !important æ¥ç¡®ä¿ä¼˜å…ˆçº§ */ } /* æ‚¬åœæ•ˆæœ */ .paths-container a.path-hidden:hover { color: #5a3921 !important; transition: color 0.3s ease; } /* visitedçŠ¶æ€ */ .paths-container a.path-visible:visited { color: #5a3921 !important; } .paths-container a.path-hidden:visited { color: transparent !important; } .paths-container a.path-hidden:hover:visited { color: #5a3921 !important; } å¯¹ä¸èµ·éª—äº†å¤§å®¶è¿™ä¹ˆä¹…ï¼Œå…¶å®æˆ‘æ˜¯ä¸€æ¡é²¤é±¼ã€‚ ..-*=. ......:::....... .:=*****:. ..:=++*++=---------=++**+=:.. .:+********-. ...+*+:.. ..:=*+:.-***************-. ..:-*+.. .=***************: .:=+*=**: .:***************+. ..-=- +*: .:****************: ..:+ +*: .:****************- .+* ** +*: .:****************- .-** +*: .:****************: +...+ +*: .:****************. :.:=****-. .:***************- ..:-++-.. ..-++-*************=. ..:=**+=:..... .....:-+**+:....-**********=.. ...:-===++++++==-:... .-*******=. ..=***+. ..-*:. å—¯ï¼Œå®åœ¨æ˜¯å¤ªæ•·è¡äº†ï¼Œæ‰€ä»¥æˆ‘ç¨å¾®åŠ äº†ç‚¹ä¸œè¥¿ã€‚ ç¥ä½ å¥½è¿ï¼Œä¹Ÿç¥ä½ ç©å¾—å¼€å¿ƒã€‚ é»„æ˜çš„æ ‘æ—é‡Œåˆ†å‡ºä¸¤æ¡è·¯ï¼Œ æ‰€å¹¸åœ¨æ­¤æˆ‘èƒ½åŒæ—¶å»æ¶‰è¶³ äººæ¥äººå¾€çš„è·¯ äººè¿¹ç½•è‡³çš„è·¯ æˆ–è®¸å“ªå¤©è¿˜ä¼šå†æ¥çœ‹çœ‹è¿™é‡Œçš„å˜åŒ–ï¼Ÿå¯ç¨‹äº†ï¼Œå†è§å•¦ã€‚"},{"title":"Tags","date":"2025-02-06T02:37:47.887Z","updated":"2025-02-06T02:37:47.887Z","comments":true,"path":"tags/index.html","permalink":"http://rinevard.github.io/tags/index.html","excerpt":"","text":"è¿™é‡Œä»€ä¹ˆä¹Ÿæ²¡æœ‰å“¦~æ–‡ä»¶å¤¹å·²ç»å¾ˆæ–¹ä¾¿äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ç”¨æ ‡ç­¾å‘¢ï¼Ÿ"},{"title":"æ— ç©·çš„è¿œæ–¹ï¼Œæ— å°½çš„äººä»¬","date":"2025-03-20T13:12:59.559Z","updated":"2025-03-20T13:12:59.559Z","comments":true,"path":"links/index.html","permalink":"http://rinevard.github.io/links/index.html","excerpt":"","text":"è¿™é‡Œæ˜¯ä¸€äº›æœ‰è¶£çš„äººä»¬ï¼Œæˆ‘çš„ç”Ÿæ´»å› ä»–ä»¬è€Œå¢æ·»äº†ä¸€æŠ¹å¥‡å¹»è‰²å½©ã€‚ä½ çŸ¥é“çš„ï¼Œæˆ‘å¹¶æ²¡æœ‰å¾ˆå¤šç¤¾äº¤æŠ€èƒ½ç‚¹ï¼Œæ‰€ä»¥ä¾¿ç”¨è¿™ç§æ–¹æ³•æ¥å‘Šè¯‰æœªæ¥çš„è‡ªå·±â€”â€”æˆ‘æ›¾é‡è§è¿‡ä¸€äº›æœ‰è¶£çš„äººã€‚ åŒ—ç†å·¥å…ˆæ˜¯ä¸€äº›ç®—æ˜¯åŒè¾ˆçš„äººå§ ç¤ºä¾‹é“¾æ¥ 1 - æè¿°æ–‡å­— ç¤ºä¾‹é“¾æ¥ 2 - æè¿°æ–‡å­— ç¤ºä¾‹é“¾æ¥ 3 - æè¿°æ–‡å­— ç„¶åæ˜¯ä¸€äº›å‰è¾ˆï¼Œè™½ç„¶å¹´é¾„ä¹Ÿå·®ä¸å¤ªå¤šå°±æ˜¯äº† èŒƒæ»‡ä¸œçš„åšå®¢ - å¦‚æœæ²¡æœ‰å‰è¾ˆå¼€å‘çš„ bit101ï¼Œæˆ‘çš„åŒ—ç†ç”Ÿæ´»æƒ³å¿…ä¸ä¼šé‚£ä¹ˆæœ‰è¶£ã€‚ å‘¨å¼ˆå¸†çš„åšå®¢ - ä¸€ä¸ªæœ‰è¶£çš„å‰è¾ˆï¼Œå†™çš„åšå®¢å¯¹æˆ‘æœ‰å¯å‘ã€‚ è¿™ä¸ªé¡µé¢æ˜¯çªå‘å¥‡æƒ³åšå‡ºæ¥çš„ï¼Œå¦‚æœå®ƒè®©æˆ‘å’Œäººä»¬æœ‰äº†æ›´å¤šçš„è”ç³»ï¼Œé‚£å®åœ¨å¾ˆæœ‰è¶£ï¼æŠ±ç€å¯¹è¿™ä»½å¥‡å¹»è‰²å½©çš„æœŸå¾…ï¼Œä¾¿è§‰å¾—è¿™äº›æ–‡å­—å€¼å¾—å†™äº†ã€‚"},{"title":"äººè¿¹ç½•è‡³çš„è·¯","date":"2025-02-14T06:12:25.238Z","updated":"2025-02-14T06:12:25.238Z","comments":true,"path":"secret/jurora-path.html","permalink":"http://rinevard.github.io/secret/jurora-path.html","excerpt":"","text":"/* è‰ä¹¦æ•ˆæœç›¸å…³æ ·å¼ */ .center-cursive-text { font-family: 'Brush Script MT', cursive; font-size: 24px; color: darkred; text-align: center; margin: 20px 0; /* padding: 20px; */ line-height: 1.5; cursor: default; } /* éšè—è‰ä¹¦ */ .hidden-fancy-text { font-family: 'Brush Script MT', cursive; font-size: 24px; text-align: center; margin: 20px 0; /* padding: 20px; */ line-height: 1.5; color: transparent; } .hidden-fancy-text::selection { color: darkred; background: white; } /* äººè¿¹ç½•è‡³çš„è·¯ */ .secret-message { color: transparent; cursor: default; font-family: 'Brush Script MT', cursive; /* ä½¿ç”¨è‰ä¹¦å­—ä½“ */ font-size: 24px; text-align: center; margin: 20px 0; line-height: 1.5; } .secret-message:hover { color: darkred; transition: color 0.5s ease; /* ç¨å¾®å»¶é•¿è¿‡æ¸¡æ—¶é—´ */ } ä¸€ç‰‡æ ‘æ—é‡Œåˆ†å‡ºä¸¤æ¡è·¯â€”â€” è€Œæˆ‘é€‰æ‹©äº†äººè¿¹æ›´å°‘çš„ä¸€æ¡ï¼Œ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ä»æ­¤å†³å®šäº†æˆ‘ä¸€ç”Ÿçš„é“è·¯ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"},{"title":"äººæ¥äººå¾€çš„è·¯","date":"2025-02-14T06:44:57.617Z","updated":"2025-02-14T06:44:57.617Z","comments":true,"path":"secret/many-people-path.html","permalink":"http://rinevard.github.io/secret/many-people-path.html","excerpt":"","text":"/* è‰ä¹¦æ•ˆæœç›¸å…³æ ·å¼ */ .center-cursive-text { font-family: 'Brush Script MT', cursive; font-size: 24px; color: black; text-align: center; margin: 20px 0; line-height: 1.5; cursor: default; } /* é‡å æ–‡å­—æ•ˆæœ */ .text-overlay-container { position: relative; height: 100px; margin: 20px 0; } .overlapping-text { position: absolute; width: 100%; font-family: 'Brush Script MT', cursive; font-size: 24px; text-align: center; color: black; opacity: 0.15; cursor: default; } /* ä¸ºæ¯è¡Œæ–‡å­—è®¾ç½®ä¸åŒçš„ä½ç½®å’Œé€æ˜åº¦ */ .text-1 { top: 0; opacity: 0.8; } .text-2 { top: 12px; opacity: 0.6; } .text-3 { top: 24px; opacity: 0.4; } .text-4 { top: 36px; opacity: 0.2; } .text-5 { top: 48px; opacity: 0.1; } .text-6 { top: 60px; color: transparent; } ä¸€ç‰‡æ ‘æ—é‡Œåˆ†å‡ºä¸¤æ¡è·¯â€”â€” è€Œæˆ‘é€‰æ‹©äº†äººæ¥äººå¾€çš„ä¸€æ¡ï¼Œ åªçœ‹åˆ°äº†å…­é“å°è¿¹ã€‚ è„šå° è„šå° è„šå° è„šå° è„šå° è„šå°"}],"posts":[{"title":"Lab 8 File System","slug":"learning/open-course/MIT-6.S081/Labs/lab8-fs","date":"2025-12-03T15:01:11.000Z","updated":"2025-12-03T15:03:40.522Z","comments":true,"path":"wiki/learning/open-course/MIT-6.S081/Labs/lab8-fs/","permalink":"http://rinevard.github.io/wiki/learning/open-course/MIT-6.S081/Labs/lab8-fs/","excerpt":"","text":"æ„Ÿè§‰ xv6 çš„æ–‡ä»¶ç³»ç»Ÿè¿˜æ˜¯æŒºæœ‰æ·±åº¦çš„ã€‚è¿™ä¸ª lab å¸¦æˆ‘ä»¬ç®€å•å¤ä¹ äº†ä¸‹ inode å¦‚ä½•æŒ‡å‘ blocksï¼Œä»¥åŠé€šè¿‡è·¯å¾„åæŸ¥æ‰¾æ–‡ä»¶çš„æ–¹æ³•ã€‚ Large filesè¿™é“é¢˜è®©æˆ‘ä»¬å¢å¤§ xv6 æœ€å¤§æ–‡ä»¶çš„å¤§å°ã€‚åŸæœ¬çš„ xv6 çš„æ¯ä¸ª inode æ”¯æŒ 12 ä¸ªæ™®é€šå—å’Œä¸€ä¸ªé—´æ¥å—ï¼Œé‚£ä¹ˆåŸæœ¬çš„æœ€å¤§æ–‡ä»¶å æ® 12 + 256 = 268 ä¸ªå—ã€‚æˆ‘ä»¬éœ€è¦æŠŠ inode ä¿®æ”¹ä¸ºæ”¯æŒ 11 ä¸ªæ™®é€šå—ã€ä¸€ä¸ªé—´æ¥å—ã€ä¸€ä¸ªåŒé‡é—´æ¥å—ï¼Œè¿™æ ·æœ€å¤§æ–‡ä»¶å°±èƒ½å æ® 11 + 256 + 256 * 256 = 65803 ä¸ªå—ã€‚ é¦–å…ˆæˆ‘ä»¬è¦å» fs.h é‡Œä¿®æ”¹ dinode å’Œä¸€äº›å¸¸é‡çš„å®šä¹‰ï¼Œå†å» file.h é‡Œä¿®æ”¹ inode çš„å®šä¹‰ï¼Œä¸»è¦æ˜¯ä¿®æ”¹ addrsï¼š #define NDIRECT 11 #define NINDIRECT (BSIZE / sizeof(uint)) #define NDOUBLYINDIRECT (NINDIRECT * NINDIRECT) #define MAXFILE (NDIRECT + NINDIRECT + NDOUBLYINDIRECT) struct dinode &#123; // å…¶ä»–å†…å®¹ä¿æŒä¸å˜ uint addrs[NDIRECT + 2]; &#125;; struct inode &#123; // å…¶ä»–å†…å®¹ä¿æŒä¸å˜ uint addrs[NDIRECT + 2]; &#125;; ç„¶åæˆ‘ä»¬å¯ä»¥ç”»ä¸€ç”» ip-&gt;addrs çš„ç»“æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯¹ç»™å®šçš„ bnï¼Œå¦‚æœå®ƒåœ¨ $[0,11)$ ä¹‹é—´ï¼Œå°±æŸ¥æ‰¾æ™®é€šå—ï¼›å¦‚æœåœ¨ $[11,11+256)$ ä¹‹é—´ï¼Œå°±æŸ¥æ‰¾é—´æ¥å—ï¼›å¦‚æœåœ¨ $[11+256,256+256\\times256)$ ä¹‹é—´ï¼Œå°±æŸ¥æ‰¾åŒé‡é—´æ¥å—ã€‚å†å‚è€ƒ bmap åŸæœ‰çš„ä»£ç å°±èƒ½å®Œæˆä¿®æ”¹äº†ï¼š static uint bmap(struct inode *ip, uint bn) &#123; uint addr, *a; struct buf *bp; if (bn &lt; NDIRECT) &#123; if ((addr = ip->addrs[bn]) == 0) &#123; addr = balloc(ip->dev); if (addr == 0) return 0; ip->addrs[bn] = addr; &#125; return addr; &#125; bn -= NDIRECT; if (bn &lt; NINDIRECT) &#123; // Load indirect block, allocating if necessary. if ((addr = ip->addrs[NDIRECT]) == 0) &#123; addr = balloc(ip->dev); if (addr == 0) return 0; ip->addrs[NDIRECT] = addr; &#125; bp = bread(ip->dev, addr); a = (uint *)bp->data; if ((addr = a[bn]) == 0) &#123; addr = balloc(ip->dev); if (addr) &#123; a[bn] = addr; log_write(bp); &#125; &#125; brelse(bp); return addr; &#125; bn -= NINDIRECT; if (bn &lt; NDOUBLYINDIRECT) &#123; // Load doubly indirect block, allocating if necessary. if ((addr = ip->addrs[NDIRECT + 1]) == 0) &#123; addr = balloc(ip->dev); if (addr == 0) return 0; ip->addrs[NDIRECT + 1] = addr; &#125; // Load indirect block, allocating if necessary. bp = bread(ip->dev, addr); a = (uint *)bp->data; if ((addr = a[(bn / NINDIRECT)]) == 0) &#123; addr = balloc(ip->dev); if (addr) &#123; a[(bn / NINDIRECT)] = addr; log_write(bp); &#125; &#125; brelse(bp); if (addr == 0) &#123; return 0; &#125; // Find addr in block bp = bread(ip->dev, addr); a = (uint *)bp->data; if ((addr = a[bn % NINDIRECT]) == 0) &#123; addr = balloc(ip->dev); if (addr) &#123; a[bn % NINDIRECT] = addr; log_write(bp); &#125; &#125; brelse(bp); return addr; &#125; panic(\"bmap: out of range\"); &#125; æˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹ itruncï¼Œå®ƒé‡Šæ”¾ä¼ å…¥çš„ inode å ç”¨çš„æ‰€æœ‰æ•°æ®å—ã€‚ä»¿ç…§ itrunc åŸæœ‰çš„ä»£ç åŠ å…¥é‡Šæ”¾åŒé‡é—´æ¥å—çš„ä»£ç å°±è¡Œï¼š void itrunc(struct inode *ip) &#123; int i, j, k; struct buf *bp, *bbp; uint *a, *aa; for (i = 0; i &lt; NDIRECT; i++) &#123; if (ip->addrs[i]) &#123; bfree(ip->dev, ip->addrs[i]); ip->addrs[i] = 0; &#125; &#125; if (ip->addrs[NDIRECT]) &#123; bp = bread(ip->dev, ip->addrs[NDIRECT]); a = (uint *)bp->data; for (j = 0; j &lt; NINDIRECT; j++) &#123; if (a[j]) bfree(ip->dev, a[j]); &#125; brelse(bp); bfree(ip->dev, ip->addrs[NDIRECT]); ip->addrs[NDIRECT] = 0; &#125; if (ip->addrs[NDIRECT + 1]) &#123; // Free doubly indirect block bp = bread(ip->dev, ip->addrs[NDIRECT + 1]); a = (uint *)bp->data; for (j = 0; j &lt; NINDIRECT; j++) &#123; if (a[j]) &#123; // Free indirect block j bbp = bread(ip->dev, a[j]); aa = (uint *)bbp->data; for (k = 0; k &lt; NINDIRECT; k++) &#123; if (aa[k]) bfree(ip->dev, aa[k]); &#125; brelse(bbp); bfree(ip->dev, a[j]); &#125; &#125; brelse(bp); bfree(ip->dev, ip->addrs[NDIRECT + 1]); ip->addrs[NDIRECT + 1] = 0; &#125; ip->size = 0; iupdate(ip); &#125; Symbolic linksè¿™é“é¢˜è®©æˆ‘ä»¬ç»™ xv6 åŠ å…¥ç¬¦å·é“¾æ¥ï¼Œä¸è¿‡è¿™é‡Œçš„ç¬¦å·é“¾æ¥æ˜¯é’æ˜¥ç‰ˆã€‚ç¬¦å·é“¾æ¥æ­£ç»Ÿç‰ˆåº”è¯¥èƒ½æŒ‡å‘ç›®å½•ï¼Œæˆ‘ä»¬çš„åªèƒ½æŒ‡å‘æ–‡ä»¶ã€‚ è¿™é‡Œå°±ä¸æ”¾é…ç½®ç³»ç»Ÿè°ƒç”¨çš„ä»£ç äº†ï¼ˆå¤§å®¶éƒ½å·²ç»å“é‰´è¿‡æ— æ•°æ¬¡äº†ï¼‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ man æ‰‹å†Œæ˜¯æ€ä¹ˆä»‹ç» symlink çš„ã€‚è¿™é‡Œæˆ‘ä»¬ä¸»è¦çœ‹ man 2 symlink å’Œ man 7 symlinkï¼Œå‰è€…æ˜¯ç»™ä½¿ç”¨è€…çœ‹çš„å‡½æ•°è¯´æ˜ï¼Œåè€…æ˜¯å‡½æ•°åŸç†ã€‚ symlink(2): make new name for file - Linux man page symlink(7): symbolic link handling - Linux man page symlink çš„ç­¾åæ˜¯ int symlink(const char *oldpath, const char *newpath);ï¼Œå®ƒåˆ›å»ºä¸€ä¸ªåä¸º newpath çš„æŒ‡å‘ oldpath çš„ç¬¦å·é“¾æ¥æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶é‡Œå­˜å‚¨ç€ oldpath è¿™ä¸ªå­—ç¬¦ä¸²ã€‚ å¯¹ç…§ hintï¼Œæˆ‘ä»¬çŸ¥é“è¦å» stat.h é‡Œæ–°å¢ä¸€ç§å«ä½œ T_SYMLINK çš„æ–‡ä»¶ç±»å‹ï¼Œè¿™å°±æ˜¯ç¬¦å·é“¾æ¥ç±»å‹ã€‚è‡³æ­¤æˆ‘ä»¬å°±èƒ½æ–°å¢ sys_symlink å‡½æ•°äº†ã€‚ uint64 sys_symlink(void) &#123; char old[MAXPATH], new[MAXPATH]; struct inode *ip; int len; begin_op(); if (argstr(0, old, MAXPATH) &lt; 0 || argstr(1, new, MAXPATH) &lt; 0 || (ip = create(new, T_SYMLINK, 0, 0)) == 0) &#123; end_op(); return -1; &#125; len = strlen(old); writei(ip, 0, (uint64)&amp;len, 0, sizeof(len)); writei(ip, 0, (uint64)old, sizeof(len), len + 1); iunlockput(ip); end_op(); return 0; &#125; æˆ‘ä¸€å¼€å§‹å¯¹ iunlockã€iunlockput å¾ˆç–‘æƒ‘ï¼Œä¸»è¦æ˜¯ä¸çŸ¥é“ iput æœ‰ä»€ä¹ˆç”¨ã€‚å…¶å® iput å’Œ inode çš„å·¥ä½œæ–¹å¼å¯†åˆ‡ç›¸å…³ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ç®€è¦åˆ†æä¸€ä¸‹ã€‚è¿™é‡Œæ¶‰åŠåˆ°çš„æ–‡ä»¶æ˜¯ fs.cã€‚ è€ƒè™‘åˆ°æˆ‘ä»¬åªèƒ½ç›´æ¥å’Œå†…å­˜äº¤äº’ï¼Œè€Œç£ç›˜ä¸Šåˆæœ‰å¾ˆå¤š inodeï¼Œæˆ‘ä»¬ä¼šæŠŠæœ‰äººåœ¨ç”¨çš„çš„ inode ä¿å­˜åœ¨ itable.inode ä¸­ï¼Œå¹¶ç”¨ inode.ref æ¥è®°å½•æœ‰å¤šå°‘äººåœ¨ç”¨ã€‚ç”¨å®Œçš„äººè¦è°ƒç”¨ iput è¯´è‡ªå·±ç”¨å®Œäº†ï¼Œè¿™æ · ref å°±ä¼šå‡å°‘ã€‚æœªæ¥æˆ‘ä»¬åœ¨æŠŠç£ç›˜ inode æ”¾åˆ°å†…å­˜ä¸­æ—¶ä¼šæ‰¾åˆ° ref == 0 çš„ä¸œè¥¿æ¥æ›¿æ¢ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œdirlookup æ‰¾è·¯å¾„å¯¹åº”çš„ inodeï¼Œè¿™ç§â€œæ‰¾â€æœ€ç»ˆæ€»ä¼šè°ƒç”¨ igetï¼Œiget ä¼šæ£€æŸ¥æƒ³æ‰¾çš„ inode åœ¨ä¸åœ¨å†…å­˜ä¸­çš„ itable.inode ä¸­ï¼Œå¦‚æœä¸åœ¨å°±åœ¨ itable.inode é‡Œæ‰¾ä¸ª ref == 0 çš„å…ƒç´ ï¼ŒæŠŠå®ƒæ›¿æ¢æˆæƒ³æ‰¾çš„ inode å¹¶è®¾ç½®å…¶ refã€‚ç›¸åº”åœ°ï¼Œè°ƒç”¨è€…åœ¨ç”¨å®Œ inode åè¦è´Ÿè´£è°ƒç”¨ iput è¯´è‡ªå·±ç”¨å®Œäº†ï¼Œä¸ç„¶ itable.inode çš„ç©ºé—´è¢«å æ»¡åå°±ä¸èƒ½åŠ è½½æ–°çš„ inode äº†ã€‚ æ‰€ä»¥åœ¨ sys_symlink çš„æœ«å°¾æˆ‘ä»¬è¦è°ƒç”¨ iunlockput è€Œä¸æ˜¯åªè°ƒç”¨ iunlockï¼Œæ¯•ç«Ÿæˆ‘ä»¬åœ¨ sys_symlink é‡Œä¸å†ä½¿ç”¨è¿™ä¸ª inode äº†ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹ open å‡½æ•°ã€‚é¦–å…ˆç…§ç€ hint åœ¨ fcntl.h é‡ŒåŠ å…¥ O_NOFOLLOWï¼Œç„¶åå¯¹ç¬¦å·é“¾æ¥ç±»å‹çš„æ–‡ä»¶ï¼Œè¯»å–å…¶ path ç„¶åé¡ºè—¤æ‘¸ç“œå°±è¡Œï¼š uint64 sys_open(void) &#123; char path[MAXPATH]; int fd, omode; struct file *f; struct inode *ip; int n, symcnt, len; argint(1, &amp;omode); if ((n = argstr(0, path, MAXPATH)) &lt; 0) return -1; begin_op(); if (omode &amp; O_CREATE) &#123; ip = create(path, T_FILE, 0, 0); if (ip == 0) &#123; end_op(); return -1; &#125; &#125; else if (omode &amp; O_NOFOLLOW) &#123; if ((ip = namei(path)) == 0) &#123; end_op(); return -1; &#125; ilock(ip); if (ip->type == T_DIR &amp;&amp; omode != O_RDONLY) &#123; iunlockput(ip); end_op(); return -1; &#125; &#125; else &#123; symcnt = 0; if ((ip = namei(path)) == 0) &#123; end_op(); return -1; &#125; ilock(ip); while (ip->type == T_SYMLINK) &#123; symcnt++; if (symcnt >= 10) &#123; iunlockput(ip); end_op(); return -1; &#125; readi(ip, 0, (uint64)&amp;len, 0, sizeof(len)); readi(ip, 0, (uint64)path, sizeof(len), len + 1); iunlockput(ip); if ((ip = namei(path)) == 0) &#123; end_op(); return -1; &#125; ilock(ip); &#125; if (ip->type == T_DIR &amp;&amp; omode != O_RDONLY) &#123; iunlockput(ip); end_op(); return -1; &#125; &#125; if (ip->type == T_DEVICE &amp;&amp; (ip->major &lt; 0 || ip->major >= NDEV)) &#123; iunlockput(ip); end_op(); return -1; &#125; if ((f = filealloc()) == 0 || (fd = fdalloc(f)) &lt; 0) &#123; if (f) fileclose(f); iunlockput(ip); end_op(); return -1; &#125; if (ip->type == T_DEVICE) &#123; f->type = FD_DEVICE; f->major = ip->major; &#125; else &#123; f->type = FD_INODE; f->off = 0; &#125; f->ip = ip; f->readable = !(omode &amp; O_WRONLY); f->writable = (omode &amp; O_WRONLY) || (omode &amp; O_RDWR); if ((omode &amp; O_TRUNC) &amp;&amp; ip->type == T_FILE) &#123; itrunc(ip); &#125; iunlock(ip); end_op(); return fd; &#125; é¡ºæä¸€å¥ï¼Œmake grade æ˜¾ç¤º Timeout FAIL å¯èƒ½æ˜¯å› ä¸ºåå°çš„è¿›ç¨‹å¤ªå¤šäº†å¯¼è‡´ CPU æ²¡æœ‰å…¨åŠ›ä»¥èµ´ã€‚å°½é‡æŠŠåˆ«çš„è¿›ç¨‹ï¼ˆæ¯”å¦‚æµè§ˆå™¨ï¼‰å…³æ‰åªä¿ç•™ä¸€ä¸ªåœ¨è·‘ make grade çš„ç»ˆç«¯ã€‚","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"MIT-6.S081","slug":"å…¬å¼€è¯¾/MIT-6-S081","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/"},{"name":"Labs","slug":"å…¬å¼€è¯¾/MIT-6-S081/Labs","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/Labs/"}],"tags":[]},{"title":"Lab 7 Lock","slug":"learning/open-course/MIT-6.S081/Labs/lab7-lock","date":"2025-12-02T04:15:29.000Z","updated":"2025-12-02T04:15:32.298Z","comments":true,"path":"wiki/learning/open-course/MIT-6.S081/Labs/lab7-lock/","permalink":"http://rinevard.github.io/wiki/learning/open-course/MIT-6.S081/Labs/lab7-lock/","excerpt":"","text":"è¿™ä¸ª lab è®©æˆ‘ä»¬ç†Ÿæ‚‰å¯¹é”çš„ä½¿ç”¨ã€‚é™¤äº† 2024 çš„é¢˜å¤–æˆ‘è¿˜é¡ºä¾¿åšäº†ä¸‹ 2025 æ–°å¢çš„è¯»å†™é”ï¼ˆ2025 å¹´ç”¨ Read-write lock æ¢æ‰äº† Buffer cacheï¼‰ï¼Œè®©æˆ‘ä»¬ä¾æ¬¡æ¥çœ‹çœ‹è¿™å‡ é“é¢˜ã€‚ Memory allocatoråœ¨ xv6 é‡Œï¼Œå¤šä¸ªè¿›ç¨‹åŒæ—¶å°è¯•æ–°å¢ / é‡Šæ”¾å†…å­˜æ—¶ä¼šåœ¨ kalloc.c çš„ kmem ä¸Šäº§ç”Ÿæ¿€çƒˆçš„é”ç«äº‰ï¼Œè¿™é“é¢˜è®©æˆ‘ä»¬ç»™æ¯ä¸ª CPU è®¾ç½®ä¸€ä¸ªè‡ªå·±çš„ç©ºé—²å—é“¾è¡¨æ¥ç¼“è§£ç«äº‰é—®é¢˜ã€‚æ¯”è¾ƒ tricky çš„åœ°æ–¹æ˜¯å½“ä¸€ä¸ª CPU çš„ç©ºé—²å—é“¾è¡¨ä¸ºç©ºæ—¶ï¼Œå®ƒè¦å»åˆ«çš„ CPU é‚£é‡Œå·ç©ºé—²å—ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æµ‹è¯•ä»£ç åœ¨åšä»€ä¹ˆå§ï¼Œå…ˆæ¥çœ‹çœ‹ test2ï¼š void test2() &#123; int free0 = countfree(); int free1; int n = (PHYSTOP - KERNBASE) / PGSIZE; printf(\"start test2\\n\"); printf(\"total free number of pages: %d (out of %d)\\n\", free0, n); if (n - free0 > 1000) &#123; printf(\"test2 FAILED: cannot allocate enough memory\"); exit(1); &#125; for (int i = 0; i &lt; 50; i++) &#123; free1 = countfree(); if (i % 10 == 9) printf(\".\"); if (free1 != free0) &#123; printf(\"test2 FAIL: losing pages %d %d\\n\", free0, free1); exit(1); &#125; &#125; printf(\"\\ntest2 OK\\n\"); &#125; è¿™é‡Œçš„ countfree å‡½æ•°åœ¨ sbrk å°½å¯èƒ½å¤šçš„å†…å­˜ï¼Œè®¡ç®—ä¸€å…±æ–°å¢äº†å¤šå°‘é¡µï¼Œç„¶åè¿”å›æ–°å¢çš„é¡µæ•°ã€‚å¯ä»¥çœ‹å‡º test2 å°±æ˜¯åœ¨æ£€æŸ¥åˆ†é… / é‡Šæ”¾å†…å­˜æ—¶æœ‰æ²¡æœ‰ä¸¢é¡µã€‚ test1 åˆ™æ›´å¤æ‚ä¸€äº›ã€‚å®ƒæŠŠå¤šè¿›ç¨‹ sbrk å‰åé”è‡ªæ—‹çš„æ€»æ¬¡æ•°å­˜åœ¨ m å’Œ n ä¸­å¹¶è®¡ç®— n - mã€‚å¦‚æœæˆ‘ä»¬çš„å®ç°è¾ƒå¥½ï¼Œé”å°±ä¼šè‡ªæ—‹è¾ƒå°‘ï¼Œå°±èƒ½é€šè¿‡ if (n - m &lt; 10) ç„¶åé€šè¿‡æµ‹è¯•ï¼š void test1(void) &#123; int n, m; printf(\"start test1\\n\"); m = ntas(0); // åˆ›å»º NCHILD ä¸ªå­è¿›ç¨‹å¹¶è®©ä»–ä»¬ä¸æ–­ sbrk for (int i = 0; i &lt; NCHILD; i++) &#123; // ... &#125; int status = 0; for (int i = 0; i &lt; NCHILD; i++) &#123; wait(&amp;status); &#125; n = ntas(1); if (n - m &lt; 10) printf(\"test1 OK\\n\"); else printf(\"test1 FAIL\\n\"); &#125; è¿™é‡Œçš„ ntas å¾ˆç¥å¥‡ï¼Œæˆ‘èŠ±äº†è›®é•¿æ—¶é—´æ‰å¼„æ˜ç™½å®ƒæ˜¯æ€ä¹ˆè·å–é”çš„è‡ªæ—‹æ¬¡æ•°çš„ã€‚æ„Ÿå…´è¶£çš„è¯å¯ä»¥çœ‹çœ‹ï¼Œä¸æ„Ÿå…´è¶£çš„è¯è®°ä½å®ƒæœ€ç»ˆå€ŸåŠ©äº† spinlock.c çš„ statslock æ¥è·å–é”çš„è‡ªæ—‹æ€»æ¬¡æ•°å°±è¡Œã€‚ é¦–å…ˆ ntas è°ƒç”¨äº† statisticsï¼Œçœ‹å‘ statistics.cï¼Œå®ƒåœ¨è¯»å– statistics æ–‡ä»¶ï¼š int statistics(void *buf, int sz) &#123; int fd, i, n; fd = open(\"statistics\", O_RDONLY); if (fd &lt; 0) &#123; fprintf(2, \"stats: open failed\\n\"); exit(1); &#125; for (i = 0; i &lt; sz;) &#123; if ((n = read(fd, buf + i, sz - i)) &lt; 0) &#123; break; &#125; i += n; &#125; close(fd); return i; &#125; é‚£ statistics æ–‡ä»¶åœ¨å“ªå‘¢ï¼Ÿstatistics æ–‡ä»¶åœ¨ init.c é‡Œè¢«åˆå§‹åŒ–ã€‚æˆ‘ä»¬åœ¨å†…æ ¸çš„ stats.c çš„ statsinit é‡Œåˆå§‹åŒ–äº† STATSï¼ŒæŠŠå¯¹å®ƒçš„è¯»è®¾ç½®ä¸ºè°ƒç”¨ statsreadï¼Œå¹¶åœ¨ statsread é‡Œè°ƒç”¨ spinlock.c é‡Œçš„ statslock. æ³¨æ„è¿™é‡Œæœ‰å†…æ ¸çš„ stats.c å’Œç”¨æˆ·çš„ stats.cï¼Œæˆ‘ä»¬è¯´çš„æ˜¯å‰è€…ã€‚ æ€»ä¹‹ statistics å‡½æ•°ä¼šè¯»å– statisticsï¼Œå¯¹ statistics çš„è¯»ä¼šè°ƒç”¨ statsreadï¼Œstatsread åœ¨ statistics è¢«è¯»å®Œåä¼šè°ƒç”¨ statslock æ¥æ›´æ–°å†…å®¹ã€‚ æˆ‘ä»¬å½“ç„¶ä¼šé—®ä¸ºä»€ä¹ˆè¦ç»•è¿™ä¹ˆå¤§ä¸€åœˆï¼Œç›´æ¥è¯»spinlock.cé‡Œçš„ä¸œè¥¿ä¸è¡Œå—ï¼Ÿè¿™æ˜¯å› ä¸ºç”¨æˆ·å’Œå†…æ ¸æœ‰éš”ç¦»ã€‚statistics æ˜¯ç”¨æˆ·æ€çš„å‡½æ•°ï¼Œä¸èƒ½ä¹Ÿä¸åº”è¯¥ç›´æ¥è¯»å†…æ ¸çš„ spinlock.c é‡Œçš„æ•°æ®ã€‚ test3 åˆ™æ˜¯ test1 å’Œ test2 çš„æ•´åˆé«˜æ¸…é‡åˆ¶è±ªååŠ å¼ºç‰ˆã€‚æˆ‘çš„ä»£ç èƒ½é€šè¿‡ 2023 å¹´å’Œ 2025 å¹´ç‰ˆæœ¬çš„å®Œæ•´æµ‹è¯•ï¼Œä½†ä¸èƒ½ç¨³å®šé€šè¿‡ 2024 ç‰ˆæœ¬çš„ test3ï¼ˆå¤§éƒ¨åˆ†æ—¶é—´è¿‡ä¸äº†ï¼Œè¿æ°”å¥½èƒ½è¿‡ï¼‰ã€‚ 2023 å¹´çš„ç‰ˆæœ¬æ²¡æœ‰è¿™ç§æ•´åˆæµ‹è¯•ï¼Œ2025 å¹´çš„ç‰ˆæœ¬å†™çš„æ˜¯ n-m &lt; (NCHILD4-1)*10000ï¼Œæ„Ÿè§‰ 2025 æ¯” 2024 çš„æµ‹è¯•æ›´åˆç†ï¼Œé‚£å°±è®¤ä¸ºæˆ‘çš„ä»£ç å·²ç»æ»¡è¶³è¦æ±‚äº†å§ã€‚ ç„¶åæˆ‘ä»¬ä¸Šä»£ç ã€‚å…ˆæ”¾åœ¨åˆå§‹åŒ–çš„éƒ¨åˆ†å’Œ kfreeï¼š struct &#123; struct spinlock lock; struct run *freelist; &#125; kmems[NCPU]; static char kmemlockname[NCPU][16]; const int STOLEN_NUM = 8; void kinit() &#123; for (int i = 0; i &lt; ncpu; i++) &#123; snprintf(kmemlockname[i], sizeof(kmemlockname[i]), \"kmem_%d\", i); initlock(&amp;kmems[i].lock, kmemlockname[i]); &#125; freerange(end, (void *)PHYSTOP); &#125; void freerange(void *pa_start, void *pa_end) &#123; char *p; p = (char *)PGROUNDUP((uint64)pa_start); for (; p + PGSIZE &lt;= (char *)pa_end; p += PGSIZE) kfree(p); &#125; void kfree(void *pa) &#123; struct run *r; if (((uint64)pa % PGSIZE) != 0 || (char *)pa &lt; end || (uint64)pa >= PHYSTOP) panic(\"kfree\"); // Fill with junk to catch dangling refs. memset(pa, 1, PGSIZE); r = (struct run *)pa; push_off(); int id = cpuid(); acquire(&amp;kmems[id].lock); r->next = kmems[id].freelist; kmems[id].freelist = r; release(&amp;kmems[id].lock); pop_off(); &#125; ä»£ç æ€è·¯å¾ˆæ¸…æ™°ï¼Œæ¯ä¸ª CPU ä¸€ä¸ªè‡ªå·±çš„ç©ºé—²é“¾è¡¨ï¼Œkfree æŠŠé‡Šæ”¾æ‰çš„å—åŠ åˆ°å½“å‰ CPU çš„é“¾è¡¨ä¸Šã€‚ æˆ‘è¿˜è¯•äº†ä¸‹åœ¨ kinit ç»“å°¾æ‰“å°å‡ºæ¯ä¸ª CPU çš„ç©ºé—²å—é“¾è¡¨é•¿åº¦ï¼Œç„¶åå‘ç°æ‰€æœ‰çš„ç©ºé—²å—éƒ½åœ¨ä¸€ä¸ª CPU é‚£é‡Œã€‚åŸæœ¬æˆ‘è¿˜ä»¥ä¸º freerange çš„è¿‡ç¨‹ä¸­æ¯ä¸ª CPU éƒ½ä¼šè·‘ä¸€è·‘ kfreeï¼Œç„¶åè®©ç©ºé—²å—å‡åŒ€åˆ†å¸ƒåœ¨å„ä¸ª CPU ä¸Šå‘¢ã€‚ ç„¶åæˆ‘ä»¬çœ‹çœ‹ kallocï¼š void *kalloc(void) &#123; // We can consistently pass the 2025 tests, but occasionally fail the 2024 // test3. I think this is good enough, so we won't continue further. struct run *r; push_off(); int id = cpuid(); acquire(&amp;kmems[id].lock); r = kmems[id].freelist; if (r) &#123; kmems[id].freelist = r->next; release(&amp;kmems[id].lock); &#125; else &#123; // There isn't a fixed acquire order for CPU locks // so release the lock before acquiring other locks to avoid deadlock release(&amp;kmems[id].lock); struct run *stolen_head = 0; struct run *stolen_end = 0; // Steal STOLEN_NUM pages from another CPU's free list for (int i = (id - 1 + ncpu) % ncpu; i != id; i = (i - 1 + ncpu) % ncpu) &#123; acquire(&amp;kmems[i].lock); if (!kmems[i].freelist) &#123; release(&amp;kmems[i].lock); continue; &#125; stolen_head = kmems[i].freelist; for (int cnt = 0; (kmems[i].freelist) &amp;&amp; (cnt &lt; STOLEN_NUM); cnt++) &#123; stolen_end = kmems[i].freelist; kmems[i].freelist = stolen_end->next; &#125; stolen_end->next = 0; release(&amp;kmems[i].lock); break; &#125; if (stolen_head) &#123; acquire(&amp;kmems[id].lock); stolen_end->next = kmems[id].freelist; kmems[id].freelist = stolen_head; r = kmems[id].freelist; kmems[id].freelist = r->next; release(&amp;kmems[id].lock); &#125; &#125; pop_off(); if (r) memset((char *)r, 5, PGSIZE); // fill with junk return (void *)r; &#125; è¿™é‡Œæ¯”è¾ƒ trickky çš„å°±æ˜¯ else é‡Œçªƒå–åˆ«çš„ CPU çš„å—çš„éƒ¨åˆ†ã€‚é¦–å…ˆå¦‚æˆ‘çš„æ³¨é‡Šæ‰€è¨€ï¼Œå„ä¸ª CPU çš„ kmem lock æ²¡æœ‰å›ºå®šçš„è·å–é¡ºåºï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆé‡Šæ”¾è‡ªå·±çš„ kmem lock å†å¼€å·ï¼Œä¿è¯åŒä¸€æ—¶é—´åªæ‹¿ç€ä¸€ä¸ª CPU çš„ kmem lockï¼Œä¸ç„¶æœ‰æ­»é”é£é™©ã€‚ ç„¶åæˆ‘ä»¬ä»å½“å‰ CPU å¼€å§‹å¾€åéå†ï¼Œæ‰¾åˆ°åˆé€‚çš„ CPU ä»¥åå°±æŠ“å®ƒçš„é”ç„¶åå· STOLEN_NUM ä¸ªå—æš‚å­˜åœ¨ stolen_head è¿™ä¸ªé“¾è¡¨é‡Œï¼Œå·å®Œä»¥åé‡Šæ”¾å®ƒçš„é”å¹¶æŠ“è‡ªå·±çš„é”å†æŠŠé“¾è¡¨æ¥åˆ°è‡ªå·±å¤´ä¸Šã€‚ è¿™æ ·ä¸€æ¥çªƒå–å’Œæ–°å¢å—éƒ½æ˜¯åŸå­æ€§çš„ï¼Œä¸ä¼šæœ‰å¹¶å‘é—®é¢˜ã€‚ æˆ‘æµ‹å‡ºæ¥è®¾ç½® STOLEN_NUM ä¸º 1 æˆ– 8 æ—¶æ•ˆæœæœ€å¥½ï¼Œæ›´å¤§åè€Œæ•ˆæœæ¬ ä½³ï¼ŒæŒºç¥å¥‡çš„ã€‚ Buffer cacheæ–‡ä»¶ç³»ç»Ÿçš„ç¼“å­˜å±‚ä¹Ÿæœ‰ä¸€ä¸ªè¾ƒæ¿€çƒˆçš„é”ç«äº‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŠŠç¼“å­˜é“¾è¡¨æ‹†åˆ†æˆè‹¥å¹²ä¸ªå°çš„é“¾è¡¨ï¼Œç»™æ¯ä¸ªé“¾è¡¨è®¾ç½®å•ç‹¬çš„é”æ¥ç¼“è§£ç«äº‰ã€‚ é‚£ä¹ˆæ€ä¹ˆæ‹†åˆ†é“¾è¡¨å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“æ¯ä¸ª block æœ‰ blocknoï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠ block æ”¾åˆ°ç¼–å·ä¸º hash(blockno) çš„é“¾è¡¨ä¸­ã€‚åŸºæœ¬æ€è·¯å°±æ˜¯è¿™æ ·ï¼Œæ¥ä¸‹æ¥çœ‹ä»£ç å§ï¼Œé¦–å…ˆæ˜¯åˆå§‹åŒ–éƒ¨åˆ†ï¼š #define BUCKET_SIZE 13 struct &#123; struct spinlock steal_lock; // steal lock, only one process is stealing at a time struct buf buf[NBUF]; struct buf head; &#125; bcache; struct &#123; struct spinlock lock; struct buf head; &#125; buckets[BUCKET_SIZE]; uint hash(uint blockno) &#123; return blockno % BUCKET_SIZE; &#125; void binit(void) &#123; struct buf *b; initlock(&amp;bcache.steal_lock, \"bcache\"); for (int i = 0; i &lt; BUCKET_SIZE; i++) &#123; initlock(&amp;buckets[i].lock, \"bcache.bucket\"); &#125; // Put all buffers into bucket[0] initially struct buf *cur; cur = &amp;buckets[0].head; for (b = bcache.buf; b &lt; bcache.buf + NBUF; b++) &#123; cur->next = b; b->prev = cur; initsleeplock(&amp;b->lock, \"buffer\"); cur = b; &#125; &#125; è¿™é‡Œä¸»è¦æ˜¯å¯¹é“¾è¡¨åšäº†ä¸‹æ‹†åˆ†ã€‚è¿™é‡Œçš„ steal_lock å’Œæ¥ä¸‹æ¥çš„ bget ç›¸å…³ï¼Œä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢ä¸‹é¢è¿™ç§æƒ…å†µï¼š è¿›ç¨‹ A å’Œè¿›ç¨‹ B éƒ½åœ¨è¯·æ±‚ blocknoï¼Œæˆ‘ä»¬ä»¤ dest = hash(blockno) è¿›ç¨‹ A å’Œ B éƒ½æ²¡åœ¨ buckets[dest] æ‰¾åˆ°å—ï¼Œå¼€å§‹çªƒå–ã€‚ è¿›ç¨‹ B æ¯” A å…ˆçªƒå–åˆ°äº†ä¸€ä¸ªç©ºé—²å—ï¼ŒæŠŠå®ƒæ”¾è¿›äº† buckets[dest] å¹¶å¡«å…¥äº†æ•°æ®ã€‚ è¿›ç¨‹ A ä¹Ÿæ‰¾åˆ°äº†ä¸€ä¸ªç©ºé—²å—å¹¶æŠŠå®ƒæ”¾å…¥ buckets[dest] å¹¶å¡«å…¥æ•°æ®ã€‚ è¿™ä¼šå¯¼è‡´ä¸¤ä¸ª buf æœ‰ç›¸åŒçš„ blocknoï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚ è¿™é‡Œçš„ steal_lock ä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨è¯•å›¾çªƒå–åˆ«çš„ bucket çš„ buf. é…åˆåœ¨çªƒå–å‰å†æ¬¡æ£€æŸ¥ä¸€é bucket[dest] å°±èƒ½é¿å…ä¸Šè¿°æƒ…å†µçš„å‘ç”Ÿã€‚ æˆ‘ä»¬ç°åœ¨æ¥çœ‹çœ‹ bgetï¼š static struct buf *bget(uint dev, uint blockno) &#123; struct buf *b; uint dest = hash(blockno); acquire(&amp;buckets[dest].lock); // Is the block already cached? for (b = buckets[dest].head.next; b; b = b->next) &#123; if (b->dev == dev &amp;&amp; b->blockno == blockno) &#123; b->refcnt++; release(&amp;buckets[dest].lock); acquiresleep(&amp;b->lock); return b; &#125; &#125; // --------------------ä¸‹é¢æ˜¯çªƒå–ä»£ç -------------------- // Not cached. release(&amp;buckets[dest].lock); acquire(&amp;bcache.steal_lock); acquire(&amp;buckets[dest].lock); // double check, other process might have stolen before we steal for (b = buckets[dest].head.next; b; b = b->next) &#123; if (b->dev == dev &amp;&amp; b->blockno == blockno) &#123; b->refcnt++; release(&amp;buckets[dest].lock); release(&amp;bcache.steal_lock); acquiresleep(&amp;b->lock); return b; &#125; &#125; release(&amp;buckets[dest].lock); // steal from another bucket for (int i = 0; i &lt; BUCKET_SIZE; i++) &#123; acquire(&amp;buckets[i].lock); // iterate through bucket to find a free buf for (b = buckets[i].head.next; b; b = b->next) &#123; if (b->refcnt == 0) &#123; // remove b from orig bucket b->prev->next = b->next; if (b->next) &#123; b->next->prev = b->prev; &#125; b->prev = 0; b->next = 0; release(&amp;buckets[i].lock); // put b into dest bucket acquire(&amp;buckets[dest].lock); b->prev = &amp;buckets[dest].head; b->next = buckets[dest].head.next; b->prev->next = b; if (b->next) &#123; b->next->prev = b; &#125; b->dev = dev; b->blockno = blockno; b->valid = 0; b->refcnt = 1; acquiresleep(&amp;b->lock); release(&amp;buckets[dest].lock); release(&amp;bcache.steal_lock); return b; &#125; &#125; release(&amp;buckets[i].lock); &#125; panic(\"bget: no buffers\"); &#125; ä¹Ÿæœ‰ä¸åŠ  steal_lock çš„å†™æ³•ï¼Œå¯ä»¥åœ¨å¡«å…¥æ•°æ®å‰æ£€æŸ¥ buckets[dest] ä¸­æ˜¯å¦æœ‰ blockno å¯¹åº”çš„ bufï¼Œå¦‚æœæœ‰å°±ä¸å¡«æ•°æ®è€Œæ˜¯æŠŠç©ºå—åŠ å…¥ buckets[dest]ï¼Œå¦‚æœæ²¡æœ‰å†å¡«æ•°æ®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š static struct buf *bget(uint dev, uint blockno) &#123; struct buf *b; uint dest = hash(blockno); acquire(&amp;buckets[dest].lock); // Is the block already cached? for (b = buckets[dest].head.next; b; b = b->next) &#123; if (b->dev == dev &amp;&amp; b->blockno == blockno) &#123; b->refcnt++; release(&amp;buckets[dest].lock); acquiresleep(&amp;b->lock); return b; &#125; &#125; // Not cached. release(&amp;buckets[dest].lock); // steal from another bucket for (int i = 0; i &lt; BUCKET_SIZE; i++) &#123; acquire(&amp;buckets[i].lock); // iterate through bucket to find a free buf for (b = buckets[i].head.next; b; b = b->next) &#123; if (b->refcnt == 0) &#123; // remove b from orig bucket b->prev->next = b->next; if (b->next) &#123; b->next->prev = b->prev; &#125; b->prev = 0; b->next = 0; release(&amp;buckets[i].lock); // put b into dest bucket acquire(&amp;buckets[dest].lock); b->prev = &amp;buckets[dest].head; b->next = buckets[dest].head.next; b->prev->next = b; if (b->next) &#123; b->next->prev = b; &#125; // double check, other process might have stolen before we steal for (struct buf *check = buckets[dest].head.next; check; check = check->next) &#123; if (check->dev == dev &amp;&amp; check->blockno == blockno) &#123; check->refcnt++; release(&amp;buckets[dest].lock); acquiresleep(&amp;check->lock); return check; &#125; &#125; b->dev = dev; b->blockno = blockno; b->valid = 0; b->refcnt = 1; release(&amp;buckets[dest].lock); acquiresleep(&amp;b->lock); return b; &#125; &#125; release(&amp;buckets[i].lock); &#125; panic(\"bget: no buffers\"); &#125; æœ€åå‡ ä¸ªè¦æ”¹çš„å‡½æ•°æŠŠåŸæœ¬çš„é”æ¢æˆ bucket çš„é”å°±å¯ä»¥äº†ã€‚ void brelse(struct buf *b) &#123; if (!holdingsleep(&amp;b->lock)) panic(\"brelse\"); releasesleep(&amp;b->lock); uint idx = hash(b->blockno); acquire(&amp;buckets[idx].lock); b->refcnt--; release(&amp;buckets[idx].lock); &#125; void bpin(struct buf *b) &#123; uint idx = hash(b->blockno); acquire(&amp;buckets[idx].lock); b->refcnt++; release(&amp;buckets[idx].lock); &#125; void bunpin(struct buf *b) &#123; uint idx = hash(b->blockno); acquire(&amp;buckets[idx].lock); b->refcnt--; release(&amp;buckets[idx].lock); &#125; Read-write lockæˆ‘è¿˜æŠ½ç©ºåšäº†ä¸‹ 2025 ç‰ˆæœ¬æ–°å¢çš„ Read-write lockï¼Œè¿™è¦æ±‚æˆ‘ä»¬å®ç°ä¸€ä¸ªè¯»å†™é”ã€‚è¯»å†™é”æŠŠç”¨æˆ·åˆ†ä¸ºè¯»è€…å’Œå†™è€…ï¼ŒåŒä¸€æ—¶é—´å¯ä»¥æœ‰å¤šä¸ªè¯»è€…æˆ–ä¸€ä¸ªå†™è€…æŒæœ‰è¯»å†™é”ã€‚å¦å¤–åœ¨è¿™é“é¢˜é‡Œï¼Œå¦‚æœè¯»è€…å’Œå†™è€…åŒæ—¶åœ¨ç­‰å¾…ï¼Œå†™è€…ä¼˜å…ˆæŒé”ã€‚ æˆ‘çš„å®ç°æ€è·¯è¿˜æ˜¯æ¯”è¾ƒæœ´ç´ çš„ï¼Œæˆ‘ä»¬å…ˆçœ‹æ•°æ®ç»“æ„å§ï¼š struct rwspinlock &#123; struct spinlock l; int readers; int writer_active; // 0 or 1 int waiting_writers; &#125;; è¯»è€…ä»…åœ¨æ²¡æœ‰å†™è€…æŒé”ä¸”æ²¡æœ‰å†™è€…åœ¨ç­‰å¾…æ—¶æ‰èƒ½æŒé”ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ writer_active å’Œ waiting_writers ä¸¤ä¸ªå­—æ®µï¼›å†™è€…ä»…åœ¨æ²¡æœ‰åˆ«çš„å†™è€…æŒé”ä¸”æ²¡æœ‰è¯»è€…æŒé”æ—¶æ‰èƒ½æŒé”ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿéœ€è¦ readers å­—æ®µã€‚è¿™é‡Œçš„ spinlock åˆ™æ˜¯ä¸ºäº†ä¿æŠ¤è¿™äº›å…±äº«æ•°æ®ã€‚ å…¶å®ä¹Ÿå¯ä»¥ä¸ç”¨ spinlock è€Œå…¨ç”¨åŸå­è¯­å¥å†™ï¼Œä½†æˆ‘æ„Ÿè§‰å¤ªéš¾äº†å°±æ²¡è¿™ä¹ˆåšã€‚ å‡½æ•°çš„å®ç°æ€è·¯ä¹Ÿæ¯”è¾ƒæœ´ç´ ï¼Œå¯ä»¥ç›´æ¥çœ‹ä»£ç ã€‚è¦æ³¨æ„æˆ‘ä»¬è¢«è¦æ±‚å®ç°è‡ªæ—‹ç‰ˆæœ¬çš„è¯»å†™é”ï¼Œæ‰€ä»¥åœ¨ acquire çš„æ¡ä»¶ä¸æ»¡è¶³æ—¶æˆ‘ä»¬ä¸èƒ½ sleepï¼Œè€Œåº”é‡Šæ”¾é”ç„¶åä¸æ–­å¾ªç¯ã€‚ ç°å®é‡Œä¹Ÿå­˜åœ¨ç¡çœ ç‰ˆæœ¬çš„è¯»å†™é”ï¼Œä¸è¿‡è¿™å’Œæˆ‘ä»¬çš„ lab æ²¡å…³ç³»ã€‚ static void read_acquire_inner(struct rwspinlock *rwlk) &#123; while (1) &#123; acquire(&amp;rwlk->l); if (rwlk->writer_active || rwlk->waiting_writers > 0) &#123; release(&amp;rwlk->l); continue; &#125; rwlk->readers++; release(&amp;rwlk->l); return; &#125; &#125; static void read_release_inner(struct rwspinlock *rwlk) &#123; acquire(&amp;rwlk->l); rwlk->readers--; release(&amp;rwlk->l); &#125; static void write_acquire_inner(struct rwspinlock *rwlk) &#123; acquire(&amp;rwlk->l); rwlk->waiting_writers++; release(&amp;rwlk->l); while (1) &#123; acquire(&amp;rwlk->l); if (rwlk->readers > 0 || rwlk->writer_active) &#123; release(&amp;rwlk->l); continue; &#125; rwlk->waiting_writers--; rwlk->writer_active = 1; release(&amp;rwlk->l); return; &#125; &#125; static void write_release_inner(struct rwspinlock *rwlk) &#123; acquire(&amp;rwlk->l); rwlk->writer_active = 0; release(&amp;rwlk->l); &#125; è¿™é‡Œæ˜¯ initrwlock çš„ä»£ç  void initrwlock(struct rwspinlock *rwlk) &#123; // Replace this with your implementation. initlock(&amp;rwlk->l, \"rwlk\"); rwlk->readers = 0; rwlk->waiting_writers = 0; rwlk->writer_active = 0; &#125; æµ‹è¯•æ—¶æˆ‘ä»¬é‡åˆ°äº†ä¸€ä¸ªç¥å¥‡çš„ç°è±¡ï¼Œåœ¨ make qemu åç¬¬ä¸€æ¬¡è¿è¡Œ rwlktest æ€»æ˜¯èƒ½é€šè¿‡çš„ï¼Œè€Œä¹‹åè¿è¡Œæ€»æ˜¯ä¸èƒ½é€šè¿‡çš„ã€‚é‡æ–° make qemu ä»¥åè¿˜æ˜¯ç¬¬ä¸€æ¬¡è¿è¡Œèƒ½é€šè¿‡ï¼Œåç»­è¿è¡Œæ— æ³•é€šè¿‡ã€‚ ç»è¿‡æ¼«é•¿çš„ debug æ—¶å…‰ï¼Œæˆ‘ä»¬å‘ç°é—®é¢˜å‡ºåœ¨ä¸‹é¢çš„æµ‹è¯•å‡½æ•°ä¸Šï¼š static void rwspinlock_test_step(uint step, const char *msg) &#123; static uint barrier; const uint ncpu = 4; __atomic_fetch_add(&amp;barrier, 1, __ATOMIC_ACQ_REL); while (__atomic_load_n(&amp;barrier, __ATOMIC_RELAXED) &lt; ncpu * step) &#123; // spin &#125; if (cpuid() == 0) &#123; printf(\"rwspinlock_test: step %d: %s\\n\", step, msg); &#125; &#125; è¿™ä¸ªå‡½æ•°çš„è®¾è®¡åŸæ„åº”è¯¥æ˜¯èµ·è¿™ä¸¤ä¸ªä½œç”¨ï¼š åŒæ­¥ CPUï¼Œä¿è¯å››ä¸ª CPU éƒ½åˆ°è¾¾äº†è¿™é‡Œå†ç»§ç»­å¾€ä¸‹è¿è¡Œ æ‰“å°å½“å‰è¿è¡Œåˆ°çš„æµ‹è¯•ç¼–å·ï¼ˆstepï¼‰ è¿™ä¸ªå‡½æ•°é€šè¿‡ä¸‹é¢çš„ä»£ç å®ç° CPU åŒæ­¥ã€‚å®ƒè®© barrier åŸå­æ€§åœ°åŠ ä¸€ï¼Œè¡¨ç¤ºä¸€ä¸ª CPU è·‘åˆ°äº†è¿™é‡Œï¼Œç„¶åå¦‚æœå››ä¸ª CPU ä¸­è¿˜æœ‰äººæ²¡æ¥å°±è‡ªæ—‹ç­‰å¾…ã€‚ __atomic_fetch_add(&amp;barrier, 1, __ATOMIC_ACQ_REL); while (__atomic_load_n(&amp;barrier, __ATOMIC_RELAXED) &lt; ncpu * step) &#123; // spin &#125; ä¸ºäº†ä¿è¯ barrier è¢«å››ä¸ª CPU å…±äº«ï¼Œbarrier è¢«è®¾ç½®ä¸ºé™æ€å˜é‡ static uint barrier. ä½†æµ‹è¯•ä»£ç åˆæ²¡åœ¨æµ‹è¯•å¼€å§‹æ—¶æŠŠå®ƒé‡ç½®ä¸º 0ï¼Œæ‰€ä»¥å°±å‡ºç°äº†è¿™ç§ç¬¬ä¸€æ¬¡æµ‹è¯•èƒ½é€šè¿‡ï¼Œä¹‹åçš„æµ‹è¯•ä¸èƒ½é€šè¿‡çš„æƒ…å†µã€‚ ç¬¬ä¸€æ¬¡æµ‹è¯•æ—¶ï¼Œbarrier æ˜¯åˆå§‹å€¼ 0ï¼Œæ‰€ä»¥ä¸€åˆ‡æ­£å¸¸ï¼›ä¹‹åçš„æµ‹è¯•é‡Œ barrier ä¿ç•™äº†ä¹‹å‰çš„å€¼ï¼Œwhile çš„æ¡ä»¶å§‹ç»ˆä¸ºå‡ï¼Œäºæ˜¯è¿™ç§åŒæ­¥åŠŸèƒ½ä¹Ÿå°±å®Œå…¨å¤±æ•ˆäº†ã€‚åœ¨åŒæ­¥åŠŸèƒ½å¤±æ•ˆåï¼Œè·‘å¾—å¿«çš„ CPU éƒ½è·‘å®Œ 30 ä¸ª steps äº†ï¼Œè·‘å¾—æ…¢çš„ CPU å¯èƒ½è¿˜åœ¨ç¬¬ 8 ä¸ª step æŒ£æ‰ï¼Œè¿™å°±è®© rwlktest ä¹Ÿè·Ÿç€å¤±æ•ˆäº†ã€‚ æ°”æ°›éƒ½åˆ°è¿™å„¿äº†ï¼Œä¸ç»™ä¸ªä¿®å¤ä¹Ÿä¸å¥½æ„æ€ğŸ« ğŸ« ç”¨ä¸‹é¢çš„ä»£ç å°±è¡Œäº† static void rwspinlock_test_step(uint step, const char *msg) &#123; static uint count; static uint sense; const uint ncpu = 4; int local_sense = __atomic_load_n(&amp;sense, __ATOMIC_RELAXED); if (__atomic_fetch_add(&amp;count, 1, __ATOMIC_ACQ_REL) == ncpu - 1) &#123; // Let the last reached CPU reset values and print message printf(\"rwspinlock_test: step %d: %s\\n\", step, msg); __atomic_store_n(&amp;count, 0, __ATOMIC_RELAXED); __atomic_store_n(&amp;sense, !local_sense, __ATOMIC_RELEASE); &#125; else &#123; while (__atomic_load_n(&amp;sense, __ATOMIC_ACQUIRE) == local_sense) &#123; // spin &#125; &#125; &#125; count å’Œ sense æ˜¯å…±äº«çš„å˜é‡ï¼Œæ‰€ä»¥è¦ç”¨åŸå­è¯­å¥è¯»å†™ã€‚__ATOMIC_RELAXED ä¹‹ç±»çš„ä¸œè¥¿æ˜¯å¯¹å†…å­˜é¡ºåºï¼ˆmemory ordersï¼‰çš„é™åˆ¶ï¼Œè¿™èƒ½é˜²æ­¢æŒ‡ä»¤é‡æ’ï¼Œå…·ä½“å¯ä»¥çœ‹ https://gcc.gnu.org/onlinedocs/gcc/_005f_005fatomic-Builtins.html. å‘ç°è¿™ä¸ª bug ä»¥åæˆ‘ä¹Ÿç»™ 6S081 çš„å®˜æ–¹å‘äº†é‚®ä»¶ï¼Œæ²¡æƒ³åˆ°è¿˜çœŸæ”¶åˆ°å›å¤äº†ï¼ä»–ä»¬è¯´åŠ å…¥äº†ä¸€ä¸ªç±»ä¼¼çš„ä¿®å¤ï¼Œä¼šåœ¨ 2026 å¹´çš„ç‰ˆæœ¬æ›´æ–°ã€‚æ„Ÿè§‰è‡ªå·±å¯¹ MIT çš„æ»¤é•œæ›´åšäº†ï¼ˆï¼‰","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"MIT-6.S081","slug":"å…¬å¼€è¯¾/MIT-6-S081","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/"},{"name":"Labs","slug":"å…¬å¼€è¯¾/MIT-6-S081/Labs","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/Labs/"}],"tags":[]},{"title":"Lab 6 Networking","slug":"learning/open-course/MIT-6.S081/Labs/lab6-net","date":"2025-11-08T23:41:29.000Z","updated":"2025-11-08T23:58:14.625Z","comments":true,"path":"wiki/learning/open-course/MIT-6.S081/Labs/lab6-net/","permalink":"http://rinevard.github.io/wiki/learning/open-course/MIT-6.S081/Labs/lab6-net/","excerpt":"","text":"è¿™ä¸ª lab åˆ†ä¸¤ä¸ªéƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯è¡¥å…¨ E1000 ç½‘å¡é©±åŠ¨çš„æ•°æ®åŒ…æ”¶å‘ç›¸å…³ä»£ç ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯æ·»åŠ ä»£ç å®Œæˆ UDP åŒ…çš„æ¥æ”¶ã€‚åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆå»æŠŠè®²ç½‘ç»œçš„ lecture çœ‹æ‰ï¼Œå› ä¸ºé‡Œé¢æ¶‰åŠäº†å¾ˆå¤šç›¸å…³å†…å®¹ã€‚ä½ å¯èƒ½ä¼šç–‘æƒ‘ä¸ºä»€ä¹ˆè¯¾ç¨‹æŠŠ lab å®‰æ’åœ¨ lec å‰é¢ï¼Œæˆ‘åœ¨æœ¬æ–‡çš„æ–‡æœ«åæ§½é‡Œå†™äº†å¯èƒ½çš„åŸå› ã€‚ è®©æˆ‘ä»¬è¿›å…¥æ­£é¢˜ã€‚ E1000 ç½‘å¡é©±åŠ¨æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç æ—¶è¦å›ç­”ä¸¤ä¸ªé—®é¢˜â€”â€”æˆ‘ä»¬å¦‚ä½•å€ŸåŠ©ç½‘å¡æ¥æ”¶æ•°æ®ï¼Œåˆå¦‚ä½•å‘é€æ•°æ®ï¼Ÿæˆ‘ä»¬å¯¹ç…§æ–‡æ¡£ç¬¬ä¸‰ç« æ¥åˆ†æä¸€ä¸‹ï¼Œç„¶ååœ¨åˆ†æçš„ç»“å°¾åˆ†åˆ«ç»™å‡º e1000_recv å’Œ e1000_transmit çš„ä»£ç ï¼š æˆ‘ä»¬å¦‚ä½•å€ŸåŠ©ç½‘å¡æ¥æ”¶æ•°æ®ï¼Ÿ æˆ‘ä»¬åœ¨åˆå§‹åŒ–é‡Œè®¾ç½®äº† RDTRï¼Œè¿™è®©ç½‘å¡åœ¨æ”¶åˆ°åŒ…æ—¶å‘å‡ºä¸­æ–­ï¼Œè¿™ä¸€éƒ¨åˆ†å’Œæ–‡æ¡£çš„ 3.2.8 Receive Interrupts æœ‰å…³ï¼š // ask e1000 for receive interrupts. regs[E1000_RDTR] = 0; // interrupt after every received packet (no timer) æˆ‘ä»¬è¿˜åœ¨åˆå§‹åŒ–é‡Œè®¾ç½®äº† RDBALï¼Œè¿™è®©ç½‘å¡åœ¨æ”¶åˆ°åŒ…æ—¶æŠŠæ•°æ®æ”¾åˆ° rx_ring ä¸­ï¼š // [E1000 14.4] Receive initialization memset(rx_ring, 0, sizeof(rx_ring)); for (i = 0; i &lt; RX_RING_SIZE; i++) &#123; rx_bufs[i] = kalloc(); if (!rx_bufs[i]) panic(\"e1000\"); rx_ring[i].addr = (uint64)rx_bufs[i]; &#125; regs[E1000_RDBAL] = (uint64)rx_ring; å…·ä½“æ¥è¯´ï¼Œå®ƒä¼šæŠŠåŒ…æ”¾åˆ° rx_ring[RDH] é‡Œï¼Œæˆ‘ä»¬åˆ™ç”¨ RDT æ¥è¯»å–ã€‚ ä¸‹å›¾æ˜¯ rx_ring çš„ç¤ºæ„å›¾ï¼Œç¡¬ä»¶å¯å‘ [HEAD, TAIL) ä¸­å†™å…¥å†…å®¹ï¼Œ TAIL å¤„ç•™ç©ºä»¥åŒºåˆ†ç©ºç¯å’Œæ»¡ç¯ã€‚ ç½‘å¡ä¼ æ¥çš„æ•°æ®æ ¼å¼åœ¨ e1000_dev.h é‡Œå®šä¹‰ï¼Œå¯å‚è€ƒæ–‡æ¡£ 3.2.3 Receive Descriptor Formatï¼š struct rx_desc &#123; uint64 addr; /* Address of the descriptor's data buffer */ uint16 length; /* Length of data DMAed into data buffer */ uint16 csum; /* Packet checksum */ uint8 status; /* Descriptor status */ uint8 errors; /* Descriptor Errors */ uint16 special; &#125;; ç½‘å¡å‘å‡ºä¸­æ–­åï¼Œå†…æ ¸ä¼šè°ƒç”¨ e1000_intrï¼Œe1000_intr åˆä¼šè¿›ä¸€æ­¥è°ƒç”¨ e1000_recv. å¯¹ç…§ rx_ring çš„ç¤ºæ„å›¾ï¼Œæˆ‘ä»¬å°±çŸ¥é“ e1000_recv åº”è¯¥å» rx_ring[RDT + 1] å¤„è¯»å–æ•°æ®ï¼Œç›´åˆ°è¯»åˆ°æ— æ•ˆæ•°æ®ä¸ºæ­¢ã€‚å‚è€ƒæ–‡æ¡£çš„ 3.2.3.1 Receive Descriptor Status Fieldï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ® rx_desc çš„ status çš„ DD ä½å¾—çŸ¥æ•°æ®æ˜¯å¦æœ‰æ•ˆã€‚ æ€»ä¹‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š static void e1000_recv(void) &#123; // // Your code here. // // Check for packets that have arrived from the e1000 // Create and deliver a buf for each packet (using net_rx()). // acquire(&amp;e1000_lock); uint32 idx = (regs[E1000_RDT] + 1) % RX_RING_SIZE; while (rx_ring[idx].status &amp; E1000_RXD_STAT_DD) &#123; char *recv_buf = rx_bufs[idx]; int buflen = rx_ring[idx].length; rx_bufs[idx] = kalloc(); if (!rx_bufs[idx]) &#123; panic(\"e1000\"); &#125; rx_ring[idx].addr = (uint64)rx_bufs[idx]; rx_ring[idx].status = 0; idx = (idx + 1) % RX_RING_SIZE; // net_rx could call e1000_transmit, so release lock before calling it release(&amp;e1000_lock); net_rx(recv_buf, buflen); acquire(&amp;e1000_lock); &#125; // set RDT to the last processed index regs[E1000_RDT] = (idx + RX_RING_SIZE - 1) % RX_RING_SIZE; release(&amp;e1000_lock); &#125; è¿™é‡Œçš„ regs[E1000_RDT] = (idx + RX_RING_SIZE - 1) % RX_RING_SIZE å¯èƒ½æ¯”è¾ƒ trickyï¼Œæ€»ä¹‹å°±æ˜¯ RDT åº”è¯¥æŒ‡åœ¨æœ€åä¸€ä¸ªè¢«å–å‡ºçš„æè¿°ç¬¦å¤„ä»¥å®ç°ç•™ç©ºã€‚ æˆ‘ä»¬å¦‚ä½•å€ŸåŠ©ç½‘å¡å‘é€æ•°æ®ï¼Ÿ å¦‚æ–‡æ¡£ 3.4.3 Transmit Interrupts æ‰€å†™ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®¾ç½®ç½‘å¡åœ¨ä¼ è¾“å®Œæˆæ—¶å‘ç”Ÿä¸­æ–­ï¼Œä¸è¿‡åœ¨ xv6 é‡Œæˆ‘ä»¬æ²¡æœ‰è¿™ä¹ˆè®¾ç½®ï¼Œæ‰€ä»¥å‘é€æˆåŠŸä¸ä¼šä¸­æ–­ã€‚ ä¸è¯»å–æ•°æ®è¦æŠŠ rx_ring çš„ä½ç½®å‘Šè¯‰ç½‘å¡ç±»ä¼¼ï¼Œæˆ‘ä»¬è¦æŠŠ tx_ring çš„ä½ç½®åœ¨åˆå§‹åŒ–é‡Œå‘Šè¯‰ç½‘å¡ï¼š // [E1000 14.5] Transmit initialization memset(tx_ring, 0, sizeof(tx_ring)); for (i = 0; i &lt; TX_RING_SIZE; i++) &#123; tx_ring[i].status = E1000_TXD_STAT_DD; tx_bufs[i] = 0; &#125; regs[E1000_TDBAL] = (uint64)tx_ring; æˆ‘ä»¬ä¼šæŠŠæ•°æ®æ”¾åˆ° tx_ring[TDT] é‡Œï¼Œç½‘å¡ä¼šè‡ªåŠ¨èµ°åŠ¨ TDH ç›´åˆ°è¿½ä¸Š TDT. ä¸‹å›¾æ˜¯ rx_ring çš„ç¤ºæ„å›¾ï¼ŒTAIL æŒ‡å‘ç¡¬ä»¶èƒ½å¤Ÿå¤„ç†çš„æœ€åä¸€ä¸ªæè¿°ç¬¦ä¹‹åçš„ä½ç½®ï¼Œè¿™ä¹Ÿæ˜¯è½¯ä»¶å†™å…¥ç¬¬ä¸€ä¸ªæ–°æè¿°ç¬¦çš„ä½ç½®ã€‚ä¸ rx_ring ä¸åŒï¼Œtx_ring æ— ç•™ç©ºã€‚ ä¼ ç»™ç½‘å¡çš„æ•°æ®ç»“æ„ä¹Ÿåœ¨ e1000_dev.h é‡Œå®šä¹‰ï¼Œå¯å‚è€ƒæ–‡æ¡£ 3.3.2 Transmit Descriptorsï¼š struct tx_desc &#123; uint64 addr; uint16 length; uint8 cso; uint8 cmd; uint8 status; uint8 css; uint16 special; &#125;; å¯¹ç…§ tx_ring çš„ç¤ºæ„å›¾ï¼Œæˆ‘ä»¬è¦æŠŠæ•°æ®å­˜åœ¨ tx_ring[TDT] é‡Œã€‚è¦æ³¨æ„å¦‚æœ TDT æŒ‡å‘çš„å†…å®¹å·²ç»è¢«ç½‘å¡æˆåŠŸå‘é€äº†ï¼ˆå¯ä»¥é€šè¿‡ status çš„ DD ä½æ¥åˆ¤æ–­ï¼‰ï¼Œæˆ‘ä»¬è¦é‡Šæ”¾ TDT æŒ‡å‘çš„å†…å­˜ä»¥é¿å…å†…å­˜æ³„æ¼ï¼›å¦å¤–æˆ‘ä»¬è¿˜è¦æ›´æ–° cmd ä½ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ 3.3.3.1 Transmit Descriptor Command Field Format. æ€»ä¹‹ä¸‹é¢æ˜¯ä»£ç ï¼š int e1000_transmit(char *buf, int len) &#123; // // Your code here. // // buf contains an ethernet frame; program it into // the TX descriptor ring so that the e1000 sends it. Stash // a pointer so that it can be freed after send completes. // acquire(&amp;e1000_lock); uint32 idx = regs[E1000_TDT]; if (!(tx_ring[idx].status &amp; E1000_TXD_STAT_DD)) &#123; release(&amp;e1000_lock); return -1; &#125; // free old buf that has been sent away if (tx_ring[idx].addr) &#123; kfree(tx_bufs[idx]); &#125; tx_bufs[idx] = buf; tx_ring[idx].addr = (uint64)tx_bufs[idx]; tx_ring[idx].length = len; tx_ring[idx].cmd = E1000_TXD_CMD_EOP | E1000_TXD_CMD_RS; tx_ring[idx].status = 0; regs[E1000_TDT] = (idx + 1) % TX_RING_SIZE; release(&amp;e1000_lock); return 0; &#125; UDP åŒ…çš„æ¥æ”¶æˆ‘ä»¬å…ˆæ¥æ¢³ç†ä¸€ä¸‹æ•´ä¸ªæ”¶ä¿¡æµç¨‹æ˜¯æ€æ ·çš„ï¼šå¤–éƒ¨ä¼šå‘ packet ç»™ç½‘å¡ï¼Œç½‘å¡åœ¨æ”¶åˆ°åä¼šå¼•å‘ä¸­æ–­ï¼Œå†…æ ¸å‘ç°ä¸­æ–­ç”±ç½‘å¡å¼•å‘å°±ä¼šè°ƒç”¨ e1000_intrï¼Œä¹‹å packet ä¼šè¢«å‘ç»™ net_rx æ¥è®©å†…æ ¸åšè¿›ä¸€æ­¥å¤„ç†ã€‚å¦‚æœ net_rx å‘ç°è¿™æ˜¯ä¸€ä¸ª IP packet å°±ä¼šè¿›ä¸€æ­¥è°ƒç”¨ ip_rxï¼Œç„¶åå°±åˆ°æˆ‘ä»¬çš„å·¥ä½œäº†ã€‚ æˆ‘ä»¬åªéœ€è¦å¤„ç† ETH-IP-UDP åµŒå¥—çš„ packetï¼Œè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹å®ƒçš„ç»“æ„ï¼š å…·ä½“çš„ packet header çš„å®šä¹‰åœ¨ net.h é‡Œã€‚ æ€»ä¹‹æˆ‘ä»¬è¦å®ç° recvã€bindã€ip_rx è¿™ä¸‰ä¸ªå‡½æ•°ã€‚åº”ç”¨ä¼šè°ƒç”¨ bind æ¥ç›‘å¬ä¸€ä¸ªç«¯å£ï¼Œå½“ç«¯å£è¢«ç›‘å¬æ—¶æˆ‘ä»¬éœ€è¦ä¿å­˜åˆ°è¾¾è¿™ä¸ªç«¯å£çš„æ•°æ®åŒ…ï¼Œæ‰€ä»¥è¦åœ¨ net.h ä¸­å®šä¹‰å¦‚ä¸‹çš„æ•°æ®ç»“æ„ï¼š #define MAX_LISTEN_PORTS 128 #define PACKET_RING_SIZE 16 // for any given port, no more than 16 packets should be saved struct listener &#123; int used; int port; char *packet_ring[PACKET_RING_SIZE]; int head; // used by writer int tail; // used by reader &#125;; è¿™é‡Œçš„ used å­—æ®µå¯èƒ½æœ‰ç‚¹å¥‡æ€ªï¼Œæˆ‘æ¥è§£é‡Šä¸€ä¸‹ï¼šæˆ‘ä»¬å¸Œæœ›æ¯å½“ä¸€ä¸ªåº”ç”¨è°ƒç”¨ bindï¼Œæˆ‘ä»¬å°±æ–°å¢ä¸€ä¸ª listenerï¼Œä½†ç”±äº C è¯­è¨€å®ç°åŠ¨æ€æ•°ç»„å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©åˆ›å»ºé™æ€å¤§å°çš„ listeners æ•°ç»„ã€‚é‚£ä¸ºä»€ä¹ˆä¸ç”¨é“¾è¡¨å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬æ–°å¢å†…å­˜çš„æ‰‹æ®µåªæœ‰ kallocï¼Œè€Œä¸€æ•´ä¸ªé¡µå¯¹ä¸€ä¸ª listener æ¥è¯´å¤ªå¤§äº†ã€‚ struct listener é‡Œçš„ used å­—æ®µå°±æ˜¯ä¸ºäº†åˆ¤æ–­ listeners æ•°ç»„é‡Œçš„æŸä¸ª listener æ˜¯å¦å·²ç»è¢«ä½¿ç”¨ã€‚ æˆ‘ä»¬è¦åœ¨ net.c é‡Œåˆå§‹åŒ– listeners æ•°ç»„ï¼š static struct listener listeners[MAX_LISTEN_PORTS]; void netinit(void) &#123; initlock(&amp;netlock, \"netlock\"); for (int i = 0; i &lt; MAX_LISTEN_PORTS; i++) &#123; listeners[i].used = 0; for (int j = 0; j &lt; PACKET_RING_SIZE; j++) &#123; listeners[i].packet_ring[j] = 0; &#125; &#125; &#125; æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†æä¸€ä¸‹æ¯ä¸ªå‡½æ•°è¦åšä»€ä¹ˆï¼Œå†ç»™å‡ºä»£ç ï¼š recv(int dport, int *src, short *sport, char *buf, int maxlen) æ¥æ”¶åˆ°è¾¾ dport ç«¯å£çš„ UDP packet. å¦‚æœåˆ°è¾¾äº†å¤šä¸ªï¼Œå–å‡ºç¬¬ä¸€ä¸ª packetï¼›å¦‚æœæ²¡æœ‰ä¸œè¥¿åˆ°è¾¾ï¼Œç­‰å¾…ç›´åˆ°æœ‰ä¸œè¥¿åˆ°è¾¾ã€‚ æœ¬å‡½æ•°æŠŠå–å‡ºçš„ packet é‡Œ 32 ä½çš„æº IP åœ°å€å¤åˆ¶åˆ° *srcï¼ŒUDP æºç«¯å£å·å¤åˆ¶åˆ° *sportï¼Œpayload çš„è‡³å¤š maxlen ä¸ªå­—èŠ‚å¤åˆ¶åˆ° buf. æˆåŠŸåˆ™è¿”å›å¤åˆ¶çš„ payload å­—èŠ‚æ•°ï¼Œå¤±è´¥è¿”å› -1. æ³¨æ„ç½‘ç»œå­—èŠ‚åºå’Œç³»ç»Ÿå­—èŠ‚åºä¸åŒï¼Œè¦ç”¨ ntohs å’Œ ntohl æ¥é€†è½¬å­—èŠ‚åºã€‚ å¦å¤–ï¼Œè¿™é‡Œçš„å„ä¸ªæŒ‡é’ˆæ˜¯ç”¨æˆ·ç©ºé—´çš„è™šæ‹Ÿåœ°å€ï¼Œæˆ‘ä»¬è¦ç”¨ copyout æŠŠ packet é‡Œçš„å†…å®¹ï¼ˆå®ƒä»¬åœ¨å†…æ ¸ç©ºé—´ï¼‰å¤åˆ¶åˆ°ç”¨æˆ·ç©ºé—´ã€‚ uint64 sys_recv(void) &#123; // // Your code here. // struct proc *p; int dport; uint64 src; uint64 sport; uint64 buf; int maxlen; struct listener *listener = 0; p = myproc(); argint(0, &amp;dport); argaddr(1, &amp;src); argaddr(2, &amp;sport); argaddr(3, &amp;buf); argint(4, &amp;maxlen); // find listener related to dport acquire(&amp;netlock); for (int i = 0; i &lt; MAX_LISTEN_PORTS; i++) &#123; listener = &amp;listeners[i]; if (listener->used &amp;&amp; listener->port == dport) &#123; break; &#125; listener = 0; &#125; if (!listener) &#123; goto bad; &#125; // return the earliest waiting packet or wait until a packet arrives while (1) &#123; if (listener->packet_ring[listener->tail]) &#123; // extract a packet from the ring char *packet = listener->packet_ring[listener->tail]; listener->packet_ring[listener->tail] = 0; listener->tail = (listener->tail + 1) % PACKET_RING_SIZE; // extract data from the packet struct ip *ip_packet = (struct ip *)(packet + sizeof(struct eth)); struct udp *udp_packet = (struct udp *)(packet + sizeof(struct eth) + sizeof(struct ip)); void *payload = ((char *)udp_packet) + sizeof(struct udp); // re-arrange the bytes uint32 src_ip = ntohl(ip_packet->ip_src); uint16 src_port = ntohs(udp_packet->sport); if (copyout(p->pagetable, src, (char *)&amp;src_ip, sizeof(src_ip)) &lt; 0) &#123; kfree(packet); goto bad; &#125; if (copyout(p->pagetable, sport, (char *)&amp;src_port, sizeof(src_port)) &lt; 0) &#123; kfree(packet); goto bad; &#125; // copy at most maxlen bytes of the payload and free the packet uint16 buflen = ntohs(udp_packet->ulen) - sizeof(struct udp); uint64 cplen = (buflen > maxlen) ? maxlen : buflen; if (copyout(p->pagetable, buf, payload, cplen) &lt; 0) &#123; kfree(packet); goto bad; &#125; kfree(packet); release(&amp;netlock); return cplen; &#125; else &#123; // wait until a packet arrives sleep(listener->packet_ring, &amp;netlock); &#125; &#125; goto bad; bad: release(&amp;netlock); return -1; &#125; bind(int port) è¿›ç¨‹åœ¨è°ƒç”¨ recv å‰åº”å½“å…ˆè°ƒç”¨ bind æ¥ç›‘å¬ç‰¹å®šç«¯å£ï¼Œbind è¢«è°ƒç”¨æ—¶åº”è¯¥è¦åˆå§‹åŒ– port å¯¹åº”çš„å¾…å¤„ç†åŒºã€‚ uint64 sys_bind(void) &#123; // // Your code here. // int port; argint(0, &amp;port); acquire(&amp;netlock); // return error if repeated binding for (int i = 0; i &lt; MAX_LISTEN_PORTS; i++) &#123; if (listeners[i].used &amp;&amp; listeners[i].port == port) &#123; goto bad; &#125; &#125; for (int i = 0; i &lt; MAX_LISTEN_PORTS; i++) &#123; if (!listeners[i].used) &#123; // use the first unused listener for port listeners[i].used = 1; listeners[i].port = port; listeners[i].head = 0; listeners[i].tail = 0; release(&amp;netlock); return 0; &#125; &#125; goto bad; bad: release(&amp;netlock); return -1; &#125; ip_rx(char *buf, int len) e1000_recv ä¼šæŠŠ packet è½¬å‘ç»™ net_rxï¼Œnet_rx åœ¨å‘ç°æ”¶åˆ°çš„ packet æ˜¯ IP packet æ—¶ä¼šæŠŠ packet è½¬å‘ç»™ ip_rx. æˆ‘ä»¬éœ€è¦æ£€æŸ¥ destination port æ˜¯å¦åœ¨æ­£åœ¨è¢«ç›‘å¬ï¼Œå¦‚æœæœªç›‘å¬æˆ–å¾…å¤„ç†åŒºå·²æ»¡å°±ä¸¢å¼ƒåŒ…ï¼Œå¦åˆ™å­˜åˆ°å¾…å¤„ç†åŒºã€‚ void ip_rx(char *buf, int len) &#123; // don't delete this printf; make grade depends on it. static int seen_ip = 0; if (seen_ip == 0) printf(\"ip_rx: received an IP packet\\n\"); seen_ip = 1; // // Your code here. // struct udp *udp_packet; struct listener *listener = 0; udp_packet = (struct udp *)(buf + sizeof(struct eth) + sizeof(struct ip)); acquire(&amp;netlock); for (int i = 0; i &lt; MAX_LISTEN_PORTS; i++) &#123; listener = &amp;listeners[i]; // try best to save packet in listener related to dport if (listener->used &amp;&amp; listener->port == ntohs(udp_packet->dport)) &#123; int head = listener->head; // if ring is full, drop the incoming packet if (listener->packet_ring[head] != 0) &#123; kfree(buf); release(&amp;netlock); return; &#125; // save packet in listener listener->packet_ring[head] = buf; listener->head = (head + 1) % PACKET_RING_SIZE; wakeup(listener->packet_ring); release(&amp;netlock); return; &#125; &#125; kfree(buf); release(&amp;netlock); return; &#125; ç„¶åæˆ‘ä»¬å°±ä¸‹ç­äº†ï¼ æ‚ä¸ƒæ‚å…«å°çŸ¥è¯†æ‰€æœ‰æƒè½¬ç§»çœ‹ä¸€çœ¼ e1000_recv çš„ä»£ç ï¼Œæˆ‘ä»¬ä¼šå‘ç°å®ƒè°ƒç”¨äº† kallocï¼Œå´æ²¡æœ‰åœ¨å†…éƒ¨æ˜¾å¼é‡Šæ”¾æ–°å»ºçš„å†…å­˜ï¼Œè¿™æ˜¯å†…å­˜æ³„æ¼å—ï¼Ÿ static void e1000_recv(void) &#123; // // Your code here. // // Check for packets that have arrived from the e1000 // Create and deliver a buf for each packet (using net_rx()). // acquire(&amp;e1000_lock); uint32 idx = (regs[E1000_RDT] + 1) % RX_RING_SIZE; while (rx_ring[idx].status &amp; E1000_RXD_STAT_DD) &#123; char *recv_buf = rx_bufs[idx]; // åœ¨è¿™é‡Œå–å‡º int buflen = rx_ring[idx].length; rx_bufs[idx] = kalloc(); // åœ¨è¿™é‡Œåˆ†é…æ–°å†…å­˜ if (!rx_bufs[idx]) &#123; panic(\"e1000\"); &#125; rx_ring[idx].addr = (uint64)rx_bufs[idx]; rx_ring[idx].status = 0; idx = (idx + 1) % RX_RING_SIZE; // net_rx could call e1000_transmit, so release lock before calling it release(&amp;e1000_lock); net_rx(recv_buf, buflen); // åœ¨è¿™é‡Œè½¬ç§»æ‰€æœ‰æƒ acquire(&amp;e1000_lock); &#125; // set RDT to the last processed index regs[E1000_RDT] = (idx + RX_RING_SIZE - 1) % RX_RING_SIZE; release(&amp;e1000_lock); &#125; è¿™å¹¶ä¸æ˜¯å†…å­˜æ³„æ¼ï¼Œè€Œæ˜¯ä¸€ç§æ‰€æœ‰æƒè½¬ç§»ã€‚å¯¹æ¯ä¸ªæ–°å»ºçš„ rx_bufs[idx] = kalloc()ï¼Œæˆ‘ä»¬éƒ½ä¼šåœ¨æœªæ¥é€šè¿‡ recv_buf = rx_bufs[idx] æŠŠå®ƒå–å‡ºï¼Œå¹¶æŠŠå…¶æ‰€æœ‰æƒé€šè¿‡ net_rx(recv_buf, buflen) è½¬ç§»ç»™ net_rx. ä¹Ÿå°±æ˜¯è¯´ï¼Œnet_rx è´Ÿè´£é‡Šæ”¾ä¼ å…¥çš„ buf. è€Œ net_rx ä¹Ÿå¯èƒ½æŠŠ buf çš„æ‰€æœ‰æƒè½¬ç§»ç»™ app_rx æˆ– ip_rx. void net_rx(char *buf, int len) &#123; struct eth *eth = (struct eth *)buf; if (len >= sizeof(struct eth) + sizeof(struct arp) &amp;&amp; ntohs(eth->type) == ETHTYPE_ARP) &#123; arp_rx(buf); &#125; else if (len >= sizeof(struct eth) + sizeof(struct ip) &amp;&amp; ntohs(eth->type) == ETHTYPE_IP) &#123; ip_rx(buf, len); &#125; else &#123; kfree(buf); &#125; &#125; è¿™å’Œ C++ é‡Œçš„ move è¯­ä¹‰ç±»ä¼¼ï¼Œéƒ½æ˜¯â€œè½¬ç§»æ‰€æœ‰æƒâ€ã€‚ ä»€ä¹ˆæ˜¯ attribute((packed))net.h é‡Œæœ‰ packet header çš„å®šä¹‰ï¼Œè¿™é‡Œ struct eth é‡Œçš„ __attribute((packed))__ æ˜¯åœ¨å‘ŠçŸ¥ç¼–è¯‘å™¨å–æ¶ˆå†…å­˜å¯¹é½ä¼˜åŒ–ï¼Œè®©ç»“æ„ä½“æˆå‘˜ç´§å‡‘æ’åˆ—ã€‚ struct eth &#123; uint8 dhost[ETHADDR_LEN]; uint8 shost[ETHADDR_LEN]; uint16 type; &#125; __attribute__((packed)); è¿˜è®°å¾—å¯¹é½ä¼˜åŒ–æ˜¯ä»€ä¹ˆå—ï¼Ÿä¸ºäº†æé«˜ CPU è®¿é—®å†…å­˜çš„æ•ˆç‡ï¼Œç»“æ„ä½“ä¸­çš„æ¯ä¸ªæˆå‘˜çš„èµ·å§‹åœ°å€ç›¸å¯¹äºç»“æ„ä½“èµ·å§‹åœ°å€çš„åç§»é‡éœ€è¦æ˜¯è¯¥æˆå‘˜è‡ªèº«å¤§å°çš„æ•´æ•°å€ã€‚å¦‚æœä¸æ˜¯ï¼Œç¼–è¯‘å™¨ä¼šåœ¨å‰ä¸€ä¸ªæˆå‘˜åé¢å¡«å……ä¸€äº›ç©ºç™½å­—èŠ‚ã€‚ æ¯”å¦‚å¯¹ä¸‹é¢çš„ç»“æ„ä½“ï¼Œsizeof(struct Test) æ˜¯ 12 å­—èŠ‚ï¼Œè€Œä¸æ˜¯æˆå‘˜å¤§å°ä¹‹å’Œçš„ 1 + 4 + 1 = 6 å­—èŠ‚ã€‚ struct Test &#123; char c1; int i; char c2; &#125;; æ–‡æœ«åæ§½Lab Net ç»å†äº†ä¸å°‘å˜è¿ï¼Œåœ¨ 2019 å’Œ 2020 å¹´å®ƒè¿˜æ˜¯è¯¾ç¨‹çš„æœ€åä¸€ä¸ª labï¼Œè€Œä» 2021 å¹´å¼€å§‹å®ƒå°±è¢«ç§»åˆ°äº†è¯¾ç¨‹ä¸­æœŸï¼Œè€Œç½‘ç»œ lec åˆ™ä¸€ç›´åœ¨è¯¾ç¨‹åæœŸï¼Œæ‰€ä»¥å°±é€ æˆäº† lab å’Œ lec çš„é”™ä½ã€‚ 2023 å¹´ç‰ˆæœ¬çš„ Net Lab åªè¦æ±‚å®ç° Part One è€Œä¸”æ ‡æ³¨çš„éš¾åº¦è¿˜æ˜¯ hardï¼Œ2024 å¹´å°±å˜æˆäº† moderate è¿˜æ–°åŠ äº†ä¸€ä¸ª Part Twoï¼Œæœç„¶è¯¾ç¨‹éš¾åº¦ä¹Ÿæ˜¯ä¼šé€šè´§è†¨èƒ€çš„ğŸ« ğŸ« ","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"MIT-6.S081","slug":"å…¬å¼€è¯¾/MIT-6-S081","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/"},{"name":"Labs","slug":"å…¬å¼€è¯¾/MIT-6-S081/Labs","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/Labs/"}],"tags":[]},{"title":"é€è¿‡æœ›è¿œé•œç»™æœˆäº®æ‹ç…§","slug":"others/thoughts/moon","date":"2025-11-05T14:10:15.000Z","updated":"2025-11-05T15:01:12.376Z","comments":true,"path":"wiki/others/thoughts/moon/","permalink":"http://rinevard.github.io/wiki/others/thoughts/moon/","excerpt":"","text":"ä»Šå¤©æ‹¿å‡ºäº†æˆ‘è€—è´¹ 200 å…ƒå·¨èµ„ä¹°çš„æ£®æ—äººæœ›è¿œé•œè¯•ç€çœ‹æœˆäº®ï¼ åœ¨æ‹¿èµ·æœ›è¿œé•œçœ‹å‘æœˆäº®ä¹‹å‰çœŸçš„å¾ˆéš¾æƒ³è±¡ï¼Œä¸€ä¸ªä¸¤ç™¾å…ƒçš„æœ›è¿œé•œå°±èƒ½è®©æˆ‘çœ‹æ¸…æœˆæµ·ã€æœˆé™†ã€ç¬¬è°·ç¯å½¢å±±ã€‚ä¸è¿‡å¦‚æœæˆ‘åªæ˜¯åœ¨è¿™é‡Œé«˜è°ˆé˜”è®ºçš„è¯ï¼Œè¯»è€…ï¼ˆè¿™ç¯‡æ–‡ç« çœŸçš„å­˜åœ¨è¯»è€…å—ï¼‰ä¸€å®šæ„Ÿå—ä¸åˆ°è¿™ç§å¥‡å¦™çš„ä½“éªŒçš„ï¼Œé‚£æˆ‘å°±ä¸Šå›¾å§ï¼ æˆ‘ä»¬ä¼šæ³¨æ„åˆ°å®ƒæ˜¯é»‘ä¸€å—ç™½ä¸€å—çš„ã€‚é»‘çš„å°±æ˜¯æœˆæµ·ï¼Œå®ƒä»¬æ˜¯å¤ä»£ç«å±±å–·å‘åç„æ­¦å²©å½¢æˆçš„å¹³åŸï¼Œç„æ­¦å²©é¢œè‰²è¾ƒæ·±ï¼Œåå°„é˜³å…‰çš„èƒ½åŠ›å¼±ï¼Œæ‰€ä»¥çœ‹èµ·æ¥æ˜¯æš—ç°è‰²çš„ã€‚è€Œç™½çš„åˆ™æ˜¯æœˆé™†ï¼Œä¸»è¦ç”±ä¸€ç§å«åšæ–œé•¿å²©çš„æµ…è‰²å²©çŸ³æ„æˆï¼Œçœ‹èµ·æ¥æ›´æ˜äº®ã€‚ è€Œå›¾ç‰‡äº”ç‚¹åŠæ–¹å‘ä¸Šçš„é‚£ä¸ªè¾å°„çŠ¶çš„ä¸œè¥¿å°±æ˜¯ç¬¬è°·å‘ï¼ï¼ˆçœ‹èµ·æ¥æœ‰ç‚¹åƒæ˜Ÿé™…æ‹“è’çš„å®‡å®™ä¹‹çœ¼å‘¢ï¼‰ ä¸è¿‡è¿™æ˜¯ PS è°ƒæ•´åçš„å›¾ï¼Œä¸»è¦æ˜¯æ‹‰é«˜äº†æ›å…‰ã€æ‹‰ä½äº†é«˜å…‰ã€æ‹‰é«˜äº†çº¹ç†å’Œæ¸…æ™°åº¦ï¼Œä¸‹é¢æ˜¯ç›´æ¥æ‹å‡ºæ¥çš„å›¾ï¼ˆå½“ç„¶ä¸æ˜¯åŸå›¾ï¼ŒåŸå›¾ 20mb æ„Ÿè§‰æ”¾è¿™é‡Œå°±å¤ªå¤§äº†ï¼‰ï¼š æ¥ä¸‹æ¥çœ‹çœ‹æˆ‘æ˜¯æ€ä¹ˆæ‹å‡ºæ¥çš„å§ï¼ç›´æ¥æ‹¿ç€æ‰‹æœºå¯¹ç€æœ›è¿œé•œæ‹åªèƒ½æ‹å‡ºæ¥ä¸€ä¸ªå°å…‰çƒï¼Œæ­£ç¡®çš„åšæ³•æ˜¯è°ƒåˆ°ä¸“ä¸šæ¨¡å¼ç„¶åè°ƒæ•´å‚æ•°ï¼Œæˆ‘çš„K80è‡³å°Šç‰ˆæœ‰è¿™äº›å‚æ•°å¯è°ƒï¼š S - å¿«é—¨é€Ÿåº¦ï¼ˆShutter Speedï¼‰ ISO - æ„Ÿå…‰åº¦ WB - ç™½å¹³è¡¡ F - å¯¹ç„¦ï¼ˆFocusï¼‰ ç›´æ¥æ‹åªèƒ½æ‹å‡ºå°å…‰çƒæ˜¯å› ä¸ºæ‰‹æœºæ‹ç…§é»˜è®¤æ˜¯è‡ªåŠ¨æ¨¡å¼ï¼Œè‡ªåŠ¨æ¨¡å¼çœ‹åˆ°æ•´ä¸ªç”»é¢éƒ½æ˜¯é»‘è‰²çš„ï¼ˆä¼—æ‰€å‘¨çŸ¥å¤œç©ºæ˜¯é»‘çš„ï¼‰å°±ä¼šåŠªåŠ›è°ƒèŠ‚è‡ªåŠ¨æ›å…‰ï¼Œæœ€åå¯¼è‡´è¿‡æ›ã€‚ ä¸ºäº†é¿å…è¿‡æ›ï¼Œæˆ‘ä»¬è¦åœ¨ä¸“ä¸šæ¨¡å¼é‡ŒæŠŠ S æé«˜ã€ISO é™ä½ã€‚æ€»ä¹‹æˆ‘æœ€åçš„å‚æ•°è®¾ç½®æ˜¯è¿™æ ·çš„ï¼šS: 1/160, ISO: 100, WB: æ²¡è°ƒ, F: æ‹‰åˆ°æœ€å³è¾¹ã€‚ç„¶åå°±èƒ½æ„‰å¿«åœ°æ‹ç…§äº†ï¼","categories":[{"name":"æ‚è°ˆ","slug":"æ‚è°ˆ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/"},{"name":"ç¢ç¢å¿µ","slug":"æ‚è°ˆ/ç¢ç¢å¿µ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/%E7%A2%8E%E7%A2%8E%E5%BF%B5/"}],"tags":[]},{"title":"Lab 5 Copy-on-Write Fork","slug":"learning/open-course/MIT-6.S081/Labs/lab5-cow","date":"2025-11-03T13:56:22.000Z","updated":"2025-11-03T13:57:01.187Z","comments":true,"path":"wiki/learning/open-course/MIT-6.S081/Labs/lab5-cow/","permalink":"http://rinevard.github.io/wiki/learning/open-course/MIT-6.S081/Labs/lab5-cow/","excerpt":"","text":"è¿™ä¸ª Lab è¦æ±‚æˆ‘ä»¬å®ç° cow forkï¼Œè¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„èŠ‚çœå†…å­˜çš„æ‰‹æ®µã€‚ æ€»è€Œè¨€ä¹‹ï¼Œå°±æ˜¯åœ¨ fork æ—¶æŠŠçˆ¶å­çš„è™šæ‹Ÿå†…å­˜éƒ½æ˜ å°„åˆ°åŸæœ¬çš„çˆ¶è¿›ç¨‹çš„ç‰©ç†å†…å­˜ä¸Šï¼Œå¹¶å°†å…¶è®¾ä¸ºâ€œä»…è¯»â€ã€‚å½“æœ‰è¿›ç¨‹å°è¯•å†™å®ƒä¼šè§¦å‘ page faultï¼Œè¿™æ—¶æˆ‘ä»¬æ‰æ–°å»ºç‰©ç†é¡µï¼Œç„¶åè°ƒæ•´å°è¯•å†™çš„è¿›ç¨‹çš„é¡µè¡¨ï¼Œå°†å¯¹åº”è™šæ‹Ÿé¡µæ˜ å°„åˆ°æ–°å»ºçš„ç‰©ç†é¡µä¸Šã€‚ è¿™ä¸ª Lab ä¼¼ä¹æ²¡æœ‰å¤ª tricky çš„åœ°æ–¹ï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šè‡ªé—®è‡ªç­”ä¸€ä¸‹ï¼Œåªè¦èƒ½æŠŠè¿™é‡Œçš„ç­”æ¡ˆæƒ³æ˜ç™½åŸºæœ¬å°±èƒ½å†™å¯¹ä»£ç äº†ï¼š æ€ä¹ˆè®©åªè¯»é¡µæ­£ç¡®åªè¯»ï¼Œè€Œä¸èƒ½è¢«å†™ï¼Ÿ æˆ‘ä»¬é€šè¿‡ç»™ PTE è®¾ç½®ä¸€ä¸ª COW ä½æ¥åˆ¤æ–­æ˜¯å¦æ˜¯åªè¯». COW ä¸º 1 è¡¨ç¤ºè¿™ä¸ª PTE åŸæœ¬åº”è¯¥æ˜¯å¯å†™çš„ï¼Œä½†ç°åœ¨è¢«ä¸´æ—¶æ ‡è®°ä¸ºåªè¯»ï¼Œå› ä¸ºå¯¹åº”çš„ç‰©ç†é¡µæ­£åœ¨è¢«å¤šä¸ªè¿›ç¨‹å…±äº«ã€‚ ä»€ä¹ˆæ—¶å€™æ–°å»ºç‰©ç†é¡µï¼Ÿæˆ‘ä»¬ä¼šä¸ä¼šå¤šå»ºäº†ä¸å¿…è¦çš„ç‰©ç†é¡µï¼Ÿ æˆ‘ä»¬ç»´æŠ¤å¯¹æ¯ä¸ªç‰©ç†é¡µçš„å¼•ç”¨è®¡æ•°ï¼Œå½“å¼•ç”¨è®¡æ•°ä¸º 1 æ—¶å°±æŠŠ COW é‡è®¾ä¸º 0ï¼ˆå› ä¸ºè¿™ä¸ªç‰©ç†é¡µä¸å†è¢«å¤šä¸ªè¿›ç¨‹å…±äº«ï¼‰ï¼ŒæŠŠ W ä½é‡æ–°è®¾ä¸º 1. ä»€ä¹ˆæ—¶å€™é‡Šæ”¾ç‰©ç†é¡µï¼Ÿ è°ƒç”¨ kfree æ—¶ï¼Œå¦‚æœå¼•ç”¨è®¡æ•°å¤§äº 1ï¼Œå°†å¼•ç”¨è®¡æ•° -1 ç„¶åä¸åŠ¨ï¼›å¦‚æœå¼•ç”¨è®¡æ•° == 1ï¼Œé‡Šæ”¾ç‰©ç†é¡µã€‚ ç„¶åå°±ä¸Šä»£ç å§ã€‚ ç‰©ç†å†…å­˜å±‚çš„åŸºå»ºä»£ç é¦–å…ˆåœ¨ kalloc.c é‡Œæ–°å»ºä¸€ä¸ªæ•°æ®ç»“æ„ï¼š struct &#123; struct spinlock lock; int refcnt[PHYSTOP / PGSIZE]; &#125; kref; è¿™é‡Œæœ‰é”æ˜¯å› ä¸ºæˆ‘ä»¬ä¸å¸Œæœ›å¤šä¸ªè¿›ç¨‹åŒæ—¶è¯»å†™ refcnt. æˆ‘ä»¬è¦åœ¨ kinit é‡Œåˆå§‹åŒ–é”ï¼š void kinit() &#123; initlock(&amp;kmem.lock, \"kmem\"); initlock(&amp;kref.lock, \"kref\"); freerange(end, (void *)PHYSTOP); &#125; ç„¶åæˆ‘ä»¬æä¾›ä¸‰ä¸ªæ¥å£ï¼š void kaddref(uint64 pa) &#123; acquire(&amp;kref.lock); kref.refcnt[pa / PGSIZE] += 1; release(&amp;kref.lock); &#125; void kdecref(uint64 pa) &#123; acquire(&amp;kref.lock); if (kref.refcnt[pa / PGSIZE] > 0) &#123; kref.refcnt[pa / PGSIZE] -= 1; &#125; release(&amp;kref.lock); &#125; int kgetref(uint64 pa) &#123; int ref; acquire(&amp;kref.lock); ref = kref.refcnt[pa / PGSIZE]; release(&amp;kref.lock); return ref; &#125; ä¹‹åå°±èƒ½ä¿®æ”¹ kfree å’Œ kalloc äº†ï¼Œè¿™é‡Œæˆ‘æä¾›çš„ kfree æ˜¯æœ‰å¹¶å‘é£é™©çš„ï¼Œå…·ä½“å¯ä»¥çœ‹æ³¨é‡Šï¼š void kfree(void *pa) &#123; struct run *r; if (((uint64)pa % PGSIZE) != 0 || (char *)pa &lt; end || (uint64)pa >= PHYSTOP) panic(\"kfree\"); // è¿™é‡Œæœ‰æ½œåœ¨çš„å¹¶å‘é£é™©, å¦‚æœå¤šä¸ªå…±äº«äº†ç‰©ç†é¡µçš„è¿›ç¨‹åŒæ—¶ kfree è¿™ä¸ªç‰©ç†é¡µ, // é‚£ä¹ˆ if (kgetref((uint64)pa) == 0) ä¸‹çš„è¯­å¥å°±æœ‰å¯èƒ½è¢«å¤šä¸ªè¿›ç¨‹è¿›å…¥. // æƒ³ä¿®æ­£ä¹Ÿä¸éš¾, ä¸è°ƒç”¨å‡½æ•°è€Œæ˜¯æ‰‹åŠ¨è¯·æ±‚é”, åœ¨å’Œ refcnt äº¤äº’å®Œåé‡Šæ”¾é”å°±è¡Œ. // ä¸è¿‡ä»‹äºæµ‹è¯•ä»£ç å·²ç»è¿‡äº†, æˆ‘ä»¬å°±ä¸æ”¹åŠ¨äº† kdecref((uint64)pa); // Free physical memory only when no other reference exists if (kgetref((uint64)pa) == 0) &#123; // Fill with junk to catch dangling refs. memset(pa, 1, PGSIZE); r = (struct run *)pa; acquire(&amp;kmem.lock); r->next = kmem.freelist; kmem.freelist = r; release(&amp;kmem.lock); &#125; &#125; void *kalloc(void) &#123; struct run *r; acquire(&amp;kmem.lock); r = kmem.freelist; if (r) kmem.freelist = r->next; release(&amp;kmem.lock); if (r) kaddref((uint64)r); if (r) memset((char *)r, 5, PGSIZE); // fill with junk return (void *)r; &#125; COW ç­–ç•¥å®ç°ç„¶åæˆ‘ä»¬çœ‹å‘ trap.cï¼Œåœ¨ usertrap é‡ŒåŠ å…¥é¡µé”™è¯¯çš„åˆ†æ”¯ï¼š if (r_scause() == 8) &#123; // ... &#125; else if ((which_dev = devintr()) != 0) &#123; // ... &#125; // è¿™é‡Œæ˜¯åŠ å…¥çš„åˆ†æ”¯ else if ((r_scause() == 15) &amp;&amp; writefault(p->pagetable, r_stval()) != 0) &#123; // copy on write &#125; else &#123; // ... &#125; æ¥ç€æˆ‘ä»¬åˆ° vm.c é‡Œå®ç° writefaultï¼š // return 0 if error, and physical address if successful. uint64 writefault(pagetable_t pagetable, uint64 va) &#123; pte_t *pte; uint64 pa; uint flags; int refcnt; struct proc *p = myproc(); if (va >= p->sz) &#123; return 0; &#125; va = PGROUNDDOWN(va); pte = walk(pagetable, va, 0); if (pte == 0) return 0; flags = PTE_FLAGS(*pte); if (!(flags &amp; PTE_COW)) &#123; // read-only page return 0; &#125; pa = PTE2PA(*pte); if ((refcnt = kgetref(pa)) == 0) &#123; // no process ref this page return 0; &#125; else if (refcnt == 1) &#123; // only one process ref this page, change it to a regular writeable page *pte &amp;= (~PTE_COW); *pte |= (PTE_W); return pa; &#125; else &#123; // copy on write char *mem; if ((mem = kalloc()) == 0) &#123; return 0; &#125; memmove(mem, (char *)pa, PGSIZE); *pte &amp;= (~PTE_V); // make mappages work if (mappages(pagetable, va, PGSIZE, (uint64)mem, flags) != 0) &#123; kfree(mem); return 0; &#125; *pte &amp;= (~PTE_COW); *pte |= (PTE_W); kdecref(pa); return pa; &#125; &#125; ç„¶ååœ¨ uvmcopy é‡ŒåŠ å…¥æŠŠå¤šä¸ªè™šæ‹Ÿå†…å­˜æ˜ å°„åˆ°ç›¸åŒç‰©ç†å†…å­˜çš„æœºåˆ¶ï¼š int uvmcopy(pagetable_t old, pagetable_t new, uint64 sz) &#123; pte_t *pte; uint64 pa, i; uint flags; for (i = 0; i &lt; sz; i += PGSIZE) &#123; if ((pte = walk(old, i, 0)) == 0) panic(\"uvmcopy: pte should exist\"); if ((*pte &amp; PTE_V) == 0) panic(\"uvmcopy: page not present\"); pa = PTE2PA(*pte); flags = PTE_FLAGS(*pte); if (mappages(new, i, PGSIZE, (uint64)pa, flags) != 0) &#123; goto err; &#125; if (flags &amp; PTE_W) &#123; pte_t *new_pte = walk(new, i, 0); *pte &amp;= (~PTE_W); *new_pte &amp;= (~PTE_W); *pte |= (PTE_COW); *new_pte |= (PTE_COW); &#125; kaddref(pa); &#125; return 0; err: uvmunmap(new, 0, i / PGSIZE, 1); return -1; &#125; æœ€åæ”¹æ”¹ copyout å°±å¯ä»¥ä¸‹ç­äº†ï¼š int copyout(pagetable_t pagetable, uint64 dstva, char *src, uint64 len) &#123; uint64 n, va0, pa0; pte_t *pte; while (len > 0) &#123; va0 = PGROUNDDOWN(dstva); if (va0 >= MAXVA) return -1; pte = walk(pagetable, va0, 0); if (pte == 0 || (*pte &amp; PTE_V) == 0 || (*pte &amp; PTE_U) == 0) return -1; if ((*pte &amp; PTE_W) == 0) &#123; if ((*pte &amp; PTE_COW) &amp;&amp; writefault(pagetable, va0) != 0) &#123; // copy on write &#125; else &#123; return -1; &#125; &#125; pa0 = PTE2PA(*pte); n = PGSIZE - (dstva - va0); if (n > len) n = len; memmove((void *)(pa0 + (dstva - va0)), src, n); len -= n; src += n; dstva = va0 + PGSIZE; &#125; return 0; &#125; ç­‰ç­‰ï¼Œå…ˆåˆ«æ€¥ç€ä¸‹ç­ï¼Œcopyout æ˜¯åšä»€ä¹ˆçš„ï¼Ÿä¸ºä»€ä¹ˆå®ƒçœ‹èµ·æ¥ç‹¬æ ‘ä¸€å¸œï¼Œè¦æˆ‘ä»¬æ‰‹åŠ¨è°ƒç”¨å¤„ç†å†™æ•…éšœçš„å‡½æ•°ï¼Œè€Œä¸æ˜¯è‡ªåŠ¨è§¦å‘å†™æ•…éšœç„¶åè‡ªåŠ¨è¢«å¤„ç†ï¼Ÿ çœ‹çœ‹ä»£ç å¯ä»¥å‘ç°ï¼Œå®ƒæ²¡æœ‰é€šè¿‡ç”¨æˆ·é¡µè¡¨æ¥â€œå†™â€å†…å­˜ï¼Œè€Œæ˜¯é€šè¿‡ç”¨æˆ·é¡µè¡¨æ‹¿åˆ°ç‰©ç†åœ°å€ï¼Œå†é€šè¿‡å†…æ ¸é¡µè¡¨å†™å†…å­˜ã€‚åœ¨è¿™é‡Œï¼Œç¡¬ä»¶åªæ£€æŸ¥å†…æ ¸é¡µè¡¨çš„æƒé™ï¼Œè€Œä¸æ£€æŸ¥ç”¨æˆ·é¡µè¡¨ PTE çš„ PTE_W/COWï¼Œå› æ­¤è‡ªç„¶ä¸ä¼šè§¦å‘å†™æ•…éšœã€‚ æ€»ä¹‹å°±ä¸‹ç­äº†ï¼Œç„¶åæ”¾å¼ å›¾å›¾å§","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"MIT-6.S081","slug":"å…¬å¼€è¯¾/MIT-6-S081","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/"},{"name":"Labs","slug":"å…¬å¼€è¯¾/MIT-6-S081/Labs","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/Labs/"}],"tags":[]},{"title":"Lab 4 Traps","slug":"learning/open-course/MIT-6.S081/Labs/lab4-traps","date":"2025-10-30T14:28:22.000Z","updated":"2025-10-30T14:38:20.127Z","comments":true,"path":"wiki/learning/open-course/MIT-6.S081/Labs/lab4-traps/","permalink":"http://rinevard.github.io/wiki/learning/open-course/MIT-6.S081/Labs/lab4-traps/","excerpt":"","text":"RISC-V assemblyåœ¨ lab å¼€å§‹æ—¶ï¼Œæˆ‘ä»¬è¦ç®€å•å›ç­”ä¸€äº›é—®é¢˜ã€‚è¿™é‡Œåªç®€å•èŠèŠæœ€åä¸¤é“ï¼š ä¸‹é¢çš„ä»£ç ä¼šæ‰“å°ä»€ä¹ˆï¼Ÿ unsigned int i = 0x00646c72; printf(\"H%x Wo%s\", 57616, (char *) &amp;i); 57616 è½¬æ¢åˆ°åå…­è¿›åˆ¶æ˜¯ E110ï¼Œæ‰€ä»¥ç©ºæ ¼å‰æ‰“å°çš„æ˜¯ HE110. RISC-V ä½¿ç”¨å°ç«¯æ³•ï¼Œæ‰€ä»¥ i åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ˜¯ 72 6c 64 00ï¼Œæ‰€ä»¥ç©ºæ ¼åæ‰“å°çš„æ˜¯ rld. æ€»ä¹‹æˆ‘ä»¬æ‰“å°äº† HE110, World!ï¼ˆä»¥åå’±å°±ç”¨è¿™ä¸ªå»æ°´è´´ ä¸‹é¢çš„ä»£ç åœ¨ â€œy=â€ åä¼šæ‰“å°ä»€ä¹ˆï¼Ÿ printf(\"x=%d y=%d\", 3); æˆ‘ä»¬æ²¡æœ‰ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šæŠŠå¯„å­˜å™¨ a2 é‡Œçš„ä¸œè¥¿å½“ä½œ int æ¥æ‰“å°ã€‚ Backtraceè¿™é‡Œè¦æ±‚æˆ‘ä»¬å®ç°ä¸€ä¸ª backtrace å‡½æ•°ï¼Œæ‰“å°å‡ºå½“å‰è°ƒç”¨æ ˆã€‚ è§£æ³•æˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸€ä¸‹ xv6 çš„æ ˆç»“æ„ï¼š . . +-&gt; . | +-----------------+ | | | return address | | | | previous fp ------+ | | saved registers | | | local variables | | | ... | &lt;-+ | +-----------------+ | | | return address | | +------ previous fp | | | saved registers | | | local variables | | +-&gt; | ... | | | +-----------------+ | | | return address | | | | previous fp ------+ | | saved registers | | | local variables | | | ... | &lt;-+ | +-----------------+ | | | return address | | +------ previous fp | | | saved registers | | | local variables | | $fp --&gt; | ... | | +-----------------+ | | return address | | | previous fp ------+ | saved registers | $sp --&gt; | local variables | +-----------------+ å¯ä»¥æ¦‚æ‹¬ç®—æ³•æµç¨‹å¦‚ä¸‹ï¼š æ‰¾åˆ°å½“å‰ stack frame çš„ fpï¼Œè¿™åœ¨åˆå§‹åŒ–æ—¶å°±æ˜¯æ‰¾åˆ°å¯„å­˜å™¨ s0 é‡Œå­˜å‚¨çš„æŒ‡é’ˆã€‚ æ‰¾åˆ°å½“å‰ stack frame çš„ previous fpï¼Œåˆ¤æ–­ previous fp å’Œå½“å‰ fp æ˜¯å¦åœ¨ä¸€ä¸ª page å†… å¦‚æœåœ¨ï¼Œç”¨ %p æ‰“å°è¿™ä¸ª frame å­˜å‚¨çš„è·³è½¬å€¼ï¼Œç„¶åç»§ç»­å¾ªç¯ å¦‚æœä¸åœ¨å°±ç»“æŸå¾ªç¯ æ€»ä¹‹ä»£ç å¦‚ä¸‹ï¼š void backtrace(void) &#123; uint64 fp = r_fp(); printf(\"backtrace:\\n\"); for (uint64 cur_fp = fp; PGROUNDDOWN(cur_fp) == PGROUNDDOWN(fp); cur_fp = *(uint64 *)(cur_fp - 16)) &#123; uint64 ret_addr = *(uint64 *)(cur_fp - 8); printf(\"%p\\n\", (void *)ret_addr); &#125; &#125; å’Œ CSAPP ä»‹ç»çš„æ ˆç»“æ„çš„å¯¹æ¯”æˆ‘ä»¬ä¼šæ³¨æ„åˆ° xv6 çš„æ ˆç»“æ„å’Œ CSAPP é‡Œä»‹ç»çš„ç•¥æœ‰å·®å¼‚ï¼Œä¸»è¦æ˜¯ CSAPP çš„æ ˆå¸§ä¸åŒ…å« previous fpã€‚ä¸‹é¢çš„æ˜¯ CSAPP ä»‹ç»çš„æ ˆç»“æ„ é«˜åœ°å€ | å‚æ•°7 | | å‚æ•°8 | | ... | â† è°ƒç”¨å‰push | è¿”å›åœ°å€ | â† callæŒ‡ä»¤è‡ªåŠ¨push | ä¿å­˜çš„å¯„å­˜å™¨å€¼ | â† åˆšè¿›å…¥å‡½æ•°æ—¶push | æœ¬åœ°å˜é‡1 | | æœ¬åœ°å˜é‡2 | | ... | â† å½“å‰rspæŒ‡å‘è¿™é‡Œ ä½åœ°å€ ä¸‹é¢æˆ‘ä»¬æ¥ç¼–è¯‘ CSAPP ä¹¦ä¸­çš„ä¸€æ®µä»£ç ï¼š long caller() &#123; long arg1 = 534; long arg2 = 1057; long sum = swap_add(&amp;arg1, &amp;arg2); long diff = arg1 - arg2; return sum * diff; &#125; è¿™é‡Œæ˜¯ CSAPP ä¹¦ä¸Šç»™å‡ºçš„ç¼–è¯‘ç»“æœï¼š caller: subq $16, %rsp ; Allocate 16 bytes for stack frame movq $534, (%rsp) ; Store 534 in arg1 movq $1057, 8(%rsp) ; Store 1057 in arg2 leaq 8(%rsp), %rsi ; Compute &amp;arg2 as second argument movq %rsp, %rdi ; Compute &amp;arg1 as first argument call swap_add ; Call swap_add(&amp;arg1, &amp;arg2) movq (%rsp), %rdx ; Get arg1 subq 8(%rsp), %rdx ; Compute diff = arg1 - arg2 imulq %rdx, %rax ; Compute sum * diff addq $16, %rsp ; Deallocate stack frame ret ; Return è¿™é‡Œåˆ™æ˜¯åœ¨ xv6 é‡Œå¾—åˆ°çš„ç¼–è¯‘ç»“æœï¼š 0000000000000034 &lt;caller&gt;: long caller() 34: 1141 addi sp,sp,-16 36: e422 sd s0,8(sp) 38: 0800 addi s0,sp,16 3a: 000cb537 lui a0,0xcb 3e: 25d50513 addi a0,a0,605 # cb25d &lt;base+0xca24d&gt; 42: 6422 ld s0,8(sp) 44: 0141 addi sp,sp,16 46: 8082 ret å¯ä»¥æ³¨æ„åˆ° CSAPP åªæ˜¯æŠŠå±€éƒ¨å˜é‡ arg1 å’Œ arg2 å­˜å‚¨åœ¨äº†æ ˆä¸­ï¼Œè€Œ xv6 çš„ sd s0,8(sp) æŠŠè°ƒç”¨è€…çš„æ ˆå¸§æŒ‡é’ˆå‹å…¥äº†æ ˆä¸­ã€‚ äº§ç”Ÿè¿™ç§å·®å¼‚çš„åŸå› æ˜¯ç¼–è¯‘å™¨çš„ä¼˜åŒ–ï¼ŒCSAPP é‡Œçš„ç¼–è¯‘å™¨è®¤ä¸ºé€šè¿‡ subq $16, %rsp å’Œ addq $16, %rsp å°±èƒ½å®Œæˆè¿™ä¸ªå‡½æ•°çš„å·¥ä½œï¼Œæ‰€ä»¥æ²¡æœ‰å­˜å‚¨æ ˆå¸§æŒ‡é’ˆï¼›xv6 åˆ™ä¸ºäº†æ–¹ä¾¿æ•™å­¦ï¼ŒåŒ…å«äº†æ ˆå¸§æŒ‡é’ˆã€‚ Alarmè¿™é‡Œæˆ‘ä»¬è¦å®ç°ä¸€ä¸ªå«åš sigalarm(interval, handler) çš„ç³»ç»Ÿè°ƒç”¨ï¼Œå®ƒä¼šæ¯éš” interval ä¸ª ticks è°ƒç”¨ä¸€æ¬¡ handler. æ¯ä¸ª tick éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªä¸­æ–­ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯æ¯ä¸­æ–­è‹¥å¹²æ¬¡è°ƒç”¨ä¸€ä¸‹ handler. æˆ‘ä»¬è¿˜éœ€è¦å®ç° sigreturnï¼Œå®ƒæ˜¯ä¸€ä¸ªè¾…åŠ© sigalarm æ­£ç¡®å·¥ä½œçš„ç³»ç»Ÿè°ƒç”¨ã€‚æˆ‘ä»¬æœ‰è¿™æ ·çš„ promiseâ€”â€”ç”¨æˆ·åœ¨è°ƒç”¨ sigalram æ—¶æä¾›çš„ handler å‡½æ•°å¿…é¡»åœ¨ç»“å°¾è°ƒç”¨ sigreturnã€‚æ€»ä¹‹ï¼Œsigreturn çš„å·¥ä½œä¸»è¦æ˜¯æŠŠç”¨æˆ·è¿›ç¨‹çŠ¶æ€æ¢å¤åˆ°è¢«ä¸­æ–­æ—¶çš„çŠ¶æ€ã€‚ å¼€å·¥ï¼æˆ‘ä»¬å¯ä»¥æŒ‰ä¸‹é¢çš„æµç¨‹å®Œæˆä»»åŠ¡ï¼š åœ¨å¼€å§‹ä¹‹å‰ï¼š åœ¨ usys.pl ç­‰åœ°æ–¹åšä¸€äº›åŸºå»ºæ¥æŠŠä¸¤ä¸ªç³»ç»Ÿè°ƒç”¨åŠ å…¥åˆ°ç³»ç»Ÿé‡Œ æ¯éš”è‹¥å¹² ticks è°ƒç”¨ä¸€æ¬¡ handlerï¼š åœ¨ proc.h é‡ŒåŠ å…¥å­˜å‚¨ intervalã€handler ä»¥åŠè·ç¦»ä¸Šä¸€æ¬¡è°ƒç”¨ handler è¿‡å»çš„ ticks çš„å­—æ®µ åœ¨ sysproc.c é‡Œå®ç° sys_sigalarmï¼Œå®ƒè®°å½•å¹¶å­˜å‚¨ç”¨æˆ·ä¼ è¿›æ¥çš„ interval å’Œ handler åœ¨ trap.c çš„ usertrap é‡ŒåŠ å…¥å¯¹ handler çš„è°ƒç”¨ã€‚è¿˜è®°å¾—å—ï¼Œå½“æ‰§è¡Œ SERT æ—¶ï¼Œç¨‹åºè®¡æ•°å™¨ pc è¢«è®¾ç½®ä¸ºå­˜å‚¨åœ¨ sepc å¯„å­˜å™¨ä¸­çš„å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä¿®æ”¹ p-&gt;trapframe-&gt;epc. æŠŠç”¨æˆ·è¿›ç¨‹çŠ¶æ€æ¢å¤åˆ°è¢«ä¸­æ–­æ—¶çš„çŠ¶æ€ï¼š æˆ‘ä»¬éœ€è¦ä¿å­˜çš„æ˜¯ç”¨æˆ·ä¸­æ–­æ—¶çš„ struct trapframe. æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ proc.h é‡Œæ–°å¢ struct trapframe alarm_tf å­—æ®µï¼Œåœ¨ handler è¢«è°ƒç”¨æ—¶æŠŠ p-&gt;trapframe å¤åˆ¶åˆ° alarm_tfï¼Œå¹¶åœ¨ sys_sigreturn è¢«è°ƒç”¨æ—¶æŠŠ alarm_tf å¤åˆ¶å› p-&gt;trapframe. æˆ‘ä»¬å°±ç›´æ¥æ”¾æœ€ç»ˆä»£ç äº†ã€‚ é¦–å…ˆåœ¨ proc.h çš„ struct proc é‡Œæ–°å¢è¿™äº›å­—æ®µï¼š int alarm_freq; // How many ticks to call alarm_handler once uint64 alarm_handler; // Handler's user virtual address int tick_from_last; // How many ticks have passed since the last call int is_alarming; struct trapframe alarm_tf; ç„¶ååœ¨ sys_proc.c é‡ŒæŠŠç”¨æˆ·ä¼ å…¥çš„ interval å’Œ handler ä¿å­˜ä¸‹æ¥ï¼Œå¹¶åˆå§‹åŒ–ä¸€äº›å’Œè°ƒç”¨ handler ç›¸å…³çš„å˜é‡ï¼š uint64 sys_sigalarm(void) &#123; int ticks; uint64 handler; argint(0, &amp;ticks); argaddr(1, &amp;handler); myproc()->alarm_freq = ticks; myproc()->alarm_handler = handler; myproc()->tick_from_last = 0; myproc()->is_alarming = 0; return 0; &#125; ä¹‹åä¿®æ”¹ trap.c å®Œæˆå¯¹ handler çš„è°ƒç”¨ä»¥åŠå¯¹ç”¨æˆ·è¿›ç¨‹çŠ¶æ€çš„ä¿å­˜ï¼š if (which_dev == 2) &#123; if (p->alarm_freq != 0) &#123; if (!p->is_alarming &amp;&amp; p->tick_from_last >= p->alarm_freq &amp;&amp; p->tick_from_last % p->alarm_freq == 0) &#123; p->is_alarming = 1; memmove(&amp;p->alarm_tf, p->trapframe, sizeof(*p->trapframe)); p->trapframe->epc = p->alarm_handler; p->tick_from_last = 0; &#125; else &#123; p->tick_from_last += 1; &#125; &#125; yield(); &#125; æœ€ååœ¨è¿”å›æ—¶é‡ç½®ç”¨æˆ·è¿›ç¨‹çŠ¶æ€ï¼š uint64 sys_sigreturn(void) &#123; struct proc *p = myproc(); memmove(p->trapframe, &amp;p->alarm_tf, sizeof(*p->trapframe)); p->is_alarming = 0; return p->alarm_tf.a0; &#125; ä¸€äº›å°æƒ³æ³•ä¸ºä»€ä¹ˆè¯´â€œPrevent re-entrant calls to the handlerâ€”â€”if a handler hasnâ€™t returned yet, the kernel shouldnâ€™t call it again. test2 tests this.â€ï¼Œå³ä¸èƒ½åœ¨ä¸Šæ¬¡å¯¹ handler çš„è°ƒç”¨å®Œæˆå‰è¿›è¡Œä¸‹æ¬¡è°ƒç”¨ï¼Ÿæˆ‘çŒœæ˜¯å› ä¸ºæˆ‘ä»¬ä¼šä¿å­˜è°ƒç”¨å‰çš„ç”¨æˆ·è¿›ç¨‹çŠ¶æ€ï¼Œè€Œåœ¨ä¸Šæ¬¡ handler å®Œæˆå‰å†æ¬¡è°ƒç”¨ handler å°±ä¼šä¿å­˜ä¸Šæ¬¡ handler æ­£åœ¨æ‰§è¡Œæ—¶çš„ç”¨æˆ·è¿›ç¨‹çŠ¶æ€ï¼Œè¿™ä¼šè¦†ç›–æœ€å¼€å§‹çš„ç”¨æˆ·è¿›ç¨‹çŠ¶æ€ã€‚ å†è¯´å¥é¢˜å¤–è¯ï¼Œæ„Ÿè§‰ Page Tables çš„ hard çš„éš¾åº¦æ¯”è¿™ä¸ªéš¾ä¸å°‘â€¦â€¦æœç„¶ All hards are hard, but some hards are harder than othersğŸ« ğŸ« ","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"MIT-6.S081","slug":"å…¬å¼€è¯¾/MIT-6-S081","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/"},{"name":"Labs","slug":"å…¬å¼€è¯¾/MIT-6-S081/Labs","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/Labs/"}],"tags":[]},{"title":"Lab 3 Page Tables","slug":"learning/open-course/MIT-6.S081/Labs/lab3-pagetable","date":"2025-10-28T08:28:22.000Z","updated":"2025-10-28T08:29:01.912Z","comments":true,"path":"wiki/learning/open-course/MIT-6.S081/Labs/lab3-pagetable/","permalink":"http://rinevard.github.io/wiki/learning/open-course/MIT-6.S081/Labs/lab3-pagetable/","excerpt":"","text":"Inspect a user-process page tableè¿™é“é¢˜è®©æˆ‘ä»¬è§£é‡Šä¸€ä¸‹ print_pgtbl çš„æ‰“å°ç»“æœï¼Œé¦–å…ˆè®©æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒæ‰“å°äº†ä»€ä¹ˆï¼š print_pgtbl starting va 0x0 pte 0x21FCD85B pa 0x87F36000 perm 0x5B va 0x1000 pte 0x21FD141B pa 0x87F45000 perm 0x1B va 0x2000 pte 0x21FD1017 pa 0x87F44000 perm 0x17 va 0x3000 pte 0x21FD4007 pa 0x87F50000 perm 0x7 va 0x4000 pte 0x21FC70D7 pa 0x87F1C000 perm 0xD7 va 0x5000 pte 0x0 pa 0x0 perm 0x0 va 0x6000 pte 0x0 pa 0x0 perm 0x0 va 0x7000 pte 0x0 pa 0x0 perm 0x0 va 0x8000 pte 0x0 pa 0x0 perm 0x0 va 0x9000 pte 0x0 pa 0x0 perm 0x0 va 0xFFFF6000 pte 0x0 pa 0x0 perm 0x0 va 0xFFFF7000 pte 0x0 pa 0x0 perm 0x0 va 0xFFFF8000 pte 0x0 pa 0x0 perm 0x0 va 0xFFFF9000 pte 0x0 pa 0x0 perm 0x0 va 0xFFFFA000 pte 0x0 pa 0x0 perm 0x0 va 0xFFFFB000 pte 0x0 pa 0x0 perm 0x0 va 0xFFFFC000 pte 0x0 pa 0x0 perm 0x0 va 0xFFFFD000 pte 0x0 pa 0x0 perm 0x0 va 0xFFFFE000 pte 0x21FC94C7 pa 0x87F25000 perm 0xC7 va 0xFFFFF000 pte 0x2000184B pa 0x80006000 perm 0x4B print_pgtbl: OK ç»“åˆ print_pgtbl çš„å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ pgtbltest éå†äº†ç”¨æˆ·è¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´å¼€å¤´å’Œæœ«å°¾çš„ä¸€äº›åœ°å€ï¼Œå¹¶æ‰“å°å‡ºå®ƒä»¬å¯¹åº”çš„ PTEã€ç‰©ç†åœ°å€ã€æƒé™ä½ã€‚è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ PTE çš„ç»“æ„ï¼š ç„¶åæˆ‘ä»¬ä»¥ va 0x4000 pte 0x21FC70D7 pa 0x87F1C000 perm 0xD7 ä¸ºä¾‹ï¼Œè§£æä¸€ä¸‹å…¶æ‰“å°çš„å†…å®¹ã€‚é¦–å…ˆæˆ‘ä»¬ä» PTE ä¸­æå–å‡º Physical Page Numberï¼ˆPPNï¼‰å’Œæƒé™ä½ï¼š &#x2F;&#x2F; æ‰“å° PPN &#x2F;&#x2F; è™šæ‹Ÿåœ°å€çš„æœ«å°¾ 12 ä½æ˜¯ 0, æ‰€ä»¥ç‰©ç†åœ°å€åç§»é‡ä¸º 0 &#x2F;&#x2F; ç‰©ç†åœ°å€ä¸º ((pte &gt;&gt; 10) &lt;&lt; 12) + 0 å³ 0x87f1c000 (gdb) p &#x2F;x (0x21FC70D7 &gt;&gt; 10) $17 &#x3D; 0x87f1c &#x2F;&#x2F; æ„é€ ä¸€ä¸ªæœ«å°¾ 10 ä½ä¸º 1 çš„é‡, æ–¹ä¾¿åç»­å–å‡ºæƒé™ä½ (gdb) set $mask &#x3D; ((1 &lt;&lt; 10) - 1) (gdb) p &#x2F;t $mask $18 &#x3D; 1111111111 &#x2F;&#x2F; åˆ†åˆ«ç”¨äºŒè¿›åˆ¶å’Œåå…­è¿›åˆ¶æ‰“å°æƒé™ä½ (gdb) p &#x2F;t (0x21FC70D7 &amp; $mask) $19 &#x3D; 11010111 (gdb) p &#x2F;x (0x21FC70D7 &amp; $mask) $20 &#x3D; 0xd7 æ£€éªŒå¯çŸ¥å’Œ print_pgtbl çš„æ‰“å°ç»“æœä¸€è‡´ã€‚å¯¹ç…§æƒé™ä½çš„æœ«äº”ä½ 10111 å’Œ PTE çš„æœ«å°¾äº”ä½ UXWRVï¼Œå¯çŸ¥è¿™é‡Œæ˜¯ç”¨æˆ·å†…å­˜ã€ä¸å¯æ‰§è¡Œã€å¯å†™ã€å¯è¯»ã€åˆæ³•ã€‚ æˆ‘ä»¬å¯ä»¥å†æ£€æŸ¥ä¸€ä¸‹ va 0xFFFFF000 pte 0x2000184B pa 0x80006000 perm 0x4Bï¼Œä¼šå‘ç°å®ƒçš„æƒé™ä½æœ«äº”ä½æ˜¯ 01011ï¼Œè¯´æ˜è¿™é‡Œæ˜¯éç”¨æˆ·å†…å­˜ã€å¯ä»¥æ‰§è¡Œã€ä¸å¯å†™ã€å¯è¯»ã€åˆæ³•ã€‚ å¯¹ç…§ä¸‹é¢çš„ç”¨æˆ·è¿›ç¨‹è™šæ‹Ÿå†…å­˜ç©ºé—´å›¾å¯çŸ¥æˆ‘ä»¬åˆ†æçš„ç¬¬ä¸€æ®µè™šæ‹Ÿåœ°å€ 0x4000 å¤§çº¦åœ¨å¼€å¤´ä½ç½®ï¼Œç¡®å®æ˜¯ç”¨æˆ·çš„ä¸œè¥¿ï¼›è€Œåˆ†æçš„ç¬¬äºŒæ®µ 0xFFFFF000 åˆ™åœ¨æ¥è¿‘æœ«å°¾çš„ä½ç½®ï¼Œç”¨äºå­˜å‚¨ç³»ç»Ÿè°ƒç”¨ç›¸å…³çš„é™·é˜±ä»£ç ã€‚ æˆ‘ä»¬è¿˜å¯ä»¥è¿›ä¸€æ­¥æ‰“å°ä¸€ä¸‹å†…å­˜é‡Œçš„å€¼ã€‚å¯åŠ¨ gdbï¼Œç”¨ file user/_pgtbltest åŠ è½½ç¬¦å·è¡¨ï¼Œç„¶ååœ¨ main è®¾ç½®æ–­ç‚¹ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½åœ¨åŠ è½½ç”¨æˆ·é¡µè¡¨æ—¶æ‰“å°å„ä¸ªè™šæ‹Ÿåœ°å€çš„å€¼ï¼š (gdb) p *0x0 $7 &#x3D; -335146751 (gdb) p *0x1000 $8 &#x3D; 72 (gdb) p *0x5000 Cannot access memory at address 0x5000 (gdb) p *0xFFFFE000 Cannot access memory at address 0xffffe000 å¯¹ç…§æœ€å¼€å§‹çš„ print_pgtbl çš„æ‰“å°ç»“æœï¼ˆå…³æ³¨å…¶æƒé™ä½ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬èƒ½æ­£ç¡®æ‰“å° 0x0 å’Œ 0x1000 ï¼Œå®ƒä»¬æ˜¯ç”¨æˆ·å†…å­˜ã€å¯è¯»ã€åˆæ³•çš„è™šæ‹Ÿåœ°å€çš„å†…å®¹ã€‚è€Œ 0x5000 æ˜¯ä¸åˆæ³•çš„åœ°å€æ‰€ä»¥æ— æ³•æ‰“å°ï¼Œ0xFFFFE000 æ˜¯éç”¨æˆ·å†…å­˜ï¼ˆå†…æ ¸å†…å­˜ï¼‰æ‰€ä»¥æ— æ³•æ‰“å°ã€‚ Speed up system callsè¿™é“é¢˜è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç‰¹æ®Šçš„å†…å­˜é¡µå¹¶æŠŠè¿›ç¨‹ pid å­˜å‚¨åœ¨é‡Œé¢ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨è·å– pid æ—¶å°±ä¸å¿…åšç³»ç»Ÿè°ƒç”¨ getpidï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥è°ƒç”¨ ugetpidï¼Œä»è€Œæ— éœ€é™·å…¥å†…æ ¸ä»¥æé«˜æ•ˆç‡ã€‚ æç¤ºé‡Œè¯´æˆ‘ä»¬åˆ›å»ºçš„è¿™ä¸ªé¡µé¢ä¼šå’Œ trapframe æœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„â€”â€”å®ƒä»¬éƒ½åœ¨è¿›ç¨‹åˆå§‹åŒ–æ—¶è‡ªåŠ¨åˆ›å»ºï¼Œåœ¨è¿›ç¨‹é€€å‡ºæ—¶è‡ªåŠ¨é‡Šæ”¾ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥å®Œæˆä»»åŠ¡ï¼š å®šä¹‰ usyscallï¼šåœ¨ struct proc é‡Œæ·»åŠ  struct usyscall *usyscall è¿›ç¨‹åˆå§‹åŒ–æ—¶åˆ›å»ºé¡µé¢ï¼šé˜…è¯» fork çš„ä»£ç å¯ä»¥çŸ¥é“æˆ‘ä»¬è°ƒç”¨ allocproc ä»¥åˆ›å»ºè¿›ç¨‹ã€‚ åœ¨ allocproc é‡Œï¼Œæˆ‘ä»¬ç”¨ kalloc ç»™ trapframe åˆ†é…äº†ä¸€ä¸ªç‰©ç†é¡µï¼Œç„¶åè°ƒç”¨ proc_pagetable æ¥åšé¡µè¡¨æ˜ å°„ã€‚ static struct proc *allocproc(void) &#123; // ... // Allocate a trapframe page. if ((p->trapframe = (struct trapframe *)kalloc()) == 0) &#123; freeproc(p); release(&amp;p->lock); return 0; &#125; // An empty user page table. p->pagetable = proc_pagetable(p); // ... æ‰€ä»¥ç…§è‘«èŠ¦ç”»ç“¢å°±è¡Œï¼Œå…ˆåœ¨ allocproc é‡ŒåŠ å…¥ç»™ usyscall åˆ†é…ç‰©ç†é¡µçš„ä»£ç ï¼ˆè®°å¾—æŠŠ pid å­˜è¿›å»ï¼‰ï¼š // Allocate a usyscall page if ((p->usyscall = (struct usyscall *)kalloc()) == 0) &#123; freeproc(p); release(&amp;p->lock); return 0; &#125; p->usyscall->pid = p->pid; ç„¶ååœ¨ proc_pagetable åŠ å…¥é¡µè¡¨æ˜ å°„çš„ä»£ç ï¼š // map the usyscall page just below the trapframe page, for // data sharing between userspace and the kernel if (mappages(pagetable, USYSCALL, PGSIZE, (uint64)(p->usyscall), PTE_R | PTE_U) &lt; 0) &#123; uvmunmap(pagetable, TRAPFRAME, 1, 0); uvmunmap(pagetable, TRAMPOLINE, 1, 0); uvmfree(pagetable, 0); return 0; &#125; é€€å‡ºæ—¶é‡Šæ”¾ï¼šæˆ‘ä»¬çŸ¥é“è¿›ç¨‹è°ƒç”¨ exit æ¥ä¸‹ç­ï¼Œä½†å…¶å®è°ƒç”¨ exit åè¿›ç¨‹å¹¶æ²¡æœ‰ç«‹å³é”€æ¯è‡ªèº«ï¼Œè€Œæ˜¯è¿›å…¥ ZOMBIE æ€ç­‰å¾…çˆ¶è¿›ç¨‹çš„ wait æ¥å›æ”¶ã€‚å…·ä½“å¯ä»¥çœ‹çœ‹ proc.cï¼Œè¿™é‡Œä¸å¤šèµ˜è¿°ã€‚ æ€»ä¹‹çœ‹å‘ wait å‡½æ•°ï¼Œå¯ä»¥å‘ç°æˆ‘ä»¬è°ƒç”¨ freeproc æ¥é‡Šæ”¾è¿›ç¨‹ã€‚ static void freeproc(struct proc *p) &#123; if (p->trapframe) kfree((void *)p->trapframe); p->trapframe = 0; if (p->pagetable) proc_freepagetable(p->pagetable, p->sz); // ... å¯¹ç…§ä»£ç å¯¹ trapframe çš„å¤„ç†ï¼Œæˆ‘ä»¬è¦åœ¨ freeproc é‡ŒåŠ å…¥é‡Šæ”¾ç‰©ç†é¡µçš„ä»£ç ï¼š if (p->usyscall) kfree((void *)p->usyscall); p->usyscall = 0; ç„¶åä¿®æ”¹ proc_freepagetable ä»¥åˆ é™¤é¡µè¡¨æ˜ å°„ï¼š uvmunmap(pagetable, USYSCALL, 1, 0); é—²ç€ä¹Ÿæ˜¯é—²ç€ï¼Œä¸å¦‚å’Œæˆ‘ä¸€èµ·çœ‹çœ‹ uvmfree ä¸ºä»€ä¹ˆæ²¡æœ‰è‡ªåŠ¨é‡Šæ”¾ trapframe å’Œ usyscallï¼š void uvmfree(pagetable_t pagetable, uint64 sz) &#123; if (sz > 0) uvmunmap(pagetable, 0, PGROUNDUP(sz) / PGSIZE, 1); freewalk(pagetable); &#125; è¿™æ®µä»£ç è°ƒç”¨ uvmunmap æ¥é‡Šæ”¾æ‰€æœ‰åœ¨é¡µè¡¨é‡Œæœ‰è®°å½•çš„ç‰©ç†é¡µï¼Œç„¶åè°ƒç”¨ freewalk æ¥é‡Šæ”¾é¡µè¡¨è‡ªèº«ã€‚ è¿™é‡Œçš„ uvmunmap(pagetable, 0, PGROUNDUP(sz) / PGSIZE, 1) è¡¨ç¤ºé‡Šæ”¾è™šæ‹Ÿåœ°å€ä» 0 åˆ° 0 + PGROUNDUP(sz) / PGSIZE çš„å†…å®¹ï¼Œå³é‡Šæ”¾ç”¨æˆ·å†…å­˜çš„å†…å®¹ã€‚ ä½† trapframe å’Œ usyscall ä¸æ˜¯ç”¨æˆ·å†…å­˜çš„å†…å®¹ï¼Œå®ƒä»¬è¢«å­˜æ”¾åœ¨è™šæ‹Ÿåœ°å€çš„é¡¶éƒ¨ï¼ˆåˆ†åˆ«åœ¨ TRAPFRAME å’Œ USYSCALLï¼‰ï¼Œæ‰€ä»¥å®ƒä»¬æ²¡æœ‰è¢«é‡Šæ”¾ã€‚ Print a page tableå…ˆæ¥çœ‹çœ‹æ‰“å°ç»“æœå§ï¼š page table 0x0000000087f22000 ..0x0000000000000000: pte 0x0000000021fc7801 pa 0x0000000087f1e000 .. ..0x0000000000000000: pte 0x0000000021fc7401 pa 0x0000000087f1d000 .. .. ..0x0000000000000000: pte 0x0000000021fc7c5b pa 0x0000000087f1f000 .. .. ..0x0000000000001000: pte 0x0000000021fc701b pa 0x0000000087f1c000 .. .. ..0x0000000000002000: pte 0x0000000021fc6cd7 pa 0x0000000087f1b000 .. .. ..0x0000000000003000: pte 0x0000000021fc6807 pa 0x0000000087f1a000 .. .. ..0x0000000000004000: pte 0x0000000021fc64d7 pa 0x0000000087f19000 ..0xffffffffc0000000: pte 0x0000000021fc8401 pa 0x0000000087f21000 .. ..0xffffffffffe00000: pte 0x0000000021fc8001 pa 0x0000000087f20000 .. .. ..0xffffffffffffd000: pte 0x0000000021fd4c13 pa 0x0000000087f53000 .. .. ..0xffffffffffffe000: pte 0x0000000021fd00c7 pa 0x0000000087f40000 .. .. ..0xfffffffffffff000: pte 0x000000002000184b pa 0x0000000080006000 ç»“æœæ¯” 2024 çš„ä½œä¸šæ–‡æ¡£å¤šäº†ä¸€è¡Œ .. .. ..0x0000000000000000: pte 0x0000000021fc7c5b pa 0x0000000087f1f000 è¿™æ˜¯æ­£ç¡®è¡¨ç°ã€‚2024 çš„ä½œä¸šæ–‡æ¡£è¿™é‡Œå†™é”™äº†ï¼Œ2025 çš„ç‰ˆæœ¬å°±åŠ å…¥äº†è¿™è¡Œã€‚ å¦‚æç¤ºæ‰€è¨€ï¼Œè¿™ä¸ªå‡½æ•°å’Œ freewalk å¾ˆåƒï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ freewalkï¼š void freewalk(pagetable_t pagetable) &#123; // there are 2^9 = 512 PTEs in a page table. for (int i = 0; i &lt; 512; i++) &#123; pte_t pte = pagetable[i]; if ((pte &amp; PTE_V) &amp;&amp; (pte &amp; (PTE_R | PTE_W | PTE_X)) == 0) &#123; // this PTE points to a lower-level page table. uint64 child = PTE2PA(pte); freewalk((pagetable_t)child); pagetable[i] = 0; &#125; else if (pte &amp; PTE_V) &#123; panic(\"freewalk: leaf\"); &#125; &#125; kfree((void *)pagetable); &#125; å®ƒéå† L0 çº§é¡µè¡¨çš„ 512 ä¸ª PTEï¼Œå¯¹æ¯ä¸ª PTEï¼Œç”¨ PTE2PA(pte) æ‰¾åˆ°å®ƒæŒ‡å‘çš„æ¬¡çº§é¡µè¡¨çš„ç‰©ç†åœ°å€ï¼Œç„¶åé€’å½’ã€‚å®ƒå¿½ç•¥äº†å¶å­ PTEï¼Œåœ¨æ‰“å°æ—¶æˆ‘ä»¬ä¸éœ€è¦å¿½ç•¥å¶å­ã€‚ æˆ‘ä»¬å†æ¥çœ‹çœ‹æ‰“å°ç»“æœçš„å½¢å¼ .. è™šæ‹Ÿåœ°å€: pte PTEçš„å€¼ pa ç‰©ç†åœ°å€çš„å€¼ å‚è€ƒ freewalk æˆ‘ä»¬å°±èƒ½æ‹¿åˆ° PTEï¼Œè°ƒç”¨ PTE2PA å°±èƒ½å¾—åˆ° paï¼Œä½†æ€ä¹ˆè·å¾—è™šæ‹Ÿåœ°å€å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹çœ‹è™šæ‹Ÿåœ°å€çš„ç¿»è¯‘ï¼š ä»è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œå¦‚æœæŠŠ Offset ç½®é›¶ï¼Œæˆ‘ä»¬éœ€è¦ L2ã€L1ã€L0 é¡µè¡¨çš„ PTE çš„ç´¢å¼•æ¥ç¡®å®šè™šæ‹Ÿåœ°å€ã€‚ä½†æˆ‘ä»¬å½“ç„¶æœ‰åŠæ³•è·å¾—è¿™äº›ç´¢å¼•ï¼Œæˆ‘ä»¬ä¸æ˜¯åœ¨éå†é¡µè¡¨å—ï¼Œfor (int i = 0; i &lt; 512; i++) é‡Œçš„ i å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ç´¢å¼•ï¼æ‰€ä»¥å¦‚æœæˆ‘ä»¬çš„ç´¢å¼•æ˜¯ i, j, kï¼Œæˆ‘ä»¬æ‰“å°çš„è™šæ‹Ÿåœ°å€å°±æ˜¯ ((i &lt;&lt; 30) + (j &lt;&lt; 21) + (k &lt;&lt; 12)) å¤§è‡´æ€è·¯å°±æ˜¯è¿™æ ·ã€‚è¿˜æœ‰ä¸€äº›å°ç»†èŠ‚ï¼š ä½œä¸šæ–‡æ¡£é‡Œåœ¨éå† L2 å’Œ L1 çº§é¡µè¡¨æ—¶ä¹Ÿæ‰“å°äº†è™šæ‹Ÿåœ°å€ï¼Œè¿™é‡Œæ‰“å°çš„åœ°å€æ˜¯æŠŠæ¬¡çº§ç´¢å¼•å½“ä½œé›¶ç®—å‡ºçš„åœ°å€ã€‚æ¯”å¦‚å¦‚æœæˆ‘ä»¬åœ¨éå† L1 é¡µè¡¨ï¼ŒL2 é¡µè¡¨çš„ç´¢å¼•æ˜¯ iï¼ŒL1 é¡µè¡¨çš„ç´¢å¼•æ˜¯ jï¼Œæ‰“å°çš„å°±æ˜¯ ((i &lt;&lt; 30) + (j &lt;&lt; 21) + (0 &lt;&lt; 12)) ä¸ºäº†åœ¨é€’å½’æ—¶å¾—çŸ¥ä¸Šä¸€çº§é¡µè¡¨çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬åŠ å…¥äº† father_va ç”¨äºè®°å½•ä¸Šä¸€çº§çš„è™šæ‹Ÿåœ°å€ ç¬¦å·æ‹“å±•ç”¨äº†ä¸€äº› tricky çš„æ€§è´¨ï¼Œåœ¨ 255 &lt;&lt; 30 é‚£è¡Œçš„æ³¨é‡Šé‡Œå†™çš„åº”è¯¥è¿˜ç®—æ¸…æ¥š æ€»ä¹‹å¯ä»¥å†™å‡ºä¸‹é¢çš„ä»£ç ï¼š const int MAX_LEVEL = 2; void _vmprint_helper(pagetable_t pagetable, uint64 father_va, int level) &#123; // there are 2^9 = 512 PTEs in a page table. for (int i = 0; i &lt; 512; i++) &#123; pte_t pte = pagetable[i]; if (pte &amp; PTE_V) &#123; for (int i = level; i &lt;= MAX_LEVEL; i++) &#123; printf(\" ..\"); &#125; // 255 &lt;&lt; 30 is automatically sign extended to 0xffffffffc0000000 uint64 va = father_va + (i &lt;&lt; (12 + 9 * level)); printf(\"%p: pte %p pa %p\\n\", (void *)va, (void *)pte, (void *)PTE2PA(pte)); // this PTE points to a lower-level page table. if (level != 0) &#123; _vmprint_helper((pagetable_t)PTE2PA(pte), va, level - 1); &#125; &#125; &#125; &#125; void vmprint(pagetable_t pagetable) &#123; printf(\"page table %p\\n\", pagetable); _vmprint_helper(pagetable, 0, MAX_LEVEL); &#125; Use superpagesè¿™é“é¢˜è®©æˆ‘ä»¬ç»™ xv6 åŠ å…¥è¶…çº§é¡µã€‚å½“ç”¨æˆ·è¯·æ±‚ä¸€å—è¶…è¿‡ 2MB çš„å†…å­˜ï¼Œæˆ‘ä»¬å°±åˆ†é…è¶…çº§é¡µè€Œéå¤§é‡çš„å°é¡µæ¥ä¼˜åŒ–æ€§èƒ½ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æ™®é€šé¡µå’Œè¶…çº§é¡µå„è‡ªæ˜¯å¦‚ä½•ç¿»è¯‘è™šæ‹Ÿåœ°å€çš„ï¼š æ™®é€šé¡µï¼š æ™®é€šé¡µåœ¨ç¿»è¯‘æ—¶æŠŠè™šæ‹Ÿåœ°å€åˆ†æˆ L2, L1, L0, Offset å››ä¸ªéƒ¨åˆ†ã€‚å‰ä¸‰è€…ç”¨äºåœ¨ä¸åŒçº§åˆ«çš„é¡µè¡¨é‡Œåšåç§»æ‰¾åˆ°ä¸‹ä¸€ä¸ªé¡µçš„å¼€å¤´çš„ç‰©ç†åœ°å€ï¼ˆä¸€ä¸ª Page Directory ä¹Ÿæ˜¯ä¸€ä¸ªé¡µï¼‰ï¼ŒOffset åˆ™ç”¨äºè®¡ç®—æœ€ç»ˆçš„ç‰©ç†åœ°å€åç§»ã€‚ Sv39 è§„å®š PPN å®½åº¦ä¸º 44 ä½ï¼ŒOffset å®½åº¦ 12 ä½ï¼Œä¸€ä¸ªæ™®é€šé¡µçš„å¤§å°å°±æ˜¯ $2^{12}$ bytes = 4KB. åœ¨æ‰¾åˆ°äº† L0 leaf åï¼Œæˆ‘ä»¬å°±èƒ½ç”¨ (PPN &lt;&lt; 12) + Offest æ¥è®¡ç®—è™šæ‹Ÿåœ°å€å¯¹åº”çš„ç‰©ç†åœ°å€äº†ã€‚ è¶…çº§é¡µï¼š è¶…çº§é¡µåˆ™æŠŠè™šæ‹Ÿåœ°å€åˆ†æˆ L2, L1, Offset ä¸‰ä¸ªéƒ¨åˆ†ã€‚ Sv39 è§„å®šè¶…çº§é¡µçš„ Offset ä¸º 21 ä½ï¼Œè¿™æ˜¯æŠŠåŸæœ¬çš„ L0 å’Œ Offset åˆå¹¶æˆäº†ä¸€ä¸ª 21 ä½çš„ Offsetã€‚è¶…çº§é¡µå¤§å°å°±æ˜¯ $2^{21}$ bytes å³ 2MB. è¶…çº§é¡µæ˜¯ 2MB å¯¹é½çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ $56 - \\log (2097152) = 35$ ä½æ¥æè¿°ä¸€ä¸ªè¶…çº§é¡µçš„å¼€å¤´ï¼Œæ‰€ä»¥è¶…çº§é¡µå¯¹åº”çš„ L1 leaf å­˜å‚¨çš„ PPN çš„æœ«å°¾ 9 ä½ä¸º 0. è¿™é‡Œæœ‰ $2097152$ æ˜¯å› ä¸º 2MB = 2097152 bytes. åœ¨æ‰¾åˆ° L1 leaf åï¼Œæˆ‘ä»¬åŒæ ·ç”¨ (PPN &lt;&lt; 12) + Offest æ¥è®¡ç®—è™šæ‹Ÿåœ°å€å¯¹åº”çš„ç‰©ç†åœ°å€ã€‚ æµ‹è¯•ä»£ç éµå¾ªæç¤ºï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ superpg_test åšäº†ä»€ä¹ˆã€‚è¦è¯´æ˜çš„æ˜¯ï¼Œ2024 ç‰ˆæœ¬çš„æµ‹è¯•ä¸å…¨é¢è€Œä¸”æœ‰ bugâ€”â€”åœ¨ supercheck å‡½æ•°çš„æœ«å°¾çš„ for å¾ªç¯é‡Œï¼Œæ¡ä»¶åº”è¯¥æ˜¯ i &lt; 512 * PGSIZE è€Œé i &lt; 512ï¼Œåº”è¯¥æ”¹æˆä¸‹é¢è¿™æ ·ï¼š // check whether different va are mapped to different pa for (int i = 0; i &lt; 512 * PGSIZE; i += PGSIZE) &#123; *(int *)(s + i) = i; &#125; for (int i = 0; i &lt; 512 * PGSIZE; i += PGSIZE) &#123; if (*(int *)(s + i) != i) err(\"wrong value\"); &#125; æ€»ä¹‹æˆ‘ä»¬ä¸‹é¢åˆ†æ 2025 ç‰ˆæœ¬çš„æµ‹è¯•ã€‚2025 ç‰ˆæœ¬çš„æµ‹è¯•å…±åŒ…æ‹¬ supercheckã€superpg_fork å’Œ superpg_free ä¸‰ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨ supercheckã€‚supercheck åˆ¤æ–­ä» end ä¹‹åç¬¬ä¸€ä¸ªå¯¹é½è¶…çº§é¡µçš„åœ°å€å¼€å§‹æ˜¯å¦æ˜¯è¶…çº§é¡µï¼Œå…·ä½“çš„åˆ¤æ–­æ–¹æ³•å¯ä»¥å‚è€ƒä¸‹é¢çš„æ³¨é‡Šï¼š void supercheck(char *end) &#123; pte_t last_pte = 0; uint64 a = (uint64)end; uint64 s = SUPERPGROUNDUP(a); // Check that virtual address up to the next superpage boundary are mapped to PTE for (; a &lt; s; a += PGSIZE) &#123; pte_t pte = (pte_t)pgpte((void *)a); if (pte == 0) &#123; err(\"no pte\"); &#125; &#125; // Check that all virtual address in the superpage share the same valid PTE for (uint64 p = s; p &lt; s + 512 * PGSIZE; p += PGSIZE) &#123; pte_t pte = (pte_t)pgpte((void *)p); if (pte == 0) err(\"no pte\"); if ((uint64)last_pte != 0 &amp;&amp; pte != last_pte) &#123; err(\"pte different\"); &#125; if ((pte &amp; PTE_V) == 0 || (pte &amp; PTE_R) == 0 || (pte &amp; PTE_W) == 0) &#123; err(\"pte wrong\"); &#125; last_pte = pte; &#125; // Check that different va are mapped to different pa for (int i = 0; i &lt; 512 * PGSIZE; i += PGSIZE) &#123; *(int *)(s + i) = i; &#125; for (int i = 0; i &lt; 512 * PGSIZE; i += PGSIZE) &#123; if (*(int *)(s + i) != i) err(\"wrong value\"); &#125; &#125; ç„¶åæˆ‘ä»¬ç®€è¦æä¸€ä¸‹å¦å¤–ä¸¤ä¸ªå‡½æ•°çš„ä½œç”¨ï¼š superpg_fork æ£€æŸ¥è¶…çº§é¡µåœ¨ fork åæ˜¯å¦è¢«æ­£ç¡®å¤åˆ¶ä¸ºè¶…çº§é¡µã€‚ superpg_free æ£€æŸ¥ sbrk èƒ½å¦æ­£ç¡®é‡Šæ”¾æ•´ä¸ªè¶…çº§é¡µï¼Œä»¥åŠèƒ½å¦åœ¨é‡Šæ”¾è¶…çº§é¡µçš„éƒ¨åˆ†å†…å­˜æ—¶å°†è¶…çº§é¡µé€€åŒ–ä¸ºå¤šä¸ªæ™®é€šé¡µï¼ˆ2024 ç‰ˆæœ¬æ²¡æµ‹è¯•è¿™ä¸€ç‚¹ï¼Œä½†è¿™ä¸ªæ˜¯å¾ˆå€¼å¾—åšçš„åŠŸèƒ½ï¼‰ã€‚ sbrk è°ƒç”¨é“¾æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†æç”¨æˆ·åœ¨è°ƒç”¨ sbrk æ—¶å…·ä½“è°ƒç”¨äº†å“ªäº›å‡½æ•°ã€‚è¿™åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š åˆ†é…ï¼šsys_sbrk-&gt;growproc-&gt;uvmalloc -&gt; kalloc/kfree é‡Šæ”¾ï¼šsys_sbrk -&gt; growproc -&gt; uvmdealloc -&gt; uvmunmap è¦æ³¨æ„çš„æ˜¯å½“åˆ†é…å†…å­˜å‡ºé”™æ—¶ï¼Œuvmalloc ä¹Ÿä¼šè°ƒç”¨ uvmdeallocã€‚ æˆ‘ä»¬ä»æœ€åº•å±‚å‡ºå‘ï¼Œå…ˆåœ¨ kalloc.c é‡Œå®Œæˆå¯¹è¶…çº§é¡µçš„æ”¯æŒã€‚è¿™åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼š æ·»åŠ ä¸€ä¸ªè¶…çº§é¡µé“¾è¡¨ struct &#123; struct spinlock lock; struct run *superlist; struct run *freelist; &#125; kmem; åœ¨åˆå§‹åŒ–ä»£ç é‡Œåˆå§‹åŒ–è¿™ä¸ªè¶…çº§é¡µé“¾è¡¨ const int MAX_SUPER = 32; void freerange(void *pa_start, void *pa_end) &#123; char *p; p = (char *)PGROUNDUP((uint64)pa_start); int sz; int super_cnt = 0; for (; p + PGSIZE &lt;= (char *)pa_end; p += sz) &#123; if (super_cnt &lt; MAX_SUPER &amp;&amp; (uint64)p % SUPERPGSIZE == 0 &amp;&amp; p + SUPERPGSIZE &lt;= (char *)pa_end) &#123; sz = SUPERPGSIZE; superfree(p); super_cnt += 1; &#125; else &#123; sz = PGSIZE; kfree(p); &#125; &#125; &#125; æ·»åŠ  superalloc å’Œ superfree å‡½æ•°ï¼ˆç…§æŠ„ kalloc å’Œ kfreeï¼‰ï¼š void *superalloc(void) &#123; struct run *r; acquire(&amp;kmem.lock); r = kmem.superlist; if (r) kmem.superlist = r->next; release(&amp;kmem.lock); if (r) memset((char *)r, 5, SUPERPGSIZE); // fill with junk return (void *)r; &#125; void superfree(void *pa) &#123; struct run *r; if (((uint64)pa % SUPERPGSIZE) != 0 || (char *)pa &lt; end || (uint64)pa >= PHYSTOP) &#123; panic(\"superfree\"); &#125; // Fill with junk to catch dangling refs. memset(pa, 1, SUPERPGSIZE); r = (struct run *)pa; acquire(&amp;kmem.lock); r->next = kmem.superlist; kmem.superlist = r; release(&amp;kmem.lock); &#125; è‡³æ­¤ï¼Œæœ€åº•å±‚çš„å·¥ä½œå°±åšå®Œäº†ã€‚ åˆ†é…å†…å­˜å›é¡¾å†…å­˜åˆ†é…çš„è°ƒç”¨é“¾ï¼šsys_sbrk-&gt;growproc-&gt;uvmalloc -&gt; kalloc/kfreeï¼Œåœ¨å¼€å§‹ç¼–å†™ä»£ç ä¹‹å‰æˆ‘ä»¬å…ˆåˆ†æä¸€ä¸‹æ¯ä¸€å±‚çš„èŒè´£ã€‚ sys_sbrk æ˜¯ç³»ç»Ÿè°ƒç”¨ï¼Œè´Ÿè´£ç³»ç»Ÿå’Œç”¨æˆ·çš„äº¤äº’ grow_proc æ˜¯è¿›ç¨‹æŠ½è±¡çš„ä¸€ä¸ªæ¥å£ï¼Œè´Ÿè´£ç®¡ç†è¿›ç¨‹çŠ¶æ€ uvmalloc æ˜¯è™šæ‹Ÿå†…å­˜å±‚ï¼Œè´Ÿè´£ç®¡ç†è¿›ç¨‹çœ¼ä¸­çš„â€œå†…å­˜â€ï¼Œç®¡ç†è™šæ‹Ÿåˆ°ç‰©ç†çš„æ˜ å°„ kalloc å’Œ kfree åˆ™æ˜¯ç‰©ç†å†…å­˜å±‚ï¼Œç®¡ç†ç‰©ç†å†…å­˜ æˆ‘ä»¬åœ¨è¿™é‡Œè¦ä¿®æ”¹çš„æ˜¯ uvmalloc. ç®€å•è¯»ä¸‹å®ƒåŸæœ¬çš„ä»£ç å¯ä»¥å‘ç°å®ƒä¸»è¦è°ƒç”¨çš„æ˜¯ kalloc å’Œ mappages. åœ¨è¶…çº§é¡µä¸­ï¼Œå‰è€…å¯¹åº” superallocï¼Œè€Œå¯¹åè€…æˆ‘è‡ªå·±å†™äº†ä¸€ä¸ª mapsuperpages ä½œä¸ºå¯¹åº”ã€‚ä¸ºäº†è®© mapsuperpages è·‘èµ·æ¥ï¼Œæˆ‘è¿˜å†™äº†ä¸ª l1walk å‡½æ•°ç”¨äºæ‰¾åˆ°ä¸€ä¸ªè™šæ‹Ÿåœ°å€å¯¹åº”çš„ L1 PTE. å…ˆæ¥çœ‹çœ‹ l1walkï¼š pte_t *l1walk(pagetable_t pagetable, uint64 va, int alloc) &#123; if (va >= MAXVA) panic(\"walk\"); pte_t *pte = &amp;pagetable[PX(2, va)]; if (*pte &amp; PTE_V) &#123; pagetable = (pagetable_t)PTE2PA(*pte); return &amp;pagetable[PX(1, va)]; &#125; else &#123; if (!alloc || (pagetable = (pde_t *)kalloc()) == 0) &#123; return 0; &#125; memset(pagetable, 0, PGSIZE); *pte = PA2PTE(pagetable) | PTE_V; return &amp;pagetable[PX(1, va)]; &#125; &#125; å®ƒå’Œ walk å‡½æ•°åŸºæœ¬ä¸€è‡´ï¼Œä¸è¿‡ walk æ˜¯è¿”å› leafï¼Œè€Œè¿™é‡Œçš„ l1walk è¿”å› L1 PTE. ç„¶åçœ‹çœ‹ mapsuperpagesï¼š int mapsuperpages(pagetable_t pagetable, uint64 va, uint64 size, uint64 pa, int perm) &#123; uint64 a, last; pte_t *pte; if ((va % SUPERPGSIZE) != 0) panic(\"mapsuperpages: va not aligned\"); if ((size % SUPERPGSIZE) != 0) panic(\"mapsuperpages: size not aligned\"); if (size == 0) panic(\"mapsuperpages: size\"); a = va; last = va + size - SUPERPGSIZE; for (;;) &#123; if ((pte = l1walk(pagetable, a, 1)) == 0) &#123; printf(\"mapsuperpages: l1walk failed\\n\"); return -1; &#125; if (*pte &amp; PTE_V) panic(\"mapsuperpages: remap\"); *pte = PA2PTE(pa) | perm | PTE_V | PTE_R; if (a == last) break; a += SUPERPGSIZE; pa += SUPERPGSIZE; &#125; return 0; &#125; è¿™åŸºæœ¬æ˜¯ç…§æŠ„ mappagesï¼Œåªæ˜¯æŠŠæ™®é€šé¡µæ”¹æˆäº†è¶…çº§é¡µã€‚ æœ€åçœ‹çœ‹æˆ‘ä»¬å¯¹ uvmalloc çš„ä¿®æ”¹ã€‚uvmalloc ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯ç”¨ kalloc/superalloc è¯·æ±‚ç‰©ç†å†…å­˜ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯ç”¨ mappages/mapsuperpages æŠŠè™šæ‹Ÿå†…å­˜æ˜ å°„åˆ°ç‰©ç†å†…å­˜ä¸Šã€‚ æˆ‘ä»¬åœ¨æ³¨é‡Šé‡Œæ ‡å‡ºäº†ä¿®æ”¹çš„åœ°æ–¹ï¼Œä¿®æ”¹ 1 å¯¹åº”è¯·æ±‚ç‰©ç†å†…å­˜çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œä¿®æ”¹ 2 å¯¹åº”åšæ˜ å°„çš„ç¬¬äºŒéƒ¨åˆ†ï¼š uint64 uvmalloc(pagetable_t pagetable, uint64 oldsz, uint64 newsz, int xperm) &#123; char *mem; uint64 a; int sz; if (newsz &lt; oldsz) return oldsz; oldsz = PGROUNDUP(oldsz); for (a = oldsz; a &lt; newsz; a += sz) &#123; // ä¿®æ”¹1ä»è¿™é‡Œå¼€å§‹ if (a % SUPERPGSIZE == 0 &amp;&amp; a + SUPERPGSIZE &lt;= newsz) &#123; sz = SUPERPGSIZE; mem = superalloc(); // If no superpages, use regular pages if (mem == 0) &#123; sz = PGSIZE; mem = kalloc(); &#125; &#125; else &#123; sz = PGSIZE; mem = kalloc(); &#125; // ä¿®æ”¹1åˆ°è¿™é‡Œç»“æŸ if (mem == 0) &#123; uvmdealloc(pagetable, a, oldsz); return 0; &#125; #ifndef LAB_SYSCALL memset(mem, 0, sz); #endif // ä¿®æ”¹2ä»è¿™é‡Œå¼€å§‹ if (sz == PGSIZE) &#123; if (mappages(pagetable, a, sz, (uint64)mem, PTE_R | PTE_U | xperm) != 0) &#123; kfree(mem); uvmdealloc(pagetable, a, oldsz); &#125; &#125; else &#123; if (mapsuperpages(pagetable, a, sz, (uint64)mem, PTE_R | PTE_U | xperm) != 0) &#123; superfree(mem); uvmdealloc(pagetable, a, oldsz); &#125; &#125; // ä¿®æ”¹2åˆ°è¿™é‡Œç»“æŸ &#125; return newsz; &#125; é‡Šæ”¾å†…å­˜åœ¨å®Œæˆäº†åˆ†é…å†…å­˜çš„å·¥ä½œåï¼Œæˆ‘ä»¬å°±èƒ½å†™é‡Šæ”¾å†…å­˜ç›¸å…³çš„ä»£ç äº†ã€‚ å›é¡¾è°ƒç”¨é“¾ï¼šsys_sbrk -&gt; growproc -&gt; uvmdealloc -&gt; uvmunmapï¼Œæˆ‘ä»¬è¦ä¿®æ”¹ uvmunmap. è¿™éƒ¨åˆ†ä»£ç æ¯”è¾ƒæ£˜æ‰‹ã€‚å®ƒåŸæœ¬åªæ˜¯åœ¨æŒ‰éƒ¨å°±ç­åœ°åˆ æ‰é¡µè¡¨é‡Œä» va å‡ºå‘çš„ npages ä¸ªç‰©ç†é¡µçš„æ˜ å°„ï¼Œå¹¶é€‰æ‹©æ€§é‡Šæ”¾ç‰©ç†å†…å­˜ï¼Œä½†åœ¨åŠ å…¥è¶…çº§é¡µåå®ƒéœ€è¦å®Œæˆè¿™äº›å·¥ä½œï¼š è®© uint64 a ä» va å‡ºå‘ï¼Œå¦‚æœé‡åˆ°äº†æ™®é€šé¡µï¼Œèµ°æ™®é€šé¡µçš„ unmap æµç¨‹ï¼Œç„¶å a += PGSIZE å¦‚æœé‡åˆ°äº†è¶…çº§é¡µï¼Œåˆ¤æ–­ a æ˜¯è¶…çº§é¡µçš„å¼€å¤´è¿˜æ˜¯è¶…çº§é¡µçš„ä¸­é—´ å¦‚æœæ˜¯è¶…çº§é¡µçš„å¼€å¤´ï¼Œèµ°è¶…çº§é¡µçš„ unmap æµç¨‹ï¼ˆå’Œæ™®é€šé¡µ unmap åŸºæœ¬ä¸€è‡´ï¼‰ï¼Œç„¶å a += SUPERPGSIZE å¦‚æœæ˜¯è¶…çº§é¡µçš„ä¸­é—´ï¼ŒæŠŠè¶…çº§é¡µé€€åŒ–æˆè‹¥å¹²ä¸ªæ™®é€šé¡µï¼Œå†èµ°æ™®é€šé¡µé‡Šæ”¾æµç¨‹ï¼Œç„¶å a += PGSIZE è¿™é‡Œä¸»è¦æ˜¯ä¸Šé¢æ­¥éª¤ä¸­çš„ 2b çš„â€œé€€åŒ–â€æ¯”è¾ƒæ£˜æ‰‹ï¼Œæˆ‘æ˜¯æŠŠé¡µè¡¨é‡Œå¯¹åº”è¶…çº§é¡µçš„ L1 leaf è®¾ç½®æˆäº† invalidï¼Œç„¶åæŠŠè¶…çº§é¡µè§†ä½œå¤šä¸ªæ™®é€šé¡µçš„åˆå¹¶ï¼Œä»è¶…çº§é¡µçš„å¼€å¤´å‡ºå‘åšè‹¥å¹²æ¬¡ mappages ä»è€Œå®Œæˆé€€åŒ–ã€‚æ€è·¯å¯ä»¥å‚è€ƒä¸‹å›¾ï¼š è¿™é‡Œæ˜¯é€€åŒ–éƒ¨åˆ†çš„ä»£ç ï¼š int perm = PTE_FLAGS(*pte); uint64 super_va_st = SUPERPGROUNDDOWN(a); uint64 super_pa_st = PTE2PA(*pte); *pte = (*pte >> 1) &lt;&lt; 1; // Make pte invalid to make `mappages` work for (uint64 super_va = super_va_st, super_pa = super_pa_st; super_va &lt; super_va_st + SUPERPGSIZE; super_va += PGSIZE, super_pa += PGSIZE) &#123; if (mappages(pagetable, super_va, PGSIZE, super_pa, perm) != 0) &#123; panic(\"uvmunmap: mappages failed\"); &#125; &#125; å½“ç„¶è¿™æ ·çš„é€€åŒ–æœ‰ä¸€ä¸ªæ½œåœ¨é£é™©â€”â€”æ¯ä¸ªè¿›ç¨‹çš„è¶…çº§é¡µä¸Šé™åœ¨è¿›ç¨‹å¯åŠ¨æ—¶å°±å†³å®šäº†ï¼Œæˆ‘ä»¬çš„é€€åŒ–ä¼šè®©æœ¬è¿›ç¨‹çš„è¶…çº§é¡µä¸Šé™å‡ä¸€ã€‚å¦‚æœæœ‰ä»€ä¹ˆè‡ªåŠ¨åˆå¹¶æ™®é€šé¡µä¸ºè¶…çº§é¡µçš„åŠŸèƒ½å°±å¥½äº†â€¦ å¦å¤–ï¼Œæˆ‘çš„ä»£ç æŠŠä¹‹å‰æ­¥éª¤é‡Œæè¿°çš„ 1 å’Œ 2b æ•´åˆäº†ä¸€ä¸‹ï¼ˆæ¯•ç«Ÿå®ƒä»¬æœ€åéƒ½èµ°çš„æ˜¯æ™®é€šé¡µé‡Šæ”¾æµç¨‹ï¼‰ï¼Œæ€»ä¹‹è¿™é‡Œæ˜¯å®Œæ•´ä»£ç ï¼š void uvmunmap(pagetable_t pagetable, uint64 va, uint64 npages, int do_free) &#123; uint64 a; pte_t *pte; int sz; if ((va % PGSIZE) != 0) panic(\"uvmunmap: not aligned\"); for (a = va; a &lt; va + npages * PGSIZE; a += sz) &#123; // If `a` corresponds to a superpage and the superpage starts at `a`, // free the superpage if ((pte = l1walk(pagetable, a, 0)) != 0 &amp;&amp; PTE_LEAF(*pte) &amp;&amp; a % SUPERPGSIZE == 0) &#123; sz = SUPERPGSIZE; if ((*pte &amp; PTE_V) == 0) &#123; printf(\"va=%ld pte=%ld\\n\", a, *pte); panic(\"uvmunmap: not mapped\"); &#125; if (do_free) &#123; uint64 pa = PTE2PA(*pte); superfree((void *)pa); &#125; *pte = 0; &#125; else &#123; sz = PGSIZE; // If `a` corresponds to a superpage but the superpage doesn't // start at `a`, demote the superpage into regular pages if (pte != 0 &amp;&amp; PTE_LEAF(*pte)) &#123; // Potential issue: // Each process has a max number of superpages defined as // `MAX_SUPER`. But whenever a superpage is demoted, the // process's max number of superpages permanently minus one, // since we view superpage as multiple regular pages. // // A possible solution is to kalloc multiple regular pages, // copy memory into them, and superfree the superpage. int perm = PTE_FLAGS(*pte); uint64 super_va_st = SUPERPGROUNDDOWN(a); uint64 super_pa_st = PTE2PA(*pte); *pte = (*pte >> 1) &lt;&lt; 1; // Make pte invalid to make `mappages` work for (uint64 super_va = super_va_st, super_pa = super_pa_st; super_va &lt; super_va_st + SUPERPGSIZE; super_va += PGSIZE, super_pa += PGSIZE) &#123; if (mappages(pagetable, super_va, PGSIZE, super_pa, perm) != 0) &#123; panic(\"uvmunmap: mappages failed\"); &#125; &#125; &#125; // Free the regular page that begins at `a` if ((pte = walk(pagetable, a, 0)) == 0) panic(\"uvmunmap: walk\"); if ((*pte &amp; PTE_V) == 0) &#123; printf(\"va=%ld pte=%ld\\n\", a, *pte); panic(\"uvmunmap: not mapped\"); &#125; if (PTE_FLAGS(*pte) == PTE_V) panic(\"uvmunmap: not a leaf\"); if (do_free) &#123; uint64 pa = PTE2PA(*pte); kfree((void *)pa); &#125; *pte = 0; &#125; &#125; &#125; forkæœ€è‰°éš¾çš„å·¥ä½œå·²ç»åšå®Œäº†ï¼Œæˆ‘ä»¬åªè¦ä¿®æ”¹ uvmcopy å°±èƒ½ä¸‹ç­äº†ï¼è¿™é‡Œçš„ä¿®æ”¹åªæ˜¯åŠ å…¥ä¸€ä¸ªç®€å•çš„åˆ†ç±»ï¼Œåœ¨é‡åˆ°æ™®é€šé¡µæ—¶èµ°æ™®é€šæµç¨‹ï¼Œé‡åˆ°è¶…çº§é¡µæ—¶èµ°è¶…çº§æµç¨‹ã€‚å’±å°±ç›´æ¥æ”¾ä»£ç äº†ï¼š int uvmcopy(pagetable_t old, pagetable_t new, uint64 sz) &#123; pte_t *pte; uint64 pa, i; uint flags; char *mem; int szinc; for (i = 0; i &lt; sz; i += szinc) &#123; // super page case if ((pte = l1walk(old, i, 0)) != 0 &amp;&amp; PTE_LEAF(*pte)) &#123; szinc = SUPERPGSIZE; if ((*pte &amp; PTE_V) == 0) panic(\"uvmcopy: page not present\"); pa = PTE2PA(*pte); flags = PTE_FLAGS(*pte); if ((mem = superalloc()) == 0) goto err; memmove(mem, (char *)pa, SUPERPGSIZE); if (mapsuperpages(new, i, SUPERPGSIZE, (uint64)mem, flags) != 0) &#123; superfree(mem); goto err; &#125; &#125; // regular page case else &#123; szinc = PGSIZE; if ((pte = walk(old, i, 0)) == 0) panic(\"uvmcopy: pte should exist\"); if ((*pte &amp; PTE_V) == 0) panic(\"uvmcopy: page not present\"); pa = PTE2PA(*pte); flags = PTE_FLAGS(*pte); if ((mem = kalloc()) == 0) goto err; memmove(mem, (char *)pa, PGSIZE); if (mappages(new, i, PGSIZE, (uint64)mem, flags) != 0) &#123; kfree(mem); goto err; &#125; &#125; &#125; return 0; err: uvmunmap(new, 0, i / PGSIZE, 1); return -1; &#125;","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"MIT-6.S081","slug":"å…¬å¼€è¯¾/MIT-6-S081","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/"},{"name":"Labs","slug":"å…¬å¼€è¯¾/MIT-6-S081/Labs","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/Labs/"}],"tags":[]},{"title":"æ¢ç´¢æ—¥å¿—[3]","slug":"others/thoughts/æ¢ç´¢æ—¥å¿—3","date":"2025-10-27T13:56:16.000Z","updated":"2025-10-28T02:14:10.603Z","comments":true,"path":"wiki/others/thoughts/æ¢ç´¢æ—¥å¿—3/","permalink":"http://rinevard.github.io/wiki/others/thoughts/%E6%8E%A2%E7%B4%A2%E6%97%A5%E5%BF%973/","excerpt":"","text":"ä¹¦æ¥ä¸Šä¸Šä¸Šå›ï¼ˆæ¢ç´¢æ—¥å¿—[0]ï¼‰ï¼Œä»Šå¤©å’Œä¸Šä¸Šæ¬¡å‚åŠ  Ludum Dare Compo ç»“è¯†çš„æœ‹å‹ä¸€èµ·åƒé¥­äº†ï¼Œéš¾é“è¯´æˆ‘å°±è¦å¤±å»ç¤¾æå±æ€§å’Œå®…å±æ€§äº†å—ï¼ æ€»ä¹‹å°±æ˜¯ä»–è¿™å‡ å¤©æ¥åŒ—äº¬ç©ï¼Œæˆ‘å°±é¼“èµ·å‹‡æ°”é—®ä»–è¦ä¸è¦æ¥æ‰¾æˆ‘ç©ï¼ˆå…¶å®å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ä¸ºäº†æ°´ä¸€ç¯‡æ¢ç´¢æ—¥å¿—ï¼Œæ¢ç´¢æ—¥å¿—é©±åŠ¨æ¢ç´¢ï¼‰ï¼Œç„¶åä»Šå¤©å°±ä¸€èµ·åƒäº†æŠ«è¨è–¯æ¡ç‚¸é¸¡ã€‚ æ„Ÿè§‰è‡ªå·±å®…çš„å¾ˆå¤§åŸå› æ˜¯äº’è”ç½‘å¤ªæœ‰è¶£äº†ã€‚ä»Šå¤©ä¹Ÿæ²¡æœ‰å’Œä»–ä¸€èµ·åˆ°å¤„ç©ï¼ˆæ ¹æ®æˆ‘çš„ç»éªŒå’Œæƒ³è±¡ï¼Œäººä»¬ä¸€èˆ¬æ˜¯ä¼šåœ¨ç›¸èšæ—¶å»ä¸€äº›åœ°ç‚¹é—²é€›çš„ï¼‰ï¼Œè€Œæ˜¯åœ¨é¥­åº—è¾¹åƒé¥­è¾¹ç©æ¸¸æˆé¡ºä¾¿é—²èŠã€‚å’±è¿˜ç»™ä»–è¯•äº†è¯•æœ€è¿‘åšçš„æ–°åŸå‹ï¼ˆæ¢ç´¢æ—¥å¿—[2]ï¼Œæ„Ÿè§‰æ¢ç´¢æ—¥å¿—çš„ç›¸äº’å¼•ç”¨éƒ½å¯ä»¥å˜æˆèŠ‚ç‚¹å›¾äº†ï¼‰ï¼Œæ„Ÿè§‰è¿˜ä¸é”™ã€‚ç„¶åæˆ‘ä»¬å°±åœ¨é¥­åº—å¾…äº†ä¸¤ä¸ªå¤šå°æ—¶ï¼Œç›´åˆ°ä»–å»èµ¶é«˜é“å›å­¦æ ¡ã€‚ æˆ‘è¿˜è›®å–œæ¬¢è¿™æ ·çš„äº¤æµçš„ï¼Œæœç„¶è¿˜æ˜¯è¦ä¸»åŠ¨å»å’Œåˆ«äººç»“äº¤æ‰è¡Œã€‚å¥½è€¶ï¼Œè¿™åˆæ˜¯ä¸€ä¸ªæ°´æ¢ç´¢æ—¥å¿—çš„æœºä¼šã€‚ç­‰æˆ‘ä¸‹æ¬¡ gamejam çœ‹åˆ°å–œæ¬¢çš„æ¸¸æˆå°±å»æ‰¾ä½œè€…åŠ å¥½å‹ï¼ŒæˆåŠŸäº†å°±æ°´ä¸€ç¯‡ï¼Œå¤±è´¥äº†ä¹Ÿèƒ½æ°´ä¸€ç¯‡ã€‚å½“ç„¶ï¼Œå¦‚æœåªæ˜¯æŠŠèŒƒå›´å±€é™åœ¨æ¸¸æˆé¢†åŸŸä¹Ÿå¤ªç‹­çª„äº†ï¼Œä¸è¿‡ç­‰æˆ‘æ°´å®Œå†è¯´å§ã€‚ ä¸ºä»€ä¹ˆé…’åº—å«é…’åº—å‘¢ï¼Œå®ƒåœ¨å­—é¢ä¸Šçœ‹èµ·æ¥å¾ˆåƒé¥­åº—ï¼Œå´æ˜¯å±…ä½çš„åœ°æ–¹ã€‚æˆ‘ä¸Šç½‘æœäº†ä¸€ä¸‹ï¼ˆå¦‚æˆ‘æ‰€è¨€ï¼Œäº’è”ç½‘å¤ªæœ‰è¶£äº†ï¼‰ï¼Œè¿™æ˜¯å› ä¸ºå®ƒæ˜¯ä» â€œHotelâ€ ç¿»è¯‘è¿‡æ¥çš„ã€‚å¯¹æ¸…æœ«çš„ä¸­å›½ä¸Šå±‚ç¤¾ä¼šï¼Œâ€Hotelâ€ çš„ç¬¬ä¸€åŠŸèƒ½æ˜¯é¥®å®´ï¼Œè€Œéä½å®¿ã€‚ä¼ ç»Ÿä¸­å›½è´µäººå‡ºè¡Œéƒ½å¸¦ç€ä»†äººï¼Œæ‰€ä»¥ â€œHotelâ€ çš„å°é—´å¯¹ä»–ä»¬å¹¶ä¸æ˜¯ä½å®¿çš„åœ°æ–¹ï¼Œè€Œåªæ˜¯èšå®´çš„åœ°æ–¹ï¼Œæ‰€ä»¥è¢«ç¿»è¯‘æˆäº†â€œé…’åº—â€ã€‚ æœ‰è¶£çš„ç”Ÿæ´»å¤ªå¤šäº†ï¼Œä¸€ä¸ªäººæ˜¯ä½“éªŒä¸è¿‡æ¥çš„ï¼Œæ‰€ä»¥è¦è®¤è¯†æ›´å¤šçš„ç»å†è¿‡æœ‰è¶£ç”Ÿæ´»çš„äººï¼Œæ‰èƒ½çœ‹åˆ°æ›´å¤šæœ‰è¶£çš„ä½“éªŒã€‚ åˆæˆ–è®¸äººä»¬åªæ˜¯å› ä¸ºç¢°å·§ç›¸é‡ï¼Œæ‰ç¢°å·§è®¤è¯†äº†å½¼æ­¤å§ã€‚ å½“ç„¶è¿˜æ˜¯è¦ç‚«è€€ä¸€ä¸‹æ”¶åˆ°çš„å°å¡ç‰‡çš„ï¼","categories":[{"name":"æ‚è°ˆ","slug":"æ‚è°ˆ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/"},{"name":"ç¢ç¢å¿µ","slug":"æ‚è°ˆ/ç¢ç¢å¿µ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/%E7%A2%8E%E7%A2%8E%E5%BF%B5/"}],"tags":[]},{"title":"æ¢ç´¢æ—¥å¿—[2]","slug":"others/thoughts/æ¢ç´¢æ—¥å¿—2","date":"2025-10-27T13:56:15.000Z","updated":"2025-10-28T02:16:47.945Z","comments":true,"path":"wiki/others/thoughts/æ¢ç´¢æ—¥å¿—2/","permalink":"http://rinevard.github.io/wiki/others/thoughts/%E6%8E%A2%E7%B4%A2%E6%97%A5%E5%BF%972/","excerpt":"","text":"é™ªè·‘äº† Supercell ä¸¾åŠçš„ Global AI Game Hack. è™½ç„¶æ„Ÿè§‰è‡ªå·±åšçš„æ¸¸æˆå¹¶ä¸æ¯”è·å¥–ä½œå“å·®ï¼Œä½†æ— æ‰€è°“äº†ï¼Œæˆ‘åšå‡ºäº†è‡ªå·±æ»¡æ„çš„ä½œå“ã€‚ åªæ˜¯é™ªè·‘æ˜¯ç§°ä¸ä¸Šæ¢ç´¢çš„ï¼ˆåˆä¸æ˜¯ç¬¬ä¸€æ¬¡é™ªè·‘äº†ï¼‰ã€‚è¿™æ¬¡ä¸»è¦æ˜¯å°è¯•åšäº†ä»¥å‰æ„æ€è¿‡ï¼Œä½†æ„Ÿè§‰â€œè¿™æ ¹æœ¬åšä¸åˆ°ï¼â€çš„ä½œå“ï¼Œè€Œä¸”è¿˜åšå‡ºæ¥äº†ã€‚ æˆ‘ä»¬è¯¥æ€æ ·åšä¸€ä¸ªåŸºäº LLM çš„æ¸¸æˆï¼Ÿæˆ‘çš„ç¬¬ä¸€ä¸ªç­”æ¡ˆæ˜¯ç‰Œç”Ÿä¸‡ç‰©ï¼Œè¿™æ˜¯ä¸€ä¸ªæŠŠå¡ç‰Œæ”¾åˆ°ä¸€èµ·è®© AI åŸºäºå †åœ¨ä¸€èµ·çš„å¡ç‰Œè®²æ•…äº‹çš„æ¸¸æˆã€‚ä¸€äº›è¯•ç©çš„ç©å®¶è¿˜æŒºå–œæ¬¢è¿™ä¸ªæ¸¸æˆï¼Œä¸è¿‡ä»‹äº AI å¾ˆéš¾å†™å‡ºæœ‰æ„ä¹‰çš„æ•…äº‹ï¼Œæˆ‘ç®€å•æ”¹äº†æ”¹å°±æ²¡æœ‰ç»§ç»­åšä¸‹å»äº†ï¼ˆç°åœ¨å®ƒå«åšã€Šè¥¿è¡Œç‰Œå½•ã€‹ï¼‰ã€‚ è®©æˆ‘ä»¬å›åˆ°ä¹‹å‰çš„é—®é¢˜ï¼Œæˆ‘ä»¬è¯¥æ€æ ·åšä¸€ä¸ªåŸºäº LLM çš„æ¸¸æˆï¼Ÿæˆ‘ä»¬å½“ç„¶ä¼šæƒ³ï¼Œå¦‚æœè®©æ¯ä¸ª NPC éƒ½ç”± LLM é©±åŠ¨ï¼Œè¿™ä¸ªä¸–ç•Œå°±ä¼šæœ‰æ— ç©·çš„å¯èƒ½æ€§ã€‚è¿™æ˜¯æˆ‘ä¸€å¼€å§‹å°±åå¯¹çš„ç­”æ¡ˆã€‚æˆ‘è®¤ä¸º AI å›å¤çš„ä¿¡æ¯å¯†åº¦å¤ªä½ï¼Œè¿˜ä¼šèƒ¡ç¼–ä¹±é€ ï¼Œæ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚æ›´ä½•å†µä¸¤ä¸ª AI ä¹‹é—´èŠäº†å‡ å¥å°±ä¼šå¼€å§‹ç›¸äº’å¤è¯»äº†ã€‚ä¸è¿‡åæ¥ç©åˆ°äº†ä¸€ä¸ª AI ä¼šç›¸äº’äº¤äº’èŠå¤©çš„æ¸¸æˆï¼Œäº²èº«è¿›å…¥ä¸€ä¸ª NPC æœ‰è‡ªå·±çš„ç”Ÿæ´»çš„æ¸¸æˆæ„Ÿè§‰è¶…é…·ï¼å½“ç„¶æˆ‘è¿˜æ˜¯ä¸è®¤ä¸ºè¿™ä¸ªä¸œè¥¿æœ‰ä»€ä¹ˆæ‹“å±•ç©ºé—´ï¼Œä¸è¿‡ç¡®å®æŒºé…·çš„ã€‚ é‚£è¿™æ¬¡æˆ‘çš„ç­”æ¡ˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘æƒ³å¸¦æ¥å°½å¯èƒ½å¤šçš„å¯èƒ½æ€§ï¼Œè®©ç©å®¶èƒ½åšåˆ°ä»–ä»¬èƒ½æƒ³åˆ°çš„å¤§éƒ¨åˆ†äº‹æƒ…ã€‚ä»¥å‰æˆ‘ç©åˆ°è¿‡å…è®¸è‡ªå®šä¹‰è§„åˆ™çš„ LLM æ¸¸æˆï¼Œä½†ä½œè€…çš„å®ç°æ–¹æ³•æ˜¯è®© LLM æ‹¼å‡‘ä¸€å †é¢„åˆ¶çš„è§„åˆ™ç»„ä»¶ï¼Œäºæ˜¯ç»å¸¸å‡ºç°â€œæˆ‘æƒ³è¦è¿™ä¸ªè§„åˆ™ä½† AI å†™ä¸å‡ºæ¥â€çš„æƒ…å†µã€‚å› æ­¤æˆ‘æƒ³ï¼Œå¦‚æœè¦çœŸæ­£åšåˆ°å°½å¯èƒ½å¤šçš„å¯èƒ½æ€§ï¼Œå°±åªèƒ½æŠŠæ•´ä¸ªæ¸¸æˆçŠ¶æ€éƒ½äº¤ç»™ LLM ç®¡ç†ã€‚ å¬ä¸Šå»å°±åšä¸åˆ°ä¸æ˜¯å—ï¼Ÿæˆ‘æƒ³å‡ºè¿™ä¸ªæƒ³æ³•æ—¶ä¹Ÿæ„Ÿè§‰â€œè¿™æ ¹æœ¬åšä¸åˆ°ï¼æ–‡å­—å°±ç®—äº†ï¼ŒåŠ¨ç”»æ€ä¹ˆåŠï¼Ÿè¿˜æœ‰æ›´å¤šæ›´å¤šçš„ä¸œè¥¿æ€ä¹ˆåŠï¼Ÿâ€ï¼Œå› æ­¤æ²¡æœ‰å»åšã€‚ä½†å¦‚ä¸Šæ–‡æ‰€è¨€ï¼Œæˆ‘åœ¨è¿™æ¬¡ hackathon è¯•ç€åšäº†è¿™ä¸ªæƒ³æ³•ï¼ˆä¸ºä»€ä¹ˆå®ƒä¸å« gamejam è€Œå« hackathon å‘¢ï¼Œæ˜æ˜æ˜¯åšæ¸¸æˆâ€¦ï¼‰ã€‚ æˆ‘è§è¿‡çš„è®¸å¤šæ¸¸æˆè®¾è®¡èµ„æ–™éƒ½å‘Šè¯‰æˆ‘ï¼Œâ€œåŸå‹æ˜¯å¾ˆå¯èƒ½å¤±è´¥çš„ï¼Œæ‰¾åˆ°å¤±è´¥ä¹‹å¤„å°±æ˜¯åŸå‹åˆ¶ä½œçš„ç›®çš„ã€‚â€ä½†ä½ æˆ‘çš†çŸ¥æˆ‘ä»¬éƒ½æœ‰å¯¹å¤±è´¥çš„ææƒ§ã€‚åœ¨é¢å¯¹ä¸€ä¸ªçœ‹ä¸Šå»å°±åšä¸åˆ°çš„æ¦‚å¿µæ—¶ï¼Œæˆ‘å¯¹â€œå®ç°è¿™ä¸ªæ¦‚å¿µâ€çš„é¢„æœŸå°±æ˜¯å¤±è´¥ï¼Œå³ä½¿æ˜¯è¿™æ ·ä¹Ÿè¦åšä¸‹å»å—â€¦ å³ä½¿æ˜¯æœç€å¤±è´¥ä¹Ÿè¦åšä¸‹å»å—ï¼Ÿå‡ å‘¨å‰å‚åŠ çš„ Ludum Dare è¿˜æå‰ä¸€å¤©å‡ºç»“æœäº†ï¼Œæ’ä¸Šäº†è¿™ä¸ª hackathon çš„å¼€å¤´ï¼Œæˆ‘ä¹Ÿæ²¡æ‹¿åˆ°æ»¡æ„çš„æˆç»©ã€‚å³ä½¿æ˜¯è¿™æ ·ä¹Ÿè¦åšä¸‹å»å—ï¼Ÿæˆ‘æ˜¯ä¸æ˜¯æ ¹æœ¬åšä¸å‡ºæœ‰è¶£çš„æ¸¸æˆï¼Ÿ æˆ‘çœ‹å‘äº† Jeremy Ryanï¼ŒHope Falters çš„ä½œè€…ï¼ˆè¿™æ˜¯æˆ‘æœ€å–œæ¬¢çš„æ¸¸æˆä¹‹ä¸€ï¼‰ï¼Œæƒ³çœ‹çœ‹ ta åœ¨æœ€å¼€å§‹æ—¶åšå‡ºçš„ä½œå“æ˜¯æ€æ ·çš„ã€‚æˆ‘çœ‹å‘äº†ä¸€äº›åˆ«çš„æˆ‘å–œæ¬¢çš„ä½œè€…ï¼Œæƒ³çœ‹çœ‹ä»–ä»¬åœ¨æœ€å¼€å§‹æ—¶åšå‡ºçš„ä½œå“æ˜¯æ€æ ·çš„ã€‚æˆ‘çœ‹å‘äº†ä¸€äº›åšäº†å¾ˆä¹…æ¸¸æˆä½†åšçš„è¿˜æ˜¯å¾ˆç³Ÿç³•ï¼Œä½†è¿˜æ˜¯åœ¨åšæ¸¸æˆçš„ä½œè€…ã€‚æˆ‘çœ‹å‘äº†å‡ ä¸ªå¹´é¾„å°äºæˆ‘ï¼Œæ’åä¹Ÿå°äºæˆ‘çš„ä½œè€…ã€‚å³ä½¿æ˜¯è¿™æ ·ä¹Ÿè¦åšä¸‹å»å—ï¼Ÿ æ— æ‰€è°“äº†ï¼Œå³ä½¿æ˜¯è¿™æ ·ä¹Ÿè¦åšä¸‹å»ã€‚è€Œå¦‚å¼€å¤´æ‰€è¨€ï¼Œé™ªè·‘äº†ã€‚ ä½†è‡³å°‘æˆ‘çš„æœ‹å‹åœ¨ç©äº†æˆ‘çš„æ¸¸æˆä»¥åå‘å‡ºäº†â€œè¿™å±…ç„¶ä¼šé™ªè·‘å—â€çš„å£°éŸ³ï¼Œè‡³å°‘åœ¨è¯•ç©æ—¶å‡ ä¸ªç©å®¶éƒ½æŒºå–œæ¬¢çš„ï¼Œè¿™å°±å¥½äº†ã€‚ å—¯ï¼Œå³ä½¿è¦æ”¾å¼ƒï¼Œä¹Ÿè¦ç­‰åˆ°å¤§å®¶éƒ½ä¸å–œæ¬¢çš„é‚£å¤©å§ã€‚ ç»™è¿™ä¸ªæ¸¸æˆå‰ªè¾‘çš„ç¬¨è›‹å°è§†é¢‘ï¼Œå¯èƒ½ä¸ç¬¦åˆæ–‡ç« æ°›å›´ï¼Œæ…ç‚¹ï¼šhttps://youtu.be/P-J1xkifbYA è¯´å®Œæƒ…ç»ªä¸Šçš„æŒ£æ‰äº†ï¼Œä¸å¦¨å†æ¥èŠèŠè®¾è®¡ã€‚ä½ çŸ¥é“çš„ï¼Œæˆ‘ä¸€ç›´éƒ½å–œæ¬¢éšä¾¿èŠèŠæ¸¸æˆè®¾è®¡ä¸Šçš„ä¸œè¥¿ã€‚ åœ¨å¾—åˆ°äº†â€œæŠŠæ•´ä¸ªæ¸¸æˆçŠ¶æ€éƒ½äº¤ç»™ LLM ç®¡ç†â€è¿™ä¸ªæ¦‚å¿µåï¼Œæˆ‘è„‘æµ·ä¸­å°±å‘ˆç°å‡ºäº†è¿™ä¸ªæ¸¸æˆç°åœ¨çš„æ ·å­â€”â€”è®©ç©å®¶ç»„åˆè¯æ±‡æ¥åˆ›é€ é­”æ³•ï¼ŒLLM è§£æé­”æ³•å¹¶æ”¹å˜åœºé¢ã€‚ä¸è¿‡æˆ‘æ„Ÿè§‰è‡ªå·±ä»¥å‰çš„è®¾è®¡éƒ½æ˜¯é™¤äº†æ¦‚å¿µä¸€æ— æ˜¯å¤„çš„è®¾è®¡ï¼Œæ‰€ä»¥è¿™æ¬¡æƒ³è¯•è¯•ä¹‹å‰çœ‹åˆ°çš„â€œæ³¨é‡å¤–å›´è®¾è®¡â€çš„åšæ³•ã€‚ æ®æˆ‘ç†è§£ï¼Œå¤–å›´è®¾è®¡å°±æ˜¯åœ¨æ ¸å¿ƒæ¦‚å¿µä¹‹å¤–åšä¸€äº›è®¾è®¡æ¥å‘ˆç°è¿™ä¸ªæ¦‚å¿µçš„å¯èƒ½æ€§ã€‚æ¯”å¦‚è¯´ä¿„ç½—æ–¯æ–¹å—çš„æ¦‚å¿µå¯èƒ½æ˜¯â€œå‡‘æ»¡ä¸€è¡Œå°±æ¶ˆé™¤â€ï¼Œå¤–å›´è®¾è®¡å°±æ˜¯ä¸åŒå½¢çŠ¶çš„ç§¯æœ¨ã€‚å¦‚æœç§¯æœ¨åªæœ‰æ­£æ–¹å½¢å’Œé•¿æ¡ï¼Œæ¸¸æˆä¹Ÿèƒ½å·¥ä½œï¼Œä½†å°±æ²¡æœ‰ç°åœ¨è¿™ä¹ˆä¸°å¯Œçš„å¯èƒ½æ€§äº†ã€‚ è¿™æ¬¡æˆ‘åšçš„å¤–å›´è®¾è®¡åŒ…æ‹¬ç”¨äºæ©é¥°ç”Ÿæˆé€Ÿåº¦è¾ƒæ…¢çš„ TTS æ—ç™½ã€ä¸€äº›æ‰‹åŠ¨è®¾è®¡çš„é«˜æ¦‚å¿µè¯æ±‡ã€‚ å†™åˆ°è¿™é‡Œçªç„¶æœ‰äº›ç–‘æƒ‘ã€‚æ—¢ç„¶åœ¨å¾—åˆ°äº†è¿™ä¸ªâ€œLLM ç®¡ç†æ¸¸æˆçŠ¶æ€â€çš„æ¦‚å¿µåæˆ‘å°±æƒ³å‡ºäº†è¿™ä¸ªæ¸¸æˆç°åœ¨çš„æ ·å­ï¼Œé‚£æˆ‘ä¸ºä»€ä¹ˆä¼šæ„Ÿè§‰â€œè¿™æ ¹æœ¬åšä¸åˆ°â€å‘¢ï¼Ÿæˆ‘ä¸çŸ¥é“ï¼Œå¯èƒ½åªæ˜¯ææƒ§å¤±è´¥å§ã€‚ ã€Šæ¸¸æˆè®¾è®¡è‰ºæœ¯ã€‹å‘è¯»è€…å‘å‡ºçš„æœ€åä¸€ä¸ªé—®é¢˜æ˜¯ï¼šâ€œä¸ºä»€ä¹ˆæˆ‘è¦åšç°åœ¨åœ¨åšçš„äº‹â€ã€‚è´¯å½»ä¸€ä¸ªä¸»é¢˜çš„ä½œå“ä¼šå˜å¾—æ›´åŠ æœ‰åŠ›ï¼Œæˆ‘ä»¬æ¯ä¸ªäººä¹Ÿéƒ½æœ‰è‡ªå·±çš„ä¸»é¢˜ã€‚é‚£ä¹ˆæˆ‘ä¸ºä»€ä¹ˆè¦åšæ¸¸æˆï¼Œæˆ‘çš„ä¸»é¢˜åˆæ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä¼šå¯»æ‰¾ç­”æ¡ˆã€‚","categories":[{"name":"æ‚è°ˆ","slug":"æ‚è°ˆ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/"},{"name":"ç¢ç¢å¿µ","slug":"æ‚è°ˆ/ç¢ç¢å¿µ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/%E7%A2%8E%E7%A2%8E%E5%BF%B5/"}],"tags":[]},{"title":"å¦‚ä½•åœ¨ä¸ƒå¤©å†…åˆ¶ä½œæ¸¸æˆåŸå‹","slug":"others/translation/ä¸ƒå¤©åŸå‹","date":"2025-10-15T13:47:11.000Z","updated":"2025-10-15T14:10:39.846Z","comments":true,"path":"wiki/others/translation/ä¸ƒå¤©åŸå‹/","permalink":"http://rinevard.github.io/wiki/others/translation/%E4%B8%83%E5%A4%A9%E5%8E%9F%E5%9E%8B/","excerpt":"","text":"ç¿»è¯‘è‡ª How to Prototype a Game in Under 7 Days æ¥è‡ªå››ä½åœ¨ä¸€ä¸ªå­¦æœŸå†…åšäº†è¶…è¿‡ 50 æ¬¾æ¸¸æˆçš„ç ”ç©¶ç”Ÿçš„å¿ƒå¾— ä½œè€…ï¼šKyle Gabler, Kyle Gray, Matt Kucic å’Œ Shalin Shodhan è¿™é‡Œæœ‰ä¸€ä¸ªç–¯ç‹‚çš„æ¸¸æˆç‚¹å­ï¼šæ‹–åŠ¨é‚£äº›ä¼šè¯´åƒåœ¾è¯çš„ç²˜æ¶²çƒï¼Œå»ºé€ ä¸€åº§è¶Šæ¥è¶Šé«˜çš„å·¨å¡”ã€‚å®ƒä»¬è •åŠ¨ã€å’¯å’¯ç¬‘ï¼Œå¹¶çˆ¬ä¸Šå…„å¼Ÿä»¬çš„èƒŒå‘ä¸Šæ”€çˆ¬ã€‚ä½†è¦å°å¿ƒï¼è¿™æ˜¯ä¸€åœºä¸é‡åŠ›çš„æŒä¹…æˆ˜ã€‚å¦‚æœä½ å»ºé€ çš„å¡”å¤ªä¸ç¨³å®šï¼Œå®ƒå°±ä¼šå€’å¡Œã€‚ â€œé»é»ä¸–ç•Œâ€åœ¨ä¸Šçº¿æ•°æœˆå†…ä¸‹è½½é‡è¶…è¿‡äº†10ä¸‡æ¬¡ï¼Œåœ¨ä¸€æœ¬æ‚å¿—ä¸­è¢«èª‰ä¸ºâ€œæœˆåº¦ç½‘ç»œæ¸¸æˆâ€ï¼Œåœ¨G4é¢‘é“å’ŒGDCçš„å®éªŒæ€§æ¸¸æˆå·¥ä½œåŠä¸Šè¿›è¡Œäº†æ¼”ç¤ºï¼Œå¹¶ä¸”æ˜¯æˆ‘ä»¬åœ¨å¡å†…åŸºæ¢…éš†å¤§å­¦å¨±ä¹æŠ€æœ¯ä¸­å¿ƒçš„å®éªŒæ€§æ¸¸æˆé¡¹ç›®ä¸­æ‰€åˆ¶ä½œçš„äº”åå¤šæ¬¾æ¸¸æˆä¹‹ä¸€ã€‚ å’Œå…¶ä½™çš„æ¸¸æˆä¸€æ ·ï¼Œå®ƒä¹Ÿæ˜¯ç”±ä¸€ä¸ªäººåœ¨ä¸€å‘¨ä¹‹å†…å®Œæˆçš„ã€‚ è¯¥é¡¹ç›®å§‹äº2005å¹´æ˜¥å­£ï¼Œç›®æ ‡æ˜¯å°½å¯èƒ½å¤šåœ°å‘ç°æ–°çš„æ¸¸æˆç©æ³•å¹¶ç»™å®ƒä»¬åšåŸå‹ã€‚æˆ‘ä»¬å››åç ”ç©¶ç”Ÿç»„æˆäº†å›¢é˜Ÿï¼ŒæŠŠè‡ªå·±å…³åœ¨æˆ¿é—´é‡Œï¼Œä¸€ä¸ªå­¦æœŸéƒ½éµå®ˆç€ä¸‹é¢ä¸‰æ¡è§„åˆ™ï¼š æ¯ä¸ªæ¸¸æˆå¿…é¡»åœ¨ä¸ƒå¤©å†…å®Œæˆï¼Œ æ¯ä¸ªæ¸¸æˆå¿…é¡»ç”±ä¸€ä¸ªäººå®Œæˆï¼Œ æ¯ä¸ªæ¸¸æˆå¿…é¡»åŸºäºä¸€ä¸ªå…±åŒçš„ä¸»é¢˜ï¼Œä¾‹å¦‚â€œé‡åŠ›â€ã€â€œæ¤è¢«â€ã€â€œèœ‚ç¾¤â€ç­‰ã€‚ éšç€é¡¹ç›®è¿›è¡Œï¼Œæˆ‘ä»¬å¯¹èœ‚æ‹¥è€Œè‡³çš„æµé‡ã€æ¸¸æˆæ‚å¿—çš„å…³æ³¨ä»¥åŠè¡Œä¸šä¸“ä¸šäººå£«å’Œå­¦è€…ä»¬éƒ½é—®ç€çš„åŒæ ·çš„é—®é¢˜æ„Ÿåˆ°æƒŠè®¶å’Œæ¿€åŠ¨ï¼šâ€œä½ ä»¬æ˜¯å¦‚ä½•è¿™ä¹ˆå¿«åœ°åˆ¶ä½œè¿™äº›æ¸¸æˆçš„ï¼Ÿâ€ä»¥åŠâ€œæˆ‘ä»¬è¯¥æ€ä¹ˆåšï¼Ÿâ€ æˆ‘ä»¬åœ¨è¿™é‡Œå°†ä¸€åˆ‡å…¨ç›˜æ‰˜å‡ºã€‚ç»“åˆä»¥ä¸‹çš„å»ºè®®ã€æŠ€å·§å’Œä¾‹å­ï¼Œæˆ‘ä»¬å°†è®¨è®ºé‚£äº›æœ‰ç”¨çš„å’Œæ²¡ç”¨çš„æ–¹æ³•ã€‚æˆ‘ä»¬å°†å‘ä½ å±•ç¤ºå¦‚ä½•è¿›å…¥å¿«é€ŸåŸå‹åˆ¶ä½œçš„æ€ç»´çŠ¶æ€ï¼Œå¦‚ä½•ç»„å»ºä¸€ä¸ªé«˜æ•ˆçš„å›¢é˜Ÿï¼Œä»¥åŠå¦‚æœä½ æƒ³è¿‡åˆ›é€ æ–°ä¸œè¥¿ä½†ä¸çŸ¥ä»ä½•ä¸‹æ‰‹æ—¶åº”è¯¥ä»å“ªé‡Œå¼€å§‹ã€‚æˆ‘ä»¬å¸Œæœ›è¿™äº›ç»è¿‡è®¤çœŸéªŒè¯çš„æŒ‡å—å¯¹ä½ çš„ä¸‹ä¸€ä¸ªé¡¹ç›®ï¼Œæ— è®ºå¤§å°ï¼Œèƒ½æ´¾ä¸Šç”¨åœºï¼ ä¸ºäº†ä¾¿äºé˜…è¯»ï¼Œæœ¬æ–‡çš„å»ºè®®å’ŒæŠ€å·§ä¼šè¢«åˆ†ä¸ºå››ä¸ªéƒ¨åˆ†ï¼šå‡†å¤‡ã€è®¾è®¡ã€å¼€å‘å’Œé€šç”¨çš„æŠ€å·§ã€‚ç¥ä½ é˜…è¯»æ„‰å¿«ï¼ å‡†å¤‡ï¼šå¿«é€Ÿæ˜¯ä¸€ç§å¿ƒæ€å¿«é€ŸåŸå‹ä¸ä»…æ˜¯å‰æœŸåˆ¶ä½œä¸­çš„ä¸€ä¸ªæœ‰ç”¨å·¥å…·â€”â€”å®ƒè¿˜å¯ä»¥æˆä¸ºä¸€ç§ç”Ÿæ´»æ–¹å¼ï¼æœ¬èŠ‚å°†å±•ç¤ºå¦‚ä½•å‡†å¤‡å¹¶å¼€å§‹åƒä¸€ä¸ªå¿«é€ŸåŸå‹åˆ¶ä½œè€…é‚£æ ·æ€è€ƒã€‚ æ‹¥æŠ±å¤±è´¥çš„å¯èƒ½æ€§â€”â€”å®ƒé¼“åŠ±åˆ›é€ æ€§å†’é™©â€œé£é™©â€å¯¹æˆ‘ä»¬çš„å½±å“å¤ªå¤§äº†ã€‚æ®æˆ‘ä»¬æ‰€çŸ¥ï¼Œå¯¹å¤±è´¥çš„ææƒ§æ˜¯ç”µå½±IPæ”¹ç¼–æ¸¸æˆå’Œç»­ä½œé«˜è¾¾ä¸¤ä½æ•°çš„æ¸¸æˆä¸æ–­è¢«åˆ¶ä½œå‡ºæ¥çš„åŸå› ã€‚è¿™å°±åƒæ€»æ˜¯é€‰æ‹©å»éº¦å½“åŠ³ï¼Œè€Œä¸æ˜¯ä¸€å®¶æœªæ›¾æ¢ç´¢è¿‡çš„æ–°é¤å…â€”â€”æ€»æ˜¯ä¾èµ–äºä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„ã€å°šå¯çš„é€‰é¡¹ï¼Œè€Œä¸æ˜¯å†’é™©å°è¯•æœªçŸ¥ä½†å¯èƒ½ç¾å‘³çš„é€‰æ‹©ã€‚ ä¸€ä¸ªå¥½çš„å¿«é€ŸåŸå‹åˆ¶ä½œè€…ä¼šçŸ¥é“å¤±è´¥æ˜¯å¯ä»¥æ¥å—çš„ï¼æ‰¾åˆ°å¤±è´¥ä¹‹å¤„å°±æ˜¯åŸå‹åˆ¶ä½œçš„ç›®çš„ï¼Œæ‰€ä»¥å°½æƒ…å»åšå§ï¼å³ä½¿ä½ å¤±è´¥äº†ï¼Œä¹Ÿè¿˜ä¼šæœ‰æ— æ•°çš„æœºä¼šï¼Œè€Œä¸”å¾ˆå¯èƒ½ä½ æ€»èƒ½å­¦åˆ°äº›ä¸œè¥¿ã€‚åªæœ‰æ‹¥æŠ±å¤±è´¥ï¼Œæ‰å¯èƒ½åšå‡ºæœ‰ä»·å€¼çš„å®éªŒã€‚ Mr. Grayï¼šâ€œã€ŠMime After Mimeã€‹å’Œã€ŠA Mime to Killã€‹æ˜¯æˆ‘åšçš„ä¸¤æ¬¾åªæœ‰å£°éŸ³æ²¡æœ‰ç”»é¢çš„æ¸¸æˆã€‚å°½ç®¡å®ƒä»¬æ˜¯å½»å¤´å½»å°¾çš„å¤±è´¥å“ï¼Œä½†æ•´ä¸ªå›¢é˜Ÿéƒ½ä¸ºèƒ½å†’å¦‚æ­¤å¤§çš„é£é™©æ¥è¯æ˜çº¯éŸ³é¢‘æ¸¸æˆçš„å¤±è´¥è€Œæ„Ÿåˆ°å…´å¥‹ï¼Œæˆ‘å¯ä»¥è‡ªè±ªåœ°è¯´å®ƒä»¬æ˜¯æˆ‘åšçš„ã€‚éšç€æˆ‘åœ¨æ•´ä¸ªé¡¹ç›®ä¸­ç§¯ç´¯ç»éªŒï¼Œæˆ‘é€æ¸èƒ½è¿›è¡Œæ›´æœ‰é’ˆå¯¹æ€§çš„å†’é™©ï¼Œå®ƒä»¬å¸¦æ¥äº†æˆåŠŸçš„æ¸¸æˆã€‚â€ å¼ºåˆ¶ç¼©çŸ­å¼€å‘å‘¨æœŸï¼ˆæ›´å¤šæ—¶é—´ != æ›´é«˜è´¨é‡ï¼‰ä½ åªéœ€è¦å‡ å¤©æ—¶é—´ã€‚æœ‰ä¸€ç§å¾ˆè‡ªç„¶çš„æƒ³æ³•æ˜¯ï¼šâ€œæˆ‘ä»¬ä¸€å‘¨åšäº†ä¸€ä¸ªå¾ˆæ£’çš„æ¸¸æˆã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬èŠ±ä¸¤å‘¨æ—¶é—´ï¼Œå®ƒä¼šå¥½ä¸Šä¸¤å€ï¼â€ã€‚å½“ç„¶ï¼Œäº‹å®å¹¶éå¦‚æ­¤ã€‚æˆ‘ä»¬å‘ç°ï¼Œé€šå¸¸ä»»ä½•æ¸¸æˆç‚¹å­éƒ½å¯ä»¥åœ¨ä¸åˆ°ä¸€å‘¨çš„æ—¶é—´å†…æœ‰æ•ˆåœ°è¿›è¡ŒåŸå‹è®¾è®¡ã€‚å¤šä½™çš„æ—¶é—´å¾€å¾€ä¼šäº§ç”Ÿé€’å‡çš„å›æŠ¥ã€‚ä¾‹å¦‚ï¼Œä¸€äº›åŸå‹åªç”¨äº†ä¸€ä¸ªæ™šä¸Šå°±å®Œæˆäº†ï¼Œè€Œå¦ä¸€äº›åˆ™å¤šèŠ±äº†ä¸€ä¸¤å‘¨çš„æ—¶é—´ã€‚ä»¤äººæƒŠè®¶çš„æ˜¯ï¼Œæˆ‘ä»¬å‘ç°å¼€å‘æ—¶é—´ä¸æ¸¸æˆæœ€ç»ˆçš„æˆåŠŸç¨‹åº¦ä¹‹é—´æ²¡æœ‰å…³è”ã€‚ å¯¹åˆ›é€ çš„çº¦æŸè®©ä½ æ›´æƒ³åˆ›é€ æˆ‘ä»¬æœ€æˆåŠŸçš„æ¸¸æˆéƒ½æºäºç‰¹å®šçš„ä¸»é¢˜æˆ–â€œç©å…·â€ï¼Œæ¯”å¦‚â€œé‡åŠ›â€ã€â€œèœ‚ç¾¤â€ï¼Œæˆ–è€…â€œåˆ¶ä½œä¸€æ¬¾ä¸»è¦é¢å‘å¥³æ€§ä¼‘é—²ç©å®¶çš„æ¸¸æˆâ€ã€‚ä¸çŸ¥ä¸ºä»€ä¹ˆï¼Œåœ¨æœ‰é™åˆ¶çš„æƒ…å†µä¸‹ï¼Œåˆ›é€ å˜å¾—æ›´å®¹æ˜“äº†ã€‚ æ­¤å¤–ï¼Œå½“ä¸€ä¸ªå›¢é˜Ÿçš„äººéƒ½å›´ç»•ä¸€ä¸ªç‰¹å®šä¸»é¢˜åŒæ—¶åšåŸå‹æ—¶ï¼Œæˆ‘ä»¬éƒ½å€¾å‘äºé¿å…ä½¿ç”¨é‚£äº›æ˜¾è€Œæ˜“è§çš„æœºåˆ¶ã€‚è¿™ç§æŒ‘æˆ˜è®©æˆ‘ä»¬å»æ¢ç´¢å¹¶æŒ–æ˜ä¸»é¢˜ä¸­æ‰€æœ‰å¯èƒ½çš„æ¸¸æˆç©æ³•ã€‚ åœ¨é¡¹ç›®åæœŸï¼Œæˆ‘ä»¬é€æ¸åç¦»äº†è¿™ç§æ¨¡å¼ï¼Œè¿™æœ€ç»ˆå¯¹æˆ‘ä»¬é€ æˆäº†æŸå®³ã€‚æ²¡æœ‰äº†ä¸»é¢˜çº¦æŸï¼Œæ¸¸æˆåˆ¶ä½œæ—¶é—´æ›´é•¿ï¼Œæ–¹å‘æ€§æ›´å·®ï¼Œå›¢é˜Ÿå‡èšåŠ›ä¹Ÿä¸‹é™äº†ã€‚é‚£ç§â€œæˆ‘ä»¬éƒ½åœ¨ä¸€æ¡èˆ¹ä¸Šâ€çš„æ„Ÿè§‰å‡å°‘äº†ï¼Œæ›´ç³Ÿç³•çš„æ˜¯ï¼Œæˆ‘ä»¬å¤±å»äº†é‚£ç§æ›¾æ¿€å‘é¢å¤–åˆ›é€ åŠ›å’ŒæŠ€å·§çš„å‹å¥½ç«äº‰æ„Ÿã€‚ æˆ‘ä»¬æ¢ç´¢è¿‡çš„ä¸€äº›ä¸»é¢˜æœ‰ï¼šâ€œé‡åŠ›â€ã€â€œå¼¹ç°§â€ã€â€œè¿›åŒ–â€ã€â€œå£°éŸ³â€ã€â€œæ•é£Ÿè€…ä¸çŒç‰©â€ã€â€œä»¤äººä¸Šç˜¾çš„æ¸¸æˆâ€ã€â€œç»˜ç”»â€ã€â€œæŒ‡æ•°å¢é•¿â€ã€â€œæ¤è¢«â€ã€â€œå¹³è¡¡â€ï¼Œä»¥åŠå…¶ä»–ä¸€äº›ä¸ªäººä¸»é¢˜ã€‚ ç»„å»ºä¸€æ”¯ä¼˜ç§€çš„å›¢é˜Ÿå’Œä¸€ä½å®¢è§‚çš„é¡¾é—®â€”â€”å¿ƒæ€ä¸æ‰ååŒç­‰é‡è¦å›¢é˜Ÿä¸­çš„æ¯ä¸ªæˆå‘˜éƒ½å¿…é¡»ç†Ÿæ‚‰æ¸¸æˆå¼€å‘çš„æ‰€æœ‰æ–¹é¢ã€‚æ¯ä¸ªäººéƒ½è´Ÿè´£è‡ªå·±çš„ç¼–ç¨‹ã€ç¾æœ¯ã€å£°éŸ³ä»¥åŠæœ€ç»ˆäº§å“ä¸­çš„å…¶ä»–ä¸€åˆ‡ã€‚ä½†èƒ½åŠ›å¹¶éä¸€åˆ‡ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæ¯ä¸ªäººéƒ½å¿…é¡»ä»¥è¿™æ ·çš„ç†è§£æ¥å¯¹å¾…è¿™ç§å¼€å‘æ–¹å¼ï¼šè®¾è®¡æ˜¯è‡³é«˜æ— ä¸Šçš„â€”â€”ä»ç¾æœ¯åˆ°å·¥ç¨‹çš„ä¸€åˆ‡éƒ½åªæ˜¯ä¸ºæœ€ç»ˆè®¾è®¡æœåŠ¡ã€‚ä¸€ä¸ªæ·±è°™æ­¤é“çš„å¹³åº¸å·¥ç¨‹å¸ˆå¾ˆå¯èƒ½æ¯”ä¸€ä¸ªæ²¡æœ‰è¿™ç§å¿ƒæ€çš„ä¼˜ç§€å·¥ç¨‹å¸ˆæ›´æˆåŠŸã€‚ é¡¹ç›®é¡¾é—® Jesse Schell è¯´ï¼šâ€æˆ‘ä¸€ç›´ç—´è¿·äºäº§ç”Ÿæ–°æ¸¸æˆåˆ›æ„çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥å½“ Shalinã€Matt å’Œä¸¤ä½ Kyle æå‡ºè¿™ä¸ªé¡¹ç›®æ—¶ï¼Œæˆ‘è‡ªç„¶æ„Ÿåˆ°éå¸¸æ¿€åŠ¨ã€‚æˆ‘æŠŠå®ƒçœ‹ä½œä¸€ä¸ªåœ¨åˆ›é€ åŠ›æ–¹é¢è¿›è¡Œå¯¹ç…§å®éªŒçš„æœºä¼šï¼Œå¹¶å¸Œæœ›èƒ½å­¦åˆ°æœ‰ç”¨çš„æ¸¸æˆè®¾è®¡çŸ¥è¯†ã€‚ä½œä¸ºæŒ‡å¯¼è€å¸ˆï¼Œæˆ‘åŠªåŠ›ç¡®ä¿å›¢é˜Ÿå°è¯•å¤šç§ä¸åŒçš„æŠ€æœ¯ã€ä»é”™è¯¯ä¸­å­¦ä¹ ã€ä¸åœ¨è¡Œä¸é€šçš„æƒ³æ³•ä¸Šçº ç»“å¤ªä¹…ï¼Œå¹¶åŠªåŠ›ä¿è¯æ¯ä¸ªäººéƒ½åœ¨å¯»æ‰¾æœ€é€‚åˆè‡ªå·±çš„åˆ›ä½œè¿‡ç¨‹ã€‚â€ â€œæˆ‘å¯¹å¦‚ä½•æ”¹è¿›æ¸¸æˆæå‡ºè¿‡ä¸€äº›å»ºè®®ï¼Œä½†å¤§å¤šæ•°æ—¶å€™æˆ‘å°½é‡ä¸å¹²æ¶‰ã€‚æˆ‘æ„Ÿè§‰è‡ªå·±æœ‰ç‚¹åƒä¸ªå›­ä¸â€”â€”æˆ‘åšäº†ä¸€äº›æµ‡æ°´å’Œé™¤è‰çš„å·¥ä½œï¼Œä½†å¼€èŠ±ç»“æœå…¨é ä»–ä»¬ã€‚æ­£å¦‚è¿™ç¯‡è®ºæ–‡æ‰€ç¤ºï¼Œå›¢é˜Ÿèƒ½å¤Ÿå¾—å‡ºä¸€äº›éå¸¸æœ‰ç”¨çš„ç»“è®ºâ€”â€”å¹¶ä¸”æœ€ç»ˆåšå‡ºäº†ä¸€äº›å¥½æ¸¸æˆï¼å…³äºåˆ›ä½œè¿‡ç¨‹çš„ä¼˜åŒ–è¿˜æœ‰æ›´å¤šä¸œè¥¿éœ€è¦å­¦ä¹ ï¼Œå¡å†…åŸºæ¢…éš†å¤§å­¦å¨±ä¹æŠ€æœ¯ä¸­å¿ƒè®¡åˆ’ç»§ç»­è¿›è¡Œè¿™ä¸ªé¡¹ç›®ã€‚â€ å¹¶è¡Œå¼€å‘ä»¥æœ€å¤§åŒ–æ•ˆæœé‚£ä¹ˆï¼Œä¸€æ—¦æˆ‘ä»¬ç»„å»ºäº†å›¢é˜Ÿï¼Œæˆ‘ä»¬åšäº†ä»€ä¹ˆï¼Ÿæˆ‘ä»¬å„è‡ªç‹¬ç«‹å·¥ä½œï¼è¿™å¬èµ·æ¥å¯èƒ½å¾ˆå¥‡æ€ªï¼Œä½†ç‹¬ç«‹å·¥ä½œçš„å¥½å¤„å®åœ¨å¤ªå¤§äº†ï¼Œä¸å®¹å¿½è§†ï¼š ç¼“è§£é£é™©ï¼šé€šè¿‡åŒæ—¶å¼€å‘å››ä¸ªåŸå‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åšå‡ºå†’é™©çš„è®¾è®¡å†³ç­–æ—¶æ„Ÿåˆ°å®‰å¿ƒï¼Œå› ä¸ºè‡³å°‘æœ‰ä¸€ä¸¤ä¸ªå¯èƒ½ä¼šæˆåŠŸã€‚ å‹å¥½ç«äº‰ï¼šæ¯ä¸ªäººéƒ½å› åªä¸“æ³¨äºè‡ªå·±è€Œå—ç›Šã€‚å°±åƒèµ„æœ¬ä¸»ä¹‰ä¸€æ ·ï¼ æ›´å¹¿æ³›çš„ä¸»é¢˜æ¢ç´¢ï¼šæˆ‘ä»¬å››ä¸ªäººéƒ½ä¸“æ³¨äºåŒä¸€ä¸ªä¸»é¢˜ï¼Œè¿™è¿«ä½¿æˆ‘ä»¬æ·±å…¥æ€è€ƒä¸»é¢˜ã€‚å¦‚æœæˆ‘ä»¬éƒ½åšäº†ä¸€æ ·çš„æ¸¸æˆï¼Œé‚£è¯¥å¤šå°´å°¬å•Šï¼è¿™è¿«ä½¿æˆ‘ä»¬è¿›å…¥ä¸€äº›æœ‰ç›Šçš„åˆ›ä½œé¢†åŸŸï¼Œå¹¶è®©æˆ‘ä»¬é¿å…äº†æ˜¾è€Œæ˜“è§çš„åˆ‡å…¥ç‚¹ã€‚ åˆ†äº«ä¸å…³æ€€ï¼šè™½ç„¶æˆ‘ä»¬æ²¡æœ‰å…±äº«ä»£ç ï¼ˆå¯ä»¥å…±äº«ä¹Ÿå¯ä»¥ä¸å…±äº«ï¼‰ï¼Œä½†æˆ‘ä»¬å‘ç°åˆ†äº«æ¦‚å¿µå’Œç†è§£å¾ˆæœ‰å¸®åŠ©ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªå›¢é˜Ÿæˆå‘˜å‘ç°äº†ä¸€ç§è¡¨ç¤ºå¼¹ç°§ç³»ç»Ÿçš„æœ‰æ•ˆæ–¹æ³•ï¼Œæ¯ä¸ªäººéƒ½ä¼šå—ç›Šã€‚ éšç€å‡ å‘¨è¿‡å»ï¼Œæˆ‘ä»¬å‘ç°å›¢é˜Ÿåˆä½œåœ¨æ¯ä¸ªå‘¨æœŸçš„å¼€å§‹å’Œç»“æŸæ—¶æœ€æœ‰ä»·å€¼ã€‚åœ¨æ¯ä¸ªå‘¨æœŸå¼€å§‹æ—¶ï¼Œå›¢é˜Ÿåˆä½œæœ‰åŠ©äºæç‚¼å’Œæ¯”è¾ƒæƒ³æ³•ã€‚ä¸€æ—¦è¿›å…¥å¼€å‘é˜¶æ®µï¼Œæˆ‘ä»¬å‘ç°åˆä½œæ›´å¤šæ˜¯ä¸€ç§å¹²æ‰°â€”â€”å› ä¸ºæ¯ä¸ªäººéƒ½å®Œå…¨æ²‰æµ¸åœ¨è‡ªå·±çš„å·¥ä½œä¸­ã€‚åˆ°æ¯ä¸ªå‘¨æœŸç»“æŸæ—¶ï¼Œæˆ‘ä»¬ä¼šå›åˆ°æˆ¿é—´é‡Œä¸€èµ·å·¥ä½œåˆ°å‡Œæ™¨ï¼Œä½“éªŒç«èµ›å¿«ç»“æŸçš„æ„Ÿè§‰ã€‚è¿™ç§åˆä½œä»·å€¼éšæ—¶é—´å˜åŒ–çš„å›¾è¡¨å¯èƒ½åƒè¿™æ ·ï¼š è®¾è®¡ï¼šå¤´è„‘é£æš´çš„ç¥è¯å’Œåˆ›é€ åŠ›ä¸€ä¸ªå¥½ç‚¹å­å¯èƒ½åœ¨ç¬é—´äº§ç”Ÿï¼Œä½†ç­‰å¾…ç‚¹å­å¯èƒ½æ˜¯ä¸€ç§ç…ç†¬ã€‚æ²¡æœ‰åŠæ³•å¼ºè¿«ä¸€ä¸ªå¥½ç‚¹å­è¿¸å‘å‡ºæ¥ï¼Œä½†è¿™ä¸€éƒ¨åˆ†å†…å®¹åº”è¯¥èƒ½å¸®åŠ©ä½ åŸ¹å…»ä½ çš„åˆ›é€ åŠ›ã€‚ æ­£å¼å¤´è„‘é£æš´çš„æˆåŠŸç‡ä¸º 0%æˆ‘ä»¬çœŸçš„å¾ˆåŠªåŠ›äº†â€”â€”å¤©å‘ï¼Œæˆ‘ä»¬çœŸçš„å¸Œæœ›å¤´è„‘é£æš´èƒ½å¥æ•ˆï¼æˆ‘ä»¬å®‰æ’äº†â€œå¤´è„‘é£æš´ä¼šè®®â€å’Œâ€œåœ†æ¡Œä¼šè®®â€ï¼Œæˆ‘ä»¬ç”¨ä¸åŒé¢œè‰²çš„è®°å·ç¬”åœ¨ç™½æ¿å’Œè¶…å¤§ä¾¿åˆ©è´´ä¸Šå†™ç”»ï¼Œæˆ‘ä»¬ç”šè‡³ç”¨äº†åƒâ€œè“å¤©â€è¿™æ ·çš„æ¿€åŠ±æ€§çŸ­è¯­æ¥å¸®åŠ©æˆ‘ä»¬æ‘†è„±æ€ç»´å®šåŠ¿ã€‚ä½†æœ€ç»ˆï¼Œåœ¨æˆ‘ä»¬åˆ›é€ çš„æ‰€æœ‰æ¸¸æˆä¸­ï¼Œæ²¡æœ‰ä¸€ä¸ªæ˜¯é€šè¿‡å¤§å®¶ååœ¨ä¸€èµ·è¿›è¡Œå¤´è„‘é£æš´ä¼šè®®å¾—å‡ºçš„ç»“æœã€‚ ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿæˆ‘ä»¬ä¹Ÿéå¸¸éœ‡æƒŠã€‚ä½†ç»è¿‡ä¸€ç•ªè°ƒæŸ¥ï¼Œæˆ‘ä»¬å‘ç°åˆ›é€ åŠ›ç¡®å®æ˜¯æ— æ³•è§„åˆ’çš„ã€‚ä½ ä¸èƒ½è¯´ï¼šâ€œå¤§å®¶4:15å¼€ä¸ªä¼šå¤´è„‘é£æš´ä¸€ä¸‹ï¼Œåˆ°5:00æˆ‘ä»¬å°±èƒ½æ‹¿å‡ºå››ä¸ªè¶…æ£’çš„æ¸¸æˆç‚¹å­ï¼â€ ä½†å¤´è„‘é£æš´å¹¶éæ— ç”¨ã€‚é€šè¿‡ç²¾å¿ƒç»„ç»‡å¤´è„‘é£æš´ä¼šè®®ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥æœŸå¾…ï¼ˆè‡³å°‘ï¼‰ä¸¤ä»¶åˆç†çš„äº‹æƒ…ã€‚ç¬¬ä¸€ï¼Œå½“ç„¶æ˜¯è®©æ‰€æœ‰äººéƒ½å¼€å§‹æ€è€ƒã€‚åœ¨å¼€å§‹æ€è€ƒåï¼Œè¿‡äº†ä¸€ä¼šå„¿ï¼Œæˆ–è®¸åœ¨å›å®¶çš„è·¯ä¸Šï¼Œæˆ–è®¸åœ¨æ´—æ¾¡æ—¶ï¼Œåˆæˆ–è®¸åœ¨é›ç‹—æ—¶ï¼Œä¸€ä¸ªç»å¦™çš„ç‚¹å­ä¼šåœ¨ä½ çš„è„‘æµ·ä¸­è¿¸å‘å‡ºæ¥ã€‚å½“ç„¶ï¼Œä¹Ÿæˆ–è®¸ä¸ä¼šã€‚ä½†æ®æˆ‘ä»¬æ‰€çŸ¥ï¼Œç¥ç§˜çš„å¤§è„‘åœ¨æˆ‘ä»¬æœ€ä¸ç»æ„é—´åšäº†å¤§é‡çš„æ€è€ƒã€‚ ç¬¬äºŒï¼Œå½“æœ‰å…·ä½“çš„ä¸œè¥¿å¯ä»¥è®¨è®ºæ—¶ï¼Œå¤´è„‘é£æš´å°±æœ‰ç”¨äº†ã€‚æ¯”å¦‚ï¼Œâ€œæˆ‘ä»¬å¦‚ä½•æ”¹è¿›è¿™ä¸ªï¼Ÿâ€æ¯”â€œè®©æˆ‘ä»¬éšä¾¿æƒ³ç‚¹ä»€ä¹ˆï¼â€æ›´å¥½ã€‚åˆå¦‚ï¼Œç»™å‡ºä¸€ä¸ªåŠæˆå½¢çš„ç‚¹å­å¹¶è®©å…¶ä»–äººæ¥å……å®å®ƒæ˜¯ç›¸å½“æœ‰ç”¨çš„ã€‚æ¯”èµ·åˆ›ä½œè€…ï¼Œäººä»¬æ›´é€‚åˆå½“è¯„è®ºå®¶ï¼Œä¸æ˜¯å—ï¼Ÿ æ”¶é›†æ¦‚å¿µè‰ºæœ¯å’ŒéŸ³ä¹ä»¥åˆ›é€ æƒ…ç»ªç›®æ ‡ä½œä¸ºå¤´è„‘é£æš´çš„æ›¿ä»£å“ï¼Œæˆ‘ä»¬å‘ç°æ”¶é›†ä¸€äº›å…·æœ‰ä¸ªäººæ„ä¹‰çš„è‰ºæœ¯å’ŒéŸ³ä¹ç‰¹åˆ«æœ‰ç”¨ã€‚äººä»¬è¯„è®ºè¯´ï¼Œè®¸å¤šæ¸¸æˆå¦‚â€œGravity Headâ€å’Œâ€œOn a Rainy Dayâ€åˆ›é€ äº†å¼•äººå…¥èƒœçš„æ°›å›´å¹¶å…·æœ‰å¼ºçƒˆçš„æƒ…æ„Ÿå¸å¼•åŠ›ã€‚è¿™ä¸æ˜¯å¶ç„¶çš„ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œé…ä¹å’ŒåˆæœŸç¾æœ¯å…±åŒåˆ›é€ äº†ä¸€ç§æ„Ÿå—ï¼Œæ¨åŠ¨äº†ç©æ³•ã€æ•…äº‹å’Œæœ€ç»ˆç¾æœ¯çš„è®¾å®šã€‚ Mr. Gablerï¼šâ€œã€Šé»é»ä¸–ç•Œã€‹çš„æƒ³æ³•æ˜¯æˆ‘åœ¨å›å®¶è·¯ä¸Šå¬ Astor Piazzolla çš„ã€ŠTango Apasionadoã€‹å¼€å¤´æ—¶äº§ç”Ÿçš„ï¼Œæˆ‘è„‘æµ·ä¸­æµ®ç°å‡ºä¸€ä¸ªæ—¥è½æ—¶åˆ†å°é•‡çš„æœ¦èƒ§æ™¯è±¡ï¼Œæ¯ä¸ªäººéƒ½ç¦»å¼€å®¶ï¼Œæ¬å‡ºæ¤…å­ã€æ¡Œå­å’Œä»»ä½•ä»–ä»¬èƒ½æ‰¾åˆ°çš„ä¸œè¥¿ï¼Œåœ¨å¸‚ä¸­å¿ƒå»ºé€ ä¸€åº§å·¨å¡”ã€‚æˆ‘ä¸çŸ¥é“ç¡®åˆ‡åŸå› ï¼Œä½†ä»–ä»¬æƒ³å¾€ä¸Šçˆ¬ï¼Œå†å¾€ä¸Šçˆ¬â€”â€”ä½†ä»–ä»¬ä¸æ˜¯å¾ˆå¥½çš„åœŸæœ¨å·¥ç¨‹å¸ˆï¼Œæ‰€ä»¥ä½ éœ€è¦å¸®åŠ©ä»–ä»¬ã€‚æœ€ç»ˆçš„åŸå‹å˜å¾—æ›´æ¬¢å¿«ä¸€äº›ï¼Œæˆ‘æŠŠéŸ³ä¹æ¢æˆäº† Piazzolla çš„æ›´æ¬¢å¿«çš„ã€ŠLibertangoã€‹ã€‚è¿™æ˜¯ä¸€ä¸ªåˆå§‹æƒ…ç»ªç›®æ ‡é€ å°±äº†æ•´ä¸ªæ¸¸æˆçš„ä¾‹å­ã€‚â€ åœ¨è„‘ä¸­æ¨¡æ‹Ÿâ€”â€”åšåŸå‹çš„åŸå‹è¿™çœŸçš„å¾ˆç®€å•ï¼ä½ è¦åšçš„å°±æ˜¯æƒ³è±¡ä½ çš„æ¸¸æˆç©å®¶è¯´ï¼šâ€œå“‡ï¼â€ç„¶åå€’æ¨å¹¶å¡«è¡¥ç©ºç™½ã€‚æ˜¯ä»€ä¹ˆè®©ä»–ä»¬äº«å—ä½ çš„æ¸¸æˆï¼Ÿä»–ä»¬æ„Ÿå—åˆ°äº†ä»€ä¹ˆï¼Ÿæ¸¸æˆä¸­æ˜¯ä»€ä¹ˆè®©ä»–ä»¬æœ‰äº†è¿™ç§ä½“éªŒï¼Ÿ å¯¹æˆ‘ä»¬çš„é‚£äº›æœ€æˆåŠŸçš„æ¸¸æˆæ¥è¯´ï¼Œæˆ‘ä»¬å¹¶ä¸å¯¹å®ƒä»¬å˜å¾—å¥½ç©æ„Ÿåˆ°æ„å¤–â€”â€”åœ¨æœ€å¥½çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨æ¥è§¦ä»»ä½•ä¸€è¡Œä»£ç ä¹‹å‰å°±çŸ¥é“è¿™ä¸ªæƒ³æ³•æ˜¯é è°±çš„ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»åœ¨æ€ç»´é‡Œæ¨¡æ‹Ÿè¿‡äº†æ¸¸æˆã€‚åä¹‹äº¦ç„¶ï¼Œæ²¡æœ‰ä¸€ä¸ªæ¸¸æˆæ˜¯å‡ºä¹æ„æ–™åœ°æˆåŠŸçš„ï¼Œæˆ‘ä»¬æ€»æ˜¯å…ˆçŸ¥å…ˆè§‰ã€‚ï¼ˆå¯æƒœçš„æ˜¯ï¼Œè¿™å¹¶æ²¡æœ‰é˜»æ­¢æˆ‘ä»¬å»è¿½æ±‚é‚£äº›åŠç”Ÿä¸ç†Ÿçš„æƒ³æ³•ã€‚ï¼‰ åœ¨ä½ çš„è„‘æµ·ä¸­æ¨¡æ‹Ÿä¹Ÿä½¿å¾—æœ€ç»ˆåŸå‹çš„å¼€å‘å˜å¾—éå¸¸å®¹æ˜“ï¼Œå› ä¸ºä½ ä¼šç¡®åˆ‡åœ°çŸ¥é“ä½ å°†è¦åšä»€ä¹ˆã€‚ä½ ä¸ä¼šä¸ºäº†åœ¨è®¾è®¡ä¸Šâ€œè¯•é”™â€æµªè´¹æ—¶é—´ä¿®æ”¹ä»£ç ã€‚ ä¸€ä½å›¢é˜Ÿæˆå‘˜æ‰¿è®¤ï¼šâ€æˆ‘ç»å¸¸åœ¨ä¸€å‘¨çš„å‰3ã€4å¤©é‡Œï¼Œåªæ˜¯ä¸ºäº†â€™çµæ„Ÿâ€™è€Œé—²é€›çœ‹ O-Zone éŸ³ä¹è§†é¢‘ã€å€’æŒ‚åœ¨æ‡’äººæ²™å‘ä¸Šå¬éŸ³ä¹ã€å¶å°”è¿è¡Œä¸€äº›ç³Ÿç³•çš„å¤§è„‘æ¨¡æ‹Ÿã€‚æœ€åå‘¨å››æˆ–å‘¨äº”æ¥ä¸´æ—¶ï¼Œæˆ‘ä¼šæ„Ÿåˆ°ææ…Œï¼Œå› ä¸ºæˆ‘ä»ç„¶ä¸çŸ¥é“å‘¨ä¸€è¦äº¤ä»€ä¹ˆï¼Œæ‰€ä»¥æˆ‘å°±ä¼šé‡‡çº³æœ€å¼ºçš„é‚£ä¸ªæƒ³æ³•ï¼Œå¹¶æ ¹æ®æœ¬å‘¨è‡ªå·±å–œæ¬¢ä¸Šçš„ä¸œè¥¿è¿›è¡Œè°ƒæ•´ï¼Œç›´åˆ°æ„Ÿè§‰åƒä¸€ä¸ªæœ‰è¶£çš„æ¸¸æˆï¼Œç„¶åæ¥ä¸‹æ¥å‡ å¤©ç†¬å¤œå†™ä»£ç å’Œç”»ç”»ã€‚å¯¹æˆ‘æ¥è¯´ï¼ˆæˆ‘æƒ³å¯¹æˆ‘ä»¬æ‰€æœ‰äººæ¥è¯´ï¼‰ï¼ŒèŠ±åœ¨â€™å‰æœŸåˆ¶ä½œâ€™ä¸Šçš„æ—¥å­æ— ç–‘æ¯”èŠ±åœ¨å®é™…å¼€å‘ä¸Šçš„æ—¥å­æ›´æœ‰ä»·å€¼ã€‚â€ å¼€å‘ï¼šæ²¡äººçŸ¥é“ä½ æ˜¯æ€ä¹ˆåšçš„ï¼Œä¹Ÿæ²¡äººåœ¨ä¹ä¸€æ—¦ä½ æœ‰äº†ä¸€ä¸ªå¥½ç‚¹å­ï¼Œè¿™é‡Œæœ‰ä¸€äº›æŠ€å·§å¯ä»¥è®©ä½ è¿…é€Ÿåšå‡ºä¸€ä¸ª demoï¼ å…ˆåšç©å…·ä»æ ¸å¿ƒæœºåˆ¶å¼€å§‹ã€‚æ— è®ºæ˜¯å¼¹ç°§ç³»ç»Ÿã€ç¾¤ä½“è¡Œä¸ºã€é‡åŠ›ç­‰ç­‰ï¼ŒèŠ±ä¸äº†å‡ ä¸ªå°æ—¶å°±èƒ½æŠŠæ¸¸æˆä¸»é¢˜åšå‡ºæ¥ã€‚è¿™ä¸ªâ€œç©å…·â€åº”è¯¥æ˜¯æ¸¸æˆçš„æ ¸å¿ƒæœºåˆ¶ã€‚å®ƒä¸éœ€è¦ä»»ä½•ç›®æ ‡æˆ–å†³ç­–ï¼Œæ²¡æœ‰è¾“èµ¢ï¼Œåªæ˜¯ä¸€ä¸ªå¥½ç©çš„ä¸œè¥¿ã€‚ Mr. Gablerï¼šâ€œå¯¹ã€ŠSuper Tummy Bubbleã€‹æ¥è¯´ï¼Œâ€˜ç©å…·â€™åªæ˜¯ä¸€å †æ‚¬æµ®åœ¨å°å®¹å™¨é‡Œçš„æ³¡æ³¡ã€‚æˆ‘ç©äº†ä¸€ä¼šå„¿è¿™ä¸ªç©å…·ï¼ŒæŠŠæ³¡æ³¡æ‰”æ¥æ‰”å»ï¼Œç„¶åè°ƒæ•´äº†ä¸€ä¸‹ç›´åˆ°æˆ‘æ„Ÿè§‰æ‰‹æŒ‡æˆ³è¿›æ³¡æ³¡é‡Œå¾ˆæœ‰è¶£ã€‚ä¹‹åï¼Œæ˜¯æ—¶å€™åŠ å…¥ä¸€äº›æ¸¸æˆæ€§äº†ã€‚åœ¨è¿™ä¸ªæ¸¸æˆé‡Œï¼Œæ¸¸æˆæ€§åŒ…æ‹¬å¯„ç”Ÿç€ä¸åŒè™«å­çš„æ³¡æ³¡ã€â€˜æˆ³ç ´â€™çš„æ¦‚å¿µã€â€˜è¿é”â€™çš„æ¦‚å¿µã€åˆ†æ•°è®¡æ•°å™¨ç­‰ã€‚â€ å¦‚æœèƒ½å·æ‡’ï¼Œé‚£å°±å·æ‡’è¿™å¯ä»¥è¯´æ˜¯è¿™ä¸ªé¡¹ç›®æœ€é‡è¦çš„æ•™è®­ä¹‹ä¸€ã€‚é€šå¸¸â€œæ­£ç¡®â€çš„è§£å†³æ–¹æ¡ˆå¹¶éæœ€ä½³è§£å†³æ–¹æ¡ˆã€‚æœ‰ç­–ç•¥åœ°å·æ‡’ä¼šä¸ºä½ èŠ‚çœæ—¶é—´å’Œé‡‘é’±ï¼›å®ƒä¼šè®©ä½ çš„æ¸¸æˆæ›´å¿«ï¼Œä½ çš„ç‰™é½¿æ›´ç™½ã€‚å¤§èƒ†åœ°ã€ç»å¸¸åœ°å·æ‡’ï¼å¦‚æœä¸€ä¸ªç®€å•çš„é˜´å½±å’Œçƒ˜ç„™çº¹ç†åŒæ ·æœ‰æ•ˆï¼Œå°±ä¸è¦è®¾ç½®å¤æ‚çš„å…‰ç…§å’Œé˜´å½±ï¼ˆã€ŠDarwin Hillã€‹ï¼‰ã€‚å¦‚æœä½ å¯ä»¥ç”¨åŒæ ·çš„æ•ˆæœè’™æ··è¿‡å…³ï¼Œå°±ä¸è¦ä¸ºäº†åˆ†æç”¨æˆ·çš„ç»˜ç”»è€Œè®¾ç½®å¤æ‚çš„æ¨¡å¼è¯†åˆ«ç³»ç»Ÿï¼ˆã€ŠSuburban Brawlã€‹ï¼‰ã€‚å½“å¿«é€Ÿæ‹‰ä¼¸çš„ä½å›¾èƒ½æ›´å¿«æ›´å®¹æ˜“åœ°è¾¾åˆ°åŒæ ·æ•ˆæœæ—¶ï¼Œå°±ä¸è¦ç»˜åˆ¶æ ·æ¡æ›²çº¿æˆ–åˆ›å»ºè‡ªå·±çš„çŸ¢é‡è‰ºæœ¯åº“ï¼ˆã€Šé»é»ä¸–ç•Œã€‹ï¼‰ã€‚æˆ‘ä»¬å‘ç°ï¼Œè¿™æ¡è§„åˆ™ä¹Ÿæ˜¯ç”Ÿæ´»ä¸­ä¸€æ¡æå¥½çš„é€šç”¨æ³•åˆ™ã€‚æ‡’äººä»¬ï¼Œæ³¨æ„äº†ã€‚ åŠæ—¶æ­¢æŸï¼Œå‰²èˆå¿ƒå¤´ä¹‹çˆ±åœ¨é¡¹ç›®å¼€å§‹æ—¶ï¼Œæˆ‘ä»¬æœ‰ä¸€ç§æƒ³è¦æŒ½æ•‘ä¸€åˆ‡çš„æ„¿æœ›â€”â€”å†å¤šèŠ±ä¸€ç‚¹æ—¶é—´å’Œç²¾åŠ›ï¼Œä¸€ä¸ªç³Ÿç³•çš„æ¸¸æˆè‚¯å®šä¼šå˜æˆå¤©æ‰ä¹‹ä½œï¼æˆ‘ä»¬æœ‰ä¸€ä¸ªè¿™æ ·çš„æ³¨å®šå¤±è´¥çš„åŸå‹â€”â€”å®ƒå§‹äºä¸€ä¸ªç¾ä¸½çš„å¼¹ç°§ç³»ç»Ÿã€‚å®ƒèƒ½æŒ¤å‹å’Œæ‹‰ä¼¸ï¼Œè®©ä½ æƒ³æŠ“ä½å®ƒå¹¶åˆ°å¤„æ‹‰æ‰¯ï¼Œä½†å®ƒå°±æ˜¯æ²¡æœ‰å˜æˆä¸€ä¸ªå¼•äººå…¥èƒœçš„æ¸¸æˆã€‚æœ€åˆçš„å¼¹ç°§ç³»ç»Ÿæœºåˆ¶åªèŠ±å‡ ä¸ªå°æ—¶å°±åˆ›å»ºå¥½äº†ï¼Œä½†éšåå®ƒå´è€—è´¹äº†æ•´æ•´ä¸€å‘¨çš„ç¼–ç å’Œé‡æ„æ—¶é—´ã€‚è¿™æ˜¯ä¸€æ¬¡å¯æ‚²çš„å°è¯•ï¼Œè¯•å›¾å¼ºè¡Œå°†è¿™ä¸ªæœºåˆ¶å˜æˆä¸€ä¸ªæ¸¸æˆã€‚ å¿«é€Ÿè¯†åˆ«èµ°ä¸é€šçš„æƒ³æ³•ã€åŠæ—¶æ­¢æŸå¹¶ç»§ç»­å‰è¿›éå¸¸é‡è¦ã€‚æˆ‘ä»¬å‘ç°ï¼Œé¡ºå…¶è‡ªç„¶æ¯”èŠ±æ—¶é—´è¯•å›¾æŒ½æ•‘ç°æœ‰çš„ä¸œè¥¿æ›´æœ‰ä»·å€¼ã€‚å¦‚æœä»¥åçµå…‰ä¸€é—ªï¼Œä½ æ€»å¯ä»¥å†å›æ¥ã€‚ Mr. Kucicï¼šâ€œæˆ‘çš„â€˜åœŸè±†â€™æœ€ç»ˆæˆä¸ºäº†ä¸€ä¸ªåœ¨ Flash ä¸­æ„å»ºçš„å®Œç¾çš„è½¯ä½“æ¨¡æ‹Ÿç³»ç»Ÿï¼Œå”¯ä¸€çš„é—®é¢˜æ˜¯å®ƒä¸€ç‚¹ä¹Ÿä¸å¥½ç©ã€‚å®ƒç»™æˆ‘å¸¦æ¥çš„å¤´ç—›æ¯”æ­»äº¡é‡‘å±è¿˜å¤šã€‚æˆ‘æµªè´¹äº†ä¸€å‘¨æ—¶é—´ï¼Œè€Œå®ƒç”šè‡³éƒ½ä¸èƒ½åŠ¨ã€‚ä½ å¾—çŸ¥é“ä»€ä¹ˆæ—¶å€™è¯¥ç»§ç»­ï¼Œä»€ä¹ˆæ—¶å€™è¯¥æ”¾å¼ƒã€‚â€ æ¼‚äº®çš„åŒ…è£…æ— æ³•æŒ½æ•‘ç³Ÿç³•çš„è®¾è®¡ï¼ˆæˆ–è€…è¯´ï¼Œâ€œçƒ‚æ³¥æ‰¶ä¸ä¸Šå¢™â€ï¼‰æˆ‘ä»¬å‘ç°æ¸¸æˆç©å®¶æ¯”ä½ æƒ³è±¡çš„è¦èªæ˜ï¼Œä»–ä»¬èƒ½çœ‹ç©¿ä½ æ˜¯å¦åœ¨è€èŠ±æ‹›ã€‚å¦‚æœæ¸¸æˆç©æ³•å¾ˆç³Ÿç³•ï¼Œé‚£å°±æ²¡æ•‘äº†â€”â€”ä¸–ç•Œä¸Šæ‰€æœ‰çš„ç¾æœ¯ã€éŸ³ä¹å’Œè”åŠ¨éƒ½æ— æ³•è®©å®ƒæˆä¸ºä¸€ä¸ªå¥½æ¸¸æˆã€‚è¿™å°±åƒæ˜¯ç»™ä¸€ä¸ªæ— è¶£çš„æ¸¸æˆæœºåˆ¶åŠ å…¥æœ€æ–°çš„3DåŠ¨ç”»ç”µå½±è§’è‰²ï¼Œæ²¡äººä¼šè¢«ç³Šå¼„ã€‚ Mr. Grayï¼šâ€œã€ŠSpin to Winã€‹çš„â€˜æ¸¸æˆç©æ³•â€™æ˜¯æ—‹è½¬ä½ çš„é¼ æ ‡æ¥è½¬åŠ¨å¤šä¸ªåœ†åœˆã€‚ä¸ºäº†æ©ç›–å®ƒä¸å¥½ç©çš„äº‹å®ï¼Œæˆ‘ç”¨60å¹´ä»£ã€ŠBewitchedã€‹é£æ ¼çš„è‰ºæœ¯å’ŒéŸ³ä¹ç»™æ¸¸æˆåšäº†æ¼‚äº®çš„åŒ…è£…ã€‚ä½†æ— è®ºæˆ‘æ€ä¹ˆæ‰“ç£¨è¿™ä¸ªæ¸¸æˆï¼Œå®ƒéƒ½æœ‰è¶£ä¸èµ·æ¥ã€‚å°½ç®¡æˆ‘ä»˜å‡ºäº†æ‰€æœ‰çš„çˆ±ï¼Œå®ƒè¿˜æ˜¯å¾ˆå¿«å°±æˆäº†ç½‘ç«™ä¸Šæœ€è¢«è®¨åŒçš„æ¸¸æˆä¹‹ä¸€ã€‚â€ ä½†æ•´ä½“ç¾å­¦å¾ˆé‡è¦ï¼åˆç†è¿ç”¨ç¾æœ¯ã€éŸ³æ•ˆå’ŒéŸ³ä¹è¿™å®é™…ä¸Šä¸æˆ‘ä»¬æœ€åˆçš„ä¸€ä¸ªå‡è®¾ç›¸åã€‚æˆ‘ä»¬å½“æ—¶è®¤ä¸ºç¾æœ¯å’ŒéŸ³æ•ˆæ ¹æœ¬ä¸ä¼šå¯¹åŸå‹æœ‰å½±å“ï¼Œä½†æˆ‘ä»¬é”™äº†ï¼ç©ä¸€ä¸ªç²¾å¿ƒæ‰“ç£¨çš„æ¸¸æˆå®é™…ä¸Šæ¯”ç©æœ‰ç€å®Œå…¨ç›¸åŒçš„ä»£ç ï¼Œä½†è‰ºæœ¯ç²—ç³™ã€éŸ³æ•ˆå·®çš„æ¸¸æˆæ„Ÿè§‰æ›´å¥½ã€‚ä¸è¿‡ï¼Œé‡è¦çš„æ˜¯è¦åšå‡ºä»¥ä¸‹åŒºåˆ†â€”â€”å•çº¯æ‰“ç£¨ç¾å­¦æ— æ³•æŒ½æ•‘ç³Ÿç³•çš„è®¾è®¡ï¼Œä½†å®ƒç¡®å®æœ‰èƒ½åŠ›è®©ä¸€ä¸ªå¥½æ¸¸æˆå˜å¾—æ›´å¥½ç©ã€‚è¿™å¹¶ä¸æ„å‘³ç€ä½ éœ€è¦æå…¶ç²¾ç¾çš„å›¾å½¢æˆ–ç¯ç»•å£°ã€‚è¿™åªæ˜¯è¯´ä½ å¯ä»¥é€šè¿‡å°†æ‰€æœ‰ä¸œè¥¿ç´§å¯†ç»“åˆèµ·æ¥è€Œå—ç›Šã€‚è®°ä½ï¼Œå³ä½¿æ˜¯â€œè¹©è„šâ€ä¹Ÿå¯ä»¥æ˜¯ä¸€ç§ç´§å¯†ç»“åˆçš„ç¾å­¦ï¼Œåªè¦ä½ ä»¥æ­£ç¡®çš„æ–¹å¼å‘ˆç°å®ƒã€‚ æ²¡äººå…³å¿ƒä½ çš„ä»£ç è´¨é‡å†æ¬¡å¼ºè°ƒï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ªä¼Ÿå¤§çš„å·¥ç¨‹å¸ˆä¸ä¸€å®šèƒ½æˆä¸ºä¸€ä¸ªä¼Ÿå¤§çš„åŸå‹åˆ¶ä½œè€…ã€‚â€æ­£ç¡®â€å’Œâ€å¯å¤ç”¨â€çš„æ–¹æ¡ˆé€šå¸¸ä¸æ˜¯æˆ‘ä»¬åœ¨å¿«é€Ÿã€ä¸€æ¬¡æ€§ä»£ç ä¸­æ‰€å¯»æ±‚çš„ã€‚å¯¹äºæ¯ä¸ªé—®é¢˜ï¼Œä½ åº”è¯¥èƒ½å¤Ÿæƒ³å‡ºä¸€å¤§å †è§£å†³æ–¹æ¡ˆï¼Œå¹¶é€‰æ‹©é‚£ä¸ªèƒ½æœ€å¿«åšå®Œçš„æ–¹æ¡ˆã€‚ç”¨æˆ·æ°¸è¿œä¸ä¼šçœ‹åˆ°ä½ ä¼Ÿå¤§çš„ä»£ç ï¼Œä»–ä»¬ä¹Ÿä¸åœ¨ä¹ã€‚ Mr. Shodhanï¼šâ€œä»£ç çš„è¿‡åº¦è®¾è®¡å¾ˆå®¹æ˜“è®©æˆ‘ä»¬åšå‡ºä¸€äº›é€šç”¨å·¥å…·æˆ–æŠ€æœ¯æ¼”ç¤ºï¼Œä½†ä»–ä»¬å¹¶ä¸å¯ç©ã€‚è¿™å°±åƒæ˜¯ä¸€ä¸ªæ‘‡æ»šæ˜æ˜Ÿæ²‰æµ¸åœ¨è‡ªå·±çš„è‰ºæœ¯ä¸­ï¼Œè€Œè§‚ä¼—åœ¨æ‰“å“ˆæ¬ ï¼å¯¹â€˜è¿›åŒ–â€™é‚£ä¸ªä¸»é¢˜ï¼Œæˆ‘ç”¨ç»†åˆ†æ›²é¢å’Œå¡é€šæ¸²æŸ“æ•ˆæœåšäº†ä¸€ä¸ªç¨‹åºï¼Œé€šè¿‡æ‚äº¤ç¥–å…ˆæ ‘æ¥è¿›åŒ–3Dæ¨¡å‹ã€‚è¿™é‡Œæœ‰å¾ˆå¤šå¾ˆé…·çš„æŠ€æœ¯ï¼Œä½†å®Œå…¨æ²¡æœ‰æ¸¸æˆæ€§ï¼â€ é€šç”¨çš„æŠ€å·§ï¼šå…³äºè¥é€ å¤šæ±ä¹è¶£çš„æ•™ç¨‹é™¤äº†åœ¨åŸå‹åˆ¶ä½œæ–¹é¢å¸å–äº†æƒ¨ç—›çš„æ•™è®­å¤–ï¼Œæˆ‘ä»¬è¿˜å¶ç„¶å‘ç°äº†ä¸€äº›é€šç”¨çš„å‡†åˆ™ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æ˜¾è‘—å¢åŠ â€œä¹è¶£â€çš„å‡†åˆ™ã€‚ å¤æ‚ä¸ä¸€å®šæœ‰è¶£å¦‚æœäººç±»ä»¥â€œçƒå’Œå¹³é¢â€è¿™ä¸ªä¸»é¢˜çš„å˜ä½“æ¥å¨±ä¹è‡ªå·±æ•°åƒå¹´ï¼Œæˆ‘ä»¬å¯èƒ½åœ¨è¿™äº›æ–°å¥‡çš„è§†é¢‘æ¸¸æˆä¸Šåšå¾—å¤ªè¿‡å¤´äº†ã€‚æˆ‘ä»¬å®Œå…¨å¯èƒ½ç”¨åŸºæœ¬çš„å…ƒç´ æ¥è·å¾—ä¹è¶£ã€‚æƒ³æƒ³ã€Šä¿„ç½—æ–¯æ–¹å—ã€‹ã€ã€Šåƒè±†äººã€‹ä»¥åŠä»»ä½•ç»å…¸çš„è¡—æœºæ¸¸æˆã€‚å°±åƒç½—å¯†æ¬§ä¸æœ±ä¸½å¶çš„çˆ±æƒ…æ•…äº‹åŸå‹ä¸€æ ·ï¼Œè¿™äº›æ¸¸æˆçš„æœºåˆ¶å¦‚æ­¤ä¹‹å¥½ï¼Œä»¥è‡³äºå‡ åå¹´åæˆ‘ä»¬ä»åœ¨ä½¿ç”¨å®ƒä»¬ã€‚é•œå¤´å…‰æ™•ã€å‡¹å‡¸è´´å›¾ã€æ³›å…‰å’Œå…¶ä»–æƒŠäººçš„æ–°æŠ€æœ¯æ˜¯ä¸é”™ï¼Œä½†å®ƒä»¬ä¸ä¼šè®©ä½ çš„æ¸¸æˆæ›´æœ‰è¶£ã€‚ç”¨ä¸€ä¸ªç®€å•çš„åŸå‹å‘è‡ªå·±è¯æ˜ä½ çš„æ ¸å¿ƒæœºåˆ¶å€¼å¾—ä¸€åšï¼Œåœ¨ä½ ç¡®ä¿¡ä¹‹åï¼ŒæŠŠå®ƒå˜å¾—æ¼‚äº®ã€‚ åˆ›é€ ä¸€ç§æ‹¥æœ‰æ„Ÿæ¥è®©ç©å®¶ä¸æ–­é‡ç©æˆ‘ä»¬å¶ç„¶å‘ç°ï¼Œæœ€å…·é‡ç©ä»·å€¼çš„æ¸¸æˆæ˜¯é‚£äº›ä¸åˆ›é€ æˆ–è‡ªå®šä¹‰ç›¸å…³çš„æ¸¸æˆã€‚ä¾‹å¦‚ï¼Œâ€œç”¨æ‰‹å’Œé›¨ä¼åˆ¶ä½œä¸€æ£µä»¤äººæ¯›éª¨æ‚šç„¶çš„æ ‘â€ï¼Œæˆ–è€…â€œç”»ä½ è‡ªå·±çš„æˆ¿å­â€ï¼Œæˆ–è€…â€œå»ºé€ ä½ è‡ªå·±çš„å¡”â€ï¼Œæˆ–è€…â€œè¿›åŒ–ä½ è‡ªå·±çš„çªå˜ç”Ÿç‰©ç§æ—â€ã€‚æ˜¾ç„¶æˆ‘ä»¬èƒ½åœ¨è®¸å¤šåœ°æ–¹ä¸­è§åˆ°è¿™ç§ç°è±¡â€”â€”æ¸¸æˆé‡Œçš„æè„¸åŠŸèƒ½ã€è‡ªå®šä¹‰çš„æ‰‹æœºé“ƒå£°ã€ä¹ƒè‡³é‚£äº›â€œä¸ä¼—ä¸åŒï¼Œè¡¨è¾¾è‡ªæˆ‘â€çš„å¹¿å‘Šã€‚æ‰€ä»¥ï¼Œè·³ä¸Šè¿™è¶Ÿæ½®æµå§ï¼åˆ›é€ ä¸€ç§æ‹¥æœ‰æ„Ÿï¼Œè®©ä»–ä»¬ä¸æ–­é‡ç©ã€‚ â€œå®éªŒæ€§â€ä¸æ„å‘³ç€â€å¤æ‚â€åœ¨é¡¹ç›®æ—©æœŸï¼Œæˆ‘ä»¬åˆ¶ä½œçš„è®¸å¤šæ¸¸æˆéƒ½å¤ªè¿‡å¤æ‚ã€‚å®ƒä»¬çš„ç”¨æˆ·ç•Œé¢ä»¤äººå›°æƒ‘ï¼Œè€Œä¸”æŒ‰é”®æ˜ å°„åˆ°çš„åŠ¨ä½œä¹Ÿä¸è‡ªç„¶æˆ–ä¸ç›´è§‚ã€‚é™¤éæˆ‘ä»¬èƒ½æœ€å°åŒ–ç©å®¶ç†è§£æ¸¸æˆä¹‹å‰çš„ç–‘æƒ‘æ—¶é—´ï¼Œå¦åˆ™ç©å®¶ä¼šæ„Ÿåˆ°æ²®ä¸§ï¼Œå†ä¹Ÿä¸ç©è¿™ä¸ªæ¸¸æˆï¼Œç”šè‡³å†ä¹Ÿä¸æ¥æˆ‘ä»¬ç½‘ç«™ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å‘ç°æ—¢å¯ä»¥åšåˆ°â€å®éªŒæ€§â€ï¼Œåˆå¯ä»¥ä¿æŒæ˜“äºç†è§£ã€‚ Mr. Shodhanï¼šâ€œæˆ‘çš„ç¬¬ä¸€è½®æ¸¸æˆâ€˜Spaceball Munchâ€™æ˜¯è€æ¸¸æˆâ€˜Gorillasâ€™çš„3Dç‰ˆæœ¬ï¼Œåœ¨é‚£ä¸ªæ¸¸æˆé‡Œï¼Œä½ æŒ‡å®šä¸€ä¸ªè§’åº¦å’Œé€Ÿåº¦ï¼Œè®©ä¸€ä¸ªçŒ©çŒ©å‘å¦ä¸€ä¸ªçŒ©çŒ©æ‰”é¦™è•‰ã€‚ç°åœ¨ä½ ä¸ä»…åœ¨3Dç¯å¢ƒä¸­ï¼Œæ›´æ˜¯ç”¨ç€å¼§å½¢è§†è§’ï¼Œè¿˜åœ¨ä¸€ä¸ªçƒå½¢åœºåœ°ä¸Šè¿›è¡Œæ¸¸æˆã€‚æ‰€ä»¥ä½ è¦è€ƒè™‘ä¸¤ä¸ªè§’åº¦å’Œä¸€ä¸ªé€Ÿåº¦ã€‚å¦å¤–ï¼Œå®ƒç°åœ¨ä¹Ÿä¸å†æ˜¯ä¸€ä¸ªç¦»æ•£çš„å›åˆåˆ¶æ¸¸æˆï¼Œè€Œæ˜¯éœ€è¦æ§åˆ¶ä¸€ä¸ªè¿ç»­çš„ç²’å­æµï¼ŒåŒæ—¶å¿…é¡»å‡»ä¸­æ‰€æœ‰è¿™äº›ç§»åŠ¨çš„ç‰©ä½“ã€‚è¿™å¼ æˆªå›¾å±•ç¤ºäº†è¿™ç§æ¯«æ— æ„ä¹‰çš„å¤æ‚åº¦â€ æœç€ä¸€ä¸ªæ˜ç¡®å®šä¹‰çš„ç›®æ ‡å‰è¿›äººä»¬å¾ˆå®¹æ˜“å¿˜è®°è®¾ç½®ä¸€ä¸ªæ˜ç¡®å®šä¹‰çš„ç›®æ ‡ã€‚æ²¡æœ‰æ¸¸æˆç›®æ ‡ï¼Œä¸€ä¸ªåŸå‹å°±åªæ˜¯ä¸€ä¸ªç©å…·ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ¸¸æˆã€‚å‡ºäºæŸç§åŸå› ï¼Œäººä»¬ä¼¼ä¹å–œæ¬¢æœ‰å¤±è´¥çš„æœºä¼šã€‚ä¸€ä¸ªç›®æ ‡å¯ä»¥æ˜¯ä»»ä½•äº‹æƒ…â€”â€”æ¯”å¦‚â€œåœ¨xæ—¶é—´å†…æ”¶é›†xä¸ªå°éƒ¨ä»¶â€ï¼Œæˆ–è€…â€œä¿æŒç³»ç»Ÿç¨³å®šâ€ï¼Œæˆ–è€…â€œåœ¨ä¸ç¢°åˆ°ä»»ä½•åä¸œè¥¿çš„æƒ…å†µä¸‹ç©¿è¶Šä¸€ä¸ªç©ºé—´â€ã€‚ä½†æ‰¾åˆ°ä¸€ä¸ªä¸è®©äººè§‰å¾—ç‰µå¼ºçš„ç›®æ ‡è¿˜æ˜¯å¾ˆéš¾çš„ï¼ˆæ¯”å¦‚æ—¶é™ä¸€èˆ¬å°±å¾ˆç‰µå¼ºï¼‰ã€‚æˆ‘ä»¬å‘ç°ï¼Œæœ€å¥½çš„ç›®æ ‡æ˜¯æ¸¸æˆç©æ³•ä¸­å›ºæœ‰çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚åœ¨ã€Šé»é»ä¸–ç•Œã€‹ä¸­ï¼Œéšå«çš„ç›®æ ‡å°±æ˜¯ç®€å•åœ°â€œå‘ä¸Šå»ºé€ â€ã€‚ è®©å®ƒå¤šæ±ï¼å¤šæ±ï¼ˆJuicyï¼‰æ˜¯æˆ‘ä»¬ç”¨æ¥å½¢å®¹æŒç»­ä¸”ä¸°å¯Œçš„ç”¨æˆ·åé¦ˆçš„æœ¯è¯­ã€‚ä¸€ä¸ªå¤šæ±çš„æ¸¸æˆå…ƒç´ åœ¨ä½ è§¦æ‘¸å®ƒæ—¶ä¼šå¼¹è·³ã€æ‰­åŠ¨ã€å–·å°„å¹¶å‘å‡ºä¸€ç‚¹å£°éŸ³ã€‚ä¸€ä¸ªå¤šæ±çš„æ¸¸æˆå¾ˆæ´»æ³¼ï¼Œå®ƒå¯¹ä½ åšçš„æ¯ä»¶äº‹éƒ½æœ‰ååº”â€”â€”ä¸€ç‚¹ç‚¹è¾“å…¥å°±ä¼šäº§ç”Ÿå¤§é‡çš„å›åº”å’Œè¿é”ååº”ï¼Œè¿™è®©ç©å®¶æ„Ÿè§‰è‡ªå·±æŒæ§ç€ä¸–ç•Œã€‚å®ƒä¹Ÿåœ¨äº’åŠ¨æ—¶ä¸æ–­è®©ç©å®¶çŸ¥é“è‡ªå·±æ­£åœ¨åšä»€ä¹ˆï¼Œå¼•å¯¼ä»–ä»¬äº†è§£æ¸¸æˆè§„åˆ™ã€‚ ä½ å¯èƒ½ç»å†è¿‡çš„ä¸€äº›å¤šæ±çš„ä¾‹å­å¯èƒ½åŒ…æ‹¬ï¼š ã€ŠAlien Hominidã€‹ï¼šéå¸¸å¤¸å¼ çš„æ•Œäººçˆ†ç‚¸å’Œè¡€æ¶²é£æº…ã€‚ ã€Šé©¬é‡Œå¥¥å…„å¼Ÿã€‹ï¼šåœ¨ä¸€ä¸ªå……æ»¡é‡‘å¸çš„æˆ¿é—´é‡Œå¼¹è·³ï¼Œå®å½“å£°å¾ˆè®©äººæ»¡è¶³ã€‚ å¼¹ç æœºï¼šä¸€è‚¡æ°¸æ— æ­¢å¢ƒçš„çƒæµå…¨åœ¨ä½ çš„æ§åˆ¶ä¹‹ä¸‹ã€‚ ã€Šè¶…çº§æ–¹å—æˆ˜å£«2 Turboã€‹ï¼šè¿å‡»æ—¶ï¼ŒåŠ¨ç”»å’Œç‰¹æ•ˆå±‚å‡ºä¸ç©·ã€‚ æœ€åçš„æƒ³æ³•è¿™æ¬¡å…³äºå®éªŒæ€§æ¸¸æˆé¡¹ç›®çš„å›¢é˜Ÿåˆä½œæ˜¯ä¸€ä»¶éå¸¸æ„‰å¿«çš„äº‹ã€‚æˆ‘ä»¬å¸Œæœ›ä¸‹æ¬¡å½“ä½ å°è¯•ä¸€äº›æ–°çš„æˆ–æœ‰ç‚¹ç–¯ç‹‚çš„ä¸œè¥¿æ—¶ï¼Œè¿™äº›å»ºè®®å’ŒæŠ€å·§èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚è°çŸ¥é“å‘¢ï¼Œä½ ä»Šå¤©æ—©ä¸Šæœ‰çš„é‚£ä¸ªå°æƒ³æ³•å¯èƒ½å°±æ˜¯ä¸‹ä¸€ä¸ªç¥ä½œã€‚å¬é›†ä¸€äº›æœ‹å‹æˆ–è€…å•å¹²ï¼Œå¿«å»å°è¯•å¹¶åˆ¶ä½œåŸå‹å§ï¼ä½ å¯èƒ½ä¼šç»™è‡ªå·±ä¸€ä¸ªæƒŠå–œã€‚ æˆ‘ä»¬çš„é¡¾é—®å‹å¥½åœ°æŒ‡å‡ºï¼Œâ€œå¿«é€ŸåŸå‹å¯èƒ½å¾ˆåƒæ€€ä¸€ä¸ªå­©å­ã€‚æ²¡äººæŒ‡æœ›æ¯æ¬¡éƒ½èƒ½èµ¢ï¼Œä½†ä½ æ€»æ˜¯å­¦åˆ°æ–°ä¸œè¥¿ï¼Œè€Œä¸”è¿™é€šå¸¸å¾ˆæœ‰è¶£ï¼â€ ç¥ä½ åŸå‹åˆ¶ä½œæ„‰å¿«ï¼ æ­¤é¡µé¢è½¬è½½è‡ª Gamasutra ç½‘ç«™ï¼šhttp://www.gamasutra.com/features/20051026/gabler_01.shtml ä¾¿æ·æ¸…å•ï¼ å‡†å¤‡ï¼šå¿«é€Ÿæ˜¯ä¸€ç§å¿ƒæ€ æ‹¥æŠ±å¤±è´¥çš„å¯èƒ½æ€§â€”â€”å®ƒé¼“åŠ±åˆ›é€ æ€§å†’é™© å¼ºåˆ¶ç¼©çŸ­å¼€å‘å‘¨æœŸï¼ˆæ›´å¤šæ—¶é—´ != æ›´é«˜è´¨é‡ï¼‰ å¯¹åˆ›é€ çš„çº¦æŸè®©ä½ æ›´æƒ³åˆ›é€  ç»„å»ºä¸€æ”¯ä¼˜ç§€çš„å›¢é˜Ÿå’Œä¸€ä½å®¢è§‚çš„é¡¾é—®â€”â€”å¿ƒæ€ä¸æ‰ååŒç­‰é‡è¦ å¹¶è¡Œå¼€å‘ä»¥æœ€å¤§åŒ–æ•ˆæœ è®¾è®¡ï¼šå¤´è„‘é£æš´çš„ç¥è¯å’Œåˆ›é€ åŠ› æ­£å¼å¤´è„‘é£æš´çš„æˆåŠŸç‡ä¸º 0% æ”¶é›†æ¦‚å¿µè‰ºæœ¯å’ŒéŸ³ä¹ä»¥åˆ›é€ æƒ…ç»ªç›®æ ‡ åœ¨è„‘ä¸­æ¨¡æ‹Ÿâ€”â€”åšåŸå‹çš„åŸå‹ å¼€å‘ï¼šæ²¡äººçŸ¥é“ä½ æ˜¯æ€ä¹ˆåšçš„ï¼Œä¹Ÿæ²¡äººåœ¨ä¹ å…ˆåšç©å…· å¦‚æœèƒ½å·æ‡’ï¼Œé‚£å°±å·æ‡’ åŠæ—¶æ­¢æŸï¼Œå‰²èˆå¿ƒå¤´ä¹‹çˆ± æ¼‚äº®çš„åŒ…è£…æ— æ³•æŒ½æ•‘ç³Ÿç³•çš„è®¾è®¡ï¼ˆæˆ–è€…è¯´ï¼Œâ€çƒ‚æ³¥æ‰¶ä¸ä¸Šå¢™â€ï¼‰ ä½†æ•´ä½“ç¾å­¦å¾ˆé‡è¦ï¼åˆç†è¿ç”¨ç¾æœ¯ã€éŸ³æ•ˆå’ŒéŸ³ä¹ æ²¡äººå…³å¿ƒä½ çš„ä»£ç è´¨é‡ é€šç”¨çš„æŠ€å·§ï¼šå…³äºè¥é€ å¤šæ±ä¹è¶£çš„æ•™ç¨‹ å¤æ‚ä¸ä¸€å®šæœ‰è¶£ åˆ›é€ ä¸€ç§æ‹¥æœ‰æ„Ÿæ¥è®©ç©å®¶ä¸æ–­é‡ç© â€œå®éªŒæ€§â€ä¸æ„å‘³ç€â€å¤æ‚â€ æœç€ä¸€ä¸ªæ˜ç¡®å®šä¹‰çš„ç›®æ ‡å‰è¿› è®©å®ƒå¤šæ±ï¼","categories":[{"name":"æ‚è°ˆ","slug":"æ‚è°ˆ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/"},{"name":"ç¿»è¯‘","slug":"æ‚è°ˆ/ç¿»è¯‘","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/%E7%BF%BB%E8%AF%91/"}],"tags":[]},{"title":"Lab 2.1 ç³»ç»Ÿè°ƒç”¨æµç¨‹â€”â€”ä»¥sleepä¸ºä¾‹","slug":"learning/open-course/MIT-6.S081/Labs/lab2_1-syscall_process","date":"2025-10-15T08:02:38.000Z","updated":"2025-10-19T03:44:03.330Z","comments":true,"path":"wiki/learning/open-course/MIT-6.S081/Labs/lab2_1-syscall_process/","permalink":"http://rinevard.github.io/wiki/learning/open-course/MIT-6.S081/Labs/lab2_1-syscall_process/","excerpt":"","text":"æˆ‘ä»¬çŸ¥é“åº”ç”¨ç¨‹åºåœ¨User modeä¸‹è¿è¡Œï¼Œè€Œç³»ç»Ÿå‡½æ•°çš„æ‰§è¡Œéœ€è¦Supervisor modeï¼Œé‚£åœ¨ç³»ç»Ÿè°ƒç”¨æ—¶ï¼ŒUser modeæ˜¯æ€ä¹ˆè¿›å…¥Supervisor modeçš„å‘¢ï¼Ÿæˆ‘ä»¬ä»¥sleepçš„æ‰§è¡Œä¸ºä¾‹ï¼Œçœ‹çœ‹éƒ½å‘ç”Ÿäº†ä»€ä¹ˆã€‚é¦–å…ˆæˆ‘ä»¬ç”¨ git checkout util åˆ‡æ¢åˆ° util åˆ†æ”¯ä¸Šã€‚ åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆç®€ä»‹ä¸€ä¸‹ECALLæŒ‡ä»¤å’Œstvecï¼ˆSupervisor Trap Vector Base Address Registerï¼‰å¯„å­˜å™¨ã€‚ ECALL ä¼šè§¦å‘ä¸€ä¸ªå¼‚å¸¸ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ç”¨æˆ·æ€è§¦å‘è¿™ä¸ªå¼‚å¸¸ï¼Œç¨‹åºè®¡æ•°å™¨ pc å°±ä¼šæ ¹æ® stvec è¿›è¡Œè·³è½¬ï¼Œåˆ°è¾¾å¼‚å¸¸å¤„ç†å¤„ã€‚ ä»¥ä¸‹æ˜¯ risc-v æ‰‹å†Œ å¯¹ ECALL çš„è§£é‡Šï¼š When executed in U-mode, S-mode, or M-mode, it generates an environment-call-from-U-mode exception, environment-call-from-S-mode exception, or environment-call-from-M-mode exception, respectively, and performs no other operation. å¦‚æœåœ¨ U-mode æ‰§è¡Œï¼ŒECALL æŒ‡ä»¤ä¼šäº§ç”Ÿä¸€ä¸ªæ¥è‡ª U-mode çš„ç¯å¢ƒè°ƒç”¨å¼‚å¸¸ï¼›å¦‚æœåœ¨ S-mode æ‰§è¡Œï¼Œåˆ™äº§ç”Ÿæ¥è‡ª S-mode çš„ç¯å¢ƒè°ƒç”¨å¼‚å¸¸ï¼›å¦‚æœåœ¨ M-mode æ‰§è¡Œï¼Œåˆ™äº§ç”Ÿæ¥è‡ª M-mode çš„ç¯å¢ƒè°ƒç”¨å¼‚å¸¸ã€‚ ä»¥ä¸‹æ˜¯ risc-v æ‰‹å†Œå¯¹ stvec å¯„å­˜å™¨çš„ç®€ä»‹ï¼š BASEæ˜¯4å­—èŠ‚å¯¹é½çš„ï¼ˆRISC-V æ‰‹å†Œ P80ï¼‰ï¼Œæ‰€ä»¥åœ¨MODE == 0æ—¶ï¼Œæˆ‘ä»¬è·³è½¬åˆ°çš„åœ°å€æ˜¯ (stvec &gt;&gt; 2) &lt;&lt; 2ï¼Œè€Œç”±äº MODE == 0ï¼Œè¿™ä¸ªå€¼å°±æ˜¯ stvec ï¼›åœ¨MODE == 1æ—¶ï¼Œæˆ‘ä»¬è½¬åˆ°çš„åœ°å€æ˜¯ (stvec &gt;&gt; 2) &lt;&lt; 2 + 4*cause æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥å¼€å§‹çœ‹çœ‹ç³»ç»Ÿè°ƒç”¨æ—¶ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼æˆ‘ä»¬ä¼šä»¥sleepä¸ºä¾‹ã€‚ é¦–å…ˆæˆ‘ä»¬æ‰“å¼€gdb-multiarchï¼ˆå‚è€ƒ Note 0 çš„â€ç”¨ç»ˆç«¯è°ƒè¯•â€œï¼‰ï¼Œç„¶åç”¨ set prompt \\\\001\\\\033[1;33m\\\\002(gdb) \\\\001\\\\033[0m\\\\002 æ¥é«˜äº® â€œ(gdb)â€ ä»¥æ–¹ä¾¿è§‚å¯Ÿè‡ªå·±çš„è¾“å…¥ã€‚ ç”¨ file user/_sleep åˆ‡æ¢åˆ°ç”¨æˆ·ç¬¦å·è¡¨ï¼Œæ¥ç€ç”¨cè¿è¡Œåˆ°xv6çš„shellå¯åŠ¨ã€‚ è§‚å¯Ÿå³è¾¹çš„ç»ˆç«¯å¯ä»¥çœ‹åˆ°shellå·²ç»æˆåŠŸå¯åŠ¨äº†ã€‚ ç„¶åæˆ‘ä»¬åœ¨gdbé‡ŒæŒ‰ä¸‹ctrl+cæ¥ä¸­æ–­ï¼Œå¹¶ç”¨ b main è®¾ç½®æ–­ç‚¹ï¼Œå†ä½¿ç”¨ layout split è®©gdbæ˜¾ç¤ºå‡ºæºç å’Œæ±‡ç¼–ä»£ç ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨gdbé‡Œè¾“å…¥ c ä»¥è®©xv6ç»§ç»­æ‰§è¡Œï¼Œå¦åˆ™xv6çš„shellä¼šå¤„äºæš‚åœçŠ¶æ€ï¼Œä¸èƒ½å¤„ç†è¾“å…¥ã€‚ ç„¶ååœ¨xv6çš„shellé‡Œæ‰§è¡Œ sleep 1 ï¼Œå®ƒä¼šåœ¨æ–­ç‚¹å¤„åœä¸‹ã€‚ è§‚å¯Ÿå·¦è¾¹çš„gdbï¼Œå¯ä»¥çœ‹åˆ°å®ƒåœåœ¨äº†sleep.cçš„mainå‡½æ•°ã€‚ éšä¾¿æ‰§è¡Œä¸€ä¸‹ç›´åˆ°åˆ°è¾¾sleepè¿™è¡Œï¼Œn è¡¨ç¤ºæ‰§è¡Œä¸€è¡Œcè¯­è¨€ï¼Œsiè¡¨ç¤ºæ‰§è¡Œä¸€ä¸ªæ±‡ç¼–è¯­å¥ã€‚ æˆ‘ä»¬ç”¨siè¿›å…¥atoiï¼Œç„¶åäº¤æ›¿ç€ç”¨nå’Œsiï¼Œåœ¨å¿«åˆ°returnæ—¶ç”¨siï¼Œå°±èƒ½ç¦»å¼€atoiå›åˆ°sleep.cã€‚ è§‚å¯Ÿå·¦è¾¹çš„gdbï¼Œå’Œä¸Šå›¾ç›¸æ¯”ï¼Œè™½ç„¶cè¯­è¨€çš„ä½ç½®æ²¡æœ‰å˜åŒ–ï¼Œä½†æ±‡ç¼–ä»£ç çš„ä½ç½®æ˜¯æœ‰å˜åŒ–çš„ã€‚ ä¹‹åç”¨siï¼Œä¼šå‘ç°æˆ‘ä»¬è·³è½¬åˆ°äº† usys.Sï¼Œå®ƒæŠŠsleepçš„ç³»ç»Ÿè°ƒç”¨å·æ”¾åˆ°å¯„å­˜å™¨a7é‡Œï¼Œç„¶åå€ŸåŠ©ecallæ¥æ‰§è¡Œç³»ç»Ÿè°ƒç”¨ã€‚ è§‚å¯Ÿå·¦è¾¹çš„gdbå‘ç°æˆ‘ä»¬å·²ç»è¿›å…¥äº†usys.S å¦‚æœæˆ‘ä»¬ç›´æ¥ç”¨å‡ ä¸ªsiï¼Œä¼šå‘ç°ecallå¹¶æ²¡æœ‰åƒjalä¹‹ç±»çš„è·³è½¬è¯­å¥ä¸€æ ·å¸¦æˆ‘ä»¬åˆ°ä¸€äº›ç¥å¥‡çš„åœ°æ–¹ï¼Œè€Œæ˜¯ç›´æ¥åˆ°äº†ä¸‹ä¸€è¡Œã€‚è¿™æ˜¯å› ä¸ºecallä¸æ˜¯è·³è½¬ï¼Œè€Œæ˜¯æŠ›å‡ºäº†ä¸€ä¸ªå¼‚å¸¸ï¼Œå†…æ ¸è‡ªåŠ¨å¤„ç†äº†å¼‚å¸¸ã€‚ è¿™æ ·çœ‹æ¥ï¼Œæˆ‘ä»¬è¦æ‰¾åˆ°è¿™ä¸ªå¼‚å¸¸çš„å¼€å§‹å¤„å¹¶è®¾ç½®æ–­ç‚¹æ‰è¡Œã€‚è¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰è¯´è¿‡ecallæŠ›å‡ºå¼‚å¸¸æ—¶pcä¼šè·³è½¬åˆ°å“ªé‡Œå—ï¼Ÿç­”æ¡ˆæ˜¯å®ƒä¼šæ ¹æ®å¯„å­˜å™¨stvecçš„å€¼è¿›è¡Œè·³è½¬ã€‚è®©æˆ‘ä»¬å€ŸåŠ©p /x $stvecçœ‹çœ‹stvecçš„å€¼ã€‚ è§‚å¯Ÿå·¦è¾¹çš„gdbï¼Œå‘ç°stvecçš„å€¼æ˜¯ 0x3ffffff000ï¼Œè‡³å°‘åœ¨æˆ‘è¿™é‡Œæ˜¯è¿™æ ·ã€‚ å›é¡¾ä¸€ä¸‹stvecå¯„å­˜å™¨çš„ç»“æ„å’ŒåŠŸèƒ½ï¼Œä¼šå‘ç°æ‰§è¡Œecallåï¼Œpcä¼šè·³è½¬åˆ°BASEæ‰€åœ¨çš„åœ°å€ã€‚æˆ‘ä»¬ä¹‹å‰è¯´è¿‡ï¼ŒBASEæ˜¯4å­—èŠ‚å¯¹é½çš„ï¼ˆRISC-V æ‰‹å†Œ P80ï¼‰ï¼Œæ‰€ä»¥åœ¨MODE == 0æ—¶ï¼Œæˆ‘ä»¬è·³è½¬åˆ°çš„åœ°å€æ˜¯ (stvec &gt;&gt; 2) &lt;&lt; 2ï¼Œè€Œç”±äº MODE == 0ï¼Œè¿™ä¸ªå€¼å°±æ˜¯ stvecã€‚ æˆ‘ä»¬æ¥ä¸‹æ¥æŠŠæ–­ç‚¹è®¾ç½®åœ¨è¿™ä¸ªå€¼ï¼Œç„¶åç”¨siåˆ°è¾¾ecallè¯­å¥å¤„ è§‚å¯Ÿå·¦è¾¹çš„gdbï¼Œæˆ‘ä»¬ç°åœ¨å·²ç»åœ¨ecallè¿™é‡Œäº†ã€‚ å¦‚æœæˆ‘ä»¬çš„æ“ä½œæ­£ç¡®ï¼Œæ¥ä¸‹æ¥çš„siä¼šè§¦å‘ä¸€ä¸ªå¼‚å¸¸å¯¼è‡´æˆ‘ä»¬è·³è½¬åˆ° 0x3ffffff000 å¹¶è§¦å‘æ–­ç‚¹ï¼Œå¸Œæœ›æˆ‘ä»¬æ²¡æœ‰ç¿»è½¦~ è§‚å¯Ÿå·¦è¾¹çš„gdbï¼Œå‘ç°æˆ‘ä»¬æˆåŠŸè·³è½¬åˆ°äº†ä¸€ä¸ªæœªçŸ¥çš„åœ°æ–¹ï¼ æŒ‰æˆ‘çš„ç†è§£ï¼Œç”±äºæˆ‘ä»¬åœ¨U-modeä¸‹æ‰§è¡Œecallä»¥è§¦å‘å¼‚å¸¸ï¼Œæ‰€ä»¥æˆ‘ä»¬ç°åœ¨å·²ç»è¿›å…¥äº†S-modeã€‚ä¸è¿‡æˆ‘ç¿»äº†å¾ˆå¤šèµ„æ–™è¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°èƒ½æ˜ç¡®æ”¯æŒè¿™ä¸€ç‚¹çš„è¯æ®ï¼ˆä¹Ÿæ²¡æœ‰æ‰¾åˆ°æ˜ç¡®åå¯¹çš„è¯æ®ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä¿ç•™æˆ‘çš„è§‚ç‚¹ã€‚ æ€»ä¹‹ä¸€åˆ‡é¡ºåˆ©ï¼è®©æˆ‘ä»¬æš‚åœä¸€ä¸‹ï¼Œæƒ³æƒ³è¿™ä¸ª 0x3ffffff000 çš„åœ°å€ä»£è¡¨ä»€ä¹ˆã€‚åœ¨å†…æ ¸å¯åŠ¨æ—¶é€šè¿‡file kernel/kernel åŠ è½½å†…æ ¸ç¬¦å·è¡¨å¹¶åœ¨usertrapretè®¾ç½®æ–­ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç° 0x3ffffff000 è¿™ä¸ªåœ°å€å’Œ kernel/trap.c é‡Œçš„trampoline_uservec ç›¸ç­‰ã€‚ trampolineæ˜¯ä»€ä¹ˆï¼Ÿtrampolineæ˜¯åœ¨è¿›ç¨‹è™šæ‹Ÿå†…å­˜çš„é¡¶éƒ¨çš„ä¸€å—ç©ºé—´ï¼Œæ˜ å°„åˆ°çš„ç‰©ç†åœ°å€å­˜æ”¾ç€è·³è½¬è¿›å’Œè·³è½¬å‡ºå†…æ ¸çš„ä»£ç ã€‚çœ‹èµ·æ¥åœ¨åšç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡ecallè·³è½¬è¿›å†…æ ¸ã€‚è¿™æ ·ä¸€åˆ‡éƒ½è¯´å¾—é€šäº†~ è®©æˆ‘ä»¬æ‰“å¼€trampoline.Sï¼Œå¯¹æ¯”å·¦è¾¹gdbæ˜¾ç¤ºçš„ä»£ç å’Œå³è¾¹çš„trampoline.Sï¼Œä¼šå‘ç°å®ƒä»¬ç¡®å®èƒ½å¯¹ä¸Šï¼ å¥½å§ï¼Œä¹Ÿä¸æ˜¯å®Œå…¨èƒ½å¯¹ä¸Šï¼Œä½ ä¼šæ³¨æ„åˆ°å³è¾¹çš„ li a0,TRAPFRAME åœ¨å·¦è¾¹ä¼¼ä¹å¯¹åº”äº†ä¸‰æ¡è¯­å¥ï¼Œè¿™æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿå®é™…ä¸Šï¼Œli æ˜¯RISC-V æ±‡ç¼–ä¸­çš„ä¼ªæŒ‡ä»¤ï¼Œå®é™…æ‰§è¡Œæ—¶ï¼Œli ä¼šè¢«æ±‡ç¼–å™¨ç¿»è¯‘ä¸ºä¸€æ¡æˆ–å¤šæ¡çœŸæ­£çš„ RISC-V æŒ‡ä»¤ã€‚ å—¯ï¼Œè¿™æ ·å°±èƒ½å¯¹ä¸Šäº†ï¼ è¯»ä¸€è¯»trampoline.Sï¼Œæˆ‘ä»¬å‘ç°å®ƒä¼šæŠŠç”¨æˆ·è¿›ç¨‹çš„å¯„å­˜å™¨ç­‰ä¿¡æ¯ä¿å­˜åˆ°trapframeé‡Œï¼Œç„¶åè·³è½¬åˆ°å†…æ ¸çš„usertrapå‡½æ•°ã€‚ å› æ­¤æ¥ä¸‹æ¥æˆ‘ä»¬è¦ç”¨file kernel/kernelæŠŠç¬¦å·è¡¨åˆ‡æ¢åˆ°kernelï¼Œå†ç”¨si n æ¥ä¸€æ¬¡æ‰§è¡Œå¤šæ¡æ±‡ç¼–è¯­å¥ï¼Œç›´åˆ°æŒ‡ä»¤jrå¤„ï¼š æ¯”è¾ƒå·¦è¾¹å’Œå³è¾¹ï¼Œå‘ç°å®ƒä»¬çš„æ±‡ç¼–ä»£ç ç¡®å®èƒ½å¯¹ä¸Šï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦å‡†å¤‡è·³è½¬äº†ã€‚ é™·é˜±ï¼Œå¯åŠ¨ï¼ å¦‚æœä½ å‘ç°ä½ çš„gdbæ²¡æœ‰é¡ºåˆ©æ˜¾ç¤ºå‡ºcè¯­è¨€ä»£ç ï¼Œå¯èƒ½æ˜¯ä½ å¿˜è®°åˆ‡æ¢ç¬¦å·è¡¨åˆ°å†…æ ¸äº†ï¼Œç”¨file kernel/kernelæ¥åˆ‡æ¢ï¼Œç„¶åè¡¥ä¸€ä¸ªsiå°±èƒ½æ˜¾ç¤ºå‡ºæ¥äº†ã€‚ ç”±äºä¸€åˆ‡æ­£å¸¸ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€è·¯æŒ‰nç›´åˆ°åˆ°è¾¾syscallè¿™é‡Œã€‚ æ¯”è¾ƒå·¦è¾¹å’Œå³è¾¹çš„ä»£ç ï¼Œå®ƒä»¬æ˜¯èƒ½å¯¹åº”ä¸Šçš„ã€‚æ¥ä¸‹æ¥è®©æˆ‘ä»¬å‡†å¤‡è¿›å…¥syscall æˆ‘ä»¬ç”¨sè¿›å…¥syscallå‡½æ•°ã€‚nå’Œséƒ½ä¼šæ‰§è¡Œå½“å‰è¡Œï¼Œä¸è¿‡å¦‚æœå½“å‰è¡Œæ˜¯å‡½æ•°ï¼Œnä¸ä¼šè¿›å…¥å‡½æ•°ï¼Œè€Œsä¼šã€‚ syscallå‡½æ•°ä»trapframeä¸­å–å‡ºç³»ç»Ÿè°ƒç”¨å·ï¼Œç„¶åè°ƒç”¨å®ƒã€‚è¿˜è®°å¾—å—ï¼Œæˆ‘ä»¬è°ƒç”¨ç³»ç»Ÿå‡½æ•°æ—¶å…ˆè¿›å…¥äº†usys.Sï¼Œç„¶åæŠŠç³»ç»Ÿè°ƒç”¨å·ä¿å­˜åˆ°äº†a7ã€‚ä¹‹åç”±äºæˆ‘ä»¬è½¬å…¥äº†å†…æ ¸ï¼Œæˆ‘ä»¬åœ¨trapoline.Sé‡ŒæŠŠæ‰€æœ‰çš„ç”¨æˆ·ç©ºé—´çš„å¯„å­˜å™¨éƒ½ä¿å­˜åˆ°äº†trapframeä¸­ã€‚ æ€»ä¹‹æˆ‘ä»¬åœ¨è¿™é‡Œè°ƒç”¨äº†sys_sleepï¼Œæˆ‘ä»¬è¿›å…¥å®ƒçœ‹çœ‹ã€‚ å¯ä»¥å‘ç°å®ƒå°±æ˜¯çœŸæ­£å¹²æ´»çš„åœ°æ–¹ï¼å®ƒéå¸¸å¿ å®åœ°æ‰§è¡Œäº†sleepçš„é€»è¾‘ã€‚ æˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ° n å°±æ˜¯å­˜æ”¾ç€æˆ‘ä»¬æœ€å¼€å§‹ä¼ å…¥çš„å‚æ•°çš„å˜é‡ï¼Œå†…æ ¸é€šè¿‡argintæ¥æ‰¾åˆ°æˆ‘ä»¬ä¸€å¼€å§‹ä¼ å…¥çš„å‚æ•°ã€‚argintçš„æ€è·¯å’Œæˆ‘ä»¬ä¹‹å‰æ‰¾åˆ°ç³»ç»Ÿè°ƒç”¨å·ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä»trapframeä¸­æ‰¾åˆ°å­˜æ”¾ç€ä¼ å…¥å‚æ•°çš„å¯„å­˜å™¨ã€‚ è®©æˆ‘ä»¬ç»§ç»­å¾€åï¼Œçœ‹çœ‹åœ¨æ‰§è¡Œå®Œé€»è¾‘ä»¥åå‘ç”Ÿäº†ä»€ä¹ˆå§ã€‚ å›åˆ°usertrapï¼Œæˆ‘ä»¬ä¸€è·¯å¾€ä¸‹åˆ°è¾¾usertrapretï¼Œç„¶åç”¨sè¿›å…¥å®ƒã€‚ çœ‹å‡½æ•°åä¸Šé¢çš„æ³¨é‡Šå°±èƒ½å‘ç°å®ƒä¼šå¸¦æˆ‘ä»¬å›åˆ°ç”¨æˆ·ç©ºé—´ã€‚ æˆ‘ä»¬ç”¨nä¸€è·¯è¿è¡Œåˆ°åº•ï¼Œå†çœ‹çœ‹æ³¨é‡Šï¼Œå‘ç°æ³¨é‡Šè¯´æˆ‘ä»¬ä¼šè·³è½¬åˆ°trampoline.Sã€‚ è§‚å¯Ÿå·¦è¾¹çš„gdbï¼Œp /x trampoline_userret æ²¡æœ‰æ‰“å°å€¼æ˜¯å› ä¸ºtrampoline_userretè¢«ç¼–è¯‘å™¨ä¼˜åŒ–æ‰äº†ï¼Œæˆ‘ä»¬è¦æ‰‹åŠ¨æŠŠå®ƒçš„è¡¨è¾¾å¼å†™å‡ºæ¥å†æ‰“å°ï¼Œæ€»ä¹‹æˆ‘ä»¬æ‰“å°å‡ºäº† 0x3ffffff09cã€‚ åœ¨é‚£é‡Œè®¾ä¸ªæ–­ç‚¹ï¼Œç„¶åå‡†å¤‡ç»§ç»­ã€‚ å¤šæŒ‰å‡ ä¸ªsi åˆ°è¾¾è·³è½¬è¯­å¥å¤„ï¼Œä¸å‡ºæ„å¤–çš„è¯å†ç”¨ä¸€æ¬¡si å°±ä¼šå¸¦æˆ‘ä»¬è¿›å…¥trapoline.Sçš„userretéƒ¨åˆ†äº†ã€‚ ä¸€åˆ‡çš„ä¸€åˆ‡éƒ½ç¬¦åˆé¢„æœŸï¼Œæˆ‘ä»¬æˆåŠŸè¿›å…¥äº†trampoline.Sã€‚ å¯¹æ¯”å·¦å³çš„æ±‡ç¼–ä»£ç å¯ä»¥å‘ç°å®ƒä»¬æ˜¯å¯¹åº”çš„ã€‚ä¸ä¹‹å‰ç›¸åŒï¼Œliè¢«å±•å¼€äº†ã€‚ ç„¶åæˆ‘ä»¬ä¸€è·¯æŒ‰siåˆ°è¾¾sretè¯­å¥å¤„ã€‚sretä¼šåšä»€ä¹ˆå‘¢ï¼Ÿè®©æˆ‘ä»¬çœ‹çœ‹riscvæ‰‹å†Œï¼š The SRET instruction is used to return from a trap taken into S-mode. [â€¦] When executing SRET, the privilege level is set to the value in the SPP field of the sstatus register; [â€¦] the pc is set to the value stored in the sepc register. SRET æŒ‡ä»¤ç”¨äºä»è¿›å…¥ S-mode çš„é™·é˜±ä¸­è¿”å›ã€‚[â€¦] å½“æ‰§è¡Œ SRET æ—¶ï¼Œç‰¹æƒçº§åˆ«è¢«è®¾ç½®ä¸ºsstatus å¯„å­˜å™¨ä¸­ SPP å­—æ®µçš„å€¼ï¼›[â€¦] ç¨‹åºè®¡æ•°å™¨ pc è¢«è®¾ç½®ä¸ºå­˜å‚¨åœ¨ sepc å¯„å­˜å™¨ä¸­çš„å€¼ã€‚ æˆ‘ä»¬å€ŸåŠ© p /x sepc æ‰“å°è¿™ä¸ªå¯„å­˜å™¨çš„å€¼çœ‹çœ‹~ï¼ˆè¯·å¿½è§†å·¦å›¾é‡Œæˆ‘ä¹‹å‰å†™æˆspecçš„æ‰‹è¯¯ï¼‰ 0x342æ˜¯ä»€ä¹ˆï¼Ÿå¦‚æœä½ è®°å¿†åŠ›å¾ˆå¥½çš„è¯ï¼Œä¼šå‘ç°å®ƒæ°å¥½å°±æ˜¯usys.Sé‡Œçš„reté‚£è¡Œï¼ ï¼ˆè¿™é¬¼æ‰è®°å¾—ä½å•Šå–‚ï¼‰ æ€»ä¹‹æˆ‘ä»¬çœ‹çœ‹ä¹‹å‰çš„æˆªå›¾å§ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°0x342ç¡®å®æ˜¯reté‚£è¡Œï¼Œå°±æ˜¯ä¸‹é¢çš„æˆªå›¾ä¸­é«˜äº®çš„æ±‡ç¼–ä»£ç ä¸‹é¢é‚£è¡Œã€‚ æˆ‘ä»¬ç”¨b *0x342è®¾ä¸ªæ–­ç‚¹åœ¨é‚£é‡Œï¼Œç„¶åæ‰§è¡Œsi ï¼Œæˆ‘ä»¬å›åˆ°äº†ç”¨æˆ·ç©ºé—´ï¼åŒæ—¶ï¼Œsretä¹Ÿè®©æˆ‘ä»¬å›åˆ°äº†U-modeã€‚ ç”¨file user/_sleepåˆ‡æ¢ç¬¦å·è¡¨ï¼Œå†æ‰§è¡Œsiï¼Œæˆ‘ä»¬å›æ¥äº†ã€‚ è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†ä¸€ä¸ªå®Œæ•´çš„ç³»ç»Ÿè°ƒç”¨ã€‚ æ€»ç»“ä¸€ä¸‹ï¼Œå½“æˆ‘ä»¬è¿›è¡Œç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œæˆ‘ä»¬å…ˆè¿›å…¥usys.Sï¼Œç„¶åecallè§¦å‘å¼‚å¸¸å¹¶è·³è½¬åˆ°trapoline.Sçš„uservecå¤„ï¼Œä¹‹ååˆ°è¾¾trap.cçš„usertrapå‡½æ•°ï¼Œå®ƒä¼šè°ƒç”¨syscallå‡½æ•°ä»¥æ‰§è¡Œç³»ç»Ÿå‡½æ•°çš„é€»è¾‘ï¼Œæ‰§è¡Œå®Œåè¿›å…¥usertrapretå‡½æ•°ï¼Œå†è·³è½¬åˆ°trapoline.Sçš„userretå¤„ï¼Œæœ€åå›åˆ°usys.Sï¼Œå†å›åˆ°ç”¨æˆ·çš„ä»£ç é‡Œã€‚ ç¬¬ä¸€æ¬¡è·³è½¬åˆ°trapoline.Sä¸»è¦æ˜¯ä¿å­˜äº†ç”¨æˆ·çš„å„ä¸ªå¯„å­˜å™¨åˆ°trapframeï¼Œç¬¬äºŒæ¬¡è·³è½¬æ˜¯ä»trapframeä¸­æ¢å¤äº†è¿™äº›å¯„å­˜å™¨ã€‚","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"MIT-6.S081","slug":"å…¬å¼€è¯¾/MIT-6-S081","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/"},{"name":"Labs","slug":"å…¬å¼€è¯¾/MIT-6-S081/Labs","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/Labs/"}],"tags":[]},{"title":"Lab 2 System calls","slug":"learning/open-course/MIT-6.S081/Labs/lab2-syscall","date":"2025-10-15T07:54:38.000Z","updated":"2025-10-15T08:10:39.024Z","comments":true,"path":"wiki/learning/open-course/MIT-6.S081/Labs/lab2-syscall/","permalink":"http://rinevard.github.io/wiki/learning/open-course/MIT-6.S081/Labs/lab2-syscall/","excerpt":"","text":"åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å›é¡¾ä¸€ä¸‹æ€ä¹ˆå¯åŠ¨è°ƒè¯•æ¨¡å¼ï¼š åœ¨ä¸€ä¸ªç»ˆç«¯é‡Œæ‰§è¡Œ make qemu-gdb ï¼Œmake qemu-gdb CPUS=1 å¯ä»¥åªä½¿ç”¨ä¸€ä¸ªæ ¸å¿ƒï¼Œæ¯”èµ·å¤šçº¿ç¨‹æ›´ä¾¿äºè°ƒè¯•ã€‚ åœ¨å¦ä¸€ä¸ªç»ˆç«¯é‡Œæ‰§è¡Œ gdb-multiarch kernel/kernel ï¼Œè¿›å…¥ gdb åæ‰§è¡Œ target remote localhost:26001ï¼Œè¿™é‡Œçš„ç«¯å£å·ä¸ä¸€å®šæ˜¯ 26001ï¼Œçœ‹ make qemu-gdb CPUS=1 çš„æ‰“å°ç»“æœå°±è¡Œã€‚ è¿™æ ·å°±è¿›å…¥è°ƒè¯•æ¨¡å¼äº†ã€‚å¦å¤–ï¼Œæˆ‘ä¹ æƒ¯ç”¨ set prompt \\001\\033[1;33m\\002(gdb) \\001\\033[0m\\002 æ¥é«˜äº® â€œ(gdb)â€ è¿™å‡ ä¸ªå­—ã€‚ Using gdblab å¼€å¤´è®©æˆ‘ä»¬ç†Ÿæ‚‰ä¸€ä¸‹ gdb çš„ä½¿ç”¨ã€‚å¯åŠ¨è°ƒè¯•æ¨¡å¼ä»¥åæŒ‰éƒ¨å°±ç­å°±èƒ½å®Œæˆï¼Œæˆ‘ä»¬è¿™é‡Œè®°å½•ä¸€ä¸‹å¸¸ç”¨çš„ä¸€äº› gdb æŒ‡ä»¤ï¼š c æˆ– continue - ç»§ç»­æ‰§è¡Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ n æˆ– next - å•æ­¥æ‰§è¡Œ,ä¼šè·³è¿‡å‡½æ•°è°ƒç”¨ s æˆ– step - å•æ­¥æ‰§è¡Œ,ä¼šè¿›å…¥å‡½æ•°å†…éƒ¨ si - æ‰§è¡Œä¸€æ¡æ±‡ç¼–æŒ‡ä»¤ finish - è¿è¡Œåˆ°å½“å‰å‡½æ•°è¿”å›ä¸ºæ­¢ p &#x2F;x $mstatus - ä»¥åå…­è¿›åˆ¶æ‰“å°CPUå½“å‰æ¨¡å¼ backtraceï¼ˆç¼©å†™btï¼‰ - æ˜¾ç¤ºå‡½æ•°è°ƒç”¨æ ˆ set prompt \\\\001\\\\033[1;33m\\\\002(gdb) \\\\001\\\\033[0m\\\\002 - é«˜äº®(gdb) until - è¿è¡Œåˆ°æŒ‡å®šè¡Œå·ä¸ºæ­¢ System call tracingè¿™é“é¢˜è®©æˆ‘ä»¬å®ç°ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼ŒæŒ‰ç€ hints æŒ‰éƒ¨å°±ç­å°±èƒ½åšæ‰ã€‚å”¯ä¸€è¦æ³¨æ„çš„æ˜¯åœ¨ syscall é‡Œæ‰“å° trace ç›¸å…³çš„å†…å®¹æ—¶è¦æŠŠç³»ç»Ÿè°ƒç”¨çš„è¿”å›å€¼ ret ä»åŸæœ¬çš„ uint64 è½¬æ¢ä¸º long longï¼Œå¦åˆ™å¯¹é‚£äº›å¯èƒ½è¿”å› -1 çš„ç³»ç»Ÿè°ƒç”¨ï¼Œæˆ‘ä»¬æ— æ³•æ­£ç¡®æ‰“å° -1. åœ¨ç…§ç€ hints å®ç°ä¹‹åï¼Œçœ‹çœ‹ç³»ç»Ÿè°ƒç”¨æ˜¯å¦‚ä½•è¿›è¡Œçš„ä¹Ÿæ˜¯æ›´æœ‰è¶£çš„äº‹æƒ…ã€‚æˆ‘åœ¨ Lab 2.1 ç³»ç»Ÿè°ƒç”¨æµç¨‹â€”â€”ä»¥sleepä¸ºä¾‹ ä¸­å†™å¾—è¿˜æŒºè¯¦ç»†çš„ï¼Œè¿™é‡Œä¸å¤šèµ˜è¿°ç»†èŠ‚ã€‚ ç®€è€Œè¨€ä¹‹ï¼Œå½“æˆ‘ä»¬è¿›è¡Œç³»ç»Ÿè°ƒç”¨æ—¶ï¼š è¿›å…¥ç”± usys.pl ç”Ÿæˆçš„ usys.S ecall è§¦å‘å¼‚å¸¸å¹¶è·³è½¬åˆ° trapoline.S çš„ uservec å¤„ åˆ°è¾¾ trap.c çš„ usertrap å‡½æ•°ï¼Œå®ƒä¼šè°ƒç”¨ syscall å‡½æ•°ä»¥æ‰§è¡Œç³»ç»Ÿå‡½æ•°çš„é€»è¾‘ ç³»ç»Ÿå‡½æ•°æ‰§è¡Œå®Œæˆåè¿›å…¥usertrapretå‡½æ•° è·³è½¬åˆ° trapoline.S çš„userretå¤„ æœ€åå›åˆ° usys.S å›åˆ°ç”¨æˆ·çš„ä»£ç é‡Œã€‚ è®©æˆ‘ä»¬æ ¹æ®è¿™ä¸ªæµç¨‹æ¥çœ‹çœ‹ hints çš„æ¯ä¸€æ­¥çš„åŸå› ï¼š æŠŠ $U/_trace åŠ å…¥åˆ° Makefile ä¸­æ˜¯ä¸ºäº†ç¼–è¯‘æ—¶è¯†åˆ«åˆ° traceã€‚ åœ¨ user.h é‡ŒåŠ å…¥ trace æ˜¯ä¸ºäº†è®©ç”¨æˆ·çš„ trace.c è¯†åˆ«åˆ° trace è¿™ä¸ªå‡½æ•°ã€‚ åœ¨ usys.pl é‡ŒåŠ å…¥ trace æ˜¯ä¸ºäº†è®© usys.pl åœ¨ç”Ÿæˆçš„ usys.S é‡ŒåŠ å…¥ trace ç›¸å…³çš„å†…å®¹ï¼Œå®ƒæ˜¯æˆ‘ä»¬è¿›è¡Œç³»ç»Ÿè°ƒç”¨æ—¶çš„ç¬¬ä¸€ç«™ã€‚ åœ¨ syscall.h é‡ŒåŠ å…¥ trace æ˜¯å› ä¸ºæˆ‘ä»¬é€šè¿‡å¯„å­˜å™¨é‡Œå­˜å‚¨çš„æ•´æ•°ç¡®å®šè°ƒç”¨çš„ç³»ç»Ÿå‡½æ•°ï¼Œå¾ˆå¤šåœ°æ–¹éƒ½ä½¿ç”¨äº†è¿™ä¸ªæ–‡ä»¶é‡Œå®šä¹‰çš„å¸¸é‡ã€‚ åœ¨ syscall.c å’Œ sysproc.c é‡ŒåŠ å…¥çš„å‡½æ•°åˆ™æ˜¯å®é™…çš„é€»è¾‘éƒ¨åˆ†ï¼Œç”± syscall å‡½æ•°è°ƒç”¨ã€‚ Attack xv6åœ¨ xv6 çš„ syscall åˆ†æ”¯ä¸Šæœ‰ä¸€ä¸ªæ¼æ´â€”â€”è¿›ç¨‹è¢«å›æ”¶åï¼Œå®ƒæ›¾ç»ä½¿ç”¨çš„ç‰©ç†å†…å­˜ä¸ä¼šè¢«é‡ç½®ä¸ºåƒåœ¾æ•°æ®ï¼Œè€Œæ˜¯ä¿æŒä¹‹å‰çš„çŠ¶æ€ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ‰“ç ´å†…å­˜éš”ç¦»ï¼Œè®¿é—®åˆ«çš„å·²ç»è¢«å›æ”¶çš„è¿›ç¨‹çš„å†…å­˜ã€‚ æˆ‘ä»¬çœ‹å‘ secret.cï¼Œä¼šå‘ç°å®ƒè¯·æ±‚äº† 32 ä¸ªç‰©ç†é¡µå¤§å°çš„ç‰©ç†å†…å­˜ï¼Œç„¶åæŠŠä¸€ä¸²å­—ç¬¦æ”¾åœ¨äº†æŸä¸ªç‰©ç†é¡µçš„å¼€å¤´ã€‚æ‰€ä»¥æˆ‘ä»¬åªè¦åœ¨ attck.c é‡Œä¹Ÿè¯·æ±‚ä¸€äº›ç‰©ç†é¡µï¼Œç„¶åæ‰¾åˆ°è¿™ä¸²å­—ç¬¦ä¸²å°±è¡Œã€‚ æˆ‘ä»¬å…ˆè¯·æ±‚ 32 ä¸ªç‰©ç†é¡µç„¶åä¾æ¬¡æ‰“å°å‡ºæ¯ä¸ªç‰©ç†é¡µå¼€å¤´çš„ä¸€ä¸²å­—ç¬¦ï¼Œç»“æœå¦‚ä¸‹ï¼š ç¬¬ 1 é¡µ: ï¿½ï¿½ ç¬¬ 2 é¡µ: ï¿½ ç¬¬ 3 é¡µ: ï¿½ ç¬¬ 4 é¡µ: ï¿½ï¿½ ç¬¬ 5 é¡µ: ï¿½ ç¬¬ 6 é¡µ: 0ï¿½ ç¬¬ 7 é¡µ: ï¿½ ç¬¬ 8 é¡µ: ï¿½ ç¬¬ 9 é¡µ: ï¿½ï¿½&#x2F;cea.ae ç¬¬ 10 é¡µ: @ï¿½7ï¿½Gï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½fï¿½ï¿½ï¿½13ï¿½ï¿½fvâ¦3 ç¬¬ 11 é¡µ: Pï¿½#4ï¿½ï¿½&quot;ï¿½ï¿½ï¿½ï¿½ï¿½&#96;Bdaaï¿½ï¿½qï¿½&quot;ï¿½ ï¿½ï¿½ ç¬¬ 12 é¡µ: ï¿½ï¿½ ï¿½ attackte ç¬¬ 13 é¡µ: pï¿½ ç¬¬ 14 é¡µ: &#96;ï¿½ ç¬¬ 15 é¡µ: ï¿½ï¿½ï¿½ ç¬¬ 16 é¡µ: ï¿½ï¿½7ï¿½Gï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½fï¿½ï¿½ï¿½13ï¿½ï¿½fvâ¦3 ç¬¬ 17 é¡µ: ï¿½ï¿½very very secret pw is: &#x2F;cea.ae ç¬¬ 18 é¡µ: ï¿½ï¿½ ç¬¬ 19 é¡µ: pï¿½ ç¬¬ 20 é¡µ: 0ï¿½ ç¬¬ 21 é¡µ: 0ï¿½ï¿½ ç¬¬ 22 é¡µ: @ï¿½ï¿½ ç¬¬ 23 é¡µ: Pï¿½ï¿½ ç¬¬ 24 é¡µ: ï¿½ï¿½ ç¬¬ 25 é¡µ: ï¿½ï¿½ï¿½ ç¬¬ 26 é¡µ: Pï¿½ ç¬¬ 27 é¡µ: @ï¿½ ç¬¬ 28 é¡µ: 0ï¿½ ç¬¬ 29 é¡µ: ï¿½ ï¿½&amp;ï¿½Jï¿½ï¿½ï¿½ï¿½lEï¿½&#96;*&amp;ï¿½Jï¿½ ç¬¬ 31 é¡µ: ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½?ï¿½ï¿½ï¿½ ç¬¬ 32 é¡µ: ï¿½ï¿½ï¿½ å¯ä»¥æ³¨æ„åˆ°å¤§å¤šæ•°éƒ½æ˜¯ä¹±ç ï¼Œè¿™æ˜¯å› ä¸ºå†…å­˜é‡Œæœ‰éæ–‡æœ¬çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œå®ƒä»¬ä¸èƒ½è¢«å½“ä½œæ–‡æœ¬è¾“å‡ºã€‚ å½“ç„¶ï¼Œæˆ‘ä»¬ä¼šæ³¨æ„åˆ°ç¬¬ 17 é¡µæœ‰ â€œvery very secret pw is: /cea.aeâ€ï¼Œå®ƒä¸ secret.c å†™å…¥çš„å†…å®¹å”¯ä¸€çš„åŒºåˆ«æ˜¯å°‘äº† â€œmy very â€ è¿™å…«ä¸ªå­—ç¬¦ã€‚ä¸ºä»€ä¹ˆä¼šæœ‰å…«ä¸ªå­—ç¬¦çš„å·®å¼‚å‘¢ï¼Ÿ çœ‹å‘ kallc.c çš„ kfreeï¼š void kfree(void *pa) &#123; struct run *r; if (((uint64)pa % PGSIZE) != 0 || (char *)pa &lt; end || (uint64)pa >= PHYSTOP) panic(\"kfree\"); #ifndef LAB_SYSCALL // Fill with junk to catch dangling refs. memset(pa, 1, PGSIZE); #endif r = (struct run *)pa; acquire(&amp;kmem.lock); r->next = kmem.freelist; kmem.freelist = r; release(&amp;kmem.lock); &#125; ç»“åˆ struct run çš„å®šä¹‰ï¼Œå°±èƒ½çŸ¥é“ r-&gt;next = kmem.freelist è¿™å¥è¯­å¥æ˜¯æŠŠä¸€ä¸ªæŒ‡é’ˆæ”¾åœ¨äº†è¾“å…¥çš„ç‰©ç†åœ°å€çš„å‰å…«ä¸ª bytes ä¸­ã€‚è¿™æ­£æ˜¯ä¹‹å‰å…«ä¸ªå­—ç¬¦çš„å·®å¼‚çš„ç”±æ¥ã€‚ æ€»ç»“ä¸€ä¸‹ï¼Œåœ¨è¿è¡Œ secret.c çš„è¿›ç¨‹è¢«å›æ”¶åï¼Œå…¶ä¸­åŒ…å« â€œmy very very very secret pw is: /cea.aeâ€ çš„ç‰©ç†é¡µçš„å¼€å¤´å…«ä¸ª bytes è¢«æŒ‡é’ˆè¦†ç›–ï¼Œæ‰€ä»¥åªå‰©ä¸‹äº† â€œ[8 bytes æŒ‡é’ˆ]very very secret pw is: /cea.aeâ€. æ‰€ä»¥æˆ‘ä»¬å¤šè¯·æ±‚å‡ ä¸ªæ–°çš„ç‰©ç†é¡µç„¶åéå†å®ƒä»¬ï¼Œç”¨å‰ç¼€ â€œvery very secret pw is: â€ æ¥åŒ¹é…å°±è¡Œã€‚ æˆ‘ä»¬åœ¨æ–‡æœ«ä¼šæ›´å…·ä½“åœ°è®²è®²è¿›ç¨‹è¢«å›æ”¶çš„è¿‡ç¨‹ï¼Œä½†å…ˆè®©æˆ‘ä»¬æ¥çœ‹çœ‹ä»£ç ï¼š int strncmp(const char *str1, const char *str2, int n); // kalloc.c çš„ kfree å‡½æ•°é‡ŒæŠŠç‰©ç†é¡µçš„å¼€å¤´æ¢æˆäº†ä¸€ä¸ªæŒ‡é’ˆ. // æ‰€ä»¥æˆ‘ä»¬ä¸¢å¤±äº†å¼€å¤´çš„ sizeof(æŒ‡é’ˆ) ä¸ªå­—ç¬¦. const int overwrite_len = sizeof(void *); int main(int argc, char *argv[]) &#123; char *end; char *prefix = \"my very very very secret pw is: \"; int cmplen = strlen(prefix) - overwrite_len; // éå†æ–°æ’å…¥çš„32ä¸ªç‰©ç†é¡µ for (int i = 0; i &lt; 32; i++) &#123; end = sbrk(PGSIZE); if (strncmp(end + overwrite_len, prefix + overwrite_len, cmplen) == 0) &#123; write(2, end + 32, 8); exit(0); &#125; &#125; exit(1); &#125; è¿™é‡ŒæŠŠå†…å®¹å†™è¿›æ–‡ä»¶æè¿°ç¬¦ 2 æ˜¯å› ä¸º attacktest.c é‡Œå¼€äº†ä¸€ä¸ªç®¡é“ï¼Œè¿è¡Œ attack.c çš„è¿›ç¨‹çš„æ–‡ä»¶æè¿°ç¬¦ 2 è¿æ¥ç€ç®¡é“å†™ç«¯ï¼Œè¿è¡Œ attacktest.c çš„è¿›ç¨‹åˆ™åœ¨è¯»å–ç®¡é“è¯»ç«¯ã€‚ä¸‹é¢çš„ä»£ç å°±æ˜¯æŠŠ attack.c çš„æ–‡ä»¶æè¿°ç¬¦ 2 è¿æ¥åˆ°ç®¡é“å†™ç«¯çš„ä»£ç ï¼š if (pid == 0) &#123; close(fds[0]); close(2); dup(fds[1]); char *newargv[] = &#123;\"attack\", 0&#125;; exec(newargv[0], newargv); printf(\"exec %s failed\\n\", newargv[0]); exit(1); &#125; è¿›ç¨‹è¢«å›æ”¶çš„è¿‡ç¨‹ä¸€ä¸ªè¿›ç¨‹è°ƒç”¨ exit(int) åä¼šè¿›å…¥ ZOMBIE çŠ¶æ€ï¼Œä½†å¹¶ä¸ç«‹å³é‡Šæ”¾ç‰©ç†å†…å­˜ï¼Œè€Œæ˜¯ä¼šå”¤é†’å…¶çˆ¶è¿›ç¨‹ï¼š void exit(int status) &#123; // æˆ‘ä»¬åœ¨è¿™é‡Œçœç•¥äº†å¾ˆå¤šä»£ç ï¼Œæœ‰å…´è¶£å¯ä»¥è‡ªå·±çœ‹ proc.c wakeup(p->parent); p->state = ZOMBIE; &#125; çˆ¶è¿›ç¨‹è°ƒç”¨ wait(uint64) ä¼šæ‰¾åˆ° ZOMBIE å­è¿›ç¨‹å¹¶è°ƒç”¨ freeproc æ¥å›æ”¶å®ƒï¼š int wait(uint64 addr) &#123; // æˆ‘ä»¬åœ¨è¿™é‡Œçœç•¥äº†å¾ˆå¤šä»£ç ï¼Œæœ‰å…´è¶£å¯ä»¥è‡ªå·±çœ‹ proc.c struct proc *pp; struct proc *p = myproc(); for (;;) &#123; for (pp = proc; pp &lt; &amp;proc[NPROC]; pp++) &#123; if (pp->parent == p &amp;&amp; pp->state == ZOMBIE) &#123; // Found one. pid = pp->pid; freeproc(pp); return pid; &#125; // Wait for a child to exit. sleep(p, &amp;wait_lock); // DOC: wait-sleep &#125; &#125; freeproc åˆ™åˆè°ƒç”¨ proc_freepagetable æ¥å›æ”¶ç‰©ç†å†…å­˜ï¼š // Free a process's page table, and free the // physical memory it refers to. void proc_freepagetable(pagetable_t pagetable, uint64 sz) &#123; uvmunmap(pagetable, TRAMPOLINE, 1, 0); uvmunmap(pagetable, TRAPFRAME, 1, 0); uvmfree(pagetable, sz); &#125; å…¶ä¸­çš„ uvmfree(pagetable, sz) å°±åœ¨é‡Šæ”¾ç‰©ç†å†…å­˜äº†ï¼š // Free user memory pages, // then free page-table pages. void uvmfree(pagetable_t pagetable, uint64 sz) &#123; if (sz > 0) uvmunmap(pagetable, 0, PGROUNDUP(sz) / PGSIZE, 1); freewalk(pagetable); &#125; è®©æˆ‘ä»¬çœ‹å‘ uvmunmapï¼Œå®ƒè·å–æ¯ä¸€é¡µçš„ç‰©ç†åœ°å€ç„¶åè°ƒç”¨ kfreeï¼š // Remove npages of mappings starting from va. va must be // page-aligned. The mappings must exist. // Optionally free the physical memory. void uvmunmap(pagetable_t pagetable, uint64 va, uint64 npages, int do_free) &#123; uint64 a; pte_t *pte; int sz; if ((va % PGSIZE) != 0) panic(\"uvmunmap: not aligned\"); for (a = va; a &lt; va + npages * PGSIZE; a += sz) &#123; sz = PGSIZE; if ((pte = walk(pagetable, a, 0)) == 0) panic(\"uvmunmap: walk\"); if ((*pte &amp; PTE_V) == 0) &#123; printf(\"va=%ld pte=%ld\\n\", a, *pte); panic(\"uvmunmap: not mapped\"); &#125; if (PTE_FLAGS(*pte) == PTE_V) panic(\"uvmunmap: not a leaf\"); if (do_free) &#123; uint64 pa = PTE2PA(*pte); kfree((void *)pa); &#125; *pte = 0; &#125; &#125; æ›´ç»†èŠ‚çš„é‡Šæ”¾ trapframeã€é‡Šæ”¾é¡µè¡¨æˆ‘ä»¬å°±ä¸åœ¨è¿™é‡Œå¤šè¯´äº†ã€‚","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"MIT-6.S081","slug":"å…¬å¼€è¯¾/MIT-6-S081","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/"},{"name":"Labs","slug":"å…¬å¼€è¯¾/MIT-6-S081/Labs","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/Labs/"}],"tags":[]},{"title":"æ¢ç´¢æ—¥å¿—[1]","slug":"others/thoughts/æ¢ç´¢æ—¥å¿—1","date":"2025-10-13T12:11:11.000Z","updated":"2025-10-27T13:34:23.367Z","comments":true,"path":"wiki/others/thoughts/æ¢ç´¢æ—¥å¿—1/","permalink":"http://rinevard.github.io/wiki/others/thoughts/%E6%8E%A2%E7%B4%A2%E6%97%A5%E5%BF%971/","excerpt":"","text":"ä¸çŸ¥é“äººä»¬å¹³å¸¸æ˜¯æ€æ ·ä¸ä»–äººç›¸è¯†çš„ã€‚è®¸ä¹…ä»¥å‰æˆ‘å°±åœ¨æƒ³ï¼Œè‡ªå·±çš„ç¤¾äº¤æ–¹å¼æ˜¯å¦æœ‰ç‚¹ä¸å¤ªåƒä¸€èˆ¬äººç±»ğŸ« ğŸ« å’±æ›´åå¥½é‚£ç§â€œå¤§å®¶ä¸€èµ·åšä¸€ä»¶éƒ½æ„Ÿå…´è¶£çš„äº‹æƒ…ç„¶åæ¸æ¸å°±è®¤è¯†äº†â€çš„ç¤¾äº¤æ–¹å¼ï¼Œä½†ä¼¼ä¹è¿™ç§åšæ³•ç›¸å¯¹å°‘è§ï¼Œè€Œä¸”æˆ‘ä»¥å‰ä¹Ÿæ²¡æ€ä¹ˆå› æ­¤è®¤è¯†åˆ°æ–°æœ‹å‹ã€‚ åœ¨ä¸çŸ­çš„è´¨ç–‘æœŸåï¼Œæ¸æ¸åœ°ä¹Ÿå‘ç°è‡ªå·±ä¹Ÿæ˜¯èƒ½ç”¨è¿™ç§æ–¹æ³•äº¤åˆ°æœ‹å‹çš„ï¼Œè‡³å°‘æ˜¯èƒ½ç»“è¯†äººç±»çš„ã€‚æ¯”å¦‚è¯´è¿™æ¬¡çš„æ¢ç´¢æ—¥å¿—å°±å’Œ GMTK Jam åœ¨å°çº¢ä¹¦æ‹‰åˆ°çš„ç¾æœ¯åŒå­¦æœ‰å…³ï¼ˆèµç¾å°çº¢ä¹¦å–µ â€œæˆ‘å¯¹æ™®é€šçš„äººç±»æ²¡æœ‰å…´è¶£ã€‚ä½ ä»¬ä¹‹ä¸­å¦‚æœæœ‰ç”»ç”»äººã€éŸ³ä¹äººã€éŸ³æ•ˆäººæˆ–è€…å¼‚ä¸–ç•Œäººå°±æ¥æ‰¾æˆ‘å§ï¼â€è™½ç„¶æˆ‘ä¸æ˜¯è¿™ä¹ˆæ‹‰äººçš„ï¼ˆæ²¡äººä¼šè¿™ä¹ˆæ‹‰äººå§ï¼ï¼‰ï¼Œä½†æ€»ä¹‹å°±æ˜¯æ‹‰åˆ°äº†è¿™ä½ä¸­ä¼ çš„ç¾æœ¯åŒå­¦ä¸€èµ·æ¥gamejamï¼Œè¿™æ˜¯å…«æœˆçš„äº‹äº†ã€‚ ä»Šå¤©é¹°è§’åœ¨ä¸­ä¼ å¼€äº†ä¸ªå®£è®²ä¼šï¼Œå’±ä½œä¸ºèµ„æ·±ç²¥ç²¥äººå½“ç„¶æƒ³å»å¬å¬çœ‹ã€‚è®¿å®¢è¿›ä¸­ä¼ éœ€è¦æ‰¾æ ¡å†…åŒå­¦æˆ–è€å¸ˆé¢„çº¦ï¼Œäºæ˜¯å’±å°±æ‰¾äº†è¿™ä½ç¾æœ¯åŒå­¦ç„¶åæˆåŠŸè¿›å…¥ä¸­ä¼ äº†ã€‚ ä¸€èˆ¬æ¥è¯´æ•…äº‹åº”è¯¥è·Œå®•èµ·ä¼ï¼Œæ¯”æ–¹è¯´æˆ‘ä»¬èµ·ç è¦å†™å†™åœ¨ä¸­ä¼ é‡åˆ°çš„è¶£äº‹ï¼Œç„¶åå†™å†™æœ‰ä»€ä¹ˆç³Ÿç³•çš„åœ°æ–¹ï¼Œç„¶åå†åä¸½æ”¶åœºï¼Œä¸è¿‡äº‹æƒ…å°±æ˜¯å¾ˆå¹³å¹³æ·¡æ·¡ã€‚é¹°è§’çš„å®£è®²ä¼šå¾ˆæ™®é€šï¼Œè™½ç„¶å‘äº†ç‚¹å‘¨è¾¹ä½†æˆ‘å¹¶æ²¡æœ‰æŠ½ä¸­æœ‰è¶£çš„å¥–å“ï¼Œä¸­ä¼ çš„é¥­æ¯”åŒ—ç†çš„å¥½åƒï¼Œä½†å¥½åƒå¾—ä¸å¤šã€‚ å¯æˆ‘ç¡®å®ä»æ¥æ²¡æœ‰å»å¤–æ ¡ç©çš„ç»å†ï¼Œæ›´åˆ«è¯´è¦æ‰¾å¤–æ ¡åŒå­¦é¢„çº¦æ‰èƒ½è¿›çš„å­¦æ ¡äº†ğŸ« ğŸ« å’±èƒ½ä»ç¤¾æè¿›åŒ–æˆç°åœ¨è¿™æ ·èƒ½ä¸»åŠ¨æ‹‰äººç»„é˜Ÿè¿˜èƒ½è”ç³»åˆ«äººå·²ç»å¾ˆå¥½äº†ä¸æ˜¯å—ï¼ˆï¼‰ æ¢ç´¢ä¹Ÿä¸æ˜¯æ¬¡æ¬¡æœ‰è¶£ï¼Œå€’ä¸å¦‚è¯´æ¢ç´¢çš„ç»“æœæ™®æ™®é€šé€šæ‰æ˜¯ç†æ‰€åº”å½“çš„å§ã€‚ç°åœ¨æ˜¯æ™šä¸Šåç‚¹äº”ååˆ†ï¼Œæˆ‘åœ¨è‰¯ä¹¡å¤§å­¦åŸåŒ—çš„åœ°é“ç«™æ²¡æœ‰æ‘†æ¸¡è½¦ï¼Œè¦éª‘è½¦å›å­¦æ ¡äº†ã€‚","categories":[{"name":"æ‚è°ˆ","slug":"æ‚è°ˆ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/"},{"name":"ç¢ç¢å¿µ","slug":"æ‚è°ˆ/ç¢ç¢å¿µ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/%E7%A2%8E%E7%A2%8E%E5%BF%B5/"}],"tags":[]},{"title":"Assignment 7 Path Tracing","slug":"learning/open-course/GAMES101/Hw/Hw7-path-tracing","date":"2025-10-10T14:10:44.000Z","updated":"2025-10-10T15:04:14.905Z","comments":true,"path":"wiki/learning/open-course/GAMES101/Hw/Hw7-path-tracing/","permalink":"http://rinevard.github.io/wiki/learning/open-course/GAMES101/Hw/Hw7-path-tracing/","excerpt":"","text":"å¤§è‡´æµç¨‹è¿™æ¬¡çš„ä½œä¸šæŒºéš¾çš„ã€‚é¦–å…ˆæˆ‘ä»¬æ¥å¯¹ç…§å…¬å¼è§£é‡Šä¸€ä¸‹å¤§è‡´çš„ä»£ç æµç¨‹ï¼š \\begin{align*} L_o(p, \\vec{\\omega_o}) = &L_e(p, \\vec{\\omega_o}) + \\int_{\\Omega} f_r(p, \\vec{\\omega_i}, \\vec{\\omega_o}) L_i(p, \\vec{\\omega_i}) (\\vec{\\omega_i} \\cdot n) d\\omega_i \\\\ = &L_e(p, \\vec{\\omega_o}) + \\int_{\\Omega_{å…‰æºæ–¹å‘}} f_r(p, \\vec{\\omega_i}, \\vec{\\omega_o}) L_i(p, \\vec{\\omega_i}) (\\vec{\\omega_i} \\cdot n) d\\omega_i \\\\ &+ \\int_{\\Omega_{éå…‰æºæ–¹å‘}} f_r(p, \\vec{\\omega_i}, \\vec{\\omega_o}) L_i(p, \\vec{\\omega_i}) (\\vec{\\omega_i} \\cdot n) d\\omega_i \\end{align*} å¦‚æœç‚¹ $p$ æ˜¯å…‰æºï¼Œç›´æ¥è¿”å›å…¶è‡ªå‘å…‰é¡¹ $L_e$. éšæœºé‡‡æ ·ä¸€ä¸ªå…‰æºæ–¹å‘ $w_s$ï¼Œæ ¹æ®å…¬å¼è®¡ç®— $L_\\text{direct}$. éšæœºé‡‡æ ·ä¸€ä¸ªæ–¹å‘ $w_i$ï¼ŒæŒ‰è½®ç›˜èµŒå†³å®šæ˜¯å¦ç»“æŸå¼¹å°„ã€‚ å¦‚æœä¸ç»“æŸä¸” $w_i$ æ²¡æ‰“åˆ°å…‰æºï¼Œæ ¹æ®å…¬å¼è®¡ç®— $L_\\text{indirect}$. è¿”å› $L_\\text{direct}+L_\\text{indirect}$ ç„¶åæ”¾ä»£ç ï¼š Vector3f Scene::castRay(const Ray &amp;ray, int depth) const &#123; Intersection shade_point_inter = intersect(ray); if (!shade_point_inter.happened) &#123; return Vector3f(); &#125; // ----------------Contribution from emission---------------- if (shade_point_inter.m->hasEmission()) &#123; // Light source doesn't reflect light, so we return here return shade_point_inter.m->getEmission(); &#125; // ----------------Contribution from the light source---------------- Vector3f wo = -normalize(ray.direction); Vector3f normal = normalize(shade_point_inter.normal); Vector3f l_direct = Vector3f(); Intersection light_sample; float pdf_light; sampleLight(light_sample, pdf_light); // If the ray is not blocked in the middle, compute its contribution Vector3f light_normal = normalize(light_sample.normal); Vector3f shade_point = shade_point_inter.coords; Vector3f ws = normalize(light_sample.coords - shade_point); Vector3f direct_ray_origin = shade_point + ws * EPSILON; Ray ray_to_light(direct_ray_origin, ws); Intersection inter_between_light = intersect(ray_to_light); if ((!inter_between_light.happened) || inter_between_light.distance > (light_sample.coords - direct_ray_origin).norm() - EPSILON) &#123; l_direct = light_sample.emit * shade_point_inter.m->eval(ws, wo, normal) \\ * std::max(dotProduct(ws, normal), 0.0f) * std::max(dotProduct(-ws, light_normal), 0.0f) \\ / std::pow((light_sample.coords - direct_ray_origin).norm(), 2) / pdf_light; &#125; // ----------------Contribution from other reflectors---------------- Vector3f l_indirect = Vector3f(); // Russian Roulette test if (get_random_float() &lt; RussianRoulette) &#123; Vector3f wi = normalize(shade_point_inter.m->sample(wo, normal)); Vector3f indirect_ray_origin = shade_point + wi * EPSILON; Ray reflected_ray(indirect_ray_origin, wi); Intersection reflected_inter = intersect(reflected_ray); // If reflected_ray hitting a non-emitting object, compute its contribution if (reflected_inter.happened &amp;&amp; reflected_inter.m->hasEmission()) &#123; l_indirect = Vector3f(); &#125; else &#123; l_indirect = castRay(reflected_ray, depth + 1) * shade_point_inter.m->eval(wi, wo, normal) \\ * std::max(dotProduct(wi, normal), 0.0f) \\ / (shade_point_inter.m->pdf(wi, wo, normal)) / RussianRoulette; &#125; &#125; return l_direct + l_indirect; &#125; å†æ¥çœ‹çœ‹å›¾ ä»£ç ç»†èŠ‚æ¥ä¸‹æ¥æˆ‘ä»¬å†èŠèŠå…·ä½“çš„ä»£ç ç»†èŠ‚ã€‚è‡ªå‘å…‰é¡¹æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬ç•¥è¿‡ã€‚ $L_\\text{direct}$ç›´æ¥å…‰éƒ¨åˆ†ã€‚é¦–å…ˆè¦æ³¨æ„çš„æ˜¯ï¼Œå„ä¸ªå°„çº¿ $w_i, w_o, w_s$ éƒ½æ˜¯ä»ç€è‰²ç‚¹æŒ‡å‘å¤–çš„å•ä½æ–¹å‘å‘é‡ã€‚è¿™æ˜¯ä¸€ä¸ªå›¾å½¢å­¦é‡Œå¸¸ç”¨çš„çº¦å®šï¼Œæ‰€ä»¥ä¸è¦é—®ä¸ºä»€ä¹ˆä¸æ˜¯æŒ‡å‘å†…äº†ï¼ˆï¼‰ ç„¶ååœ¨å‘å‡ºå°„çº¿æ—¶ï¼Œæœ€å¥½åšä¸€ä¸ªå¾®å°çš„åç§»ä»¥é¿å…å‘å‡ºçš„å°„çº¿å’Œç€è‰²ç‚¹å¹³é¢ç›¸äº¤ã€‚è¿™å°±æ˜¯æˆ‘ä»¬ direct_ray_origin = shade_point + ws * EPSILON åšäº†åŠ æ³•çš„åŸå› ã€‚ Vector3f wo = -normalize(ray.direction); Vector3f normal = normalize(shade_point_inter.normal); Vector3f l_direct = Vector3f(); Intersection light_sample; float pdf_light; sampleLight(light_sample, pdf_light); // If the ray is not blocked in the middle, compute its contribution Vector3f light_normal = normalize(light_sample.normal); Vector3f shade_point = shade_point_inter.coords; Vector3f ws = normalize(light_sample.coords - shade_point); Vector3f direct_ray_origin = shade_point + ws * EPSILON; Ray ray_to_light(direct_ray_origin, ws); Intersection inter_between_light = intersect(ray_to_light); if ((!inter_between_light.happened) || inter_between_light.distance > (light_sample.coords - direct_ray_origin).norm() - EPSILON) &#123; l_direct = light_sample.emit * shade_point_inter.m->eval(ws, wo, normal) \\ * std::max(dotProduct(ws, normal), 0.0f) * std::max(dotProduct(-ws, light_normal), 0.0f) \\ / std::pow((light_sample.coords - direct_ray_origin).norm(), 2) / pdf_light; &#125; å¦å¤–ï¼Œæˆ‘ä»¬æœ‰ä»å…‰æºé‡‡æ ·è®¡ç®—ç›´æ¥å…‰çš„å…¬å¼ï¼š \\begin{align*} &\\int_{\\Omega_{å…‰æºæ–¹å‘}} f_r(p, \\vec{\\omega_i}, \\vec{\\omega_o}) L_i(p, \\vec{\\omega_i}) (\\vec{\\omega_i} \\cdot n) d\\omega_i \\\\ =&\\int_{A} f_r(p, \\vec{\\omega_i}, \\vec{\\omega_o}) L_i(p, \\vec{\\omega_i}) \\frac{\\cos\\theta\\cos\\theta_i}{\\lVert p'-p \\rVert^2} dA \\end{align*}ç”¨è’™ç‰¹å¡ç½—è¿‘ä¼¼å°±æ˜¯ä»£ç é‡Œå†™çš„ä¸œè¥¿äº†ã€‚ $L_\\text{indirect}$é—´æ¥éƒ¨åˆ†ã€‚é¦–å…ˆè¦åšä¿„ç½—æ–¯è½®ç›˜èµŒï¼Œç„¶åè¦æ£€æŸ¥æ‰“åˆ°çš„æ˜¯å¦æ˜¯å…‰æºã€‚ å¦‚æœé€šè¿‡äº†è½®ç›˜èµŒï¼Œè€Œä¸”æ‰“åˆ°çš„ä¸æ˜¯å…‰æºï¼Œå°±è¦è®¡ç®—é—´æ¥å…‰ã€‚ ä¸ç›´æ¥å…‰ä¸€æ ·ï¼Œæˆ‘ä»¬è¦åšå¾®å°åç§»ï¼Œè¿™å°±æ˜¯ indirect_ray_origin = shade_point + wi * EPSILON . ç„¶åå¥—å…¬å¼å°±è¡Œã€‚ Vector3f l_indirect = Vector3f(); // Russian Roulette test if (get_random_float() &lt; RussianRoulette) &#123; Vector3f wi = normalize(shade_point_inter.m->sample(wo, normal)); Vector3f indirect_ray_origin = shade_point + wi * EPSILON; Ray reflected_ray(indirect_ray_origin, wi); Intersection reflected_inter = intersect(reflected_ray); // If reflected_ray hitting a non-emitting object, compute its contribution if (reflected_inter.happened &amp;&amp; reflected_inter.m->hasEmission()) &#123; l_indirect = Vector3f(); &#125; else &#123; l_indirect = castRay(reflected_ray, depth + 1) * shade_point_inter.m->eval(wi, wo, normal) \\ * std::max(dotProduct(wi, normal), 0.0f) \\ / (shade_point_inter.m->pdf(wi, wo, normal)) / RussianRoulette; &#125; &#125; ç»“æœå¯¹ EPSILON æŒºæ•æ„Ÿçš„ï¼Œå¯ä»¥æŠŠ EPSILON é€‚å½“è°ƒå¤§ç‚¹ï¼Œæˆ‘ç”¨çš„æ˜¯ 0.00020 .","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"GAMES101","slug":"å…¬å¼€è¯¾/GAMES101","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/"},{"name":"Assignments","slug":"å…¬å¼€è¯¾/GAMES101/Assignments","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/Assignments/"}],"tags":[]},{"title":"Note 6 BRDF and Rendering Eequation","slug":"learning/open-course/GAMES101/Notes/Note6-BRDF-and-renderingequation","date":"2025-10-10T13:45:28.000Z","updated":"2025-10-10T14:49:51.245Z","comments":true,"path":"wiki/learning/open-course/GAMES101/Notes/Note6-BRDF-and-renderingequation/","permalink":"http://rinevard.github.io/wiki/learning/open-course/GAMES101/Notes/Note6-BRDF-and-renderingequation/","excerpt":"","text":"æˆ‘ä»¬ä¹‹å‰å·²ç»å­¦è¿‡äº† Blinn-Phong å…‰ç…§æ¨¡å‹ï¼Œä½†å®ƒåªæ˜¯ä¸€ä¸ªå¯å‘å¼æ¨¡å‹ï¼Œåœ¨ç‰©ç†ä¸Šæ˜¯ä¸æ­£ç¡®çš„ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹ç‰©ç†ä¸Šæ­£ç¡®çš„å…‰ç…§æ˜¯æ€æ ·çš„ï¼Œä»¥åŠå¦‚ä½•ç”¨è®¡ç®—æœºè¿‘ä¼¼æ±‚è§£æ¥è¿‘æ­£ç¡®çš„å…‰ç…§ã€‚ è¾å°„åº¦é‡å­¦åœ¨äº†è§£å…‰ç…§çš„ç‰©ç†æ¨¡å‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸€äº›ç‰©ç†é‡ã€‚æœ€å…³é”®çš„ç‰©ç†é‡æœ‰å››ä¸ªï¼Œåˆ†åˆ«æ˜¯ Radiant flux/power $\\Phi$ï¼Œå•ä½ $W$. Radiant intensity $I$ï¼Œå•ä½ $\\frac{W}{\\text{sr}}$. Irradiance $E$ï¼Œå•ä½ $\\frac{W}{m^2}$. Radiance $L$ï¼Œå•ä½ $\\frac{W}{\\text{sr}\\cdot m^2}$. æ¥ä¸‹æ¥è®©æˆ‘ä»¬çœ‹çœ‹å®ƒä»¬çš„å…·ä½“å®šä¹‰ã€‚ Radiant flux/power $\\Phi$Radiant flux/power ç¬¦å· $\\Phi$ï¼Œå•ä½ $W$. å®šä¹‰ä¸º \\Phi = \\frac{dQ}{dt}Radiant intensity $I$Radiant Intensity ç¬¦å· $I$ï¼Œå•ä½ $\\frac{W}{\\text{sr}}$ï¼Œè¡¨ç¤ºæŸä¸ªå®šç‚¹æ¥æ”¶/ç©¿è¿‡/å‘å‡ºçš„ï¼Œåœ¨æŒ‡å®šæ–¹å‘ $\\vec{\\omega}$ ä¸Šçš„ï¼Œå•ä½ç«‹ä½“è§’çš„ Power. å®šä¹‰ä¸º I(\\vec{\\omega})=\\frac{d\\Phi}{d\\omega}è¿™é‡Œçš„ç¬¦å·ç•¥æ˜¾æ··ä¹±ã€‚å·¦è¾¹çš„å‚æ•° $\\vec{\\omega}$ æ˜¯ä¸€ä¸ªæ–¹å‘å‘é‡ï¼Œå³è¾¹çš„ $d\\omega$ åˆ™æ˜¯è¿™ä¸ªæ–¹å‘ä¸Šç«‹ä½“è§’çš„å¾®åˆ†ã€‚ æˆ‘ä»¬çŸ¥é“æ–¹å‘å‘é‡ $\\vec{\\omega}$ ä¹Ÿèƒ½åœ¨çƒåæ ‡ä¸‹è¢«è¡¨ç¤ºä¸º $(\\theta,\\varphi)$ã€‚å¯¹ç»™å®šçš„ $(\\theta,\\varphi)$ï¼Œæˆ‘ä»¬å¯ä»¥ç®—å‡ºå…¶åœ¨çƒé¢ä¸Šçš„é¢ç§¯å¾®åˆ†ï¼Œä¹Ÿèƒ½è¿›ä¸€æ­¥æ±‚å‡ºç«‹ä½“è§’å¾®åˆ† $d\\omega$ï¼Œå¦‚ä¸‹æ‰€ç¤º \\begin{align*} &dA=r^2 \\sin \\theta \\space d\\theta \\space d\\varphi \\\\ &d\\omega=\\frac{dA}{r^2}=\\sin \\theta \\space d\\theta \\space d\\varphi \\end{align*}ä¸‹å›¾æ˜¯å¯¹ Solid angle å’Œ Radiant Intensity ä¸¤ä¸ªæ¦‚å¿µçš„å›¾è§£ Irradiance $E$Irradiance ç¬¦å· $E$ï¼Œå•ä½ $\\frac{W}{m^2}$. è¡¨ç¤ºç‚¹ $x$ å‘¨å›´å•ä½é¢ç§¯æ¥æ”¶/ç©¿è¿‡/å‘å‡ºçš„ Powerï¼Œå®šä¹‰ä¸º E(x)=\\frac{d\\Phi}{dA}ä¸‹å›¾è®¡ç®—å¹¶å¯¹æ¯”äº†å¹³è¡Œå…‰ç©¿è¿‡ä¸¤ä¸ªä¸åŒæˆªé¢æ—¶çš„ irradianceï¼šå‚ç›´æˆªé¢ $A$ï¼Œä»¥åŠä¸å‚ç›´æ–¹å‘æˆ $\\theta$ è§’çš„å€¾æ–œæˆªé¢ $Aâ€™$ã€‚ å…¶ä¸­ $\\Phi=\\Phiâ€™$ æ˜¯å› ä¸ºèƒ½é‡å®ˆæ’ï¼Œå…‰æŸç©¿è¿‡ä»»ä½•ä¸€ä¸ªå®Œæ•´æˆªé¢çš„åŠŸç‡æ˜¯å›ºå®šçš„ã€‚ Radiance $L$Radiance $L$ çš„å•ä½æ˜¯ $\\frac{W}{\\text{sr}\\cdot \\space m^2}$ï¼Œè¡¨ç¤ºè¡¨é¢æŸç‚¹ $x$ å‘¨å›´å•ä½æŠ•å½±é¢ç§¯æ¥æ”¶/ç©¿è¿‡/å‘å‡ºçš„ï¼Œåœ¨æŒ‡å®šæ–¹å‘ $\\vec{w}$ ä¸Šçš„ï¼Œå•ä½ç«‹ä½“è§’çš„ radiant flux. å®šä¹‰ä¸º L(x,\\vec{\\omega})=\\frac{d^2\\Phi}{d\\omega ds}=\\frac{d^2\\Phi}{d\\omega ds_{0}\\cos\\theta}è¿™é‡Œçš„ $ds$ æ˜¯æŠ•å½±å‰é¢ç§¯ï¼Œ$ds_0 \\cos\\theta$ æ˜¯æŠ•å½±é¢ç§¯ã€‚ ä¸‹å›¾æ˜¯å¯¹ Irradiance å’Œ Radianceçš„å›¾è§£ BRDFå’Œæè´¨ç°åœ¨æˆ‘ä»¬å¯ä»¥çœ‹çœ‹å…‰ç…§çš„ç‰©ç†æ¨¡å‹äº†ï¼Œå…¶ä¸­æœ€å…³é”®çš„æ˜¯ BRDFï¼Œå³åŒå‘åå°„åˆ†å¸ƒå‡½æ•°ã€‚å®ƒå®šä¹‰äº†ä»æ–¹å‘ $\\vec{\\omega_i}$ å°„å…¥çš„å…‰çº¿æ‰“åˆ°æŸä¸ªè¡¨é¢ä¸Šåå°„åˆ° $\\vec{\\omega_r}$ æ–¹å‘çš„å¼ºåº¦ï¼š f_r(p,\\vec{\\omega_i}, \\vec{\\omega_r}) = \\frac{dL_r(p,\\vec{\\omega_r})}{dE_i(p,\\vec{\\omega_i})}ä½ å¯èƒ½ä¼šç–‘æƒ‘ä¸ºä»€ä¹ˆä¹‹å‰æˆ‘ä»¬è¯´ $E$ æ˜¯å…³äº $x$ çš„å‡½æ•°ï¼Œç°åœ¨å´é™¤äº†åæ ‡ $p$ å¤–è¿˜å¤šäº†ä¸€ä¸ªæ–¹å‘å‚æ•° $\\omega_i$ï¼Œè¿™æ˜¯å› ä¸º BRDF é‡Œçš„ $E$ æ˜¯å¾®åˆ†ã€‚å…·ä½“å¯ä»¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªå¼å­ï¼š E(x) = \\int_{\\Omega} L_i(x,\\vec{\\omega_i}) \\cos\\theta_i d\\omega_i \\\\ dE_i(x, \\vec{\\omega_i}) = L_i(x, \\vec{\\omega_i}) \\cos\\theta_i d\\omega_iä½ å¯èƒ½è¿˜ä¼šç–‘æƒ‘ï¼Œä¸ºä»€ä¹ˆåˆ†æ¯ç”¨ $E$ å‘¢ï¼Ÿå’Œåˆ†æ¯ä¸€æ ·ç»Ÿä¸€ç”¨ $L$ ä¸æ˜¯æ›´ä¼˜é›…å—ï¼Ÿ æ® https://www.zhihu.com/question/28476602/answer/41003204 è¿™ä¸ªç­”æ¡ˆæ‰€è¯´ï¼Œæµ‹é‡å‡ºå°„çš„ Radiance $L$ å¾ˆæ–¹ä¾¿ï¼Œä½†æµ‹é‡å…¥å°„çš„ Irradiance $L$ å¾ˆå›°éš¾ï¼Œè€Œæµ‹é‡å…¥å°„çš„ $dE$ æŒºæ–¹ä¾¿ï¼Œå› æ­¤æˆ‘ä»¬å°±ä½¿ç”¨äº† $\\frac{dL}{dE}$. æˆ‘ä»¬æŠŠä¸Šé¢çš„ $dE_i(x,\\vec{\\omega_i})$ ä»£å…¥ BRDFï¼Œå°±å¾—åˆ°äº† f_r(p,\\vec{\\omega_i}, \\vec{\\omega_r}) = \\frac{dL_r(p,\\vec{\\omega_r})}{L_i(x,\\vec{w_i})\\cos\\theta_i dw_i}ç‰©ä½“çš„æè´¨å°±ç”¨ BSDFï¼ˆåå°„çš„BRDF+æŠ˜å°„çš„BTDFï¼‰è¡¨ç¤ºã€‚æˆ‘ä»¬è¿™é‡ŒåªèŠ BRDFï¼Œå› ä¸º BTDF å’Œ BRDF æ¥è¿‘ã€‚BRDF çš„è·å–åŒ…æ‹¬ä½†ä¸é™äºè¿™ä¸¤ç§æ–¹å¼ï¼š ç°å®æµ‹é‡ã€‚æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°è®¸å¤šåŒ…å«å¤§é‡ BRDF æµ‹é‡æ•°æ®çš„æ•°æ®é›†ï¼Œæ¯”å¦‚ MERL æ•°æ®é›†ã€‚ å¾®è¡¨é¢æ¨¡å‹ã€‚ç”¨ç²—ç³™åº¦ã€é‡‘å±åº¦ç­‰å‚æ•°æ¥æ„å»ºå¯å‘å¼çš„ BRDF å‡½æ•°ã€‚ è¿˜å€¼å¾—ä¸€æçš„æ˜¯ï¼Œç”± Helmholtz Reciprocity Principleï¼Œæœ‰ f_r(p,\\vec{\\omega_i}, \\vec{\\omega_o}) = f_r(p,\\vec{\\omega_o}, \\vec{\\omega_i})ä¹Ÿå°±æ˜¯è¯´äº¤æ¢å…¥å°„å‡ºå°„æ–¹å‘ï¼ŒBRDF å‡½æ•° $f_r$ ä¸å˜ã€‚ æ¸²æŸ“æ–¹ç¨‹ç°åœ¨æˆ‘ä»¬å…ˆçœ‹çœ‹åå°„æ–¹ç¨‹ï¼Œå†çœ‹çœ‹æ¸²æŸ“æ–¹ç¨‹ã€‚ åå°„æ–¹ç¨‹æ˜¯é€šè¿‡ BRDF æ±‚å‡º $L_r$ çš„æ–¹ç¨‹ï¼Œå¯¹ BRDF çš„å…¬å¼ç§¯åˆ†ä¸€ä¸‹å°±è¡Œï¼š L_r(p, \\vec{\\omega_r}) = \\int_{\\Omega} f_r(p, \\vec{\\omega_i}, \\vec{\\omega_r}) L_i(p, \\vec{\\omega_i}) (\\vec{\\omega_i} \\cdot \\vec{n}) d\\omega_iå…¶ä¸­ $\\vec{n}$ æ˜¯ç‚¹ $p$ å¤„çš„æ³•çº¿æ–¹å‘ï¼Œ$\\vec{\\omega_i} \\cdot \\vec{n}$ æ˜¯ BRDF å®šä¹‰é‡Œçš„ $\\cos\\theta_i$. è€Œæ¸²æŸ“æ–¹ç¨‹ï¼Œä¸è€ƒè™‘æŠ˜å°„ï¼Œåªæ˜¯æ¯”åå°„æ–¹ç¨‹å¤šäº†ä¸€ä¸ªè‡ªå‘å…‰é¡¹ï¼š L_o(p, \\vec{\\omega_o}) = L_e(p, \\vec{\\omega_o}) + \\int_{\\Omega} f_r(p, \\vec{\\omega_i}, \\vec{\\omega_o}) L_i(p, \\vec{\\omega_i}) (\\vec{\\omega_i} \\cdot n) d\\omega_iä½ å¯èƒ½ä¼šå¥½å¥‡å³ä¾§çš„ $L_i(p,\\vec{\\omega_i})$ æ€ä¹ˆæ±‚å‡ºæ¥ã€‚ç”±èƒ½é‡å®ˆæ’ï¼Œæˆ‘ä»¬å¯ä»¥ä» $p$ å‡ºå‘é¡ºç€ $-\\vec{\\omega_i}$ æ‰¾åˆ°ç¬¬ä¸€ä¸ªäº¤ç‚¹ $q$ï¼Œç„¶åå°±æœ‰ L_i(p,\\vec{\\omega_i})=L_o(q,-\\vec{\\omega_i})å®é™…ç®—æ³•ç”±ä¸Šå¯çŸ¥ï¼Œæˆ‘ä»¬è¦æ±‚è§£ä¸‹é¢çš„æ–¹ç¨‹ï¼š L_o(p, \\vec{\\omega_o}) = L_e(p, \\vec{\\omega_o}) + \\int_{\\Omega} f_r(p, \\vec{\\omega_i}, \\vec{\\omega_o}) L_o(\\text{raycast}(p, -\\vec{\\omega_i}), -\\vec{\\omega_i}) (\\vec{\\omega_i} \\cdot n) d\\vec{\\omega_i}è¿™æ˜¯ä¸€ä¸ªç§¯åˆ†ï¼Œè¿˜æ˜¯ä¸€ä¸ªé€’å½’ï¼Œæˆ‘ä»¬å…ˆç”¨è’™ç‰¹å¡ç½—ç®—æ³•è¿‘ä¼¼ç§¯åˆ†ï¼Œå¾—åˆ° L_o(p, \\vec{\\omega_o}) \\approx L_e(p, \\vec{\\omega_o}) + \\frac{1}{N}\\sum_{k=1}^{N}\\frac{f_r(p, \\vec{\\omega_i}^{(k)}, \\vec{\\omega_o}) L_o(\\text{raycast}(p, -\\vec{\\omega_i}^{(k)}), -\\vec{\\omega_i}^{(k)}) (\\vec{\\omega_i} ^{(k)}\\cdot n) } {p(\\vec{\\omega_i}^{(k)})}å…¶ä¸­ $\\vec{\\omega_i}^{(k)}$ æ˜¯éšæœºé‡‡æ ·çš„æ–¹å‘å‘é‡ï¼Œ$p(\\vec{\\omega_i}^{(k)})$ æ˜¯é‡‡æ ·åˆ°å®ƒçš„æ¦‚ç‡ã€‚ æœ‰äº†è¿™ä¸ªæ±‚å’Œï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹é€’å½’äº†ï¼Œå¤§è‡´ç®—æ³•å¦‚ä¸‹ï¼š ä» $p$ å°„å‡ºæœéšæœºæ–¹å‘ $\\vec{\\omega_i}^{(k)}$ çš„å°„çº¿ï¼Œæ‰“åˆ° $q^{(k)}$. è®¡ç®— $L_o(q,-w_i^{(k)})$ï¼Œç„¶åä»£å…¥å¼å­ï¼Œæ±‚å¾— $L_o(p,\\vec{\\omega_o})$ã€‚ ç­‰ç­‰ï¼Œè¿™ä¸æ˜¯æ— é™é€’å½’å—ï¼Ÿç¡®å®å¦‚æ­¤ã€‚æ‰€ä»¥æˆ‘ä»¬ä¼šå‡è®¾å¦‚æœå°„çº¿æ‰“åˆ°äº†å…‰æºå°±åªè¿”å›è‡ªå‘å…‰é¡¹ $L_e$. ä½†è¿™ä¸è¿˜æ˜¯å¾ˆå¤æ‚å—ï¼Œå‡è®¾æˆ‘ä»¬å¯¹æ¯ä¸ªç‚¹å‘å°„ $10$ æ¡å°„çº¿ï¼Œå¼¹å°„ä»¥åå°±è¦å‘å°„ $10^2$ ä¸ªï¼Œå†å¼¹å°„å°±è¦ $10^3$ ä¸ªï¼ æ²¡é”™ï¼Œæ‰€ä»¥æˆ‘ä»¬åªå¯¹æ¯ä¸ªç‚¹å‘å‡º $1$ æ¡å°„çº¿å¹¶è®¡ç®—å…¶å¼¹å°„åçš„å®Œæ•´è·¯å¾„ï¼Œç„¶åå¯¹æ¯ä¸ªç‚¹è¿½è¸ªå¤šæ¡è·¯å¾„å¹¶å–å¹³å‡ã€‚è™½ç„¶è¿™ä¸å®Œå…¨ç¬¦åˆä¸Šé¢çš„å…¬å¼ï¼Œä½†å¾ˆæœ‰æ•ˆã€‚ è®©æˆ‘ä»¬æ¥çœ‹çœ‹æ–°çš„ç®—æ³•å§ï¼š å¦‚æœç‚¹ $p$ æ˜¯å…‰æºï¼Œç›´æ¥è¿”å›å…¶è‡ªå‘å…‰é¡¹ã€‚ éšæœºé‡‡æ ·ä¸€ä¸ªæ–¹å‘ $w_i$ï¼Œä» $p$ å‘å‡ºä¸€æ¡æœå‘ $w_i$ çš„å°„çº¿ï¼Œæ‰“åˆ°ç‚¹ $q$. è®¡ç®—ç‚¹ $q$ çš„ $L_o(q,-w_i)$ï¼Œä»£å…¥å…¬å¼ï¼Œæ±‚å¾— $L_o(p,w_o)$. å¯¹æ±‚å¾—çš„å¤šä¸ª $L_o(p,w_o)$ å–å¹³å‡ã€‚ è¿™ä¸ªç®—æ³•å½“ç„¶å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œæ¯”å¦‚è¯´ä¸Šé¢è¿˜æ˜¯æœ‰æ½œåœ¨çš„æ— é™å¼¹å°„é£é™©ï¼Œæ‰€ä»¥è¦ç”¨ä¿„ç½—æ–¯è½®ç›˜èµŒæ¥åœ¨æ¯æ¬¡å¼¹å°„æ—¶éƒ½æœ‰éšæœºæ¦‚ç‡åœæ­¢å¼¹å°„ï¼ˆè¿™è¢«ç§°ä½œRRï¼‰ï¼›åˆæ¯”å¦‚ä¸Šé¢æ‰“åˆ°å…‰æºçš„æ¦‚ç‡å¤ªä½ï¼Œæ‰€ä»¥å¯ä»¥ä»å…‰æºé‡‡æ ·å°„çº¿ï¼ˆè¿™è¢«ç§°ä½œNEEï¼‰ã€‚ä¸è¿‡è¿™äº›ä¸œè¥¿å°±ç•™åˆ°ä½œä¸š 7 çš„è§£æé‡Œå†è¯´å§ã€‚ å‚è€ƒèµ„æ–™Stanford CS348B, Spring 2022ï¼šhttps://gfxcourses.stanford.edu/cs348b/spring22 å¤šä¼¦å¤šå¤§å­¦å›¾å½¢å­¦è®²ä¹‰ï¼šhttps://www.dgp.toronto.edu/public_user/elf/2522/light.pdf Introduction to Radiometry and Photometry UE4 çš„ BRDF å®ç°ï¼šhttps://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"GAMES101","slug":"å…¬å¼€è¯¾/GAMES101","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/"},{"name":"Notes","slug":"å…¬å¼€è¯¾/GAMES101/Notes","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/Notes/"}],"tags":[]},{"title":"æ¢ç´¢æ—¥å¿—[0]","slug":"others/thoughts/æ¢ç´¢æ—¥å¿—0","date":"2025-10-10T12:10:11.000Z","updated":"2025-10-27T13:33:04.965Z","comments":true,"path":"wiki/others/thoughts/æ¢ç´¢æ—¥å¿—0/","permalink":"http://rinevard.github.io/wiki/others/thoughts/%E6%8E%A2%E7%B4%A2%E6%97%A5%E5%BF%970/","excerpt":"","text":"ç¬¬äºŒæ¬¡å‚åŠ äº† Ludum Dareï¼Œç¬¬äºŒæ¬¡å‚åŠ äº† Compo èµ›é“ã€‚Compo è¦æ±‚å•äººä»é›¶å¼€å§‹åœ¨ 48 å°æ—¶å†…åšå‡ºä¸€ä¸ªèƒ½ç©çš„ä¸œè¥¿ã€‚ä¸è§‰å¾—è¿™å¾ˆé…·å—ï¼Œä½œä¸ºä¸€ä¸ªç©å®¶æˆ‘è§‰å¾—è¿™å¤ªé…·äº†ï¼Œå¾ˆç¬¦åˆæˆ‘å¯¹æå®¢çš„æƒ³è±¡ã€‚ ä¸Šä¸€æ¬¡å‚åŠ  Compo ç»“è¯†äº†ä¸€ä½å¾ˆæœ‰è¶£çš„æœ‹å‹ï¼Œæ‰€ä»¥è¿™æ¬¡åˆå‚åŠ äº† Compo è€Œä¸æ˜¯ç»„é˜Ÿçš„ Jamã€‚ä¸è¿‡è¿™æ¬¡ä¼¼ä¹è‡³å°‘åˆ°ç°åœ¨ä¸ºæ­¢è¿˜æ²¡ç»“è¯†åˆ°å¾ˆæœ‰è¶£çš„æœ‹å‹ï¼ˆï¼‰ ä»ä¸Šå­¦æœŸå°±å¼€å§‹æƒ³ï¼Œå¤§å­¦çš„æ¯å¤©éƒ½å¤ªç›¸ä¼¼ï¼Œæ—¥å¤ä¸€æ—¥ã€‚å› æ­¤æƒ³æ¯å‘¨éƒ½åšä¸€äº›æ²¡åšè¿‡çš„äº‹æƒ…ã€‚è™½ç„¶æ²¡åšæŒå¾ˆä¹…ï¼Œä½†æˆ‘æƒ³è¿™ç¡®å®æ˜¯å€¼å¾—åšçš„ã€‚æ‰€ä»¥ä»ç°åœ¨å¼€å§‹ç®€å•å†™å†™æ¢ç´¢æ—¥å¿—å§ï¼Œæ—¶ä¸æ—¶æ¢ç´¢ä¸€ä¸‹ã€‚ è¿™æ¬¡é™¤äº†è‡ªå·±å‚åŠ ä¹‹å¤–ï¼Œè¿˜å’Œå¢¨é±¼æ¸¸ç ”ç¤¾çš„åŒå­¦ä»¬ä¸€èµ·ç»„ç»‡äº†ä¸€ä¸ªæ´»åŠ¨ï¼Œå’Œç¤¾å›¢çš„å¤§å®¶ä¸€èµ·å‚åŠ äº†è¿™åœº gamejamï¼Œå’±ä»¬ç¤¾å›¢æœ€åä¸€å…±åšäº†å››ä¸ªæ¸¸æˆã€‚æˆ‘åšäº† SwarmSurge. æ€æ ·çš„ç”Ÿæ´»å€¼å¾—æˆ‘è¿‡ï¼Œæˆ‘è¯¥è¿‡æ€æ ·çš„ç”Ÿæ´»ï¼Ÿæˆ‘ç¡®å®è¿˜æ²¡æƒ³æ˜ç™½ã€‚Jam æ˜¯ç”Ÿæ´»é‡Œä¸ºæ•°ä¸å¤šçš„ä¸€æŠ¹å¥‡å¹»è‰²å½©ï¼ŒæƒŠè‰³åˆçŸ­æš‚ã€‚åœ¨æœ‰è¶£çš„æ•…äº‹ç»“æŸä¹‹åï¼Œæˆ‘ä»¬åˆè¯¥åšä»€ä¹ˆï¼Œåˆè¯¥å»å¾€ä½•æ–¹ï¼Ÿ ä¹Ÿéš¾æ€ªä¼šå–œæ¬¢å‡‰å®«æ˜¥æ—¥ã€‚è™½ç„¶å¥¹æ€§æ ¼æ¶åŠ£æƒ³ä¸€å‡ºæ˜¯ä¸€å‡ºï¼Œä½†å¥¹æ˜¯è®©ä¸–ç•Œå˜å¾—æ›´çƒ­é—¹çš„å‡‰å®«æ˜¥æ—¥å›¢å›¢é•¿ï¼é˜¿è™šæ›¾é—®è‡ªå·±ï¼šâ€œå¯¹è¿™ç§è¶…ä¹å¸¸è¯†çš„å­¦å›­ç”Ÿæ´»ï¼Œä½ å°±ä¸è§‰å¾—å¿«ä¹å—ï¼Ÿâ€ä»–çš„å›ç­”æ˜¯ï¼šâ€œå½“ç„¶å¿«ä¹äº†ï¼Œåˆ«é—®æˆ‘è¿™ç§æ˜æ‘†ç€çš„äº‹æƒ…ã€‚â€ å¯¹è¿™äº›å¥‡å¹»è‰²å½©ï¼Œæˆ‘éš¾é“ä¸æ„Ÿè§‰å¿«ä¹å—ï¼Ÿå½“ç„¶å¿«ä¹äº†ã€‚æˆ‘ä¼šä¸€ç›´æ¢ç´¢ä¸‹å»ï¼Œå³ä½¿æ¯å¤©éƒ½æ˜¯æŸä¸ªé›¨æ—¥ã€‚","categories":[{"name":"æ‚è°ˆ","slug":"æ‚è°ˆ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/"},{"name":"ç¢ç¢å¿µ","slug":"æ‚è°ˆ/ç¢ç¢å¿µ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/%E7%A2%8E%E7%A2%8E%E5%BF%B5/"}],"tags":[]},{"title":"Note 5 RayTracing","slug":"learning/open-course/GAMES101/Notes/Note5-RayTracing","date":"2025-09-25T13:48:28.000Z","updated":"2025-09-25T13:51:26.850Z","comments":true,"path":"wiki/learning/open-course/GAMES101/Notes/Note5-RayTracing/","permalink":"http://rinevard.github.io/wiki/learning/open-course/GAMES101/Notes/Note5-RayTracing/","excerpt":"","text":"æ¸²æŸ“å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªå¤§ç±»ï¼šobject-order rendering å’Œ Image-order rendering. å‰è€…ä»¥åœºæ™¯ä¸­çš„ç‰©ä½“ï¼ˆé€šå¸¸æ˜¯å¦‚ä¸‰è§’å½¢ï¼‰ä¸ºåŸºæœ¬å•ä½è¿›è¡Œè¿­ä»£ï¼Œéå†åœºæ™¯ä¸­çš„æ¯ä¸€ä¸ªç‰©ä½“ï¼Œç„¶åç¡®å®šè¯¥ç‰©ä½“ä¼šå½±å“å±å¹•ä¸Šçš„å“ªäº›åƒç´ ï¼›åè€…ä»¥å±å¹•ä¸Šçš„åƒç´ ä¸ºåŸºæœ¬å•ä½è¿›è¡Œè¿­ä»£ï¼Œéå†è¾“å‡ºå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ ï¼Œç„¶åå¯¹äºæ¯ä¸ªåƒç´ ï¼Œå®ƒä¼šæ‰¾å‡ºåœºæ™¯ä¸­çš„å“ªä¸ªç‰©ä½“æˆ–ç‰©ä½“çš„å“ªä¸ªéƒ¨åˆ†å†³å®šäº†è¯¥åƒç´ çš„é¢œè‰²ã€‚ æˆ‘ä»¬ä¹‹å‰å­¦çš„å…‰æ …åŒ–æ˜¯å‰è€…ï¼Œè€Œæˆ‘ä»¬æ¥ä¸‹æ¥è¦ä»‹ç»çš„å…‰çº¿è¿½è¸ªå°±æ˜¯åè€…ã€‚ å…‰çº¿è¿½è¸ªåŸºæœ¬æ€æƒ³å…‰çº¿è¿½è¸ªçš„æ€æƒ³åŸºäºå…‰è·¯å¯é€†â€”â€”æ—¢ç„¶å…‰è·¯å¯é€†ï¼Œé‚£ä¹ˆæ‰“åˆ°æ‘„åƒæœºé‡Œçš„å…‰å°±å¯ä»¥çœ‹ä½œä»æ‘„åƒæœºå‘å‡ºçš„å°„çº¿ï¼Œæˆ‘ä»¬åªè¦æ‰“å‡ºå°„çº¿ç„¶åè®¡ç®—å°„çº¿æ‰“åˆ°çš„ç‚¹çš„é¢œè‰²å°±å¥½äº†ã€‚ å…¶å®åŸºæœ¬æ€è·¯çœŸçš„å°±æ˜¯è¿™ä¹ˆç®€å•ï¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬ä»çœ¼ç›é‡Œå‘å‡ºç»è¿‡æ¯ä¸ªåƒç´ çš„å°„çº¿ï¼Œç„¶åå°„çº¿æ‰“åˆ°ç‰©ä½“ä¸Šå°±å¾—åˆ°äº†ç‰©ä½“çš„åŸºæœ¬é¢œè‰²ã€‚è€Œå°„çº¿è¿˜ä¼šåå°„ã€æŠ˜å°„ï¼Œæˆ‘ä»¬è®¡ç®—åå°„ã€æŠ˜å°„åçš„å°„çº¿æ‰“åˆ°çš„é¢œè‰²ï¼Œå†åŠ åˆ°åŸºæœ¬é¢œè‰²ä¸Šï¼Œå°±å¾—åˆ°äº†è¿™ä¸ªåƒç´ çš„é¢œè‰²ã€‚ å…‰çº¿è¿½è¸ªä¹Ÿè‡ªç„¶åœ°ç”Ÿæˆäº†é˜´å½±â€”â€”å¦‚æœå°„çº¿æ‰“ä¸­çš„ç‚¹å’Œå…‰æºçš„è¿çº¿é—´æœ‰ç‰©ä½“é®æŒ¡ï¼Œè¿™ç‚¹å°±æ˜¯é˜´å½±ï¼Œå¦åˆ™å°±ä¸æ˜¯é˜´å½±ã€‚ ç¢°æ’æ£€æµ‹æ—¢ç„¶å¦‚æ­¤ï¼Œæˆ‘ä»¬åªè¦æ£€æµ‹å°„çº¿å’Œä¸‰è§’å½¢çš„ç¢°æ’å°±å¥½äº†ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„ MÃ¶ller Trumbore Algorithm æ¥åšæ£€æµ‹ï¼Œå…¶æ€è·¯æ˜¯è§£ â€œç›´çº¿ä¸Šçš„ç‚¹ = ä¸‰è§’å½¢é‡å¿ƒåæ ‡è¡¨ç¤ºâ€ è¿™ä¸ªæ–¹ç¨‹ï¼š è€ƒè™‘å°„çº¿ $\\vec{O} + t\\vec{D}$ å’Œä¸‰è§’å½¢ $P_0, P_1, P_2$ï¼Œæˆ‘ä»¬è¦è§£æ–¹ç¨‹ \\vec{O} + t\\vec{D} = (1-b_1-b_2)\\vec{P_0} + b_1\\vec{P_1} + b_2\\vec{P_2}è¿™æ˜¯ä¸€ä¸ªçº¿æ€§æ–¹ç¨‹ç»„ï¼Œè§£ä¸º \\begin{bmatrix} t \\\\ b_1 \\\\ b_2 \\end{bmatrix} = \\frac{1}{\\vec{S_1} \\cdot \\vec{E_1}} \\begin{bmatrix} \\vec{S_2} \\cdot \\vec{E_2} \\\\ \\vec{S_1} \\cdot \\vec{S} \\\\ \\vec{S_2} \\cdot \\vec{D} \\end{bmatrix}å…¶ä¸­ \\begin{aligned} \\vec{E_1} &= \\vec{P_1} - \\vec{P_0} \\\\ \\vec{E_2} &= \\vec{P_2} - \\vec{P_0} \\\\ \\vec{S} &= \\vec{O} - \\vec{P_0} \\\\ \\vec{S_1} &= \\vec{D} \\times \\vec{E_2} \\\\ \\vec{S_2} &= \\vec{S} \\times \\vec{E_1} \\end{aligned}æ€§èƒ½ä¼˜åŒ–åœ¨åšå°„çº¿å’Œä¸‰è§’å½¢çš„ç¢°æ’æ£€æµ‹æ—¶ï¼Œç®€å•åœ°éå†åœºæ™¯é‡Œçš„æ¯ä¸ªä¸‰è§’å½¢æ˜¾ç„¶å¤ªæ…¢äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨åŒ…å›´ç›’æ¥ä¼˜åŒ–ã€‚å¦‚æœä¸€ä¸ªå°„çº¿æ²¡æœ‰ç¢°åˆ°åŒ…å›´ç›’ï¼Œè‡ªç„¶å°±ä¸ä¼šç¢°åˆ°ç›’å­é‡Œçš„ç‰©ä½“ï¼›å¦‚æœç¢°åˆ°äº†ï¼Œå†å’Œç›’å­é‡Œçš„ç‰©ä½“åšç¢°æ’æ£€æµ‹ã€‚ å¸¸è§åŒ…å›´ç›’åŒ…å›´ç›’æœ‰ä¸¤ç§æ€è·¯ï¼Œä¸€ç§æ˜¯åŸºäºç©ºé—´çš„åˆ’åˆ†ï¼Œå¦ä¸€ç§æ˜¯åŸºäºç‰©ä½“çš„åˆ’åˆ†ã€‚å‰è€…çš„ä»£è¡¨åŒ…æ‹¬å››å‰æ ‘ã€å…«å‰æ ‘ï¼›åè€…çš„ä»£è¡¨æ˜¯ BVH. å››å‰æ ‘ã€å…«å‰æ ‘æŠŠç©ºé—´è¿›è¡Œå¹³åˆ†ï¼Œå½“ä¸€ä¸ªåŒºåŸŸé‡Œè¿˜å‰©è¾ƒå¤šç‰©ä½“æ—¶å°±å†åœ¨è¿™ä¸ªåŒºåŸŸé‡Œå¹³åˆ†ä¸€æ¬¡ã€‚ BVH ä¸ºæ¯ç»„ç‰©ä½“å»ºç«‹åŒ…å›´ç›’ï¼Œç„¶åå†æŠŠçˆ¶åŒ…å›´ç›’åˆ’åˆ†æˆå­åŒ…å›´ç›’ã€‚ å°„çº¿å’ŒåŒ…å›´ç›’çš„ç¢°æ’æ£€æµ‹åŒ…å›´ç›’æœ‰å…­ä¸ªé¢ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠç›¸å¯¹çš„é¢åˆ’åˆ†æˆä¸€ç»„ä»è€Œå¾—åˆ°ä¸‰ç»„é¢ã€‚è®¡ç®—å°„çº¿ $\\vec{O} + t\\vec{D}$ ä¸è¿™ä¸‰ç»„é¢çš„äº¤ç‚¹åï¼Œæˆ‘ä»¬ä¼šå¾—åˆ° $[t{x, \\text{enter}}, t{x, \\text{exit}}],[t{y, \\text{enter}}, t{y, \\text{exit}}],[t{z, \\text{enter}}, t{z, \\text{exit}}]$ï¼Œä¹‹åè®¡ç®—ä¸‹é¢çš„äº¤é›†ï¼š [t_\\text{raymin},t_\\text{raymax}]\\cap[t_{x, \\text{enter}}, t_{x, \\text{exit}}]\\cap[t_{y, \\text{enter}}, t_{y, \\text{exit}}]\\cap[t_{z, \\text{enter}}, t_{z, \\text{exit}}]å¦‚æœäº¤é›†ä¸ºç©ºåˆ™æ— äº¤ç‚¹ï¼Œå¦åˆ™æœ‰äº¤ç‚¹ã€‚ ä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼ŒåŒ…å›´ç›’ä¸€èˆ¬æ˜¯ä¸åæ ‡è½´å¹³è¡Œçš„ã€‚","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"GAMES101","slug":"å…¬å¼€è¯¾/GAMES101","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/"},{"name":"Notes","slug":"å…¬å¼€è¯¾/GAMES101/Notes","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/Notes/"}],"tags":[]},{"title":"Assignment 6 Bounding Box","slug":"learning/open-course/GAMES101/Hw/Hw6-bounding-box","date":"2025-09-24T09:46:44.000Z","updated":"2025-09-24T12:56:28.461Z","comments":true,"path":"wiki/learning/open-course/GAMES101/Hw/Hw6-bounding-box/","permalink":"http://rinevard.github.io/wiki/learning/open-course/GAMES101/Hw/Hw6-bounding-box/","excerpt":"","text":"è¿™æ¬¡çš„ä½œä¸šè¦æ±‚å®ç°ç”¨åŒ…å›´ç›’æ¥åŠ å¿«å…‰çº¿è¿½è¸ªï¼Œå†ç”¨ BVH ä¼˜åŒ–ã€‚ é¦–å…ˆæˆ‘ä»¬è¦æŠŠ hw5 é‡Œçš„ä»£ç å¤åˆ¶è¿‡æ¥ï¼Œè®©æˆ‘ä¸è§£çš„æ˜¯ä»£ç é‡Œæ˜æ˜å·²ç»æä¾›äº† rayTriangleIntersect å‡½æ•°ï¼ŒPDF é‡Œå´è¿˜è¯´â€œå°†ä½ çš„å…‰çº¿-ä¸‰è§’å½¢ç›¸äº¤å‡½æ•°ç²˜è´´åˆ°æ­¤å¤„â€ï¼Œæ˜æ˜ç›´æ¥è°ƒç”¨å®ƒå°±å¥½äº†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š inline Intersection Triangle::getIntersection(Ray ray) &#123; Intersection inter; float u, v, t; inter.happened = rayTriangleIntersect(v0, v1, v2, ray.origin, ray.direction, t, u, v); if (inter.happened) &#123; inter.coords = ray.origin + t * ray.direction; inter.normal = normal; inter.distance = t; inter.obj = this; inter.m = m; &#125; return inter; &#125; ç„¶åæˆ‘ä¹Ÿä¸å¤ªå–œæ¬¢ä»£ç æ¡†æ¶å¯¹ IntersectP çš„å®šä¹‰ï¼Œåœ¨æˆ‘çœ‹æ¥æ—¢ç„¶å¦å¤–ä¸¤ä¸ªå‚æ•°èƒ½é€šè¿‡ ray ç®—å‡ºæ¥ï¼Œå°±å®Œå…¨æ²¡æœ‰ç†ç”±ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚ äºæ˜¯æˆ‘å°±æ”¹æˆäº†è¿™ä¸ªåªä¿ç•™ ray å‚æ•°çš„æ ·å­ï¼š inline bool Bounds3::IntersectP(const Ray&amp; ray) const &#123; // invDir: ray direction(x,y,z), invDir=(1.0/x,1.0/y,1.0/z), use this because Multiply is faster that Division auto tMinVec = (pMin - ray.origin) * ray.direction_inv; auto tMaxVec = (pMax - ray.origin) * ray.direction_inv; float tMinx = std::max(&#123;std::min(tMinVec.x, tMaxVec.x), static_cast&lt;float>(ray.t_min)&#125;); float tMiny = std::max(&#123;std::min(tMinVec.y, tMaxVec.y), static_cast&lt;float>(ray.t_min)&#125;); float tMinz = std::max(&#123;std::min(tMinVec.z, tMaxVec.z), static_cast&lt;float>(ray.t_min)&#125;); float tMaxx = std::min(&#123;std::max(tMinVec.x, tMaxVec.x), static_cast&lt;float>(ray.t_max)&#125;); float tMaxy = std::min(&#123;std::max(tMinVec.y, tMaxVec.y), static_cast&lt;float>(ray.t_max)&#125;); float tMaxz = std::min(&#123;std::max(tMinVec.z, tMaxVec.z), static_cast&lt;float>(ray.t_max)&#125;); float tMin = std::max(&#123;tMinx, tMiny, tMinz&#125;); float tMax = std::min(&#123;tMaxx, tMaxy, tMaxz&#125;); return (tMin &lt;= tMax); &#125; æ€è·¯å°±æ˜¯è®¡ç®—è¿™ä¸ªäº¤é›†ï¼š [t_\\text{raymin},t_\\text{raymax}]\\cap[t_{x, \\text{enter}}, t_{x, \\text{exit}}]\\cap[t_{y, \\text{enter}}, t_{y, \\text{exit}}]\\cap[t_{z, \\text{enter}}, t_{z, \\text{exit}}]å¯¹äºæœ€åçš„ getIntersectionï¼Œå° AI è¯´å¯ä»¥åœ¨å‘ç”Ÿç›¸äº¤æ—¶æ›´æ–° ray çš„ t_maxï¼Œç„¶ååœ¨å°„çº¿å’Œç›’å­çš„äº¤ç‚¹å¤§äº t_max æ—¶ä¸å†æ£€æµ‹ç›’å­å†…éƒ¨çš„ç›¸äº¤ï¼Œè¿™å¯ä»¥ä¼˜åŒ–æ€§èƒ½ã€‚æˆ‘è®¤ä¸ºä»–è¯´å¾—éå¸¸æœ‰é“ç†ï¼Œä½†æ”¹èµ·æ¥æœ‰ç‚¹éº»çƒ¦ï¼Œå°±ä¸æ”¹äº†ã€‚ Intersection BVHAccel::getIntersection(BVHBuildNode* node, const Ray&amp; ray) const &#123; if (!node->bounds.IntersectP(ray)) &#123; return Intersection(); &#125; // leaf node checks ray's intersection with obj if (node->left == nullptr &amp;&amp; node->right == nullptr) &#123; if (node->object == nullptr) &#123; return Intersection(); &#125; return node->object->getIntersection(ray); &#125; // parent with only one child returns child's intersection else if (node->left == nullptr) &#123; return getIntersection(node->right, ray); &#125; else if (node->right == nullptr) &#123; return getIntersection(node->left, ray); &#125; // parent with two children returns the closer intersection else &#123; Intersection inter1 = getIntersection(node->left, ray); Intersection inter2 = getIntersection(node->right, ray); if (!inter1.happened &amp;&amp; !inter2.happened) &#123; return Intersection(); &#125; else if (!inter1.happened) &#123; return inter2; &#125; else if (!inter2.happened) &#123; return inter1; &#125; return (inter1.distance &lt; inter2.distance) ? inter1 : inter2; &#125; &#125; å’±è¿˜æ˜¯åœ¨æœ€åæ”¾æ”¾å›¾å›¾","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"GAMES101","slug":"å…¬å¼€è¯¾/GAMES101","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/"},{"name":"Assignments","slug":"å…¬å¼€è¯¾/GAMES101/Assignments","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/Assignments/"}],"tags":[]},{"title":"Assignment 5 Raytracing","slug":"learning/open-course/GAMES101/Hw/Hw5-raytracing","date":"2025-09-22T11:46:16.000Z","updated":"2025-09-26T04:09:50.574Z","comments":true,"path":"wiki/learning/open-course/GAMES101/Hw/Hw5-raytracing/","permalink":"http://rinevard.github.io/wiki/learning/open-course/GAMES101/Hw/Hw5-raytracing/","excerpt":"","text":"å¦‚æœåªæ˜¯å®ç°è¦æ±‚çš„è¯ï¼Œæ„Ÿè§‰è¿™ä¼šæ˜¯å¾ˆæ— èŠçš„ä¸€æ¬¡ä½œä¸šã€‚ä¸ºäº†è®©äº‹æƒ…æœ‰è¶£ä¸€ç‚¹ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ castRay å‡½æ•°çš„å®ç°å§ã€‚æˆ‘ä»¬ä¼šæŠŠä½œä¸šä»£ç æ”¾åœ¨æ–‡æœ«ã€‚ castRay å‡½æ•°çš„åˆ†æcastRay å‡½æ•°å®ç°äº†è¯¾ä¸Šè®²çš„å…‰çº¿è¿½è¸ªï¼Œå®ƒä» orig æ‰“å‡ºæœç€ dir æ–¹å‘çš„å°„çº¿ï¼Œå¹¶è¿”å›é¢œè‰²ã€‚å…¶å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š é¦–å…ˆï¼Œæ£€æŸ¥å½“å‰çš„é€’å½’æ·±åº¦depthã€‚å½“depthè¶…è¿‡åœºæ™¯è®¾å®šçš„æœ€å¤§æ·±åº¦scene.maxDepthæ—¶ï¼Œå‡½æ•°è¿”å›é»‘è‰²ã€‚è¿™å°±æ˜¯å¼€å¤´çš„ä»£ç ï¼š if (depth > scene.maxDepth) &#123; return Vector3f(0.0,0.0,0.0); &#125; ç„¶åï¼Œè®¡ç®—å°„çº¿æ˜¯å¦ä¸åœºæ™¯ä¸­çš„ä»»ä½•ç‰©ä½“ç›¸äº¤ã€‚å¦‚æœæ²¡æœ‰å‘ç”Ÿç›¸äº¤ï¼Œè¯´æ˜å°„çº¿å°„å‘äº†åœºæ™¯çš„èƒŒæ™¯ï¼Œå‡½æ•°å°†è¿”å›èƒŒæ™¯é¢œè‰²ã€‚ å¦‚æœå°„çº¿å‡»ä¸­äº†æŸä¸ªç‰©ä½“ï¼Œå‡½æ•°å°†æ ¹æ®è¯¥ç‰©ä½“çš„æè´¨ç±»å‹ï¼Œè¿›å…¥ä¸åŒçš„å¤„ç†åˆ†æ”¯è®¡ç®—é¢œè‰²ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šåˆ†æè¿™äº›åˆ†æ”¯ã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç‰©ä½“è¢«åˆ†ä¸ºäº†ä¸‰ç§æè´¨ï¼Œåˆ†åˆ«æ˜¯æ—¢æœ‰é•œé¢åå°„åˆæœ‰æŠ˜å°„çš„ REFLECTION_AND_REFRACTIONã€åªæœ‰åå°„çš„ REFLECTIONã€åªæœ‰æ¼«åå°„çš„ DIFFUSE_AND_GLOSSYã€‚REFLECTION_AND_REFRACTION å’Œ REFLECTION éƒ¨åˆ†çš„ä»£ç æ¯”è¾ƒç›¸ä¼¼ï¼Œæˆ‘ä»¬å°±å…ˆè®¨è®º REFLECTION_AND_REFRACTION çš„ä»£ç ï¼Œå†è®¨è®º DIFFUSE_AND_GLOSSY çš„ä»£ç ã€‚ REFLECTION_AND_REFRACTIONè¿™é‡Œçš„åå°„/æŠ˜å°„æè´¨è‡ªèº«æ˜¯æ²¡æœ‰é¢œè‰²çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä»¬åªæ˜¾ç¤ºåå°„/æŠ˜å°„åå°„çº¿æ‰“åˆ°çš„ç‚¹çš„é¢œè‰²ã€‚æ‰€ä»¥ä»£ç æ€è·¯æ¯”è¾ƒç®€å•ï¼Œå¦‚æœå°„çº¿æ‰“åˆ°äº†è¿™ç§æè´¨çš„ç‰©ä½“ä¸Šï¼Œå®ƒä¼šåå°„/æŠ˜å°„ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—å‡ºåå°„/æŠ˜å°„åçš„å°„çº¿æ‰“åˆ°çš„é¢œè‰²ï¼Œè¿™å°±å¯¹åº”ç€ä¸‹é¢çš„ä»£ç ï¼š Vector3f reflectionColor = castRay(reflectionRayOrig, reflectionDirection, scene, depth + 1); Vector3f refractionColor = castRay(refractionRayOrig, refractionDirection, scene, depth + 1); ä»£ç é‡Œè¿˜è€ƒè™‘äº†è²æ¶…å°”æ•ˆåº”æ¥è®¡ç®—åå°„å’ŒæŠ˜å°„çš„æ¯”ä¾‹ã€‚è²æ¶…å°”æ•ˆåº”çš„å…¬å¼æœ‰ç‚¹å¤æ‚ï¼Œæˆ‘ä»¬å°±ä¸è®²è§£äº†ã€‚è¿™é‡Œçš„ kr å°±æ˜¯è²æ¶…å°”æ–¹ç¨‹ç®—å‡ºçš„åå°„ç³»æ•°ï¼Œè€Œç”±èƒ½é‡å®ˆæ’ï¼ŒæŠ˜å°„ç³»æ•°å°±æ˜¯ $1-\\text{kr}$ã€‚ hitColor å°±æ˜¯è¿™ä¸ªç‚¹çš„æœ€ç»ˆé¢œè‰²ï¼š float kr = fresnel(dir, N, payload->hit_obj->ior); hitColor = reflectionColor * kr + refractionColor * (1 - kr); æˆ‘ä»¬ä¹Ÿä¼šæ³¨æ„åˆ°ï¼Œä»£ç åœ¨å¼€å¤´å¯¹åå°„/æŠ˜å°„ç‚¹åšäº†ä¸€ä¸ªå°å°çš„åç§»ï¼Œè¿™ä¼¼ä¹æ˜¯ä¸ºäº†é¿å…åå°„/æŠ˜å°„æ—¶ç«‹å³æ‰“åˆ°è‡ªå·±ï¼ˆå’±ä¹Ÿä¸ç¡®å®šï¼Œè¿™æ˜¯çŒœæµ‹ï¼‰ Vector3f reflectionRayOrig = (dotProduct(reflectionDirection, N) &lt; 0) ? hitPoint - N * scene.epsilon : hitPoint + N * scene.epsilon; æˆ‘ä»¬éƒ½çœ‹åˆ°è²æ¶…å°”æ•ˆåº”çš„ä»£ç äº†ï¼Œä¸å¦‚å†çœ‹çœ‹çº¯åå°„/çº¯æŠ˜å°„çš„çƒæ˜¯æ€æ ·çš„ã€‚æ³¨æ„é è¿‘æˆ‘ä»¬è§‚å¯Ÿè€…çš„çƒï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæŠŠ kr è®¾ä¸º 1 æ¥çœ‹çœ‹çº¯åå°„çš„ç»“æœï¼š å†æ¥çœ‹çœ‹çº¯æŠ˜å°„çš„ç»“æœï¼š ä¸æ–‡æœ«çš„å›¾æ¯”è¾ƒä¸€ä¸‹ï¼Œå°±ä¼šå‘ç°è²æ¶…å°”æ•ˆåº”ç¡®å®å°±æ˜¯åå°„å’ŒæŠ˜å°„çš„å åŠ ã€‚ DIFFUSE_AND_GLOSSYå†æ¥çœ‹çœ‹ DIFFUSE_AND_GLOSSY éƒ¨åˆ†ï¼Œè¿™é‡Œæ˜¯æ­£å¸¸çš„ Phong æ¨¡å‹ç€è‰²ã€‚å”¯ä¸€è¦æ³¨æ„çš„æ˜¯ï¼Œè¦åˆ¤æ–­å°„çº¿æ‰“åˆ°çš„ç‚¹å’Œå…‰æºä¹‹é—´æœ‰æ²¡æœ‰ç‰©ä½“é®æŒ¡ï¼Œå¦‚æœæœ‰é®æŒ¡è¿™é‡Œå°±æ˜¯é˜´å½±ã€‚ æˆ‘è®¤ä¸ºè¿™ä¸€éƒ¨åˆ†çš„ä»£ç æœ‰é—®é¢˜ï¼Œå®ƒåªè€ƒè™‘äº†æ¼«åå°„åˆ†é‡åœ¨ä¸åœ¨é˜´å½±é‡Œï¼Œè€Œæ²¡è€ƒè™‘é•œé¢åå°„åˆ†é‡ã€‚è¿™é‡Œæ˜¯åŸæœ¬çš„ä»£ç ï¼š // æ¼«åå°„ lightAmt += inShadow ? 0 : light->intensity * LdotN; // é•œé¢åå°„ Vector3f reflectionDirection = reflect(-lightDir, N); specularColor += powf(std::max(0.f, -dotProduct(reflectionDirection, dir)), payload->hit_obj->specularExponent) * light->intensity; æˆ‘æƒ³æˆ‘ä»¬åº”è¯¥åšè¿™æ ·çš„ä¿®æ”¹ï¼š if (!inShadow) &#123; // æ¼«åå°„ lightAmt += light->intensity * LdotN; // é•œé¢åå°„ Vector3f reflectionDirection = reflect(-lightDir, N); specularColor += powf(std::max(0.f, -dotProduct(reflectionDirection, dir)), payload->hit_obj->specularExponent) * light->intensity; &#125; ä½œä¸šä»£ç æ¥ä¸‹æ¥å’±å°±ç›´æ¥æ”¾ä½œä¸šä»£ç äº†ã€‚ é¦–å…ˆæ˜¯ rayTriangleIntersectï¼š bool rayTriangleIntersect(const Vector3f&amp; v0, const Vector3f&amp; v1, const Vector3f&amp; v2, const Vector3f&amp; orig, const Vector3f&amp; dir, float&amp; tNear, float&amp; u, float&amp; v) &#123; auto e1 = v1 - v0; auto e2 = v2 - v0; auto s = orig - v0; auto s1 = crossProduct(dir, e2); auto s2 = crossProduct(s, e1); auto coefficient = 1.0 / dotProduct(s1, e1); tNear = coefficient * dotProduct(s2, e2); u = coefficient * dotProduct(s1, s); v = coefficient * dotProduct(s2, dir); return (tNear >= 0) &amp;&amp; (u >= 0) &amp;&amp; (v >= 0) &amp;&amp; ((1 - u - v) >= 0); &#125; ç„¶åæ˜¯ Render çš„éƒ¨åˆ†ï¼š for (int i = 0; i &lt; scene.width; ++i) &#123; // generate primary ray direction float x; float y; // I don't understand what are the guiding comments talking about. // Anyway, the code is assuming the distance between eye and screen is one, since abs(dir.z) == 1 // With this assumption we can compute screen's width and height // Then we map x from [0, scene.width - 1] to [-screen_width / 2, screenwidth / 2] // and map y from [0, scene.height - 1] to [screen_height / 2, -screen_height / 2] float screen_height = 2 * scale; float screen_width = imageAspectRatio * screen_height; x = (screen_width / (scene.width - 1)) * (i + 0.5) - (screen_width / 2.0); y = (-screen_height / (scene.height - 1)) * (j + 0.5) + (screen_height / 2.0); Vector3f dir = normalize(Vector3f(x, y, -1)); // Don't forget to normalize this direction! framebuffer[m++] = castRay(eye_pos, dir, scene, 0); &#125; çœ‹çœ‹ç»“æœå§ï¼å¦‚æœå’Œå‰é¢çš„çº¯åå°„/çº¯æŠ˜å°„å¯¹ç…§ï¼Œä¼šå‘ç°å‰é¢çš„çƒç¡®å®å°±æ˜¯åå°„å’ŒæŠ˜å°„çš„å åŠ ï¼ˆåå°„å¾ˆæ·¡ï¼Œä¸è¿‡ä»”ç»†çœ‹ä¹Ÿæ˜¯èƒ½çœ‹å‡ºæ¥çš„ï¼ï¼‰","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"GAMES101","slug":"å…¬å¼€è¯¾/GAMES101","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/"},{"name":"Assignments","slug":"å…¬å¼€è¯¾/GAMES101/Assignments","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/Assignments/"}],"tags":[]},{"title":"Assignment 4 Geometry","slug":"learning/open-course/GAMES101/Hw/Hw4-geometry","date":"2025-09-22T11:44:16.000Z","updated":"2025-09-22T11:44:41.718Z","comments":true,"path":"wiki/learning/open-course/GAMES101/Hw/Hw4-geometry/","permalink":"http://rinevard.github.io/wiki/learning/open-course/GAMES101/Hw/Hw4-geometry/","excerpt":"","text":"è¿™æ¬¡ä½œä¸šè¿‡äºç®€å•ï¼Œæˆ‘ä»¬ç›´æ¥æ”¾ä»£ç ã€‚ cv::Point2f recursive_bezier(const std::vector&lt;cv::Point2f> &amp;control_points, float t) &#123; // TODO: Implement de Casteljau's algorithm if (control_points.size() == 2) &#123; return ((1 - t) * control_points[0] + t * control_points[1]); &#125; std::vector&lt;cv::Point2f> new_control_points = &#123;&#125;; for (int i = 0; i &lt; control_points.size() - 1; i++) &#123; new_control_points.push_back((1 - t) * control_points[i] + t * control_points[i + 1]); &#125; return recursive_bezier(new_control_points, t); &#125; void bezier(const std::vector&lt;cv::Point2f> &amp;control_points, cv::Mat &amp;window) &#123; // TODO: Iterate through all t = 0 to t = 1 with small steps, and call de Casteljau's // recursive Bezier algorithm. float step = 0.001; for (float t = 0; t &lt;= 1; t += step ) &#123; auto point = recursive_bezier(control_points, t); window.at&lt;cv::Vec3b>(point.y, point.x)[1] = 255; &#125; &#125; å¦å¤–ï¼Œç”±äºå’±ä»¥å‰åœ¨ Godot é‡Œå¯¼å…¥å­—ä½“æ—¶è§è¿‡å¤šé€šé“ç¬¦å·è·ç¦»åœºçš„è®¾ç½®ï¼Œè€Œä¸”å‘ç°å¼€å¯å¤šé€šé“ç¬¦å·è·ç¦»åœºçš„å­—ä½“æ˜¾ç¤ºæ¸…æ™°äº†ä¸€å¤§æˆªï¼Œæ‰€ä»¥æˆ‘æ‰¾äº†æ‰¾ä¸€äº›å…³äº SDF çš„èµ„æ–™ï¼Œæ„Ÿè§‰è¿™ä¸ªä¸é”™ï¼šåŠ¨æ€ SDF å­—ä½“æ¸²æŸ“æ–¹æ³• | åä¸‰","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"GAMES101","slug":"å…¬å¼€è¯¾/GAMES101","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/"},{"name":"Assignments","slug":"å…¬å¼€è¯¾/GAMES101/Assignments","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/Assignments/"}],"tags":[]},{"title":"Note 4 Geometry","slug":"learning/open-course/GAMES101/Notes/Note4-Geometry","date":"2025-09-19T12:10:28.000Z","updated":"2025-09-19T12:13:54.595Z","comments":true,"path":"wiki/learning/open-course/GAMES101/Notes/Note4-Geometry/","permalink":"http://rinevard.github.io/wiki/learning/open-course/GAMES101/Notes/Note4-Geometry/","excerpt":"","text":"è¯¾ä¸Šåªæ˜¯ç®€å•æäº†ä¸‹å‡ ä½•ä¸“é¢˜ï¼Œæˆ‘ä¹Ÿè®¤ä¸ºè¿™ä¸ªä¸“é¢˜ç›¸è¾ƒäºåˆ«çš„å‡ ä¸ªæ²¡é‚£ä¹ˆé‡è¦ï¼Œæ‰€ä»¥åªæ˜¯è®°ä¸€ä¸‹éšå¼è¡¨ç¤ºå’Œå‚æ•°è¡¨ç¤ºçš„ç›¸å…³å†…å®¹ï¼Œå†ç®€å•æä¸€å¥ç½‘æ ¼å¤„ç†ã€‚ éšå¼è¡¨ç¤ºå’Œå‚æ•°è¡¨ç¤ºå¯¹ä¸€ä¸ªå‡ ä½•å›¾å½¢ï¼Œæˆ‘ä»¬ä¸€èˆ¬æœ‰ä¸¤ç§è¡¨ç¤ºæ–¹æ³•ï¼Œä¸€ç§æ˜¯ç”¨æ™®é€šæ–¹ç¨‹ $f(x,y,z)=0$ æ¥è¡¨ç¤ºï¼Œå¦ä¸€ç§æ˜¯ç”¨å‚æ•°æ–¹ç¨‹ $g(u,v)=(x,y,z)$ æ¥è¡¨ç¤ºã€‚å‰è€…æ˜¯éšå¼è¡¨ç¤ºï¼Œå› ä¸ºä¸èƒ½æ–¹ä¾¿åœ°æ±‚å‡ºè¿™ä¸ªæ–¹ç¨‹è¡¨ç¤ºçš„æ‰€æœ‰ç‚¹ï¼›åè€…æ˜¯å‚æ•°è¡¨ç¤ºï¼Œé€šè¿‡å‚æ•° $(u,v)$ çš„å˜åŒ–å¯ä»¥è½»æ˜“æ±‚å‡ºè¿™ä¸ªæ–¹ç¨‹è¡¨ç¤ºçš„æ‰€æœ‰ç‚¹ã€‚ ä¸è¿‡éšå¼è¡¨ç¤ºä¹Ÿæœ‰ä¼˜ç‚¹ï¼Œå®ƒèƒ½å¾ˆæ–¹ä¾¿åœ°åˆ¤æ–­ä¸€ä¸ªç‚¹ $(x,y,z)$ æ˜¯å¦åœ¨æ›²çº¿ä¸Š / æ›²çº¿å†… / æ›²çº¿å¤–ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹éšå¼è¡¨ç¤ºå’Œå‚æ•°è¡¨ç¤ºçš„ä»£è¡¨åº”ç”¨ã€‚ éšå¼è¡¨ç¤ºï¼šç¬¦å·è·ç¦»åœºç¬¦å·è·ç¦»åœºï¼ˆSigned Distance Filed, SDFï¼‰æ˜¯éšå¼è¡¨ç¤ºçš„ä»£è¡¨åº”ç”¨ä¹‹ä¸€ï¼Œè‡ª 2007 å¹´ Valve çš„è®ºæ–‡ä»¥æ¥ï¼Œå®ƒä¸€ç›´è¢«ç”¨äºæ¸¸æˆå†…çš„æ–‡æœ¬æ¸²æŸ“ã€‚è™½ç„¶ç°åœ¨ç”¨çš„æ›´å¤šæ˜¯å¤šé€šé“ç¬¦å·è·ç¦»åœºï¼ˆMSDFï¼‰ï¼Œä½†æˆ‘ä»¬è¿™é‡Œåªç®€å•ä»‹ç»ä¸‹ç¬¦å·è·ç¦»åœºï¼Œå› ä¸ºåè€…æ›´åŠ å¤æ‚ã€‚ ç¬¦å·è·ç¦»åœºå°±æ˜¯å¸¦ç¬¦å·çš„è·ç¦»åœºï¼Œå¯¹ç»™å®šçš„ç‚¹ $(u,v)$ï¼Œæˆ‘ä»¬è®°å½•å®ƒåˆ°å›¾å½¢çš„æœ€è¿‘è·ç¦»â€”â€”å¦‚æœå®ƒåœ¨å›¾å½¢å†…éƒ¨ï¼ˆå›¾å½¢çš„çº¿æ¡æ˜¯æœ‰å®½åº¦çš„ï¼Œè¿™ä¸ªå†…éƒ¨æŒ‡åœ¨çº¿æ¡å†…è€Œéå‡ ä½•é—­ç¯å†…ï¼‰ï¼Œè·ç¦»ä¸ºæ­£å€¼ï¼Œå¦åˆ™ä¸ºè´Ÿå€¼ã€‚ åœ¨ V ç¤¾çš„è®ºæ–‡ä¸­ï¼Œä»–ä»¬å…ˆå¯¹çŸ¢é‡æ–‡å­—åšäº†å…‰æ …åŒ–å¾—åˆ°äº† $4096\\times 4096$ çš„å›¾åƒï¼Œç„¶ååŸºäºè¿™å¼ å›¾å¾—åˆ°äº† $64\\times 64$ çš„ç¬¦å·è·ç¦»åœºã€‚ ä¸‹å›¾å±•ç¤ºäº†åŸå›¾å’Œç¬¦å·è·ç¦»åœºã€‚å›¾åƒä¸é€æ˜åº¦æ˜¯åœ¨ $[0,1]$ é—´çš„éè´Ÿæ•°ï¼Œä¸ºäº†å¯è§†åŒ–ç¬¦å·è·ç¦»åœºï¼Œæˆ‘ä»¬æŠŠè·ç¦»ä¸ºæ­£çš„å†…éƒ¨æ˜ å°„åˆ° $(0.5, 1]$ï¼Œè·ç¦»ä¸º $0$ çš„è¾¹ç¼˜è¢«æ˜ å°„åˆ° $0.5$ï¼Œè·ç¦»ä¸ºè´Ÿçš„å¤–éƒ¨æ˜ å°„åˆ° $[0, 0.5)$. å¾—åˆ°äº†ç¬¦å·è·ç¦»åœºä¹‹åï¼Œæˆ‘ä»¬å°±èƒ½å¯¹ä»»ä½•ä¸€ä¸ªç‚¹æ’å€¼å‡ºå®ƒä¸å›¾å½¢çš„è·ç¦»ï¼Œç„¶åæ ¹æ®è¿™ä¸ªè·ç¦»å†³å®šå®ƒæ˜¯å¦æ˜¾ç¤ºå‡ºæ¥ã€‚æˆ‘ä»¬ä¹‹å‰å·²ç»æè¿‡äº†è·ç¦»åˆ°ä¸é€æ˜åº¦çš„æ˜ å°„ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•è®¾ç½®ä¸€ä¸ªé˜ˆå€¼æ¥å†³å®šæ˜¯å¦æ˜¾ç¤ºæŸä¸ªåƒç´ ï¼š baseColor.a = distAlphaMask >= 0.5; æˆ‘ä¸ªäººçš„æ€è€ƒæ˜¯ï¼Œä¸è¦å› ä¸ºæˆ‘ä»¬å¯è§†åŒ–äº†ç¬¦å·è·ç¦»åœºå°±æŠŠå®ƒå½“ä½œå›¾åƒã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè·ç¦»å‡½æ•° $d(u,v)$ï¼Œæˆ‘ä»¬çš„ $64\\times 64$ çš„ SDF å›¾åƒçš„æ¯ä¸ªåƒç´ è¡¨ç¤ºçš„ä¸æ˜¯â€œå¹³å‡é¢œè‰²â€ï¼Œè€Œæ˜¯â€œåƒç´ ä¸­å¿ƒç‚¹åˆ°å›¾å½¢çš„è·ç¦»â€ã€‚è¦æŠŠå®ƒçœ‹ä½œç‚¹ï¼Œè€Œéæ–¹å—ã€‚ å‚æ•°è¡¨ç¤ºï¼šè´å¡å°”æ›²çº¿å’Œæ›²é¢è´å¡å°”æ›²çº¿å’Œæ›²é¢æ˜¯å‚æ•°è¡¨ç¤ºçš„å¾ˆå¥½ä¾‹å­ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹è®¡ç®—è´å¡å°”æ›²çº¿çš„å¸¸ç”¨ç®—æ³•å’Œä¸€èˆ¬å…¬å¼ã€‚ è´å¡å°”æ›²çº¿å¸¸ç”¨çš„ç”Ÿæˆè´å¡å°”æ›²çº¿çš„ Casteljau Algorithm å¦‚ä¸‹ï¼Œæˆ‘ä»¬ä»¥å››ä¸ªç‚¹æ±‚ä¸‰é˜¶è´å¡å°”æ›²çº¿ä¸ºä¾‹ï¼š def bezier(t: float): # ç¬¬ä¸€å±‚çº¿æ€§æ’å€¼ p0_1 = (1 - t) * p0 + t * p1 p1_1 = (1 - t) * p1 + t * p2 p2_1 = (1 - t) * p2 + t * p3 # ç¬¬äºŒå±‚çº¿æ€§æ’å€¼ p0_2 = (1 - t) * p0_1 + t * p1_1 p1_2 = (1 - t) * p1_1 + t * p2_1 # ç¬¬ä¸‰å±‚ï¼ˆæœ€åä¸€å±‚ï¼‰çº¿æ€§æ’å€¼ p_final = (1 - t) * p0_2 + t * p1_2 return p_final çœ‹çœ‹è¿™ä¸ªç®—æ³•ä¹Ÿå°±çŸ¥é“è´å¡å°”æ›²çº¿æ˜¯æ€ä¹ˆæ¥çš„äº†ã€‚ ä¸‰é˜¶å…¬å¼æ˜¯ \\mathbf{B}(t) = (1-t)^3 \\mathbf{P}_0 + 3(1-t)^2 t \\mathbf{P}_1 + 3(1-t) t^2 \\mathbf{P}_2 + t^3 \\mathbf{P}_3ä¸€èˆ¬çš„ $n$ é˜¶å…¬å¼æ˜¯ \\mathbf{B}(t) = \\sum_{i=0}^{m} \\binom{m}{i} (1-t)^{m-i} t^i \\mathbf{P}_iä¸‹å›¾ä¸­ï¼Œå·¦å›¾æ˜¯ Godot é‡Œçš„ Curveï¼Œå®ƒå°±ç”¨åˆ°äº†è´å¡å°”æ›²çº¿ï¼›å³å›¾è´å¡å°”æ›²çº¿çš„ç”Ÿæˆæ–¹æ³•ï¼Œå’Œä¸Šé¢æåˆ°çš„ Casteljau Algorithm ä¸€è‡´ã€‚ å†çœ‹çœ‹å·¦å›¾ï¼Œæˆ‘ä»¬ä¼šå‘ç°å®ƒæ˜¯ç”±ä¸‰ä¸ªè´å¡å°”æ›²çº¿æ‹¼æ¥è€Œæˆçš„ï¼Œè€Œä¸”çœ‹èµ·æ¥å¾ˆå¹³æ»‘ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œåˆ†æ®µè´å¡å°”æ›²çº¿â€ã€‚é«˜é˜¶è´å¡å°”æ›²çº¿ä¸å®¹æ˜“æ§åˆ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬æ›´å€¾å‘äºæŠŠå‡ ä¸ªä½é˜¶è´å¡å°”æ›²çº¿æ‹¼æ¥èµ·æ¥å½¢æˆå¤æ‚æ›²çº¿ã€‚ è´å¡å°”æ›²é¢æˆ‘ä»¬åŒæ ·ç”¨ Casteljau Algorithm ç”Ÿæˆè´å¡å°”æ›²é¢ï¼š def _de_casteljau_1d(points, t): \"\"\"å¯¹ä¸€ç»´ç‚¹åºåˆ—æ‰§è¡Œ Casteljau ç®—æ³•ã€‚\"\"\" while len(points) > 1: points = [(1 - t) * p1 + t * p2 for p1, p2 in zip(points, points[1:])] return points[0] def bezier_surface(control_points, u, v): \"\"\"è®¡ç®—è´å¡å°”æ›²é¢ä¸Šçš„ä¸€ç‚¹ã€‚\"\"\" intermediate_points = [_de_casteljau_1d(row, u) for row in control_points] final_point = _de_casteljau_1d(intermediate_points, v) return final_point å¦‚ä¸‹å›¾ä¸­çš„å³å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬æœ¬è´¨ä¸Šæ˜¯å…ˆæ²¿ç€ä¸€ä¸ªè½´å‘ç”Ÿæˆä¸€ç»„è´å¡å°”æ›²çº¿ï¼Œå†åœ¨æ›²çº¿ä¸Šå–å€¼ç”Ÿæˆä¸€ç»„æ–°çš„æ§åˆ¶ç‚¹ï¼Œç„¶åç”¨è¿™ç»„æ–°æ§åˆ¶ç‚¹å®šä¹‰ä¸€æ¡æ–°çš„æ›²çº¿ï¼Œæœ€ååœ¨æ–°çš„æ›²çº¿ä¸Šå–å€¼å¾—åˆ°æ›²é¢ä¸Šçš„æœ€ç»ˆç‚¹ã€‚ ç½‘æ ¼å¤„ç†ç”Ÿæˆä¸‰è§’å½¢ç½‘æ ¼åï¼Œæˆ‘ä»¬ç»å¸¸è¿˜å¸Œæœ›åšä¸€äº›å¤„ç†ï¼Œæ¯”å¦‚ç»†åˆ†æ¥è®©æ¨¡å‹æ›´å…‰æ»‘ï¼›å‡å°‘ä¸‰è§’å½¢æ•°é‡æ¥ç®€åŒ–ç½‘æ ¼ã€‚ä¸‹é¢ç®€å•æä¸€ä¸‹ç½‘æ ¼ç»†åˆ†å’Œç½‘æ ¼ç®€åŒ–çš„å¸¸ç”¨ç®—æ³•ã€‚ ç½‘æ ¼ç»†åˆ†ç½‘æ ¼ç»†åˆ†ç®—æ³•çš„ç»å¯¹ä¸»æµæ˜¯ Catmull-Clark ç»†åˆ†ï¼ŒBlender çš„è¡¨é¢ç»†åˆ†ä¿®æ”¹å™¨çš„é»˜è®¤ç®—æ³•å°±æ˜¯è¿™ä¸ªã€‚å®ƒå¯ä»¥ç»†åˆ†ä»»æ„å½¢çŠ¶çš„å¤šè¾¹å½¢ï¼Œä½†åœ¨ç»†åˆ†å››è¾¹å½¢æ—¶æ•ˆæœæœ€å¥½ã€‚ è¯¾ä¸Šè¿˜æåˆ°äº†ç”¨äºç»†åˆ†ä¸‰è§’å½¢çš„ Loop ç»†åˆ†ï¼Œä¸è¿‡ä¸¤ä¸ªç»†åˆ†éƒ½åªæ˜¯ç®€å•æäº†ææ¦‚å¿µï¼Œæˆ‘ä»¬è¿™é‡Œä¸å¤šè®°ç¬”è®°ã€‚ ç½‘æ ¼ç®€åŒ–ç½‘æ ¼ç®€åŒ–çš„åŸºæœ¬æ€è·¯æ˜¯æ¯æ¬¡æŠŠä¸€æ¡è¾¹åç¼©æˆä¸€ä¸ªç‚¹ã€‚æˆ‘ä»¬ç”¨äºŒæ¬¡è¯¯å·®è¡¡é‡æ¯æ¡è¾¹åç¼©åå¼•å…¥çš„è¯¯å·®ï¼Œç„¶åé€‰æ‹©æœ€å°çš„è¾¹æ¥åç¼©ï¼Œä¹‹åé‡æ–°è®¡ç®—äºŒæ¬¡è¯¯å·®ï¼ˆå› ä¸ºåç¼©åå½¢çŠ¶ä¼šæ”¹å˜ï¼‰ï¼Œç„¶åå†æ¬¡é€‰æ‹©æœ€å°çš„è¾¹ï¼Œå¦‚æ­¤é‡å¤ã€‚è¿™æ˜¯ä¸ªè´ªå©ªç®—æ³•ï¼Œä½†èƒ½æ‹¿åˆ°ä¸é”™çš„ç»“æœã€‚ å…·ä½“å…¬å¼æˆ‘ä»¬ä¹Ÿä¸å†™ï¼Œå› ä¸ºè¯¾ä¸Šæ²¡è¯¦ç»†è®²ï¼Œæˆ‘ä¹Ÿä¸æ„Ÿå…´è¶£ï¼Œç”¨åˆ°çš„æ—¶å€™å»æŸ¥æŸ¥å°±å¥½äº†ã€‚","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"GAMES101","slug":"å…¬å¼€è¯¾/GAMES101","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/"},{"name":"Notes","slug":"å…¬å¼€è¯¾/GAMES101/Notes","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/Notes/"}],"tags":[]},{"title":"Note 3 Shading","slug":"learning/open-course/GAMES101/Notes/Note3-Shading","date":"2025-09-17T04:10:28.000Z","updated":"2025-09-17T04:03:13.842Z","comments":true,"path":"wiki/learning/open-course/GAMES101/Notes/Note3-Shading/","permalink":"http://rinevard.github.io/wiki/learning/open-course/GAMES101/Notes/Note3-Shading/","excerpt":"","text":"×™Ö°×”Ö´×™ ××•Ö¹×¨èµ·åˆï¼Œè®¡ç®—æœºçš„ä¸–ç•Œå°šæœªæ¸²æŸ“ï¼Œæ˜¾ç¤ºå™¨ä¸­ç©ºè™šæ··æ²Œï¼Œæ¸Šé¢é»‘æš—ã€‚ å”¯æœ‰é¡¶ç‚¹ä¸å¤šè¾¹å½¢æ‚¬äºè™šç©ºï¼Œä¸è§å…¶å½¢ï¼Œä¸è¾¨å…¶è‰²ã€‚ é‚£å£°éŸ³è¯´ï¼šâ€œè¦æœ‰å…‰ã€‚â€ å°±æœ‰äº†å…‰ã€‚ å…‰æ˜¯å¥½çš„ï¼Œäºæ˜¯é‚£å£°éŸ³å°†å…‰ä¸æš—åˆ†å¼€äº†ã€‚å…‰æ‰€ç…§ä¹‹å¤„ï¼Œç‰©ä½“çš„æ­£é¢å¾—ä»¥æ˜¾ç°ï¼›å…‰æ‰€ä¸è‡³çš„èƒŒé¢ï¼Œåˆ™å½’äºé˜´å½±ã€‚ä»æ­¤ï¼Œä¸‰ç»´çš„ä¸–ç•Œæœ‰äº†æ˜æš—ä¸å±‚æ¬¡ã€‚ è¿™å…‰å¹¶éä¸€ä½“ã€‚ é‚£æ™®ç…§ä¸‡ç‰©ï¼Œå‡åŒ€æ•£å¼€ï¼Œä½¿ç‰©ä½“æ˜¾å…¶æœ¬è‰²çš„ï¼Œç§°ä¹‹ä¸ºæ¼«åå°„ã€‚ é‚£æ±‡äºä¸€ç‚¹ï¼Œé”åˆ©å¤ºç›®ï¼Œä½¿å…‰æ»‘ä¹‹ç‰©å°½æ˜¾å…¶è€€çš„ï¼Œç§°ä¹‹ä¸ºé•œé¢åå°„ã€‚ é‚£å¼¥æ¼«äºç¯å¢ƒï¼Œå……ç›ˆäºé˜´å½±ï¼Œä½¿é»‘æš—ä¸è‡³å®Œå…¨åå™¬ä¸€åˆ‡çš„ï¼Œç§°ä¹‹ä¸ºç¯å¢ƒå…‰ã€‚ æœ‰æ¼«åå°„ï¼Œæœ‰é•œé¢åå°„ï¼Œæœ‰ç¯å¢ƒå…‰ï¼Œå…±åŒæ„æˆäº†è¿™è™šæ‹Ÿä¸–ç•Œçš„ç¬¬ä¸€ä¸ªç™½æ˜¼ã€‚ æ¼«åå°„ï¼ˆDiffuse Reflectionï¼‰åœ¨æ¼«åå°„ä¸­ï¼Œå…‰å‘å››é¢å…«æ–¹æ•£å»ï¼Œæ‰€ä»¥ç‰©ä½“æ¼«åå°„å‡ºçš„å…‰ä¸æ‘„åƒæœºä½ç½®æ— å…³ï¼Œè€Œä»…ä¸ä»¥ä¸‹å‡ é¡¹æœ‰å…³ï¼š å…‰å¼º $c_l$. ç‰©ä½“æè´¨ $c_r$. ä¸åŒç‰©ä½“å¯¹å…‰çš„åå°„ç‡æ˜¯ä¸åŒçš„ï¼Œå³ä½¿æ˜¯åŒä¸€ä¸ªç‰©ä½“ä¹Ÿå¯¹ä¸åŒé¢œè‰²çš„å…‰æœ‰ä¸åŒåå°„ç‡ã€‚ ç‰©ä½“è¡¨é¢æ³•çº¿ $\\mathbf{n}$. å…‰æºæ–¹å‘ $\\mathbf{l}$. æœ€ç»ˆç»“æœå¯ä»¥å†™æˆ L_d = c_r c_l \\max (0, \\mathbf{n} \\cdot \\mathbf{l})ç”±äºå…‰å¼ºä¸€èˆ¬éšè·ç¦»è¡°å‡ï¼Œæ‰€ä»¥ $c_l$ ä¸€èˆ¬åæ¯”äºè·ç¦»çš„å¹³æ–¹ $r^2$. é•œé¢åå°„ï¼ˆSpecular Reflectionï¼‰é•œé¢åå°„ä¸­ï¼Œå…‰ä¸»è¦å‘ä¸€ä¸ªæ–¹å‘åå°„ï¼Œæ‰€ä»¥é•œé¢åå°„çš„å…‰ä¸æ‘„åƒæœºä½ç½®æœ‰å…³ã€‚ L_s = c_pc_l\\max(0, \\mathbf n \\cdot \\mathbf h)^på…¶ä¸­ $c_p$ æ˜¯è‡ªå®šä¹‰çš„ RGB å€¼ï¼Œå…è®¸æˆ‘ä»¬æ§åˆ¶é«˜å…‰é¢œè‰²ï¼ŒæŒ‡æ•° $p$ æ˜¯ä¸ºäº†ä¿è¯æˆ‘ä»¬åªåœ¨å°èŒƒå›´å†…çœ‹åˆ°é«˜å…‰ï¼Œ$p$ è¶Šå¤§è¿™ä¸ªé«˜å…‰å¯è§èŒƒå›´è¶Šå°ï¼Œè€Œ $\\mathbf h$ çš„å®šä¹‰å¦‚ä¸‹ï¼š \\mathbf h = (\\mathbf e + \\mathbf l).\\text{normalized()}è¿˜æœ‰ä¸€ç§å†™æ³•æŠŠ $\\mathbf n \\cdot \\mathbf h$ æ¢æˆäº† $\\mathbf r \\cdot \\mathbf e$ï¼Œç®€å•è®¡ç®—å¯ä»¥å‘ç° $\\mathbfn$ å’Œ $\\mathbf h$ çš„å¤¹è§’æ˜¯ $\\mathbf r$ å’Œ $\\mathbf e$ çš„å¤¹è§’çš„ä¸€åŠï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªå†™æ³•åœ¨æ€è·¯ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œéƒ½åœ¨è€ƒè™‘åå°„å…‰æ–¹å‘å’Œæ‘„åƒæœºæ–¹å‘çš„å¤¹è§’ï¼Œä¸è¿‡åœ¨æ•°å€¼ä¸Šä¼šç•¥æœ‰å·®åˆ«ã€‚æœ¬æ–‡é‡‡ç”¨ $\\mathbf n \\cdot \\mathbf h$ çš„å†™æ³•ã€‚ ç¯å¢ƒå…‰ï¼ˆAmbient Lightingï¼‰å¦‚æœåªè€ƒè™‘æ¼«åå°„å’Œé•œé¢åå°„ï¼Œæˆ‘ä»¬ä¼šå‘ç°æ²¡æœ‰é¢æœå…‰æºçš„ç‰©ä½“å®Œå…¨æ˜¯é»‘è‰²çš„ï¼Œä½†ç°å®é‡Œæ˜¾ç„¶ä¸æ˜¯å¦‚æ­¤ã€‚è¿™æ˜¯å› ä¸ºåœ¨ç°å®é‡Œï¼Œå…‰ç»è¿‡å¤šæ¬¡åå°„è€Œç…§äº®äº†é‚£äº›æ²¡æœ‰é¢æœå…‰æºçš„ç‰©ä½“ã€‚æˆ‘ä»¬å¯ä»¥è¿‘ä¼¼åœ°è®¤ä¸ºæœ‰ä¸€ç§å……æ–¥ç€æ•´ä¸ªç©ºé—´çš„å…‰ï¼Œå¹¶æŠŠå®ƒå«åšç¯å¢ƒå…‰ï¼Œå…¬å¼å¦‚ä¸‹ï¼š L_a=c_r c_aå…¶ä¸­ $c_a$ æ˜¯ç¯å¢ƒå…‰çš„å¼ºåº¦ã€‚ å†¯æ°å…‰ç…§æ¨¡å‹ç»¼åˆæ¥çœ‹ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†å†¯æ°å…‰ç…§æ¨¡å‹ï¼Œå…¬å¼å¦‚ä¸‹ï¼š L=c_r(c_a+c_l\\max{(0,\\mathbf n \\cdot \\mathbf l)})+c_pc_l\\max(0, \\mathbf n \\cdot \\mathbf h)^på…¶ä¸­ $c_r$ æ˜¯ç‰©ä½“æè´¨ï¼Œè¡¨ç¤ºç‰©ä½“å¯¹å…‰çš„åå°„ç‡ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ª Vector3f ç±»å‹çš„å€¼ï¼Œå› ä¸ºç‰©ä½“å¯¹ä¸åŒé¢œè‰²çš„å…‰æœ‰ä¸åŒåå°„ç‡ï¼› $c_a$ æ˜¯ç¯å¢ƒå…‰å¼ºï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ª Vector3f ç±»å‹çš„å€¼ï¼› $c_l$ æ˜¯å…‰å¼ºï¼Œä¸€èˆ¬ä¸ç‰©ä½“å’Œå…‰æºçš„è·ç¦»æˆåæ¯”ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ª Vector3f ç±»å‹çš„å€¼ï¼› $c_p$ æ˜¯é«˜å…‰é¢œè‰²ï¼Œä¸€èˆ¬ä¹Ÿæ˜¯ä¸€ä¸ª Vector3f ç±»å‹çš„å€¼ã€‚ UVæ˜ å°„ä¸ºäº†æŠŠè´´å›¾è´´åˆ°æ¨¡å‹ä¸Šï¼Œéœ€è¦æœ‰ä¸€ä¸ª $(x, y, z) \\rightarrow (u, v)$ çš„å‡½æ•° $\\phi$. æˆ‘ä»¬æœŸæœ›è¿™ä¸ªå‡½æ•°æœ‰è¿™äº›æ€§è´¨ï¼š å•å°„ï¼šæˆ‘ä»¬ä¸å¸Œæœ›ä¸¤ä¸ª 3D ç‚¹æ˜ å°„åˆ°åŒä¸€ä¸ª 2D ç‚¹ä¸Š å¤§å°ä¸å˜æ€§ï¼šåœ¨ 3D æ¨¡å‹ä¸Šçš„ä¸‰è§’å½¢å¤šå¤§ï¼Œæˆ‘ä»¬å¸Œæœ› 2D çš„ä¸‰è§’å½¢ä¹Ÿå·®ä¸å¤šå¤§å° å½¢çŠ¶ä¸å˜æ€§ï¼š3D æ¨¡å‹çš„ä¸‰è§’å½¢æ˜ å°„åˆ° 2D ä¸Šåï¼Œä¸¤ä¸ªä¸‰è§’å½¢åº”å°½é‡ç›¸ä¼¼ è¿ç»­ï¼šå¦‚æœä¸¤ä¸ªç‚¹åœ¨ 3D ä¸–ç•Œæ¨¡å‹ä¸Šç›¸è¿‘ï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒä»¬åœ¨ 2D ä¸Šä¹Ÿç›¸è¿‘ è´´å›¾æœ‰è®¸å¤šåº”ç”¨ï¼Œæœ€å®¹æ˜“æƒ³åˆ°çš„æ˜¯é¢œè‰²è´´å›¾ï¼Œå®ƒç›´æ¥æŠŠé¢œè‰²è´´åˆ°æ¨¡å‹ä¸Šï¼Œä¹Ÿè¢«ç§°ä½œæ¼«åå°„è´´å›¾ã€‚ æ³•çº¿è´´å›¾ã€é‡‘å±åº¦è´´å›¾ã€ç²—ç³™åº¦è´´å›¾åˆ™è¿›ä¸€æ­¥å†³å®šäº†æ¨¡å‹çš„å„ç§å±æ€§ã€‚æ¯”å¦‚æ³•çº¿è´´å›¾å®šä¹‰äº†æ¯ä¸€ç‚¹çš„æ³•çº¿ï¼Œåœ¨è®¡ç®—å…‰ç…§æ—¶ä¼šå€ŸåŠ©è¿™ä¸ªæ³•çº¿æ¥å¾—åˆ°æ›´çœŸå®çš„ç»“æœã€‚ ç€è‰²æ–¹æ³•æ¨¡å‹ç”±ä¸‰è§’å½¢åˆ’åˆ†æ¥è¡¨ç¤ºï¼Œé‚£ä¹ˆæ¯ä¸ªä¸‰è§’å½¢ç”¨æ€æ ·çš„é¢œè‰²å‘¢ï¼Ÿ å¹³é¢ç€è‰²ï¼ˆFlat Shadingï¼‰æˆ‘ä»¬é€šè¿‡å…‰ç…§è®¡ç®—é¢œè‰²ï¼Œè€Œè®¡ç®—å…‰ç…§éœ€è¦æ³•çº¿ã€‚å¹³é¢ç€è‰²ç›´æ¥æ±‚è¿™ä¸ªä¸‰è§’å½¢çš„æ³•çº¿ï¼Œç„¶åæŒ‰å…‰ç…§å…¬å¼è®¡ç®—è¿™ä¸ªä¸‰è§’å½¢çš„é¢œè‰²ã€‚è¿™ç§æ–¹æ³•å¾—åˆ°çš„æ¯ä¸ªä¸‰è§’å½¢éƒ½æ˜¯å•è‰²çš„ã€‚ é€é¡¶ç‚¹ç€è‰²ï¼ˆGouraud Shadingï¼‰é€é¡¶ç‚¹ç€è‰²åˆ™æ±‚ä¸‰è§’å½¢é¡¶ç‚¹çš„æ³•çº¿ï¼Œå¹¶ä¸ºä¸‰è§’å½¢é¡¶ç‚¹ç€è‰²ï¼Œç„¶åå¯¹å†…éƒ¨çš„æ¯ä¸ªç‚¹æ’å€¼å†…éƒ¨é¢œè‰²ã€‚ é‚£ä¹ˆé¡¶ç‚¹çš„æ³•çº¿æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸€ä¸ªé¡¶ç‚¹ä¸€èˆ¬åœ¨å¤šä¸ªé¢ä¸Šï¼ŒæŠŠè¿™äº›é¢çš„æ³•çº¿åšåŠ æƒå¹³å‡å°±å¥½ï¼Œæƒå€¼å¯ä»¥æ˜¯é¢çš„é¢ç§¯ã€‚ é€åƒç´ ç€è‰²ï¼ˆPhong Shadingï¼‰é€åƒç´ ç€è‰²åŒæ ·æ±‚ä¸‰è§’å½¢é¡¶ç‚¹çš„æ³•çº¿ï¼Œç„¶åå¯¹å†…éƒ¨çš„æ¯ä¸ªç‚¹æ’å€¼å†…éƒ¨æ³•çº¿ï¼Œä»æ³•çº¿å†æ±‚å„ä¸ªç‚¹çš„é¢œè‰²ã€‚ æ’å€¼æ˜¯é€šè¿‡é‡å¿ƒåæ ‡æ¥æ’å€¼ã€‚å¯¹ä¸‰è§’å½¢ $ABC$ å†…çš„æŸä¸€ç‚¹ $P$ï¼Œå®ƒå¯ä»¥è¡¨ç¤ºä¸º P=\\frac{S_{APB}C+S_{BPC}A+S_{CPA}B}{S_{ABC}}è¿™é‡Œçš„ $S$ æ˜¯é¢ç§¯ï¼Œè¿™é‡Œçš„å½¢å¦‚ $S{APB}/S{ABC}$ çš„å¼å­å°±æ˜¯å„ä¸ªç‚¹çš„æƒå€¼ã€‚ åœ¨æ’å€¼æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ä¸–ç•Œç©ºé—´ / æ‘„åƒæœºç©ºé—´åšæ’å€¼ï¼Œå³åœ¨ viewing transformation å‰è¿›è¡Œæ’å€¼ï¼Œè€Œä¸æ˜¯ viewing transformation åã€‚ ä½†æˆ‘ä»¬ä¸€èˆ¬åœ¨å…‰æ …åŒ–æ—¶æ‰è¿›è¡Œæ’å€¼ï¼Œè¿™æ—¶å·²ç»æŠŠç‰©ä½“å˜æ¢åˆ°äº† NDC ç©ºé—´ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦è¿›è¡Œé€è§†çŸ«æ­£ã€‚å…¬å¼å¦‚ä¸‹ï¼Œå…·ä½“æ¨å¯¼å¯ä»¥å‚è€ƒ Homework 3 çš„ç¬”è®°ã€‚ \\begin{align*} &\\alpha = \\frac{\\alpha' / w_0}{\\alpha' / w_0 + \\beta' / w_1 + \\gamma' / w_2} \\\\ &\\beta= \\frac{\\beta' / w_1}{\\alpha' / w_0 + \\beta' / w_1 + \\gamma' / w_2} \\\\ &\\gamma= \\frac{\\gamma' / w_2}{\\alpha' / w_0 + \\beta' / w_1 + \\gamma' / w_2} \\end{align*}å…¶ä¸­ $\\alphaâ€™,\\betaâ€™,\\gammaâ€™$ æ˜¯å±å¹•ç©ºé—´çš„é‡å¿ƒåæ ‡ï¼Œ$\\alpha,\\beta,\\gamma$ æ˜¯ä¸–ç•Œç©ºé—´çš„é‡å¿ƒåæ ‡ã€‚æˆ‘ä»¬ç”¨ä¸–ç•Œç©ºé—´çš„é‡å¿ƒåæ ‡ä½œä¸ºæƒé‡æ¥æ’å€¼ã€‚ æ¸²æŸ“ç®¡çº¿æ¸²æŸ“æµç¨‹åŸºæœ¬å¦‚ä¸‹ï¼š Inputï¼šè¾“å…¥ 3D ä¸–ç•Œçš„é¡¶ç‚¹ Vertex Processingï¼šç”¨å„ç§å˜æ¢çŸ©é˜µæŠŠé¡¶ç‚¹å˜æ¢åˆ°å±å¹•ç©ºé—´ Triangle Processingï¼šæ ¹æ®ä¼ å…¥çš„é¡¶ç‚¹è¿æ¥æ–¹å¼åœ¨å±å¹•ç©ºé—´è¿æ¥ä¸‰è§’å½¢ Rasterizationï¼šæŠŠä¸‰è§’å½¢è½¬åŒ–æˆç‰‡å…ƒ / åƒç´  Fragement Processingï¼šåº”ç”¨è´´å›¾ã€å…‰ç…§ç­‰ Framebuffer Operationsï¼šæ·±åº¦æµ‹è¯•ç­‰ çº¹ç†æ”¾å¤§å’Œçº¹ç†ç¼©å°åœ¨åšçº¹ç†æ˜ å°„æ—¶ï¼Œè´´å›¾å¤ªå°å’Œè´´å›¾å¤ªå¤§éƒ½ä¼šæœ‰é—®é¢˜ã€‚ çº¹ç†æ”¾å¤§è´´å›¾å¤ªå°æ—¶è¦åšçº¹ç†æ”¾å¤§ï¼Œå¯¹é‡‡æ ·ç‚¹åšåŒçº¿æ€§æ’å€¼å³å¯ã€‚ çº¹ç†ç¼©å°è´´å›¾å¤ªå¤§æ—¶ç›´è§‰ä¸Šæ¯”è´´å›¾å¤ªå°æ›´å¥½å¤„ç†ï¼Œä½†æ°æ°ç›¸åã€‚è¿˜è®°å¾—é¢‘è°±å—ï¼Œè´´å›¾å¤ªå¤§ä»£è¡¨é«˜é¢‘æœ‰æ›´å¤šä¿¡æ¯ï¼Œæˆ‘ä»¬ä¼šå› é‡‡æ ·é¢‘ç‡ä¸è¶³è€Œæ— æ³•æ­£ç¡®åæ˜ é«˜é¢‘ä¿¡æ¯ï¼Œå¯¼è‡´ç»“æœå‡ºç°é”¯é½¿ã€æ‘©å°”çº¹ç­‰èµ°æ ·é—®é¢˜ã€‚ æœ€å¸¸ç”¨çš„ç¼“è§£æ–¹æ³•æ˜¯ Mipmappingã€‚åŸºæœ¬æ€è·¯æ˜¯ï¼Œæˆ‘ä»¬åˆ†æå±å¹•ä¸Šæ¯ä¸ªåƒç´ åœ¨è´´å›¾ä¸Šè¦†ç›–çš„åƒç´ æ•°é‡ï¼Œå¯¹é‚£äº›è¦†ç›–è¾ƒå¤šçš„ï¼Œå°±è®©ä»–ä»¬å»è¢«ç¼©å°çš„è´´å›¾ä¸Šé‡‡æ ·ï¼Œè¿™æ ·å°±èƒ½ç¼“è§£æ¬ é‡‡æ ·é—®é¢˜ã€‚ é¦–å…ˆæˆ‘ä»¬è¦åˆ›å»ºâ€œç¼©å°çš„è´´å›¾â€ï¼ŒMipmapé“¾åŒ…å«ä¸€ç³»åˆ—çº¹ç† $D_0, D_1, D_2, \\ldots, D_N$ï¼Œå…¶ä¸­ $D_i$ çš„åˆ†è¾¨ç‡ä¸º $\\frac{W}{2^i} \\times \\frac{H}{2^i}$ï¼Œç›´åˆ°æœ€å†…å±‚ä¸º $1 \\times 1$ åƒç´ ã€‚ ç„¶åæˆ‘ä»¬è¦åˆ†æå•ä¸ªå±å¹•åƒç´ è¦†ç›–äº†å¤šå°‘çº¹ç†åƒç´ ï¼Œå¤§è‡´æ€è·¯æ˜¯è®¡ç®—å±å¹•ç©ºé—´çš„ç›¸é‚»ç‚¹æ˜ å°„åˆ°è´´å›¾ç©ºé—´åçš„è·ç¦»ã€‚è´´å›¾ç©ºé—´é‡Œç›¸é‚»åƒç´ è·ç¦»ä¸º $1$ï¼Œæ‰€ä»¥å¦‚æœå±å¹•ç©ºé—´çš„ç›¸é‚»ç‚¹æ˜ å°„åˆ°è´´å›¾ç©ºé—´åçš„è·ç¦»ä¸º $x$ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºå®ƒè¦†ç›–äº† $x$ ä¸ªåƒç´ ã€‚ è¿™ä¸ªâ€œå•ä¸ªå±å¹•åƒç´ è¦†ç›–äº†å¤šå°‘çº¹ç†åƒç´ â€çš„ä¼°ç®—è¢«è®°ä½œ $\\rho$ï¼Œå…¬å¼å¦‚ä¸‹ï¼š \\rho = \\max\\left( \\sqrt{\\left(\\frac{\\partial u}{\\partial x}\\right)^2 + \\left(\\frac{\\partial v}{\\partial x}\\right)^2}, \\sqrt{\\left(\\frac{\\partial u}{\\partial y}\\right)^2 + \\left(\\frac{\\partial v}{\\partial y}\\right)^2} \\right)å– $\\max$ æ˜¯ä¸ºäº†å°½å¯èƒ½å–å±‚çº§æ›´ä½çš„ Mipmapã€‚ä¸€ä¸ªå±å¹•åƒç´ è¦†ç›–çš„çº¹ç†åƒç´ è¶Šå¤šï¼Œå®ƒå¯¹åº”çš„ Mipmap å±‚çº§å°±è¶Šå°ã€‚æ€»ä¹‹ï¼Œæˆ‘ä»¬å®å¯æ¨¡ç³Šï¼Œä¹Ÿä¸è¦æ¬ é‡‡æ ·ã€‚ æœ€åç”¨ $\\lambda = \\log_2{\\rho}$ å°±èƒ½ç®—å‡ºè¿™ä¸ªå±å¹•åƒç´ å¯¹åº”çš„çº¹ç†å±‚çº§ã€‚æ¯”å¦‚å½“ $\\lambda = 0$ æ—¶ï¼Œè¡¨ç¤ºä¸€ä¸ªå±å¹•åƒç´ æ°å¥½å¯¹åº”ä¸€ä¸ªçº¹ç†åƒç´ ï¼Œåº”ä½¿ç”¨åŸå§‹çº¹ç† $D_0$. è®¡ç®—å‡ºå±‚çº§ $\\lambda$ åè¿˜è¦åšé‡‡æ ·ã€‚æ˜¾ç„¶ $\\lambda$ å¤§å¤šæ•°æ—¶å€™éƒ½ä¸æ˜¯æ•´æ•°ï¼Œæ‰€ä»¥æœ‰ä¸¤ç§å¸¸è§çš„é‡‡æ ·æ–¹æ³•ï¼š æœ€è¿‘é‚»Mipmapæ»¤æ³¢ï¼ˆNearest Mipmap Filteringï¼‰ é€‰æ‹©æœ€æ¥è¿‘ $\\lambda$ çš„æ•´æ•°å±‚çº§ $d = \\text{round}(\\lambda)$ åšé‡‡æ ·ï¼Œåœ¨è¿™ä¸€å±‚å¯ä»¥æ˜¯æœ€è¿‘é‚»æˆ–åŒçº¿æ€§æ»¤æ³¢ã€‚ ä¸‰çº¿æ€§æ»¤æ³¢ï¼ˆTrilinear Filteringï¼‰ ç¡®å®š $\\lambda$ ä¸¤ä¾§çš„ä¸¤ä¸ªæ•´æ•°å±‚çº§ï¼š$d_1 = \\lfloor\\lambda\\rfloor$ å’Œ $d_2 = \\lceil\\lambda\\rceil = d_1 + 1$ï¼Œåœ¨è¿™ä¸¤å±‚åˆ†åˆ«åšåŒçº¿æ€§æ»¤æ³¢é‡‡æ ·å¾—åˆ°é¢œè‰² $C_1$ å’Œ $C_2$ï¼Œç„¶åå¾—åˆ°æœ€ç»ˆé¢œè‰² C = (1 - f) \\cdot C_1 + f \\cdot C_2 å…¶ä¸­ $f = \\lambda - \\lfloor\\lambda\\rfloor$ ä¸º $\\lambda$ çš„å°æ•°éƒ¨åˆ†ã€‚ å…¶ä»–å°çŸ¥è¯†è™ä¹¦æåˆ°çš„planar projectionã€spherical coordinatesã€cylindrical coordinatesã€cubemapsæœ¬è´¨ä¸Šéƒ½æ˜¯æŠŠ3dè¡¨é¢æŠ•å½±åˆ°ä¸€ä¸ªç†æƒ³çš„ç®€å•å‡ ä½•ä½“ä¸Šï¼Œç„¶åæŠŠç®€å•å‡ ä½•ä½“å±•å¼€æˆå¹³é¢ã€‚","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"GAMES101","slug":"å…¬å¼€è¯¾/GAMES101","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/"},{"name":"Notes","slug":"å…¬å¼€è¯¾/GAMES101/Notes","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/Notes/"}],"tags":[]},{"title":"Assignment 3 Pipeline and Shading","slug":"learning/open-course/GAMES101/Hw/Hw3-pipeline-and-shading","date":"2025-09-13T11:45:16.000Z","updated":"2025-09-13T12:04:25.374Z","comments":true,"path":"wiki/learning/open-course/GAMES101/Hw/Hw3-pipeline-and-shading/","permalink":"http://rinevard.github.io/wiki/learning/open-course/GAMES101/Hw/Hw3-pipeline-and-shading/","excerpt":"","text":"æœ¬æ¬¡ä½œä¸šå¯¹ bump_fragment_shaderã€displacement_fragment_shader çš„è¦æ±‚éå¸¸ä¸ä¸¥è°¨ï¼Œè‡³å°‘åŒ…æ‹¬è¿™äº›é—®é¢˜ï¼š è¿™ä¸¤ä¸ª shdaer éœ€è¦çš„è´´å›¾æ˜¯å‡¹å‡¸è´´å›¾ï¼Œå‡¹å‡¸è´´å›¾æœ¬åº”è¯¥æ˜¯ç°åº¦å›¾ï¼Œè¿™é‡Œä½¿ç”¨ RGB è´´å›¾ã€‚ åœ¨è®¡ç®—åˆ‡çº¿ç©ºé—´åˆ°ä¸–ç•Œç©ºé—´çš„å˜æ¢çŸ©é˜µ TBN æ—¶ä½¿ç”¨äº†é”™è¯¯çš„å…¬å¼ã€‚æ­£ç¡®çš„å…¬å¼éœ€è¦çŸ¥é“ä¸‰è§’å½¢çš„ä¸‰ä¸ªé¡¶ç‚¹åŠå…¶ UV åæ ‡ã€‚ displacement æ–¹æ³•æ²¡æœ‰åœ¨å…‰æ …åŒ–å‰åç§»é¡¶ç‚¹ä½ç½®ï¼Œè€Œåªè°ƒæ•´äº†æ˜¾ç¤ºé¢œè‰²ã€‚ æˆ‘ä»¬å…ˆä»‹ç»ä¸€ä¸‹ TBN çš„æ­£ç¡®è®¡ç®—æ–¹å¼å’Œä» bump texture ç®—å‡ºæ¢¯åº¦çš„æ–¹æ³•ï¼Œå†ä¾æ¬¡ä»‹ç»ä¸€ä¸‹å„ä¸ªä½œä¸šçš„åšæ³•ã€‚ TBNçš„æ­£ç¡®è®¡ç®—æ–¹å¼æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä»€ä¹ˆæ˜¯ TBN ä»¥åŠä¸ºä»€ä¹ˆéœ€è¦ TBN. ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å…ˆè€ƒè™‘æ³•çº¿è´´å›¾ã€‚ä¸‹æ–‡æŠŠä¸–ç•Œç©ºé—´é‡ŒæŒ‰æ³•çº¿è´´å›¾ä¿®æ­£åçš„æ³•çº¿ç§°ä½œâ€œä¿®æ­£æ³•çº¿â€ï¼ŒæŠŠä¸–ç•Œç©ºé—´é‡Œä¿®æ­£å‰çš„æ³•çº¿ç§°ä½œâ€œå‡ ä½•æ³•çº¿â€ï¼Œè¿™é‡Œé»˜è®¤å®ƒä»¬éƒ½æ˜¯å½’ä¸€åŒ–çš„ã€‚ è€ƒè™‘ä¸–ç•Œç©ºé—´çš„æŸä¸€ç‚¹ $Q$ï¼Œå‡è®¾å®ƒåœ¨æ³•çº¿è´´å›¾ä¸­å¯¹åº”çš„ä¸€ç‚¹ä¸º $Qâ€™$ï¼Œæˆ‘ä»¬çŸ¥é“ç‚¹ $Qâ€™$ å¯¹åº”çš„æ³•çº¿è¢«ç”¨äºè®¡ç®—ä¸–ç•Œç©ºé—´ç‚¹ $Q$ çš„ä¿®æ­£æ³•çº¿ã€‚ä½†ç­‰ç­‰ï¼Œç›´æ¥æŠŠ RGB å€¼å¤åˆ¶è¿‡å»çœ‹èµ·æ¥æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºéšç€ç‰©ä½“è½¬åŠ¨ï¼Œç‚¹ $Q$ å¯¹åº”çš„æ³•çº¿ä¹Ÿåº”å½“è½¬åŠ¨ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªçŸ©é˜µæ¥å®ç°è¿™ç§ä»æ³•çº¿è´´å›¾ä¸Šçš„æ³•çº¿åˆ°ä¸–ç•Œç©ºé—´çš„ä¿®æ­£æ³•çº¿çš„å˜æ¢ã€‚ è´´å›¾æ˜¯äºŒç»´çš„ï¼Œå› æ­¤æˆ‘ä»¬å†é¢å¤–å®šä¹‰ä¸€ä¸ªå‚ç›´çº¸é¢å‘å¤–çš„è½´ $n$ï¼Œå®ƒè¡¨ç¤ºæ³•çº¿çš„â€œé»˜è®¤æ–¹å‘â€ï¼Œè¿™å°±å¾—åˆ°äº†ä¸‰ç»´çš„åˆ‡çº¿ç©ºé—´ã€‚å¦‚æœç‚¹ $Qâ€™$ å¯¹åº”çš„æ³•çº¿æ˜¯ $(0,0,1)$ï¼Œé‚£ä¹ˆä¸–ç•Œç©ºé—´çš„ç‚¹ $Q$ çš„ä¿®æ­£æ³•çº¿å°±æ˜¯åŸæœ¬çš„å‡ ä½•æ³•çº¿ã€‚ æ¥ä¸‹æ¥å°±è¦è€ƒè™‘å¦‚ä½•æ‰¾åˆ°è¿™ä¸ªä»åˆ‡çº¿ç©ºé—´åˆ°ä¸–ç•Œç©ºé—´çš„æ—‹è½¬çŸ©é˜µäº†ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å…ˆè€ƒè™‘å•ä¸ªä¸‰è§’å½¢çš„æ—‹è½¬ã€‚ä¹‹åæˆ‘ä»¬ä¼šå¯¹æ¯ä¸ªç‚¹æ±‚å‡ºå®ƒè‡ªå·±çš„æ—‹è½¬çŸ©é˜µã€‚æ²¡é”™ï¼Œæ¯ä¸ªç‚¹çš„æ—‹è½¬çŸ©é˜µä¸åŒï¼Œè¿™æ˜¯å› ä¸ºæ¯ä¸ªç‚¹å¯¹åº”çš„çŸ©é˜µä¼šæŠŠ $(0,0,1)$ æ˜ å°„åˆ°è¯¥ç‚¹çš„å‡ ä½•æ³•çº¿ï¼Œè€Œæ¯ä¸ªç‚¹çš„å‡ ä½•æ³•çº¿ä¸€èˆ¬ä¸åŒã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å¸Œæœ›æŠŠæ³•çº¿è´´å›¾ä¸Šçš„ $P_0â€™P_1â€™P_2â€™$ æ—‹è½¬ä¸ºä¸–ç•Œç©ºé—´çš„ $P_0P_1P_2$ï¼Œè®¾è¿™é‡Œçš„æ—‹è½¬çŸ©é˜µä¸º $M$ï¼Œä¸–ç•Œç©ºé—´çš„ $P_0P_1P_2$ çš„å‡ ä½•æ³•çº¿ä¸º $\\mathbf{n}$ï¼Œåˆ™æœ‰ \\begin{align*} &M[0,0,1]^T=\\mathbf n \\end{align*} ä½†å…‰é è¿™ä¸€ä¸ªæ–¹ç¨‹å½“ç„¶è§£ä¸å‡º $M$ï¼Œæ‰€ä»¥æˆ‘ä»¬å†è€ƒè™‘ä¸¤ä¸ªé¢å¤–çš„æ–¹ç¨‹ï¼š \\begin{align*} &M (P_1'-P_0')=k(P_1-P_0) \\\\ &M (P_2'-P_0')=k(P_2-P_0) \\end{align*}ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›è¿™ä¸ªçŸ©é˜µæŠŠåˆ‡çº¿ç©ºé—´ä¸‰è§’å½¢çš„è¾¹å‘é‡æ—‹è½¬åˆ°ä¸–ç•Œç©ºé—´çš„è¾¹å‘é‡ä¸Šï¼Œè¿™çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªåˆç†çš„è¦æ±‚ã€‚è¿™é‡Œçš„ $k$ æ˜¯è¾¹çš„é•¿åº¦çš„ç¼©æ”¾æ¯”ä¾‹ï¼Œä¸¥æ ¼æ¥è¯´æ¯æ¡è¾¹çš„ç¼©æ”¾æ¯”ä¾‹ä¸ä¸€å®šç›¸ç­‰ï¼Œä½†åªè¦ UV æ˜ å°„å‰åçš„ä¸‰è§’å½¢å¤§ä½“æ˜¯ç›¸ä¼¼ä¸‰è§’å½¢ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¤ä¸ºç¼©æ”¾æ¯”ä¾‹éƒ½ä¸º $k$. ä¸‹é¢æˆ‘ä»¬æ¥è§£æ–¹ç¨‹ã€‚é¦–å…ˆæˆ‘ä»¬è®¾ \\begin{align*} &M=\\begin{pmatrix} T & B & N \\end{pmatrix} \\\\ &P_1'-P_0'= [\\Delta u_1,\\Delta v_1,0]^T \\\\ &P_2'-P_0'= [\\Delta u_2,\\Delta v_2,0]^T \\end{align*}ä¸‹é¢ä¸¤ä¸ªå¼å­åˆ©ç”¨äº† $P_kâ€™$ çš„ç¬¬ä¸‰ä¸ªåˆ†é‡ä¸º $0$ çš„æ€§è´¨ã€‚ ç»“åˆç¬¬ä¸€ä¸ªæ–¹ç¨‹å°±èƒ½å¾—åˆ° $N=\\mathbf n$ï¼Œè¿™é‡Œçš„ $\\mathbf n$ è¡¨ç¤ºä¸–ç•Œç©ºé—´çš„ $P_0P_1P_2$ çš„å‡ ä½•æ³•çº¿ã€‚å†ç»“åˆå¦å¤–ä¸¤ä¸ªæ–¹ç¨‹å°±èƒ½å¾—åˆ° \\begin{align*} &\\Delta u_1 T+\\Delta v_1 B=k(P_1-P_0) \\\\ &\\Delta u_2 T+\\Delta v_2 B=k(P_2-P_0) \\end{align*}ä¹‹åæˆ‘ä»¬å¯ä»¥è§£å‡º $T,B,N$ çš„å€¼ \\begin{align*} &T=k\\frac{\\Delta v_2(P_1-P_0)-\\Delta v_1(P_2-P_0)}{\\Delta u_1 \\Delta v_2-\\Delta u_2 \\Delta v_1} \\\\ &B=k\\frac{\\Delta u_2(P_1-P_0)-\\Delta u_1(P_2-P_0)}{\\Delta u_2 \\Delta v_1-\\Delta u_1 \\Delta v_2} \\\\ &N=\\mathbf n \\end{align*}è¿™ä¸ªå…¬å¼æ˜¯ä¸èƒ½ç”¨çš„ï¼Œå› ä¸ºé‡Œé¢æœ‰æœªçŸ¥æ•° $k$. æ¥ä¸‹æ¥æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ æˆ‘ä»¬æœŸæœ› TBN çŸ©é˜µæ˜¯ä¸€ä¸ªæ—‹è½¬çŸ©é˜µï¼Œè€Œæ—‹è½¬çŸ©é˜µæ˜¯æ­£äº¤çŸ©é˜µï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šå¯¹ TBN åšæ–½å¯†ç‰¹æ­£äº¤åŒ–å’Œå½’ä¸€åŒ–ã€‚åªè¦ $P_0P_1P_2$ å’Œ $P_0â€™P_1â€™P_2â€™$ å¤§ä½“æ˜¯ç›¸ä¼¼ä¸‰è§’å½¢ï¼Œé‚£ä¹ˆå®ƒä»¬æœ¬æ¥å°±å·®ä¸å¤šæ­£äº¤ï¼ˆå›é¡¾æˆ‘ä»¬å¯¹ TBN çš„å®šä¹‰ï¼Œä¼šå‘ç°ç›¸ä¼¼è¯´æ˜ TBN åªå¯¹ $P_0â€™P_1â€™P_2â€™$ åšäº†æ—‹è½¬å’Œç¼©æ”¾ï¼Œè¿™è¡¨æ˜ TBN æ­£äº¤ï¼‰ï¼Œæ‰€ä»¥è¿™ç§æ­£äº¤åŒ–ä¸ä¼šæŠŠ TBN å˜åŒ–å¤ªå¤šã€‚è€Œç”±äºæˆ‘ä»¬ä¼šå¯¹ TBN åšå•ä½åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ”¾å¿ƒåœ°ä»¤ $k=1$ æ¥ç”¨ä¸‹é¢çš„å…¬å¼æ±‚å‡º TBNï¼š \\begin{align*} &T=\\frac{\\Delta v_2(P_1-P_0)-\\Delta v_1(P_2-P_0)}{\\Delta u_1 \\Delta v_2-\\Delta u_2 \\Delta v_1} \\\\ &B=\\frac{\\Delta u_2(P_1-P_0)-\\Delta u_1(P_2-P_0)}{\\Delta u_2 \\Delta v_1-\\Delta u_1 \\Delta v_2} \\\\ &N=\\mathbf{n} \\end{align*}æœ€åï¼Œæˆ‘ä»¬å¸Œæœ› N åœ¨æ­£äº¤åŒ–å‰åä¸å˜ï¼Œæ‰€ä»¥åœ¨æ­£äº¤åŒ–åæˆ‘ä»¬æœ‰ \\begin{align*} &T'=T-(N\\cdot T)N \\\\ &B'=B-(N\\cdot B)N-(T'\\cdot B)T'/T'^2 \\\\ &N'=\\mathbf n \\end{align*}å†åšä¸ªå•ä½åŒ–å°±èƒ½å¾—åˆ°é¡¶ç‚¹çš„ TBN çŸ©é˜µäº†ã€‚è¿˜è®°å¾— TBN çŸ©é˜µæ˜¯åšä»€ä¹ˆçš„å—ï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥å®ç°ä»åˆ‡çº¿ç©ºé—´åˆ°ä¸–ç•Œç©ºé—´çš„å˜æ¢ã€‚æ‰€ä»¥å¯¹ç‚¹ $Q$ï¼Œå‡è®¾å…¶æ³•çº¿è´´å›¾å¯¹åº”çš„æ³•çº¿ä¸º $\\mathbf nâ€™$ï¼Œé‚£ä¹ˆä¿®æ­£åçš„æ³•çº¿å°±æ˜¯ $M_{\\text{TBN}}\\mathbf nâ€™$. å¾ˆå¥½ï¼Œæˆ‘ä»¬ç°åœ¨èƒ½æŠŠå•ä¸ªä¸‰è§’å½¢åšå˜æ¢äº†ï¼Œä½†åœ¨çœŸæ­£çš„æ¨¡å‹ä¸­ï¼Œæ¯ä¸ªç‚¹çš„å‡ ä½•æ³•çº¿æ–¹å‘ä¸€èˆ¬éƒ½ä¸åŒï¼Œè¿™å°±æ„å‘³ç€å®ƒä»¬ä¸€èˆ¬éƒ½æœ‰ä¸åŒçš„ TBN çŸ©é˜µã€‚ä¸è®¡ç®—é¡¶ç‚¹æ³•çº¿ç±»ä¼¼ï¼Œæˆ‘ä»¬ä¼šæ‰¾åˆ°æ¯ä¸ªé¡¶ç‚¹ç›¸é‚»çš„æ‰€æœ‰ä¸‰è§’å½¢ï¼Œå¹¶å¯¹å®ƒä»¬çš„ $T$ å’Œ $B$ åšåŠ æƒå¹³å‡æ¥å¾—åˆ°è¿™ä¸ªé¡¶ç‚¹çš„ $T$ å’Œ $B$. åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬åªè®¡ç®—å‡ºæ¯ä¸ªé¡¶ç‚¹çš„ $T$ï¼Œç„¶ååœ¨éœ€è¦ $B$ æ—¶é€šè¿‡å‰ä¹˜ $N\\times T$ æ¥è®¡ç®—ã€‚å¯¹é‚£äº›éé¡¶ç‚¹çš„ç‚¹ï¼Œæˆ‘ä»¬ç”¨é‡å¿ƒåæ ‡æ’å€¼æ¥ç®—å‡ºå…¶ $N$ å’Œ $T$ï¼Œç„¶åä¹Ÿåšæ­£äº¤åŒ–å’Œå•ä½åŒ–æ¥ä¿è¯ TBN çŸ©é˜µçš„æ­£äº¤æ€§ã€‚ æœ€åæˆ‘ä»¬å†ç®€å•åˆ†æä¸€ä¸‹æ€ä¹ˆæ ¹æ®å‡¹å‡¸è´´å›¾åšæ³•çº¿ä¿®æ­£ã€‚åœ¨ä¿®æ­£æ³•çº¿æ—¶ï¼Œå‡¹å‡¸è´´å›¾ä¸æ³•çº¿è´´å›¾çš„å”¯ä¸€åŒºåˆ«å°±æ˜¯æ²¡æœ‰ç›´æ¥ç»™å‡ºæ³•çº¿ã€‚å›é¡¾ä¸€ä¸‹åˆ‡çº¿ç©ºé—´çš„å®šä¹‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»™å‡¹å‡¸è´´å›¾åŒæ ·è®¾ç½®æ²¿çº¸é¢å‘å¤–çš„ $n$ è½´ï¼Œç„¶åæŠŠå‡¹å‡¸è´´å›¾æƒ³è±¡æˆä¸€ä¸ªæŒ‰ç°åº¦å€¼èµ·ä¼çš„æ›²é¢ï¼Œè¿™ä¸ªæ›²é¢çš„æ³•çº¿å°±å’Œæ³•çº¿è´´å›¾æä¾›çš„æ³•çº¿ç›¸å¯¹åº”ã€‚ å…·ä½“æ¥è¯´ï¼Œç‚¹ $(u,v)$ å¤„çš„æ³•çº¿å¯ä»¥ç”¨ $(h(u)-h(u+1,v),h(v)-h(u,v+1),1)$ æ¥è¿‘ä¼¼ï¼Œå…¶ä¸­ $h(u,v)$ è¡¨ç¤ºå‡¹å‡¸è´´å›¾åœ¨ç‚¹ $(u,v)$ å¤„çš„ç°åº¦å€¼ï¼Œ$h(u+1,v)$ è¡¨ç¤º $(u,v)$ å³è¾¹ä¸€æ ¼çš„ç°åº¦å€¼ã€‚ æœ‰æ—¶ç”±äºæˆ‘ä»¬æŠŠè´´å›¾åšäº†å½’ä¸€åŒ–ï¼Œæˆ‘ä»¬ä¼šæ”¹ç”¨ $h(u+1/\\text{width},v)$ï¼Œä½†è®°ä½å®ƒè¡¨ç¤ºç›¸é‚»æ ¼å­çš„ç°åº¦å€¼å°±è¡Œã€‚ æœ€åæŠŠè¿™ä¸ªæ³•çº¿å’Œ TBN çŸ©é˜µç›¸ä¹˜å³å¯å¾—åˆ°ä¿®æ­£æ³•çº¿ã€‚ å‚è€ƒ Computing Tangent Space Basis Vectors for an Arbitrary Mesh - Eric Lengyel ä½œä¸šä»£ç rasterize_triangleæ³¨æ„è¿™é‡Œçš„æ’å€¼ç®—æ³•è¦å¯¹æ‰€æœ‰çš„å±æ€§éƒ½åšé€è§†çŸ«æ­£ï¼Œæˆ‘ä»¬ç®€å•æ¨å¯¼ä¸€ä¸‹é€è§†çŸ«æ­£çš„å…¬å¼ï¼š å‡è®¾æˆ‘ä»¬åœ¨å¯¹ç‚¹ $Q$ çš„æŸä¸ªå±æ€§è¿›è¡Œæ’å€¼ï¼Œåœ¨ä¸–ç•Œç©ºé—´ä¸­ï¼Œå®ƒæ‰€åœ¨çš„ä¸‰è§’å½¢ä¸º $P_0P_1P_2$. æŠ•å½±å˜æ¢åï¼Œå®ƒä»¬åˆ†åˆ«å˜æˆäº† $Qâ€™$ å’Œ $P_0â€™P_1â€™P_2â€™$. ç”¨é‡å¿ƒåæ ‡åˆ†åˆ«è¡¨ç¤º $Q$ å’Œ $Qâ€™$ï¼Œä¼šå¾—åˆ° \\begin{align*} &Q=\\alpha P_0+\\beta P_1+\\gamma P_2 \\\\ &Q'=\\alpha' P_0'+\\beta' P_1'+\\gamma' P_2' \\end{align*}è¿™é‡Œçš„ $Q,Qâ€™,P_k,P_kâ€™$ éƒ½æ˜¯å½¢å¦‚ $[x,y,z,1]^T$ çš„å‘é‡ã€‚ åœ¨æ’å€¼å±æ€§æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›ç”¨ $\\alpha, \\beta,\\gamma$ æ¥æ’å€¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ $\\alphaâ€™, \\betaâ€™,\\gammaâ€™$ æ’å€¼ï¼Œå› ä¸ºæˆ‘ä»¬å½“ç„¶ä¸å¸Œæœ›å±æ€§ä¼šå› é€è§†ä½ç½®ä¸åŒè€Œä¸åŒã€‚è¿™å°±éœ€è¦æˆ‘ä»¬æ ¹æ® $\\alphaâ€™, \\betaâ€™,\\gammaâ€™$ ç®—å‡º $\\alpha, \\beta,\\gamma$. ä¸å¦¨è®¾æŠ•å½±å˜æ¢çŸ©é˜µä¸º $M$ï¼Œåˆ™æœ‰ \\begin{align*} &MQ=\\alpha MP_0+\\beta MP_1+\\gamma MP_2 \\end{align*}è¿™é‡Œçš„ $MP_k$ æ˜¯å½¢å¦‚ $[x_k,y_k,z_k,w_k]^T$ çš„ç”¨é½æ¬¡åæ ‡è¡¨ç¤ºçš„å‘é‡ï¼Œå®ƒä¸å½¢å¦‚ $[x,y,z,1]^T$ çš„ $P_kâ€™$ è™½ç„¶åœ¨æ•°å­¦ä¸Šè¡¨ç¤ºåŒä¸€ä¸ªç‚¹ï¼Œä½†åœ¨æ•°å€¼ä¸Šä¸åŒã€‚ï¼ˆè¿˜è®°å¾—å—ï¼Œé½æ¬¡åæ ‡ä¸‹çš„ $[x,y,z,1]$ å’Œ $[ax,ay,az,a]$ è¡¨ç¤ºåŒä¸€ä¸ªç‚¹ï¼‰ å› æ­¤æˆ‘ä»¬å¸Œæœ›å¯¹å‘é‡çš„ç³»æ•°åšä¸€äº›è°ƒæ•´ï¼Œæ¥è®©å„ä¸ªå‘é‡å˜æˆ $[x,y,z,1]^T$ çš„å½¢å¼ï¼Œä»è€Œæ‰¾å‡º $\\alphaâ€™, \\betaâ€™,\\gammaâ€™$ å’Œ $\\alpha, \\beta,\\gamma$ çš„å…³ç³»ã€‚ ç®€å•å˜æ¢ä¸€ä¸‹ï¼Œæˆ‘ä»¬èƒ½æŠŠä¸Šé¢çš„å¼å­å†™æˆ \\begin{align*} &MQ=\\alpha w_0\\frac{MP_0}{w_0}+\\beta w_1\\frac{MP_1}{w_1}+\\gamma w_2\\frac{MP_2}{w_2} \\end{align*}ç°åœ¨å³è¾¹çš„å„ä¸ªå‘é‡ $\\frac{MP_k}{w_k}$ éƒ½å·²ç»æ˜¯ $[x,y,z,1]^T$ çš„å½¢å¼äº†ï¼Œæˆ‘ä»¬ç»™å®ƒä»¬çš„ç³»æ•°åšä¸ªå½’ä¸€åŒ–å°±èƒ½è®©å·¦è¾¹çš„å‘é‡ä¹Ÿå˜æˆ $[x,y,z,1]^T$ çš„å½¢å¼ï¼š \\frac{MQ}{\\alpha w_0 + \\beta w_1 + \\gamma w_2} = \\frac{1}{\\alpha w_0 + \\beta w_1 + \\gamma w_2} \\bigg( \\alpha w_0\\frac{MP_0}{w_0}+\\beta w_1\\frac{MP_1}{w_1}+\\gamma w_2\\frac{MP_2}{w_2} \\bigg)ç”±æ­¤æˆ‘ä»¬å°±æœ‰ \\begin{align*} &\\frac{\\alpha w_0}{\\alpha w_0 + \\beta w_1 + \\gamma w_2}=\\alpha' \\\\ &\\frac{\\beta w_1}{\\alpha w_0 + \\beta w_1 + \\gamma w_2}=\\beta' \\\\ &\\frac{\\gamma w_2}{\\alpha w_0 + \\beta w_1 + \\gamma w_2}=\\gamma' \\end{align*}è§£ä¸Šé¢çš„æ–¹ç¨‹çš„å°æŠ€å·§æ˜¯å€ŸåŠ©é™¤æ³•å’Œé‡å¿ƒåæ ‡å’Œä¸º $1$ çš„æ€§è´¨å¾—åˆ°ä¸‹é¢çš„ç­‰ä»·çš„æ–¹ç¨‹ç»„ \\begin{align*} &\\frac{\\alpha'}{\\beta'}=\\frac{\\alpha w_0}{\\beta w_1} \\\\ &\\frac{\\alpha'}{\\gamma'}=\\frac{\\alpha w_0}{\\gamma w_2} \\\\ &\\alpha + \\beta + \\gamma = 1 \\end{align*}ç„¶åå°±èƒ½æ±‚å‡º \\begin{align*} &\\alpha = \\frac{\\alpha' / w_0}{\\alpha' / w_0 + \\beta' / w_1 + \\gamma' / w_2} \\\\ &\\beta= \\frac{\\beta' / w_1}{\\alpha' / w_0 + \\beta' / w_1 + \\gamma' / w_2} \\\\ &\\gamma= \\frac{\\gamma' / w_2}{\\alpha' / w_0 + \\beta' / w_1 + \\gamma' / w_2} \\end{align*}ç”±æ­¤ï¼Œæˆ‘ä»¬å°±ä»å±å¹•ç©ºé—´çš„é‡å¿ƒåæ ‡ $\\alphaâ€™,\\betaâ€™,\\gammaâ€™$ ç®—å‡ºäº†ä¸–ç•Œç©ºé—´çš„é‡å¿ƒåæ ‡ $\\alpha,\\beta,\\gamma$ï¼Œä¹‹åå°±èƒ½ç”¨ä¸–ç•Œç©ºé—´çš„é‡å¿ƒåæ ‡æ¥æ­£ç¡®æ’å€¼äº†ã€‚ //Screen space rasterization void rst::rasterizer::rasterize_triangle(const Triangle&amp; t, const std::array&lt;Eigen::Vector3f, 3>&amp; view_pos) &#123; auto v = t.toVector4(); // Find bounding box float left = v[0].x(); float right = v[0].x(); float bottom = v[0].y(); float top = v[0].y(); for (auto&amp; vec: v) &#123; left = std::min(left, vec.x()); right = std::max(right, vec.x()); bottom = std::min(bottom, vec.y()); top = std::max(top, vec.y()); &#125; // Update pixels in bounding box for (int x = static_cast&lt;int>(left); x &lt;= static_cast&lt;int>(right) + 1; x++) &#123; for (int y = static_cast&lt;int>(bottom); y &lt;= static_cast&lt;int>(top) + 1; y++) &#123; auto[alpha, beta, gamma] = computeBarycentric2D(x, y, t.v); // If (x, y) is not inside triangle, continue if (alpha &lt; 0 || beta &lt; 0 || gamma &lt; 0) &#123; continue; &#125; // Interpolate z value, color, normal, texcoords, shadingcoords, viewpos float alpha_corrected = alpha / v[0].w(); float beta_corrected = beta / v[1].w(); float gamma_corrected = gamma / v[2].w(); float w_reciprocal = alpha_corrected + beta_corrected + gamma_corrected; auto z_interpolated = interpolate(alpha_corrected, beta_corrected, gamma_corrected, v[0].z(), v[1].z(), v[2].z(), w_reciprocal); auto color_interpolated = interpolate(alpha_corrected, beta_corrected, gamma_corrected, t.color[0], t.color[1], t.color[2], w_reciprocal); auto normal_interpolated = interpolate(alpha_corrected, beta_corrected, gamma_corrected, t.normal[0], t.normal[1], t.normal[2], w_reciprocal); auto texcoordes_interpolated = interpolate(alpha_corrected, beta_corrected, gamma_corrected, t.tex_coords[0], t.tex_coords[1], t.tex_coords[2], w_reciprocal); auto viewpos_interpolated = interpolate(alpha_corrected, beta_corrected, gamma_corrected, view_pos[0], view_pos[1], view_pos[2], w_reciprocal); // A lower z-value means it is displayed in front if (z_interpolated &lt; depth_buf[y * width + x]) &#123; depth_buf[y * width + x] = z_interpolated; fragment_shader_payload payload( color_interpolated, normal_interpolated, texcoordes_interpolated, texture ? &amp;*texture : nullptr ); payload.view_pos = viewpos_interpolated; auto pixel_color = fragment_shader(payload); set_pixel(Vector2i(x, y), pixel_color); &#125; &#125; &#125; &#125; phong å’Œ texturephong çš„ä»£ç æŒ‰ç€ phong æ¨¡å‹å®ç°å³å¯ã€‚texture çš„ä»£ç å‡ ä¹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚ æˆ‘å”¯ä¸€å¥½å¥‡çš„åœ°æ–¹æ˜¯ä¸ºä»€ä¹ˆæœ«å°¾ä¹˜äº† 255.0fï¼Œéš¾é“å…‰ç…§æ¨¡å‹çš„å„ä¸ªæ•°å€¼å–å€¼éƒ½åœ¨ $(0,1)$ ä¹‹é—´ï¼Ÿä½†çœ‹å…‰å¼ºä¼¼ä¹åˆä¸æ˜¯è¿™æ ·ã€‚ Eigen::Vector3f phong_fragment_shader(const fragment_shader_payload&amp; payload) &#123; Eigen::Vector3f ka = Eigen::Vector3f(0.005, 0.005, 0.005); Eigen::Vector3f kd = payload.color; Eigen::Vector3f ks = Eigen::Vector3f(0.7937, 0.7937, 0.7937); auto l1 = light&#123;&#123;20, 20, 20&#125;, &#123;500, 500, 500&#125;&#125;; auto l2 = light&#123;&#123;-20, 20, 0&#125;, &#123;500, 500, 500&#125;&#125;; std::vector&lt;light> lights = &#123;l1, l2&#125;; Eigen::Vector3f amb_light_intensity&#123;10, 10, 10&#125;; Eigen::Vector3f eye_pos&#123;0, 0, 10&#125;; float p = 150; Eigen::Vector3f color = payload.color; Eigen::Vector3f point = payload.view_pos; Eigen::Vector3f normal = payload.normal; Eigen::Vector3f result_color = &#123;0, 0, 0&#125;; Eigen::Vector3f ambient = ka.cwiseProduct(amb_light_intensity); result_color += ambient; for (auto&amp; light : lights) &#123; // TODO: For each light source in the code, calculate what the *ambient*, *diffuse*, and *specular* // components are. Then, accumulate that result on the *result_color* object. Eigen::Vector3f vec_to_light = light.position - point; Eigen::Vector3f diffuse = kd.cwiseProduct(light.intensity / vec_to_light.squaredNorm()) * MAX(0, normal.normalized().dot(vec_to_light.normalized())); Eigen::Vector3f vec_to_eye = eye_pos - point; Eigen::Vector3f h = vec_to_light.normalized() + vec_to_eye.normalized(); Eigen::Vector3f specular = ks.cwiseProduct(light.intensity / vec_to_light.squaredNorm()) * pow(MAX(0, normal.normalized().dot(h.normalized())), p); // The ambient component is only added once before the for loop result_color += (diffuse + specular); &#125; return result_color * 255.f; &#125; Eigen::Vector3f texture_fragment_shader(const fragment_shader_payload&amp; payload) &#123; Eigen::Vector3f texture_color = &#123;0, 0, 0&#125;; if (payload.texture) &#123; // TODO: Get the texture value at the texture coordinates of the current fragment texture_color = payload.texture->getColor(payload.tex_coords.x(), payload.tex_coords.y()); &#125; Eigen::Vector3f ka = Eigen::Vector3f(0.005, 0.005, 0.005); Eigen::Vector3f kd = texture_color / 255.f; Eigen::Vector3f ks = Eigen::Vector3f(0.7937, 0.7937, 0.7937); auto l1 = light&#123;&#123;20, 20, 20&#125;, &#123;500, 500, 500&#125;&#125;; auto l2 = light&#123;&#123;-20, 20, 0&#125;, &#123;500, 500, 500&#125;&#125;; std::vector&lt;light> lights = &#123;l1, l2&#125;; Eigen::Vector3f amb_light_intensity&#123;10, 10, 10&#125;; Eigen::Vector3f eye_pos&#123;0, 0, 10&#125;; float p = 150; Eigen::Vector3f color = texture_color; Eigen::Vector3f point = payload.view_pos; Eigen::Vector3f normal = payload.normal; Eigen::Vector3f result_color = &#123;0, 0, 0&#125;; Eigen::Vector3f ambient = ka.cwiseProduct(amb_light_intensity); result_color += ambient; for (auto&amp; light : lights) &#123; // TODO: For each light source in the code, calculate what the *ambient*, *diffuse*, and *specular* // components are. Then, accumulate that result on the *result_color* object. Eigen::Vector3f vec_to_light = light.position - point; Eigen::Vector3f diffuse = kd.cwiseProduct(light.intensity / vec_to_light.squaredNorm()) * MAX(0.0f, normal.normalized().dot(vec_to_light.normalized())); Eigen::Vector3f vec_to_eye = eye_pos - point; Eigen::Vector3f h = vec_to_light.normalized() + vec_to_eye.normalized(); Eigen::Vector3f specular = ks.cwiseProduct(light.intensity / vec_to_light.squaredNorm()) * pow(MAX(0.0f, normal.normalized().dot(h.normalized())), p); // The ambient component is only added once before the for loop result_color += (diffuse + specular); &#125; return result_color * 255.f; &#125; bump å’Œ displacementå¦‚å¼€å¤´æ‰€è¨€ï¼Œæœ¬æ¬¡ä½œä¸šå¯¹è¿™ä¸¤ä¸ª shader çš„è¦æ±‚éå¸¸ä¸ä¸¥è°¨ï¼Œæˆ‘ä»¬å°±ç®€å•æ”¾ä¸‹ä»£ç ï¼Œä¸å¤šè§£é‡Šäº†ã€‚åœ¨ä¸€äº›ä¸ä¸¥è°¨çš„åœ°æ–¹æˆ‘å·²ç»å†™äº†æ³¨é‡Šã€‚ Eigen::Vector3f bump_fragment_shader(const fragment_shader_payload&amp; payload) &#123; Eigen::Vector3f ka = Eigen::Vector3f(0.005, 0.005, 0.005); Eigen::Vector3f kd = payload.color; Eigen::Vector3f ks = Eigen::Vector3f(0.7937, 0.7937, 0.7937); auto l1 = light&#123;&#123;20, 20, 20&#125;, &#123;500, 500, 500&#125;&#125;; auto l2 = light&#123;&#123;-20, 20, 0&#125;, &#123;500, 500, 500&#125;&#125;; std::vector&lt;light> lights = &#123;l1, l2&#125;; Eigen::Vector3f amb_light_intensity&#123;10, 10, 10&#125;; Eigen::Vector3f eye_pos&#123;0, 0, 10&#125;; float p = 150; Eigen::Vector3f color = payload.color; Eigen::Vector3f point = payload.view_pos; Eigen::Vector3f normal = payload.normal; float kh = 0.2, kn = 0.1; // TODO: Implement bump mapping here // Let n = normal = (x, y, z) // Vector t = (x*y/sqrt(x*x+z*z),sqrt(x*x+z*z),z*y/sqrt(x*x+z*z)) // Vector b = n cross product t // Matrix TBN = [t b n] // dU = kh * kn * (h(u+1/w,v)-h(u,v)) // dV = kh * kn * (h(u,v+1/h)-h(u,v)) // Vector ln = (-dU, -dV, 1) // Normal n = normalize(TBN * ln) // Note: The formula is WRONG in theory // To calculate the TBN matrix correctly, we need the triangle's vertices and their corresponding UV coordinates // read https://learnopengl.com/Advanced-Lighting/Normal-Mapping and // https://terathon.com/blog/tangent-space.html for more details float x = normal.x(); float y = normal.y(); float z = normal.z(); float u = payload.tex_coords.x(); float v = payload.tex_coords.y(); float w = payload.texture->width; float h = payload.texture->height; Eigen::Vector3f t = Eigen::Vector3f(x*y/sqrt(x*x+z*z),sqrt(x*x+z*z),z*y/sqrt(x*x+z*z)); Eigen::Vector3f b = normal.cross(t); Eigen::Matrix3f TBN; TBN &lt;&lt; t, b, normal; // In theory the texture should be a grayscale image // However we use an ordinary RGB image here, so we take norm // read https://games-cn.org/forums/topic/frequently-asked-questionskeep-updating/ for more details float dU = kh * kn * (payload.texture->getColor(u+1.0f/w, v).norm() - payload.texture->getColor(u, v).norm()); float dV = kh * kn * (payload.texture->getColor(u, v+1.0f/h).norm() - payload.texture->getColor(u, v).norm()); Eigen::Vector3f ln = Eigen::Vector3f(-dU, -dV, 1); normal = (TBN * ln).normalized(); Eigen::Vector3f result_color = &#123;0, 0, 0&#125;; result_color = normal; return result_color * 255.f; &#125; Eigen::Vector3f displacement_fragment_shader(const fragment_shader_payload&amp; payload) &#123; Eigen::Vector3f ka = Eigen::Vector3f(0.005, 0.005, 0.005); Eigen::Vector3f kd = payload.color; Eigen::Vector3f ks = Eigen::Vector3f(0.7937, 0.7937, 0.7937); auto l1 = light&#123;&#123;20, 20, 20&#125;, &#123;500, 500, 500&#125;&#125;; auto l2 = light&#123;&#123;-20, 20, 0&#125;, &#123;500, 500, 500&#125;&#125;; std::vector&lt;light> lights = &#123;l1, l2&#125;; Eigen::Vector3f amb_light_intensity&#123;10, 10, 10&#125;; Eigen::Vector3f eye_pos&#123;0, 0, 10&#125;; float p = 150; Eigen::Vector3f color = payload.color; Eigen::Vector3f point = payload.view_pos; Eigen::Vector3f normal = payload.normal; float kh = 0.2, kn = 0.1; // TODO: Implement displacement mapping here // Let n = normal = (x, y, z) // Vector t = (x*y/sqrt(x*x+z*z),sqrt(x*x+z*z),z*y/sqrt(x*x+z*z)) // Vector b = n cross product t // Matrix TBN = [t b n] // dU = kh * kn * (h(u+1/w,v)-h(u,v)) // dV = kh * kn * (h(u,v+1/h)-h(u,v)) // Vector ln = (-dU, -dV, 1) // Position p = p + kn * n * h(u,v) // Normal n = normalize(TBN * ln) // Note: The formula is WRONG in theory // When using Displacement Mapping, the points should be offset in the camera space before rasterizing, // instead of only changing its color // read https://learnopengl.com/Advanced-Lighting/Normal-Mapping and // https://terathon.com/blog/tangent-space.html for more details float x = normal.x(); float y = normal.y(); float z = normal.z(); float u = payload.tex_coords.x(); float v = payload.tex_coords.y(); float w = payload.texture->width; float h = payload.texture->height; Eigen::Vector3f t = Eigen::Vector3f(x*y/sqrt(x*x+z*z),sqrt(x*x+z*z),z*y/sqrt(x*x+z*z)); Eigen::Vector3f b = normal.cross(t); Eigen::Matrix3f TBN; TBN &lt;&lt; t, b, normal; // In theory the texture should be a grayscale image // However we use an ordinary RGB image here, so we take norm // read https://games-cn.org/forums/topic/frequently-asked-questionskeep-updating/ for more details float dU = kh * kn * (payload.texture->getColor(u+1.0f/w, v).norm() - payload.texture->getColor(u, v).norm()); float dV = kh * kn * (payload.texture->getColor(u, v+1.0f/h).norm() - payload.texture->getColor(u, v).norm()); Eigen::Vector3f ln = Eigen::Vector3f(-dU, -dV, 1); // In theory we should bias the point using the original normal // but to match the homework answer, we bias the point using the corrected normal normal = (TBN * ln).normalized(); point += kn * normal * payload.texture->getColor(u, v).norm(); Eigen::Vector3f result_color = &#123;0, 0, 0&#125;; Eigen::Vector3f ambient = ka.cwiseProduct(amb_light_intensity); result_color += ambient; for (auto&amp; light : lights) &#123; // TODO: For each light source in the code, calculate what the *ambient*, *diffuse*, and *specular* // components are. Then, accumulate that result on the *result_color* object. Eigen::Vector3f vec_to_light = light.position - point; Eigen::Vector3f diffuse = kd.cwiseProduct(light.intensity / vec_to_light.squaredNorm()) * MAX(0.0f, normal.normalized().dot(vec_to_light.normalized())); Eigen::Vector3f vec_to_eye = eye_pos - point; Eigen::Vector3f h = vec_to_light.normalized() + vec_to_eye.normalized(); Eigen::Vector3f specular = ks.cwiseProduct(light.intensity / vec_to_light.squaredNorm()) * pow(MAX(0.0f, normal.normalized().dot(h.normalized())), p); // The ambient component is only added once before the for loop result_color += (diffuse + specular); &#125; return result_color * 255.f; &#125;","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"GAMES101","slug":"å…¬å¼€è¯¾/GAMES101","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/"},{"name":"Assignments","slug":"å…¬å¼€è¯¾/GAMES101/Assignments","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/Assignments/"}],"tags":[]},{"title":"Assignment 2 Rasterizing","slug":"learning/open-course/GAMES101/Hw/Hw2-rasterizing","date":"2025-08-26T12:15:16.000Z","updated":"2025-08-26T12:21:11.482Z","comments":true,"path":"wiki/learning/open-course/GAMES101/Hw/Hw2-rasterizing/","permalink":"http://rinevard.github.io/wiki/learning/open-course/GAMES101/Hw/Hw2-rasterizing/","excerpt":"","text":"æœ¬æ¬¡ä½œä¸šè¦æ±‚æˆ‘ä»¬å®ç° Z-buffer ã€æ …æ ¼åŒ–å’Œ SSAAï¼ˆä¹Ÿå°±æ˜¯è¶…é‡‡æ ·ï¼‰ã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹å‰ä¸¤ä¸ªä¸œè¥¿ï¼Œå†çœ‹çœ‹ SSAAã€‚ Z-bufferå’Œæ …æ ¼åŒ–ä»£ç æ¡†æ¶æˆ‘ä»¬è¦è¡¥å…¨çš„ rasterize_triangle å‡½æ•°åœ¨ draw å‡½æ•°å†…è¢«è°ƒç”¨ï¼Œå¯ä»¥çœ‹åˆ° draw å‡½æ•°å·²ç»åšå¥½äº†ä¸‰è§’å½¢çš„æŠ•å½±å˜æ¢ï¼Œæˆ‘ä»¬åªè¦æŠŠ $[0, \\text{width}] \\times [0,\\text{height}] \\times [n,f]$ é‡Œçš„ä¸‰è§’å½¢æ¸²æŸ“åˆ°å±å¹•ä¸Šå°±å¥½ã€‚è¾“å…¥çš„ä¸‰è§’å½¢å¤§æ¦‚å½¢å¦‚è¿™æ ·ï¼š -------input triangle--------- 529.259 350 49.3857 1 -- 350 529.259 49.3857 1 -- 170.741 350 49.3857 1 -- ----------------------------- insideTriangle å‡½æ•°ç”¨è¯¾ä¸Šè®²çš„å‰ä¹˜æ³•åˆ¤æ–­ç‚¹æ˜¯å¦åœ¨ä¸‰è§’å½¢å†…ã€‚â€œåœ¨ä¸‰è§’å½¢å†…â€è¿™ä¸ªè¯´æ³•ä¹Ÿä¸æ˜¯ç‰¹åˆ«ä¸¥è°¨ï¼Œæ›´å‡†ç¡®åœ°è¯´åº”è¯¥æ˜¯åˆ¤æ–­ä¸‰è§’å½¢åœ¨å±å¹•ä¸Šçš„äºŒç»´æŠ•å½±æ˜¯å¦åŒ…å«è¿™ä¸ªç‚¹ã€‚ /* Return whether (x, y) is in the triangle, ignoring its z value. */ static bool insideTriangle(float x, float y, const std::array&lt;Vector4f, 3>&amp; triangle) &#123; Vector2f point1 = &#123;triangle[0].x(), triangle[0].y()&#125;; Vector2f point2 = &#123;triangle[1].x(), triangle[1].y()&#125;; Vector2f point3 = &#123;triangle[2].x(), triangle[2].y()&#125;; Vector2f checked_point = &#123;x, y&#125;; auto cross_product = [](const Vector2f&amp; v1, const Vector2f&amp; v2) &#123; return v1.x() * v2.y() - v1.y() * v2.x(); &#125;; float side1 = cross_product(point1 - checked_point, point1 - point2); float side2 = cross_product(point2 - checked_point, point2 - point3); float side3 = cross_product(point3 - checked_point, point3 - point1); return (side1 > 0 &amp;&amp; side2 > 0 &amp;&amp; side3 > 0) || (side1 &lt; 0 &amp;&amp; side2 &lt; 0 &amp;&amp; side3 &lt; 0); &#125; rasterize_triangle å‡½æ•°è¿™ä¸ªå®ç°å¥½åƒæ²¡ä»€ä¹ˆç‰¹åˆ«å€¼å¾—è¯´çš„åœ°æ–¹ï¼Œç®€ç®€å•å•é‡‡é‡‡æ ·ï¼Œç„¶åç”¨ depth_buf å®ç° z-buffer å°±å¥½ã€‚ //Screen space rasterization void rst::rasterizer::rasterize_triangle(const Triangle&amp; t) &#123; auto v = t.toVector4(); // Find bounding box float left = v[0].x(); float right = v[0].x(); float bottom = v[0].y(); float top = v[0].y(); for (auto&amp; vec: v) &#123; left = std::min(left, vec.x()); right = std::max(right, vec.x()); bottom = std::min(bottom, vec.y()); top = std::max(top, vec.y()); &#125; // Update pixels in bounding box for (int x = static_cast&lt;int>(left); x &lt;= static_cast&lt;int>(right) + 1; x++) &#123; for (int y = static_cast&lt;int>(bottom); y &lt;= static_cast&lt;int>(top) + 1; y++) &#123; if (!insideTriangle(x+0.5, y+0.5, v)) &#123; continue; &#125; // Interpolate z value auto[alpha, beta, gamma] = computeBarycentric2D(x+0.5, y+0.5, t.v); float w_reciprocal = 1.0/(alpha / v[0].w() + beta / v[1].w() + gamma / v[2].w()); float z_interpolated = alpha * v[0].z() / v[0].w() + beta * v[1].z() / v[1].w() + gamma * v[2].z() / v[2].w(); z_interpolated *= w_reciprocal; // A lower z-value means it is displayed in front if (z_interpolated &lt; depth_buf[y * width + x]) &#123; depth_buf[y * width + x] = z_interpolated; set_pixel(Vector3f(x, y, z_interpolated), t.getColor()); &#125; &#125; &#125; &#125; SSAAçš„å®ç°SSAA çš„å®ç°ç›¸è¾ƒè€Œè¨€æ›´å›°éš¾ä¸€äº›ï¼Œç”±äºæ‚ä¸ƒæ‚å…«è¦æ”¹çš„åœ°æ–¹æ¯”è¾ƒå¤šï¼Œæˆ‘å°±å…ˆè¯´ä¸‹å¤§è‡´æ€è·¯ï¼Œå†èŠèŠå’±è¸©çš„ä¸¤ä¸ªå‘ã€‚ ä¸è¿‡åœ¨æ­¤ä¹‹å‰ï¼Œå…ˆæ¥çœ‹çœ‹æˆ‘ä»¬çš„æˆæœå§ï¼ï¼ˆè¿™æ˜¯åŠ¨å›¾ å¤§è‡´æ€è·¯æˆ‘ä»¬è¦å…ˆæŠŠæ‰€æœ‰å†…å®¹æ¸²æŸ“åˆ°å¤§å°ä¸º $(\\text{width} * 2, \\text{height} * 2)$ çš„è‡ªå®šä¹‰ buffer é‡Œï¼Œå†æ ¹æ®è‡ªå®šä¹‰ buffer çš„å†…å®¹å¡«å……å±å¹•ä¸Šçš„åƒç´ ã€‚ è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥åœ¨ rasterize_triangle é‡ŒæŠŠä¸‰è§’å½¢ç”»åˆ°å±å¹•ä¸Šï¼ˆå…·ä½“åŸå› è§â€œè¸©å‘1â€é‚£ä¸€èŠ‚ï¼‰ï¼Œè€Œæ˜¯è¦åœ¨ rasterize_triangle ä¸­æŠŠä¸‰è§’å½¢ç”»åˆ°è‡ªå®šä¹‰çš„ buffer é‡Œï¼Œå†æ–°å¢ä¸€ä¸ª resolve å‡½æ•°å¹¶æŠŠå®ƒæ”¾åˆ° draw çš„æœ€åï¼Œä»è€ŒæŠŠè‡ªå®šä¹‰ buffer é‡Œçš„å†…å®¹ç”»åˆ°å±å¹•ä¸Šï¼š void rst::rasterizer::resolve() &#123; for (int y = 0; y &lt; height; y++) &#123; for (int x = 0; x &lt; width; x++) &#123; frame_buf[y * width + x] = Vector3f::Zero(); for (int i = 0; i &lt; 4; i++) &#123; frame_buf[y * width + x] += ssaa_frame_buf[(y * width + x) * 4 + i]; &#125; frame_buf[y * width + x] /= 4.0; &#125; &#125; &#125; æ›´ç»†èŠ‚ä¸€äº›çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦åšè¿™äº›å·¥ä½œï¼š åœ¨ rasterizer.hpp é‡ŒåŠ å…¥ ssaa_frame_buf å’Œ resolve çš„å®šä¹‰ã€‚ ä¿®æ”¹ rasterizer çš„åˆå§‹åŒ–å‡½æ•°å’Œ clear å‡½æ•°ï¼Œæ­£ç¡®åˆå§‹åŒ–å’Œé‡ç½® ssaa_frame_bufã€‚ ä¿®æ”¹ set_pixel å‡½æ•°ï¼Œè®©å®ƒæŠŠå†…å®¹ç”»åˆ° ssaa_frame_buf é‡Œï¼Œè€Œé frame_buf é‡Œã€‚ ä¿®æ”¹ rasterize_triangleï¼Œè®©å®ƒç”¨ä½¿ç”¨æ›´é«˜çš„é‡‡æ ·ç‡ã€‚ å®ç° resolve å‡½æ•°ã€‚ æ‚ä¸ƒæ‚å…«è¦æ”¹çš„åœ°æ–¹æ¯”è¾ƒå¤šï¼Œè¿™é‡Œå°±ä¸æ”¾æ›´å¤šä»£ç äº†ã€‚ è¸©å‘1SSAAã€filtering éƒ½å»ºç«‹åœ¨â€œæˆ‘ä»¬å¯¹ç†æƒ³å›¾åƒè¿›è¡Œæ»¤æ³¢â€çš„åŸºç¡€ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¦å…ˆæŠŠä¸–ç•Œé‡Œçš„å¯¹è±¡æŒ‰æ­£ç¡®çš„å‰åé¡ºåºå˜ä¸ºä¸€ä¸ªäºŒç»´å›¾åƒï¼Œç„¶åå†æ»¤æ³¢ã€‚æ‰€ä»¥ç›´æ¥åœ¨ rasterize_triangle é‡ŒæŠŠåƒç´ åˆ’åˆ†æˆå­åƒç´ ç„¶åå–å¹³å‡å¹¶ä¸èƒ½å®ç° SSAAï¼Œè€Œæ˜¯ä¼šåœ¨ä¸‰è§’å½¢é‡å çš„åœ°æ–¹æ˜¾ç¤ºå‡ºé»‘è¾¹ã€‚ è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå…·ä½“ä¾‹å­ã€‚è€ƒè™‘ä¸€ä¸ª 1/4 è¢«ç»¿è‰²ä¸‰è§’å½¢å æ®ã€3/4 è¢«è“è‰²ä¸‰è§’å½¢å æ®çš„åƒç´ ï¼ŒSSAA ä¼šæŠŠ 1/4 ç»¿ + 3/4 è“ ä½œä¸ºè¿™ä¸ªåƒç´ çš„é¢œè‰²ã€‚ è€Œå¦‚æœç›´æ¥åœ¨ rasterize_triangle é‡ŒæŠŠåƒç´ åˆ’åˆ†æˆå­åƒç´ ç„¶åå–å¹³å‡ï¼Œé‚£ä¹ˆæ …æ ¼åŒ–è“è‰²ä¸‰è§’å½¢æ—¶ï¼Œè¿™ä¸ªåƒç´ è¢«å½“æˆ 3/4 è“ï¼›æ …æ ¼åŒ–ç»¿è‰²ä¸‰è§’å½¢æ—¶ï¼Œè¿™ä¸ªåƒç´ è¢«å½“æˆ 1/4 ç»¿ã€‚æ— è®ºè°åœ¨å‰é¢ï¼Œæœ€ç»ˆç»“æœè¦ä¹ˆæ˜¯ 3/4 è“ï¼Œè¦ä¹ˆæ˜¯ 1/4 ç»¿ï¼Œæ€»ä¸ SSAA çš„ç»“æœ 1/4 ç»¿ + 3/4 è“ ä¸åŒã€‚ è¸©å‘2insideTriangle çš„å‚æ•° x å’Œ y çš„ç±»å‹åŸæœ¬æ˜¯ intï¼Œè€Œåœ¨ SSAA é‡Œæˆ‘ä»¬æŠŠåƒç´ åˆ’åˆ†æˆäº†å››ä¸ªå­åƒç´ ï¼Œè¿™äº›å­åƒç´ çš„åæ ‡å¤§å¤šä¸æ˜¯æ•´æ•°ã€‚å› æ­¤æˆ‘ä»¬è¦æŠŠ insideTriangle çš„ x å’Œ y çš„ç±»å‹æ”¹æˆ float. static bool insideTriangle(int x, int y, const Vector3f* _v) &#123; // TODO : Implement this function to check if the point (x, y) is inside the triangle represented by _v[0], _v[1], _v[2] &#125;","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"GAMES101","slug":"å…¬å¼€è¯¾/GAMES101","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/"},{"name":"Assignments","slug":"å…¬å¼€è¯¾/GAMES101/Assignments","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/Assignments/"}],"tags":[]},{"title":"Note 2 Rasterizing","slug":"learning/open-course/GAMES101/Notes/Note2-Rasterizing","date":"2025-08-25T08:10:28.000Z","updated":"2025-09-23T07:19:39.089Z","comments":true,"path":"wiki/learning/open-course/GAMES101/Notes/Note2-Rasterizing/","permalink":"http://rinevard.github.io/wiki/learning/open-course/GAMES101/Notes/Note2-Rasterizing/","excerpt":"","text":"åœ¨ Transformation éƒ¨åˆ†ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥æŠŠä¸€ä¸ªä¸‰ç»´ç©ºé—´é‡Œçš„ä¸‰è§’å½¢æŠ•å½±åˆ°å¹³é¢ä¸Šã€‚ä½†æ€ä¹ˆæŠŠä¸€ä¸ªçº¯è‰²ä¸‰è§’å½¢ç»˜åˆ¶åˆ°å±å¹•ä¸Šå‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“å±å¹•ç”±å¤§é‡çš„åƒç´ ç‚¹ç»„æˆï¼Œé‚£ä¹ˆæ€ä¹ˆç¡®å®šæ¯ä¸ªåƒç´ ç‚¹æ˜¯ä»€ä¹ˆé¢œè‰²å‘¢ï¼Ÿ æˆ‘ä»¬é€šè¿‡é‡‡æ ·ç»™æ¯ä¸ªåƒç´ ç‚¹æ¶‚ä¸Šé¢œè‰²ã€‚æˆ‘ä»¬å¯ä»¥æ£€æŸ¥æ¯ä¸ªåƒç´ çš„ä¸­å¿ƒç‚¹æ˜¯å¦åœ¨è¿™ä¸ªä¸‰è§’å½¢å†…éƒ¨ï¼Œå¦‚æœåœ¨åˆ™æ¶‚ä¸Šä¸‰è§’å½¢çš„é¢œè‰²ã€‚è™½ç„¶è¿™æ ·ç»˜åˆ¶çš„ä¸‰è§’å½¢ä¼šæœ‰é”¯é½¿ï¼Œæ•ˆæœä¸€èˆ¬ï¼Œä½†åŸºæœ¬æ€æƒ³å°±æ˜¯è¿™æ ·ã€‚ é‚£ä¹ˆå¦‚æœæœ‰å¤šä¸ªä¸‰è§’å½¢ï¼Œè€Œä¸”ä»–ä»¬ä¹‹é—´æœ‰é®æŒ¡å…³ç³»å‘¢ï¼Ÿè¿™å°±éœ€è¦ Z-Buffer å‡ºåœºäº†ã€‚ Z-BufferZ-Buffer çš„ç®—æ³•å¦‚ä¸‹é¢çš„ä¼ªä»£ç æ‰€ç¤ºã€‚æ€è·¯æ˜¯å¯¹æ¯ä¸ªåƒç´ æ‰€åœ¨çš„æ‰€æœ‰ä¸‰è§’å½¢ï¼Œå– z å€¼æœ€å°çš„ä¸‰è§’å½¢çš„é¢œè‰²ä½œä¸ºè¿™ä¸ªåƒç´ çš„é¢œè‰²ã€‚ foreach (Triangle triangle in triangles) &#123; foreach (Vector3 sample in triangle.GetSamples()) &#123; // z å€¼è¶Šå°æ˜¾ç¤ºè¶Šé å‰ if (sample.z &lt; zBuffer[sample.x, sample.y]) &#123; frameBuffer[sample.x, sample.y] = sample.rgb; zBuffer[sample.x, sample.y] = sample.z; &#125; &#125; &#125; è¿™ä¹Ÿæœ‰è‰¯å¥½çš„å¹¶è¡Œæ€§ï¼Œå› ä¸ºä¸‰è§’å½¢çš„éå†é¡ºåºå’Œæœ€ç»ˆç»“æœæ— å…³ï¼Œåƒç´ çš„ç»˜åˆ¶é¡ºåºä¹Ÿå’Œæœ€ç»ˆç»“æœæ— å…³ã€‚ è™ä¹¦è¿˜æåˆ°æˆ‘ä»¬ä¼šå°† $z$ å€¼æ˜ å°„åˆ° $[0, B-1]$ï¼Œç”¨æ•´æ•°å­˜å‚¨ $z$ å€¼ï¼Œä½†å…¶å®è¿™æ˜¯ç°åœ¨ä¸å†ä½¿ç”¨çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ç°åœ¨é€šå¸¸ä½¿ç”¨ 24 ä½æˆ– 32 ä½çš„æµ®ç‚¹æ•°æ¥å­˜å‚¨æ·±åº¦å€¼ã€‚ï¼ˆæ€ªä¸å¾—æˆ‘æŸ¥äº†å¥½ä¹…èµ„æ–™éƒ½æ²¡æŸ¥åˆ°â€œæ•´æ•°æ˜ å°„â€çš„å…·ä½“ä»£ç ï¼ŒåŸæ¥æ—©å°±ä¸ç”¨äº†ï¼ï¼ï¼ï¼‰ èµ°æ ·ç°è±¡æˆ‘ä»¬ä¹‹å‰è¯´è¿‡ï¼Œç®€å•çš„é‡‡æ ·ä¼šå‡ºç°é”¯é½¿ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ é”¯é½¿ã€æ‘©å°”çº¹ä¹‹ç±»çš„é‡‡æ ·å›¾åƒä¸åŸå›¾ä¸ç¬¦çš„ç°è±¡è¢«ç»Ÿç§°ä¸ºèµ°æ ·ï¼ˆAliasingï¼‰ç°è±¡ï¼Œèµ°æ ·çš„å®è´¨æ˜¯åŸå›¾çš„é«˜é¢‘ä¿¡å·è¢«é”™è¯¯é‡‡æ ·ã€‚ä¸ºäº†æ˜ç¡®ä»€ä¹ˆæ˜¯â€é«˜é¢‘ä¿¡å·â€å¹¶æ‰¾åˆ°ç¼“è§£èµ°æ ·ç°è±¡çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ä¸€äº›æ•°å­¦çŸ¥è¯†ã€‚ æ•°å­¦çŸ¥è¯†ä¸ºäº†ä¸è®©æ–‡ç« å¤ªé•¿ï¼Œè¿™é‡Œæˆ‘ä»¬çœç•¥æ‰€æœ‰çš„è¯æ˜ã€‚ä¸è¿‡æ‰€æœ‰çš„è¯æ˜éƒ½å¹¶ä¸å›°éš¾ï¼Œæœ‰ç©ºçš„è¯å¯ä»¥è‡ªå·±è¯ä¸€ä¸‹è¯•è¯•ã€‚åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬ä¼šé—®ï¼šè¿™äº›æ•°å­¦çŸ¥è¯†æœ‰ç”¨å—ï¼Ÿ In a word, mostly no, sometimes yes, and occasionally, maybe.â€” https://www.dgp.toronto.edu/public_user/elf/2522/sampling.pdf å·ç§¯æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸‰ç§å·ç§¯â€”â€”ç¦»æ•£-ç¦»æ•£å·ç§¯ã€è¿ç»­-è¿ç»­å·ç§¯ã€ç¦»æ•£-è¿ç»­å·ç§¯ã€‚ä¸‹é¢çš„ $f_{\\rightarrow t}$ è¡¨ç¤ºå°†å‡½æ•° $f$ å‘å³å¹³ç§» $t$ é•¿åº¦å¾—åˆ°çš„æ–°å‡½æ•°ï¼š ç¦»æ•£-ç¦»æ•£å·ç§¯ \\begin{align*} &(a*b)[i]= \\sum_{j}a[j]b[i-j] \\\\ &(a*b)=\\sum_{j}a[j]b_{\\rightarrow j} \\end{align*}è¿ç»­-è¿ç»­å·ç§¯ \\begin{align*} &(f*g)(x)=\\int_{-\\infty}^{\\infty} f(t)g(x-t)dt \\\\ &(f*g)=\\int_{-\\infty}^{\\infty} f(t)g_{\\rightarrow t}dt \\end{align*}ç¦»æ•£-è¿ç»­å·ç§¯ \\begin{align*} &(a*f)(x)=\\sum_{i}a[i] f(x-i) \\\\ &(a*f)=\\sum_{i}a[i]f_{\\rightarrow i} \\end{align*}æˆ‘ä»¬ä¼šæ³¨æ„åˆ°ï¼Œå·ç§¯å¯ä»¥è¡¨ç¤ºä¸ºå‡½æ•°å¹³ç§»åçš„åŠ æƒå’Œã€‚ å·ç§¯æ˜¯è¿‡ä¼šå„¿ä¼šç”¨åˆ°çš„å¦™å¦™å°å·¥å…·ã€‚ å‚…é‡Œå¶çº§æ•°å’Œå‚…é‡Œå¶å˜æ¢æˆ‘ä»¬ä¹‹å‰æåˆ°ï¼Œèµ°æ ·çš„å®è´¨æ˜¯åŸå›¾çš„é«˜é¢‘ä¿¡å·è¢«é”™è¯¯é‡‡æ ·ã€‚å›¾åƒä½œä¸ºä¸€ä¸ª $R^2\\rightarrow \\text{RGBA}$çš„å‡½æ•°ï¼Œæ€ä¹ˆä¼šæœ‰é«˜é¢‘å’Œä½é¢‘ä¹‹åˆ†å‘¢ï¼Ÿuh actuallyâ˜ï¸ğŸ¤“ æˆ‘ä»¬å¤„ç†çš„ç»å¤§å¤šæ•°å‡½æ•°éƒ½æœ‰é¢‘åŸŸï¼Œè¿™ä¸ªé¢‘åŸŸå¯ä»¥é€šè¿‡å‚…é‡Œå¶å˜æ¢å¾—åˆ°ã€‚ å…ˆå›é¡¾ä¸€ä¸‹å‚…é‡Œå¶çº§æ•°ã€‚ç†ŸçŸ¥åœ¨ $[-\\frac{T}{2},\\frac{T}{2}]$ å†…ï¼Œå‡½æ•° $f(x)$ å¯ä»¥è¡¨ç¤ºä¸º f(x)=\\sum_{n=-\\infty}^{\\infty}c_n e^{inw_0 x}å…¶ä¸­ \\begin{align*} &c_n=\\frac{1}{T}\\int_{-\\frac{T}{2}}^{\\frac{T}{2}} f(t)e^{-inw_0t}dt \\\\ &w_0=\\frac{2\\pi}{T} \\end{align*}è¿™æœ¬è´¨ä¸Šæ˜¯å‡½æ•°åœ¨é—­åŒºé—´å†…çš„æ­£äº¤åŸºå±•å¼€ï¼Œè¿™ä¸ªå±•å¼€çš„å‘¨æœŸä¸º $T$. å½“ $T \\rightarrow \\infty$ æ—¶ï¼Œä»¤ $w_n=nw_0$ï¼Œ$\\Delta w=w_n-w_{n-1}=w_0$ å†ç»“åˆç§¯åˆ†çš„å®šä¹‰ï¼Œæˆ‘ä»¬å°±èƒ½ï¼ˆä¸å¤ªä¸¥è°¨åœ°ï¼‰æ±‚å‡º f(x)=\\frac{1}{2\\pi}\\int_{-\\infty}^{\\infty}\\bigg(\\int_{-\\infty}^{\\infty}f(t)e^{-iwt}dt \\bigg)e^{iwx}dwæˆ‘ä»¬å¯ä»¥ä»¤ $u=\\frac{w}{2\\pi}$ ä»è€Œå»æ‰ç§¯åˆ†å¤–é¢çš„é‚£ä¸ªç³»æ•° f(x)=\\int_{-\\infty}^{\\infty}\\bigg(\\int_{-\\infty}^{\\infty}f(t)e^{-2\\pi iut}dt \\bigg)e^{2\\pi iux}duè€Œ $e^{2\\pi iux}$ çš„ç³»æ•° \\hat f(u)=\\int_{-\\infty}^{\\infty}f(t)e^{-2\\pi iut}dtå°±æ˜¯ $f$ çš„å‚…é‡Œå¶å˜æ¢äº†ï¼Œå®ƒä¹Ÿè®°ä½œ $\\mathcal{F}(f)$. æŠŠ $\\hat f$ ä»£å…¥å°±å¾—åˆ°äº†é€†å‚…é‡Œå¶å˜æ¢ f(x)=\\int_{-\\infty}^{\\infty}\\hat f(u)e^{2\\pi iux}dué€†å‚…é‡Œå¶å˜æ¢æŠŠå‡½æ•°å˜æˆäº†ä¸åŒé¢‘ç‡çš„ä¸‰è§’å‡½æ•°çš„ç§¯åˆ†/æ±‚å’Œï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ä¹‹å‰æ‰€è¯´çš„â€œé«˜é¢‘ä¿¡å·â€å’Œâ€œä½é¢‘ä¿¡å·â€çš„å«ä¹‰ã€‚ä¹‹åæˆ‘ä»¬ä¼šä»‹ç»é‡‡æ ·å¯¼è‡´é«˜é¢‘ä¿¡å·ä¸¢å¤±çš„åŸå› ï¼Œä¸è¿‡åœ¨æ­¤ä¹‹å‰æˆ‘ä»¬å…ˆçœ‹çœ‹å‚…é‡Œå¶å˜æ¢çš„ä¸€äº›æ€§è´¨ã€‚ å‚…é‡Œå¶å˜æ¢çš„æ€§è´¨æˆ‘ä»¬åˆ—ä¸¾å‚…é‡Œå¶å˜æ¢çš„å‡ ä¸ªå¸¸ç”¨çš„æ€§è´¨ã€‚ å¦‚æœ $f$ æ˜¯å®å‡½æ•°ï¼Œ$\\hat f$ æ˜¯å¶å‡½æ•°ã€‚ å‡½æ•°å’Œå‚…é‡Œå¶å˜æ¢çš„å¹³æ–¹ç§¯åˆ†ç›¸ç­‰ \\int (f(x))^2dx=\\int (\\hat f(u))^2du åŸå‡½æ•°æ‹‰é•¿ï¼Œå‚…é‡Œå¶å˜æ¢æ”¶ç´§ \\mathcal{F}(f(x/b))=b\\hat f(bu) ç‹„æ‹‰å…‹è„‰å†²å‡½æ•°å’Œå†²æ¿€ä¸²ç‹„æ‹‰å…‹è„‰å†²å‡½æ•°çš„å®šä¹‰å¦‚ä¸‹ï¼š \\delta(t) = \\begin{cases} \\infty, & t = 0 \\\\ 0, & t \\neq 0 \\end{cases}æˆ‘ä»¬å¯ä»¥æŠŠè¿ç»­ä¿¡å·çš„å‡åŒ€é—´éš”é‡‡æ ·è¡¨ç¤ºä¸ºå†²æ¿€ä¸² s_T(x) = \\sum_{n=-\\infty}^{\\infty}\\delta(x-nT)ä¸åŸå‡½æ•° $f$ çš„ä¹˜ç§¯ï¼Œè¿™é‡Œçš„ $T$ è¡¨ç¤ºä¸¤ä¸ªé‡‡æ ·ç‚¹ä¹‹é—´çš„é—´éš”ã€‚ $s_T$ çš„å‚…é‡Œå¶å˜æ¢ä¸º \\hat s_T(u)=\\frac{1}{T}\\sum_{n=-\\infty}^{\\infty}\\delta(u-\\frac{n}{T})å®ƒä»ç„¶æ˜¯ä¸€ç³»åˆ—ç‹„æ‹‰å…‹å‡½æ•°çš„å’Œã€‚ å·ç§¯å®šç†ä¹‹å‰è¯´è¿‡ï¼Œå°† $s_T$ å’ŒåŸå‡½æ•° $f$ ç›¸ä¹˜èƒ½è·å¾—è®¸å¤šé‡è¦çš„é‡‡æ ·æ€§è´¨ï¼Œæˆ‘ä»¬å¾ˆå¿«å°±ä¼šè®¨è®ºä»–ä»¬äº†ï¼Œåœ¨æ­¤ä¹‹å‰æˆ‘ä»¬è¿˜è¦è¡¥å……æœ€åä¸€ä¸ªçŸ¥è¯†â€”â€”å·ç§¯å®šç†ã€‚ \\begin{align*} &\\mathcal{F}(f * g) =\\hat f\\hat g \\\\ &\\mathcal{F}(fg)=\\hat f * \\hat g \\end{align*}è¿™å°±æ˜¯è¯´ï¼Œæ—¶åŸŸçš„å·ç§¯å¯¹åº”é¢‘åŸŸçš„ä¹˜ç§¯ï¼Œé¢‘åŸŸçš„ä¹˜ç§¯å¯¹åº”æ—¶åŸŸçš„å·ç§¯ã€‚ èµ°æ ·çš„åŸå› ä¸€å¼€å§‹æˆ‘ä»¬å°±è¯´è¿‡ï¼Œèµ°æ ·çš„å®è´¨æ˜¯åŸå›¾çš„é«˜é¢‘ä¿¡å·è¢«é”™è¯¯é‡‡æ ·ã€‚ç°åœ¨æˆ‘ä»¬çš„æ•°å­¦å·¥å…·å·²ç»è¶³ä»¥åˆ†æç©¶ç«Ÿä¸ºä»€ä¹ˆå‘ç”Ÿäº†é”™è¯¯é‡‡æ ·ï¼Œä»¥åŠå¦‚ä½•ç¼“è§£ä»–ä»¬äº†ã€‚ å…ˆæ¥çœ‹çœ‹ä¸ºä»€ä¹ˆæˆ‘ä»¬æ²¡æœ‰æ­£ç¡®é‡‡æ ·é«˜é¢‘ä¿¡å·ã€‚ å‡è®¾æˆ‘ä»¬å¸Œæœ›å¯¹è¿™æ ·çš„å‡½æ•°è¿›è¡Œé‡‡æ ·ï¼Œé€šè¿‡å‚…é‡Œå¶å˜æ¢æˆ‘ä»¬å¯ä»¥å¾—åˆ°å…¶é¢‘åŸŸï¼ˆå³ä¸€ï¼‰ æˆ‘ä»¬ä¹‹å‰è¯´è¿‡ï¼Œå¯ä»¥æŠŠè¿ç»­å‡½æ•°çš„å‡åŒ€é—´éš”é‡‡æ ·è¡¨ç¤ºä¸ºå†²æ¿€ä¸² $s_{T}(x)=\\sum_{n=-\\infty}^{\\infty}\\delta(x-nT)$ å’ŒåŸå‡½æ•° $f$ çš„ä¹˜ç§¯ï¼Œè€Œæˆ‘ä»¬ä¹Ÿå·²ç»çŸ¥é“å†²æ¿€ä¸²çš„å‚…é‡Œå¶å˜æ¢è¿˜æ˜¯å†²æ¿€ä¸² \\hat s_T(u)=\\frac{1}{T}\\sum_{n=-\\infty}^{\\infty}\\delta(u-\\frac{n}{T})å†ç»“åˆå·ç§¯å®šç† $\\mathcal{F}(s_Tf)=\\hat s_T * \\hat f$ï¼Œä»¥åŠâ€œå·ç§¯å°±æ˜¯å‡½æ•°å¹³ç§»åçš„åŠ æƒå’Œâ€ï¼Œæˆ‘ä»¬å°±èƒ½æ¨å‡ºï¼Œé‡‡æ ·ç»“æœçš„å‚…é‡Œå¶å˜æ¢å°±æ˜¯åŸå‡½æ•°çš„å‚…é‡Œå¶å˜æ¢çš„æ— ç©·ä¸ªå¤åˆ¶å„æŒ‰ $\\frac{n}{T}$ å¹³ç§»çš„å’Œã€‚ ç”±äºæˆ‘ä»¬çš„é‡‡æ ·é—´éš” $T$ ä¸å¤Ÿå°ï¼Œå³é‡‡æ ·ç‡ $\\frac{1}{T}$ ä¸å¤Ÿå¤§ï¼Œæ‰€ä»¥ç›¸é‚»çš„ä¸¤ä¸ªå¤åˆ¶é—´å‘ç”Ÿäº†é‡å ï¼Œå¯¼è‡´é«˜é¢‘ä¿¡å·å’Œä½é¢‘ä¿¡å·äº§ç”Ÿæ··åˆï¼Œè¿™å°±å¼•èµ·äº†èµ°æ ·ã€‚è€Œè¿™æ­£æ˜¯â€œé«˜é¢‘ä¿¡å·è¢«é”™è¯¯é‡‡æ ·â€çš„å®è´¨ã€‚ å½“æˆ‘ä»¬åœ¨å…‰æ …åŒ–æ—¶ï¼Œæˆ‘ä»¬è¿˜æŠŠåƒç´ å¡«ä¸Šäº†é¢œè‰²ï¼Œè¿™æ˜¯åœ¨â€œreconstructionâ€å³é‡å»ºå›¾åƒã€‚ä¸è¿‡ç”±äºåœ¨é‡‡æ ·æ—¶æˆ‘ä»¬å·²ç»å‘ç”Ÿäº†èµ°æ ·ï¼Œæ— è®ºæ€ä¹ˆé‡å»ºéƒ½ä¸ä¼šæœ‰ä¸€ä¸ªéå¸¸å®Œç¾çš„ç»“æœäº†ã€‚ æ»¤æ³¢å™¨å’Œèµ°æ ·çš„ç¼“è§£æ–¹æ³•ä¸ºäº†ç¼“è§£èµ°æ ·ï¼Œæˆ‘ä»¬è‡ªç„¶å°±è¦é¿å…å‘ç”Ÿé‡å ã€‚é¿å…å‘ç”Ÿé‡å çš„æ€è·¯ä¸»è¦æœ‰ä¸¤ç§ï¼š å¢åŠ é‡‡æ ·ç‡ï¼Œè¿™æ ·å°±èƒ½è®©ç›¸é‚»çš„ä¸¤ä¸ªå¤åˆ¶è·ç¦»å¢å¤§ã€‚ ç”¨æ»¤æ³¢å™¨å‡å¼±é«˜é¢‘ä¿¡å·çš„å¼ºåº¦ã€‚ å¯¹å›¾åƒçš„å…‰æ …åŒ–æ¥è¯´ï¼Œå¢åŠ åˆ†è¾¨ç‡å°±å¯¹åº”å‰è€…ï¼›åœ¨é‡‡æ ·å‰å¯¹åŸå›¾åº”ç”¨å„ç§æ»¤æ³¢å™¨å°±å¯¹åº”åè€…ã€‚ æˆ‘ä»¬å½“ç„¶ä¼šé—®ï¼Œå¢åŠ é‡‡æ ·ç‡èƒ½ç¼“è§£èµ°æ ·ï¼Œé‚£å¢åŠ åˆ°å¤šå¤§åˆé€‚å‘¢ï¼Ÿæˆ‘ä»¬å¸Œæœ›ç›¸é‚»çš„ä¸¤ä¸ªå¤åˆ¶é—´çš„è·ç¦»è¶³å¤Ÿå¤§ä»¥è‡³äºä¸å‘ç”Ÿé‡å ï¼Œè¿™å°±éœ€è¦è¾“å…¥ä¿¡å·çš„æœ€é«˜é¢‘ç‡å°äºé‡‡æ ·é¢‘ç‡çš„ä¸€åŠã€‚é‡‡æ ·é¢‘ç‡çš„ä¸€åŠä¹Ÿè¢«ç§°ä¸ºå¥ˆå¥æ–¯ç‰¹é¢‘ç‡ã€‚ç†è®ºä¸Šè¯´ï¼Œåªè¦å¥ˆå¥æ–¯ç‰¹é¢‘ç‡é«˜äºè¢«é‡‡æ ·ä¿¡å·çš„æœ€é«˜é¢‘ç‡ï¼Œæˆ‘ä»¬å°±èƒ½å®Œç¾å¤åŸåŸä¿¡å·ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹å‡ ä¸ªå¸¸è§çš„æ»¤æ³¢å™¨ï¼Œå®ƒä»¬å¸¸è¢«ç”¨äºå’Œåˆ«çš„å‡½æ•°åšå·ç§¯ã€‚ç”±äºæˆ‘ä»¬çŸ¥é“å·ç§¯å¯ä»¥è¢«ç†è§£ä¸ºä¸€ç§â€œåŠ æƒå¹³å‡â€ï¼Œæ‰€ä»¥æˆ‘ä»¬å¸Œæœ›æ»¤æ³¢å™¨éƒ½æ˜¯å½’ä¸€åŒ–çš„ã€‚ åç§° å…¬å¼ Box filterï¼ˆç¦»æ•£ï¼‰ $a_{\\text{box},r}[i] = \\begin{cases} 1/(2r + 1) & |i| \\le r, \\\\ 0 & \\text{otherwise}. \\end{cases}$ Box filterï¼ˆè¿ç»­ï¼‰ $f_{\\text{box},r}(x) = \\begin{cases} 1/(2r) & -r \\le x < r, \\\\ 0 & \\text{otherwise}. \\end{cases}$ Tent filter $f_{\\text{tent}}(x) = \\begin{cases} 1 - |x| & |x| < 1, \\\\ 0 & \\text{otherwise}; \\end{cases}$ Gaussian filter $f_{g, \\sigma}(x) = \\frac{1}{\\sigma\\sqrt{2\\pi}}e^{-x^2/2\\sigma^2}$ åç§° å…¬å¼ B-Spline Cubic Filter $f_B(x) = \\frac{1}{6} \\begin{cases} -3(1 - |x|)^3 + 3(1 - |x|)^2 + 3(1 - |x|) + 1 & -1 \\le x \\le 1, \\\\ (2 - |x|)^3 & 1 \\le |x| \\le 2, \\\\ 0 & \\text{otherwise}. \\end{cases}$ Catmull-Rom Cubic Filter $f_C(x) = \\frac{1}{2} \\begin{cases} -3(1 - |x|)^3 + 4(1 - |x|)^2 + (1 - |x|) & -1 \\le x \\le 1, \\\\ (2 - |x|)^3 - (2 - |x|)^2 & 1 \\le |x| \\le 2, \\\\ 0 & \\text{otherwise}. \\end{cases}$ Mitchell-Netravali Cubic Filter $f_M(x) = \\frac{1}{3}f_B(x) + \\frac{2}{3}f_C(x) \\\\ = \\frac{1}{18} \\begin{cases} -21(1 - |x|)^3 + 27(1 - |x|)^2 + 9(1 - |x|) + 1 & -1 \\le x \\le 1, \\\\ 7(2 - |x|)^3 - 6(2 - |x|)^2 & 1 \\le |x| \\le 2, \\\\ 0 & \\text{otherwise}. \\end{cases}$ é™¤äº†è¿‡æ»¤é«˜é¢‘ä¿¡å·ä¹‹å¤–ï¼Œæ»¤æ³¢å™¨è¿˜åœ¨é‡å»ºå›¾åƒæ—¶å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚è¿˜è®°å¾—å—ï¼Œç¦»æ•£-è¿ç»­å·ç§¯èƒ½æŠŠä¸€ç³»åˆ—ç¦»æ•£ç‚¹å˜æˆä¸€ä¸ªè¿ç»­å‡½æ•°ã€‚åœ¨æ ¹æ®é‡‡æ ·ç‚¹é‡å»ºå›¾åƒæ—¶ï¼Œæˆ‘ä»¬åŸºæœ¬å°±æ˜¯åœ¨åšé‡‡æ ·ç‚¹å’Œæ»¤æ³¢å™¨çš„å·ç§¯ã€‚åœ¨å…‰æ …åŒ–çš„â€œæŠŠæ¯ä¸ªåƒç´ ç‚¹çš„ä¸­å¿ƒé‡‡æ ·é¢œè‰²å¡«åˆ°åƒç´ ç‚¹ä¸Šâ€è¿™ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬å°±æ˜¯åœ¨å°†é‡‡æ ·ç‚¹å’Œ Box filter åšå·ç§¯ã€‚ æ€»è€Œè¨€ä¹‹ï¼Œä¸ºäº†ç¼“è§£èµ°æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥å›¾åƒç»†èŠ‚ä¸°å¯Œåº¦ä¸ºä»£ä»·ï¼Œå…ˆç”¨ä½é€šæ»¤æ³¢å™¨æ»¤æ³¢ï¼Œå†é‡‡æ ·+é‡å»ºã€‚å½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬æœ‰æ›´é«˜åˆ†è¾¨ç‡çš„å±å¹•å°±æ›´å¥½äº†~ å…¶ä»–å°çŸ¥è¯†å¸¸è§æ»¤æ³¢å™¨çš„å‚…é‡Œå¶å˜æ¢ å·ç§¯çš„å•ä½å…ƒä»»ä½•ç¦»æ•£ä¿¡å·å’Œå•ä½è„‰å†²åºåˆ—åšå·ç§¯ï¼Œç»“æœè¿˜æ˜¯åŸæœ¬çš„ç¦»æ•£ä¿¡å· \\delta[n] = \\begin{cases} 1, & n = 0 \\\\ 0, & n \\neq 0 \\end{cases}ä»»ä½•è¿ç»­ä¿¡å·å’Œç‹„æ‹‰å…‹å‡½æ•°åšå·ç§¯ï¼Œç»“æœè¿˜æ˜¯åŸæœ¬çš„è¿ç»­ä¿¡å· \\delta(t) = \\begin{cases} \\infty, & t = 0 \\\\ 0, & t \\neq 0 \\end{cases}äºŒç»´å·ç§¯å’ŒäºŒç»´æ»¤æ³¢å™¨æˆ‘ä»¬è¿™é‡Œåªç»™å‡ºè¿ç»­-è¿ç»­çš„äºŒç»´å·ç§¯ï¼Œåˆ«çš„æƒ…å†µéƒ½å·®ä¸å¤šã€‚ \\begin{align*} &(f*g)(x,y)=\\int\\int f(x-x',y-y')g(x',y')dx'dy' \\end{align*}å¯¹æ»¤æ³¢å™¨ $f(x)$ï¼Œæˆ‘ä»¬ç®€å•åœ°å®šä¹‰ $g(x,y)=f(x)f(y)$ å°±å¾—åˆ°äº†è¿™ä¸ªæ»¤æ³¢å™¨å¯¹åº”çš„äºŒç»´æ»¤æ³¢å™¨ã€‚ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ€§è´¨æ˜¯ï¼Œå¦‚æœ $f$ æ˜¯å½’ä¸€åŒ–çš„ï¼Œé‚£ä¹ˆ $g$ ä¹Ÿæ˜¯å½’ä¸€åŒ–çš„ã€‚ ä¼½é©¬å€¼æ˜¾ç¤ºå™¨çš„æ˜¾ç¤ºäº®åº¦å…³äºè¾“å…¥ä¿¡å·ä¸æ˜¯çº¿æ€§å…³ç³»ã€‚å‡è®¾è¾“å…¥ä¿¡å·ä¸º $a\\in[0,1]$ï¼Œåˆ™æœ‰ \\text{Displayed intensity}=(\\text{Maximum intensity})a^\\gammaè¿™é‡Œçš„ $\\gamma$ ä¸€èˆ¬åœ¨ $2.2$ å·¦å³ã€‚è™½ç„¶åœ¨æœ€å¼€å§‹è¿™æ˜¯ CRT æ˜¾ç¤ºå™¨çš„ç‰©ç†ç‰¹æ€§æ‰€è‡´ï¼Œä½†æœ‰è¶£çš„æ˜¯ï¼Œäººçœ¼ä¹Ÿæ°å¥½å¯¹æš—éƒ¨å˜åŒ–æ¯”äº®éƒ¨å˜åŒ–æ›´æ•æ„Ÿï¼Œæ‰€ä»¥å®ƒç°åœ¨ä½œä¸ºä¸€ä¸ªåˆ»æ„çš„è®¾è®¡ä¿ç•™äº†ä¸‹æ¥ã€‚ ä¼½é©¬çŸ«æ­£åœ¨å½±åƒç³»ç»Ÿä¸­ä¹Ÿæœ‰æå¤§ä½œç”¨ã€‚å‡è®¾æˆ‘ä»¬åœ¨æ‹æ‘„ä¸€ä¸ªè‹¹æœçš„ç…§ç‰‡ï¼Œè‹¹æœçš„ç‰©ç†äº®åº¦æ˜¯ $0.5$ï¼Œç›¸æœºå¿ å®åœ°æŠŠå®ƒè®°å½•äº†ä¸‹æ¥ã€‚è€Œå½“æ˜¾ç¤ºå™¨æ˜¾ç¤ºæ—¶ï¼Œå°±æ˜¾ç¤ºå‡ºäº† $0.5^{2.2}\\approx 0.22$ çš„ç‰©ç†äº®åº¦ï¼Œè¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚å› æ­¤åœ¨æˆ‘ä»¬æ‹æ‘„ç…§ç‰‡ä¹‹åï¼Œç›¸æœºçš„å›¾åƒå¤„ç†å™¨å°±ä¼šè‡ªåŠ¨å¯¹ç…§ç‰‡è¿›è¡Œä¼½é©¬çŸ«æ­£ã€‚ å›¾åƒé”åŒ–Unsharp Mask æ˜¯ä¸€ä¸ªç»å…¸çš„å›¾åƒé”åŒ–ç®—æ³•ã€‚ä»¤é«˜æ–¯æ¨¡ç³Šæ ¸ä¸º $G$ï¼Œå†²æ¿€å‡½æ•°ä¸º $\\delta$ï¼Œå®ƒå…ˆæå–åŸå§‹å›¾åƒçš„é«˜é¢‘ä¿¡å· I_{detail} = I_{orig} - I_{orig} * Gå†æŠŠè¿™äº›é«˜é¢‘ä¿¡å·åŠ å…¥å›åŸå›¾ä¸­ I_{sharp} = I_{orig} + \\alpha I_{detail}ç»¼åˆèµ·æ¥å°±æ˜¯ I_{sharp} =I_{orig}*((1+\\alpha)\\delta-G)å›¾åƒç¼©æ”¾ç›´æ¥å¯¹ä¸€ä¸ªåƒç´ åŒ–çš„å›¾åƒé‡‡æ ·è™½ç„¶æ•ˆç‡å¾ˆé«˜ï¼Œä½†æ•ˆæœä¸ä½³ã€‚å…ˆç”¨è¿ç»­çš„æ»¤æ³¢å™¨é‡å»ºä¿¡å·ï¼Œå†ç”¨ä½é€šæ»¤æ³¢å™¨è¿‡æ»¤é«˜é¢‘ä¿¡å·ï¼Œå†é‡‡æ ·ä¼šå¾—åˆ°æ›´å¥½çš„ç»“æœï¼Œè¿™è¢«ç§°ä¸º resamplingï¼Œé‡é‡‡æ ·ã€‚","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"GAMES101","slug":"å…¬å¼€è¯¾/GAMES101","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/"},{"name":"Notes","slug":"å…¬å¼€è¯¾/GAMES101/Notes","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/Notes/"}],"tags":[]},{"title":"Assignment 1 Transformation","slug":"learning/open-course/GAMES101/Hw/Hw1-transformation","date":"2025-08-22T03:00:58.000Z","updated":"2025-08-22T03:14:43.978Z","comments":true,"path":"wiki/learning/open-course/GAMES101/Hw/Hw1-transformation/","permalink":"http://rinevard.github.io/wiki/learning/open-course/GAMES101/Hw/Hw1-transformation/","excerpt":"","text":"æœ¬æ¬¡ä½œä¸šè¦æ±‚æˆ‘ä»¬å®ç°æ—‹è½¬çŸ©é˜µã€æŠ•å½±çŸ©é˜µã€‚æˆ‘ä»¬å…ˆç®€å•çœ‹ä¸‹ä½œä¸šæ˜¯æ€ä¹ˆåšçš„ï¼Œå†çœ‹çœ‹ä»£ç æ¡†æ¶é‡Œçš„å‡ ä¸ªæœ‰è¶£çš„åœ°æ–¹ã€‚ ä½œä¸šå®ç°ä¸¤ä¸ªæ—‹è½¬çŸ©é˜µç»• $z$ è½´çš„æ—‹è½¬çŸ©é˜µå®ç°èµ·æ¥å¾ˆç®€å•ï¼ŒæŠŠè¯¾ä¸Šçš„å†…å®¹ç¿»è¯‘æˆä»£ç å°±å¥½ã€‚åœ¨ä½¿ç”¨ std çš„ sin å’Œ cos æ—¶è¦æ³¨æ„æŠŠè§’åº¦è½¬æ¢æˆå¼§åº¦ã€‚ Eigen::Matrix4f get_model_matrix(float rotation_angle) &#123; Eigen::Matrix4f model = Eigen::Matrix4f::Identity(); float angle_rad = rotation_angle * MY_PI / 180.0; Eigen::Matrix4f rotate; float sine = std::sin(angle_rad); float cosine = std::cos(angle_rad); rotate &lt;&lt; cosine, -sine, 0, 0, sine, cosine, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1; model = rotate * model; return model; &#125; æé«˜é¡¹é‡Œçš„æ—‹è½¬çŸ©é˜µç”¨è¯¾ä¸Šè®²çš„ Rodriguesâ€™ rotation formula å°±è¡Œï¼š /* Computes the 4x4 rotation matrix representing a rotation of rotation_angle (in degree) around a given normalized axis vector that passes through the origin, using Rodrigues' rotation formula. */ Eigen::Matrix4f get_rotation(Vector3f axis, float rotation_angle) &#123; float angle_rad = rotation_angle * MY_PI / 180.0; Eigen::Matrix3f rot_mat = std::cos(angle_rad) * Eigen::Matrix3f::Identity(); rot_mat += (1 - std::cos(angle_rad)) * axis * axis.transpose(); Eigen::Matrix3f cross_product_mat; cross_product_mat &lt;&lt; 0, -axis.z(), axis.y(), axis.z(), 0, -axis.x(), -axis.y(), axis.x(), 0; rot_mat += std::sin(angle_rad) * cross_product_mat; Eigen::Matrix4f trans_mat = Eigen::Matrix4f::Identity(); trans_mat.topLeftCorner&lt;3, 3>() = rot_mat; return trans_mat; &#125; æŠ•å½±çŸ©é˜µæŠ•å½±çŸ©é˜µå°±ç›¸å¯¹å¤æ‚ä¸€äº›äº†ï¼Œå…ˆä¸Šä»£ç  Eigen::Matrix4f get_projection_matrix(float eye_fov, float aspect_ratio, float zNear, float zFar) &#123; // Students will implement this function Eigen::Matrix4f projection = Eigen::Matrix4f::Identity(); Eigen::Matrix4f perspective; float cotangent = 1.0 / std::tan(eye_fov / 2.0); float z_delta = zFar - zNear; perspective &lt;&lt; cotangent / aspect_ratio, 0, 0, 0, 0, cotangent, 0, 0, 0, 0, -(zFar + zNear) / z_delta, -2 * zFar * zNear / z_delta, 0, 0, -1, 0; projection = perspective * projection; return projection; &#125; é¦–å…ˆæˆ‘ä»¬ä¼šå‘ç°è¾“å…¥çš„ zNear å’Œ zFar éƒ½æ˜¯æ­£æ•°ï¼Œä»–ä»¬è¡¨ç¤ºè¿‘å¹³é¢å’Œè¿œå¹³é¢åˆ°åŸç‚¹çš„è·ç¦»ï¼Œè¿™ä¸è¯¾ä¸Šè®²çš„ä¸åŒã€‚è¯¾ä¸Šè®²çš„ $n$ å’Œ $f$ è¡¨ç¤ºè¿‘å¹³é¢å’Œè¿œå¹³é¢åœ¨ $z$ è½´çš„åæ ‡ï¼Œä»–ä»¬æ˜¯è´Ÿæ•°ã€‚ ç„¶åæˆ‘ä»¬åˆ†æ rasterizer.cpp é‡Œçš„ draw å‡½æ•°ï¼Œä¸‹é¢è¿™æ®µä»£ç é‡Œï¼Œv æ˜¯ä¸‰è§’å½¢çš„ä¸‰ä¸ªé¡¶ç‚¹æ„æˆçš„æ•°ç»„ï¼Œä¸‰ä¸ªé¡¶ç‚¹éƒ½å·²ç»è¢«å˜æ¢åˆ°äº† $[-1,1]^3$ çš„æ­£æ–¹ä½“ä¸­ã€‚ æ³¨æ„ vert.z() = vert.z() * f1 + f2 è¿™è¡Œä»£ç ï¼ŒæŠŠ $-1$ ä»£å…¥å³è¾¹å¾—åˆ° $-n$ï¼Œ$1$ ä»£å…¥å³è¾¹å¾—åˆ° $-f$ï¼Œå› æ­¤æˆ‘ä»¬æœ‰ç†ç”±çŒœæµ‹ $[-n,-f]$ è¢«æ˜ å°„åˆ°äº† $[-1,1]$. float f1 = (100 - 0.1) / 2.0; float f2 = (100 + 0.1) / 2.0; // ... for (auto &amp; vert : v) &#123; vert.x() = 0.5*width*(vert.x()+1.0); vert.y() = 0.5*height*(vert.y()+1.0); vert.z() = vert.z() * f1 + f2; &#125; æ€»ç»“ä¸€ä¸‹æˆ‘ä»¬çš„å‘ç°ï¼š è¾“å…¥çš„ zNear å’Œ zFar éƒ½æ˜¯æ­£æ•°ï¼Œè¡¨ç¤ºè¿‘å¹³é¢å’Œè¿œå¹³é¢åˆ°åŸç‚¹çš„è·ç¦» $[-n,-f]$ è¢«æ˜ å°„åˆ°äº† $[-1,1]$ æœ€ç»ˆæˆ‘ä»¬èƒ½å†™å‡ºè¿™æ ·çš„æŠ•å½±çŸ©é˜µï¼š \\large \\text{M}_\\text{per} = \\begin{bmatrix} \\frac{1}{\\text{aspect} \\times \\tan(\\frac{\\text{fov}}{2})} & 0 & 0 & 0 \\\\ 0 & \\frac{1}{\\tan(\\frac{\\text{fov}}{2})} & 0 & 0 \\\\ 0 & 0 & -\\frac{f+n}{f-n} & -\\frac{2fn}{f-n} \\\\ 0 & 0 & -1 & 0 \\end{bmatrix}ç¿»è¯‘æˆä»£ç å°±å¥½ã€‚ ä»£ç æ¡†æ¶é‡Œæœ‰è¶£çš„åœ°æ–¹ind çš„ä½œç”¨é¦–å…ˆæˆ‘ä»¬çœ‹å‘ main.cpp çš„ main å‡½æ•°é‡Œçš„è¿™æ®µä»£ç  std::vector&lt;Eigen::Vector3f> pos&#123;&#123;2, 0, -2&#125;, &#123;0, 2, -2&#125;, &#123;-2, 0, -2&#125;&#125;; std::vector&lt;Eigen::Vector3i> ind&#123;&#123;0, 1, 2&#125;&#125;; pos æ˜¾ç„¶æ˜¯ä¸‰è§’å½¢çš„ä¸‰ä¸ªé¡¶ç‚¹ï¼Œä½† ind æ˜¯åšä»€ä¹ˆçš„ï¼Ÿuh actuallyğŸ¤“â˜ï¸å®ƒå®šä¹‰äº†å¦‚ä½•å°†é¡¶ç‚¹è¿æ¥èµ·æ¥ã€‚å¯¹ä¸‰è§’å½¢æ¥è¯´å®ƒå½“ç„¶æ²¡ä»€ä¹ˆç”¨ï¼Œä½†å¯¹å¤šè¾¹å½¢æ¥è¯´ï¼Œå®ƒå°±å¾ˆæœ‰ç”¨äº†ã€‚ æ¯”å¦‚è¯´ï¼Œæƒ³è±¡ä¸€ä¸‹æˆ‘ä»¬åœ¨ç”»ä¸€ä¸ªå…­è¾¹å½¢ï¼Œæˆ‘ä»¬éœ€è¦å…­ä¸ªé¡¶ç‚¹ã€‚ä½†ç”±äºåœ¨æ¸²æŸ“æ—¶æˆ‘ä»¬ä¸»è¦ç»˜åˆ¶ä¸‰è§’å½¢ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æŠŠå…­è¾¹å½¢æ‹†åˆ†æˆå¤šä¸ªä¸‰è§’å½¢ï¼Œè€Œæ‹†åˆ†å‡ºçš„æ¯ä¸ªä¸‰è§’å½¢å°±å¯¹åº”ç€ ind é‡Œçš„ä¸€ä¸ªå…ƒç´ äº†ã€‚ å¯¹å…­è¾¹å½¢æ¥è¯´ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå®šä¹‰ä¸‹é¢è¿™æ ·çš„ pos å’Œ ind std::vector&lt;Eigen::Vector3f> pos &#123; &#123;2, 0, -2&#125;, // 0: å³ &#123;1, 1.732, -2&#125;, // 1: å³ä¸Š &#123;-1, 1.732, -2&#125;, // 2: å·¦ä¸Š &#123;-2, 0, -2&#125;, // 3: å·¦ &#123;-1, -1.732, -2&#125;,// 4: å·¦ä¸‹ &#123;1, -1.732, -2&#125; // 5: å³ä¸‹ &#125;; std::vector&lt;Eigen::Vector3i> ind &#123; &#123;0, 1, 2&#125;, &#123;0, 2, 3&#125;, &#123;0, 3, 4&#125;, &#123;0, 4, 5&#125; &#125;; id çš„ä½œç”¨ç»§ç»­çœ‹å‘ main.cpp çš„ main å‡½æ•°ï¼ŒæŠŠç›®å…‰æŠ•å‘è¿™æ®µä»£ç  auto pos_id = r.load_positions(pos); auto ind_id = r.load_indices(ind); // ... r.draw(pos_id, ind_id, rst::Primitive::Triangle); åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æŠŠ id ä¼ å…¥äº† draw å‡½æ•°æ¥ç”»å›¾ã€‚ä½†ä¸ºä»€ä¹ˆè¦ç”¨ id å‘¢ï¼Ÿç›´æ¥ &amp; ä¼ å‚ä¸è¡Œå—ï¼Ÿ ã€TODOï¼šæˆ‘ä¸çŸ¥é“ã€‚AIè¯´åœ¨æ­£å¼çš„æ¸²æŸ“ä»£ç é‡Œï¼Œæˆ‘ä»¬ä¼šåœ¨loadæ—¶åšä¸€äº›æ“ä½œè¯¸å¦‚æŠŠæ•°æ®ä¸Šä¼ åˆ°æ˜¾å­˜ï¼Œæˆ–è€…é‡æ–°ç»„ç»‡ä¸Šä¼ çš„å„ä¸ªæ•°æ®æ¥æé«˜æ•ˆç‡ï¼Œä½†å’±ä¹Ÿä¸çŸ¥é“æ˜¯ä¸æ˜¯çœŸçš„ã€‚ã€‘","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"GAMES101","slug":"å…¬å¼€è¯¾/GAMES101","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/"},{"name":"Assignments","slug":"å…¬å¼€è¯¾/GAMES101/Assignments","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/Assignments/"}],"tags":[]},{"title":"Note 1 Transformation","slug":"learning/open-course/GAMES101/Notes/Note1-transformation","date":"2025-08-19T07:10:28.000Z","updated":"2025-08-22T03:14:43.967Z","comments":true,"path":"wiki/learning/open-course/GAMES101/Notes/Note1-transformation/","permalink":"http://rinevard.github.io/wiki/learning/open-course/GAMES101/Notes/Note1-transformation/","excerpt":"","text":"2D Transformationåœ¨äºŒç»´ç©ºé—´ä¸­ï¼Œæˆ‘ä»¬èƒ½ç”¨äºŒç»´çŸ©é˜µè¡¨ç¤ºæ‰€æœ‰çš„çº¿æ€§å˜æ¢ã€‚ä½†äºŒç»´ç©ºé—´ä¸­çš„å¹³ç§»åœ¨äºŒç»´ç©ºé—´ä¸­ä¸æ˜¯çº¿æ€§å˜æ¢ï¼Œå› æ­¤æˆ‘ä»¬å¸Œæœ›æ‰¾åˆ°å¦ä¸€ä¸ªç©ºé—´ï¼Œå¹¶å°†äºŒç»´ç©ºé—´åµŒå…¥ï¼Œè®©äºŒç»´å¹³ç§»åœ¨è¿™ä¸ªç©ºé—´ä¸­å˜ä¸ºçº¿æ€§å˜æ¢ã€‚æŠŠç¬›å¡å°”åæ ‡æ‰©å±•ä¸ºé½æ¬¡åæ ‡ï¼Œå°±å¾—åˆ°äº†è¿™æ ·çš„ç©ºé—´ã€‚ å¯¹äºŒç»´ç©ºé—´çš„ä¸€ç‚¹ $(x,y)$ï¼Œä¸‰å…ƒç»„ $(xZ,yZ,Z)$ å³ä¸ºè¯¥ç‚¹çš„é½æ¬¡åæ ‡ã€‚å¦‚ $(1,2)$ å¯è¡¨ç¤ºä¸º $(1,2,1)$ æˆ– $(100,200,100)$. æ¢å¥è¯è¯´ï¼ŒäºŒç»´ç©ºé—´çš„ä»»ä½•ç‚¹éƒ½èƒ½è¡¨ç¤ºä¸ºé½æ¬¡åæ ‡ $(X,Y,Z)$ï¼Œå…¶ä¸­ $Z\\neq 0$. å¦å¤–ï¼Œå¦‚æœæˆ‘ä»¬æŠŠæ— ç©·è¿œç‚¹ä¹Ÿè€ƒè™‘è¿›æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨ $(x,y,0)$ è¡¨ç¤ºæ— ç©·è¿œç‚¹ã€‚ å½é‡Œå’•å™œè¯´ä»€ä¹ˆå‘¢ï¼Œå¿«å‘Šè¯‰æˆ‘æ€ä¹ˆç”¨çº¿æ€§å˜æ¢è¡¨ç¤ºå¹³ç§»ï¼ å¯¹äºŒç»´ç©ºé—´çš„ä¸€ç‚¹ $(x,y)$ï¼Œé¦–å…ˆå°†å®ƒè½¬åŒ–ä¸ºé½æ¬¡åæ ‡å¾—åˆ° $(x,y,1)$ï¼Œç„¶åä¸ä¸‹é¢çš„çŸ©é˜µç›¸ä¹˜ M = \\begin{bmatrix} 1 & 0 & t_x \\\\ 0 & 1 & t_y \\\\ 0 & 0 & 1 \\end{bmatrix}å°±å¾—åˆ°äº† $(x+t_x,y+t_y,1)$. ç„¶åå†è½¬æ¢å›ç¬›å¡å°”åæ ‡ï¼Œå°±å¾—åˆ°äº† $(x+t_x,y+t_y)$. è¿™æ ·ä¸€æ¥ï¼Œæ—‹è½¬ã€å¹³ç§»å°±èƒ½ç»Ÿä¸€æˆä¸‹é¢çš„å½¢å¼ï¼š M = \\begin{bmatrix} \\cos \\theta & -\\sin \\theta & t_x \\\\ \\sin \\theta & \\cos \\theta & t_y \\\\ 0 & 0 & 1 \\end{bmatrix}3D Transformationä¸äºŒç»´çš„æƒ…å†µç±»ä¼¼ï¼Œæˆ‘ä»¬ä¹ŸæŠŠä¸‰ç»´ç©ºé—´åµŒå…¥ä¸€ä¸ªæ–°ç©ºé—´ã€‚ å¯¹ä¸‰ç»´ç©ºé—´çš„ä¸€ç‚¹ $(x,y,z)$ï¼Œä¸‰å…ƒç»„ $(xS,yS,zS,S)$ å³ä¸ºè¯¥ç‚¹çš„é½æ¬¡åæ ‡ã€‚å¦‚ $(1,2,3)$ å¯è¡¨ç¤ºä¸º $(1,2,3,1)$ æˆ– $(100,200,300,100)$. æ¢å¥è¯è¯´ï¼Œä¸‰ç»´ç©ºé—´çš„ä»»ä½•ç‚¹éƒ½èƒ½è¡¨ç¤ºä¸ºé½æ¬¡åæ ‡ $(X,Y,Z,S)$ï¼Œå…¶ä¸­ $S\\neq 0$. æˆ‘ä»¬è¿™é‡Œè®¨è®ºå³æ‰‹åæ ‡ç³»ï¼Œä¸‹é¢ç»™å‡ºæŒ‰å³æ‰‹å®šåˆ™æ—‹è½¬ $\\theta$ è§’åº¦çš„çŸ©é˜µï¼š R_x(\\theta) = \\begin{bmatrix} 1 & 0 & 0 & 0 \\\\ 0 & \\cos \\theta & -\\sin \\theta & 0 \\\\ 0 & \\sin \\theta & \\cos \\theta & 0 \\\\ 0 & 0 & 0 & 1 \\end{bmatrix} R_y(\\theta) = \\begin{bmatrix} \\cos \\theta & 0 & \\sin \\theta & 0 \\\\ 0 & 1 & 0 & 0 \\\\ -\\sin \\theta & 0 & \\cos \\theta & 0 \\\\ 0 & 0 & 0 & 1 \\end{bmatrix} R_z(\\theta) = \\begin{bmatrix} \\cos \\theta & -\\sin \\theta & 0 & 0 \\\\ \\sin \\theta & \\cos \\theta & 0 & 0 \\\\ 0 & 0 & 1 & 0 \\\\ 0 & 0 & 0 & 1 \\end{bmatrix}ä½ ä¼šæ³¨æ„åˆ°æ²¿ $y$ è½´æ—‹è½¬çš„çŸ©é˜µå’Œåˆ«çš„ä¸ä¸€æ ·ï¼Œä½†è¿™æ˜¯å®Œå…¨æ­£ç¡®çš„ï¼Œè®¤çœŸç®—ä¸€ç®—å°±å¥½äº†ã€‚ ï¼ˆæˆ‘æ²¡æ„Ÿè§‰è¿™é‡Œæœ‰ä»€ä¹ˆâ€œæ·±åˆ»å«ä¹‰â€ï¼Œä½†æ„Ÿè§‰å³ä½¿æœ‰ä¹Ÿåº”è¯¥ä¸ä¼šå¾ˆæœ‰ç”¨â€¦â€¦ï¼‰ ï¼ˆä¸è¿‡ä¸çŸ¥é“å¦‚æœæ¨å¹¿åˆ° $n$ ç»´æ—‹è½¬ä¼šä¸ä¼šæœ‰ç”¨ï¼‰ ï¼ˆå¯æˆ‘ä»¬ç”Ÿæ´»åœ¨ä¸‰æ¬¡å…ƒï¼ï¼‰ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ—‹è½¬çŸ©é˜µéƒ½æ˜¯æ­£äº¤çŸ©é˜µï¼Œæ‰€ä»¥å®ƒçš„è½¬ç½®å°±æ˜¯å®ƒçš„é€†ã€‚ ä¸–ç•Œä¸Šè¿˜å­˜åœ¨ä¸€ä¸ªå«åš Rodrigues æ—‹è½¬å…¬å¼çš„ä¸œè¥¿ï¼Œå®ƒç»™å‡ºäº†å‘é‡ $v$ ç»•å•ä½å‘é‡ $k$ æ—‹è½¬ $\\theta$ è§’åº¦å¾—åˆ°çš„ç»“æœã€‚ï¼ˆæŒ‰å³æ‰‹å®šåˆ™æ—‹è½¬ï¼‰ \\mathbf{v}_{\\text{rot}} = \\mathbf{v} \\cos\\theta + (\\mathbf{k} \\times \\mathbf{v}) \\sin\\theta + \\\\ \\mathbf{k}(\\mathbf{k} \\cdot \\mathbf{v})(1 - \\cos\\theta) å½“ç„¶ä¹Ÿå¯ä»¥æŠŠè¿™ä¸ªæ—‹è½¬çŸ©é˜µå†™å‡ºæ¥ï¼š \\mathbf{R}(\\mathbf{k}, \\theta) = \\cos(\\theta)\\mathbf{I} + (1 - \\cos(\\theta))\\mathbf{k}\\mathbf{k}^T + \\sin(\\theta)\\begin{bmatrix} 0 & -k_z & k_y \\\\ k_z & 0 & -k_x \\\\ -k_y & k_x & 0 \\end{bmatrix}æœ€å³è¾¹é‚£ä¸ªçŸ©é˜µæ˜¯ $k$ çš„å‰ä¹˜çŸ©é˜µå•¦~ Viewing transformation2D å’Œ 3D transformation éƒ½æ˜¯åŸºç¡€å˜æ¢ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç ”ç©¶æ¸¸æˆé‡Œçš„ç”»é¢æ˜¯å¦‚ä½•æ¸²æŸ“åˆ°å±å¹•ä¸Šçš„ã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ‘„åƒæœºã€ä¸¤ä¸ªæ–¹å—ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯æ€ä¹ˆè®¡ç®—å‡ºæ‘„åƒæœºæ‹æ‘„çš„ç”»é¢çš„å‘¢ï¼ˆå‚è€ƒå³ä¸‹è§’ï¼‰ï¼Ÿ æˆ‘ä»¬æŒ‰ç…§ä¸‹é¢çš„æµç¨‹è¿›è¡Œæ“ä½œï¼š Camera transformationé¦–å…ˆï¼Œæˆ‘ä»¬å˜æ¢ç©ºé—´è®©æ‘„åƒæœºä½äºåæ ‡åŸç‚¹ï¼Œä¸”é¢å‘ $z$ è½´è´Ÿæ–¹å‘ï¼Œå¤´é¡¶æœ $y$ è½´æ­£æ–¹å‘ã€‚å¯¹ä¸Šå›¾æ¥è¯´ï¼Œå°±æ˜¯æŠŠ $w$ å˜æ¢ä¸º $z$ è½´ï¼ŒæŠŠ $v$ å˜æ¢ä¸º $y$ è½´ã€‚ å¯¹åº”çš„çŸ©é˜µæ˜¯ \\text{M}_{\\text{cam}} = \\begin{bmatrix} u_x & u_y & u_z & 0 \\\\ v_x & v_y & v_z & 0 \\\\ w_x & w_y & w_z & 0 \\\\ 0 & 0 & 0 & 1 \\end{bmatrix} \\times \\begin{bmatrix} 1 & 0 & 0 & -\\text{cam}_x \\\\ 0 & 1 & 0 & -\\text{cam}_y \\\\ 0 & 0 & 1 & -\\text{cam}_z \\\\ 0 & 0 & 0 & 1 \\end{bmatrix}è¿™é‡Œçš„å°æŠ€å·§æ˜¯ï¼Œæ—‹è½¬çŸ©é˜µçš„é€†æ˜¯å…¶è½¬ç½®ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆç®—å‡º $xyz$ è½´å˜æ¢åˆ° $uvw$ è½´çš„æ—‹è½¬çŸ©é˜µï¼Œå†å¯¹å…¶è½¬ç½®ï¼Œå°±å¾—åˆ°äº†æŠŠ $uvw$ å˜æ¢åˆ° $xyz$ çš„çŸ©é˜µã€‚ Projection transformationç„¶åï¼Œæˆ‘ä»¬æŠŠç›¸æœºæ‹æ‘„çš„åŒºåŸŸå˜æ¢åˆ° $[-1,1]^3$ ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªè§„èŒƒåŒ–ï¼Œä¸ºæœªæ¥æŠŠåŒºåŸŸæ”¾åˆ°å±å¹•ä¸Šåšå‡†å¤‡ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆç¡®å®šç›¸æœºèƒ½å¤Ÿæ‹æ‘„çš„åŒºåŸŸçš„èŒƒå›´ã€‚è¿™é‡Œæ¶‰åŠåˆ°çš„å˜é‡ä¸»è¦æœ‰ fovã€aspect ratioã€nearã€far. ä¸‹å›¾èƒ½æ¸…æ™°åœ°è§£é‡Š fov å’Œ aspect ratioã€‚fov å³ field of viewï¼Œè¡¨ç¤ºç”¨è§’åº¦è¡¡é‡çš„å¯è§èŒƒå›´ï¼›aspect ratio åˆ™æ˜¯æ˜¾ç¤ºåŒºåŸŸçš„å®½é«˜æ¯”ã€‚ near å’Œ far åˆ™å®šä¹‰äº†å‰”é™¤è¾¹ç•Œï¼Œæˆ‘ä»¬åªæ¸²æŸ“æ»¡è¶³ $z \\in [\\text{near}, \\text{far}]$ çš„ä¸œè¥¿ã€‚åŸç‚¹ã€è¿‘å¹³é¢å’ŒåŸå¹³é¢å…±åŒåˆ’åˆ†å‡ºäº†ä¸€å—æœ‰é™çš„ç©ºé—´ï¼Œè¿™å°±æ˜¯æ‘„åƒæœºæ‹æ‘„çš„åŒºåŸŸï¼ˆè§†é”¥ï¼‰ï¼Œæˆ‘ä»¬ä¼šæŠŠä»–å˜æ¢åˆ° $[-1,1]^3$ ä¸­ã€‚ å˜æ¢åˆ†ä¸ºä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥æ˜¯æŠŠè§†é”¥å˜æ¢ä¸ºé•¿æ–¹ä½“ï¼Œç¬¬äºŒæ­¥æŠŠé•¿æ–¹ä½“å˜æ¢ä¸º $[-1,1]^3$ çš„æ­£æ–¹ä½“ã€‚ åœ¨ç¬¬ä¸€æ­¥å˜æ¢æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›æ»¡è¶³ä»¥ä¸‹ä¸¤ç‚¹ï¼š near å’Œ far å¹³é¢ä¸Šçš„ç‚¹çš„ $z$ å€¼ä¸å˜ è¿‘å¤§è¿œå°ï¼Œä¸”ç¼©æ”¾æ¯”ä¾‹ç¬¦åˆç›¸ä¼¼ä¸‰è§’å½¢çš„è§„å¾‹ ç»“åˆé½æ¬¡åæ ‡ï¼Œæˆ‘ä»¬å°±èƒ½å¾—åˆ°ä»¥ä¸‹çŸ©é˜µï¼š \\begin{align*} \\text{M}_\\text{per} &= \\begin{bmatrix} \\frac{2}{r-l} & 0 & 0 & -\\frac{r+l}{r-l} \\\\ 0 & \\frac{2}{t-b} & 0 & -\\frac{t+b}{t-b} \\\\ 0 & 0 & \\frac{2}{n-f} & -\\frac{n+f}{n-f} \\\\ 0 & 0 & 0 & 1 \\end{bmatrix} \\times \\begin{bmatrix} n & 0 & 0 & 0 \\\\ 0 & n & 0 & 0 \\\\ 0 & 0 & n+f & -nf \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\\\ &= \\begin{bmatrix} \\frac{2n}{r-l} & 0 & -\\frac{r+l}{r-l} & 0 \\\\ 0 & \\frac{2n}{t-b} & -\\frac{t+b}{t-b} & 0 \\\\ 0 & 0 & \\frac{n+f}{n-f} & -\\frac{2nf}{n-f} \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\end{align*}ç¬¬ä¸€ä¸ªç­‰å·å³è¾¹çš„å¼å­ä¸­ï¼Œå³è¾¹çš„çŸ©é˜µæŠŠè§†é”¥å‹ç¼©ä¸ºä¸€ä¸ªé•¿æ–¹ä½“ï¼Œå·¦è¾¹çš„çŸ©é˜µæŠŠè¿™ä¸ªé•¿æ–¹ä½“å˜æ¢åˆ° $[-1,1]^3$. æˆ‘ä»¬å¯ä»¥æ ¹æ® $\\text{near},\\text{fov},\\text{aspectRatio}$ æ±‚å‡º $l,t,r,b$. \\begin{align*} &\\text{t} = -n \\times \\tan\\left(\\frac{\\text{fov}}{2}\\right) \\\\ &\\text{b} = -\\text{t} \\\\ &\\text{r} = \\text{t} \\times \\text{aspectRatio} \\\\ &\\text{l} = -\\text{r} \\end{align*} ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæŠ•å½±çŸ©é˜µå†™ä¸ºï¼š \\large \\text{M}_\\text{per} = \\begin{bmatrix} -\\frac{1}{\\text{aspect} \\times \\tan(\\frac{\\text{fov}}{2})} & 0 & 0 & 0 \\\\ 0 & -\\frac{1}{\\tan(\\frac{\\text{fov}}{2})} & 0 & 0 \\\\ 0 & 0 & \\frac{n+f}{n-f} & -\\frac{2nf}{n-f} \\\\ 0 & 0 & 1 & 0 \\end{bmatrix}Viewport transformationæœ€åï¼Œæˆ‘ä»¬ä¼šæŠŠ $[-1,1]^3$ çš„å†…å®¹çš„å®½é«˜æ˜ å°„ä¸ºå±å¹•å¤§å°ã€‚åœ¨è¿™ä¸ªå˜æ¢ä¸­ $z$ åæ ‡ä¸å˜ï¼Œå› æ­¤å˜æ¢çŸ©é˜µä¸ºï¼š \\large \\text{M}_\\text{viewport}= \\begin{bmatrix} \\frac{width}{2} & 0 & 0 & \\frac{width}{2} \\\\ 0 & \\frac{height}{2} & 0 & \\frac{height}{2} \\\\ 0 & 0 & 1 & 0 \\\\ 0 & 0 & 0 & 1 \\end{bmatrix}æ€»ç»“æ€»è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬çš„å˜æ¢çŸ©é˜µä¸º \\begin{align*} &\\text{M}=\\text{M}_\\text{viewport}\\text{M}_\\text{per}\\text{M}_\\text{cam} \\end{align*}å…¶ä¸­ \\begin{align*} &\\text{M}_{\\text{cam}} = \\begin{bmatrix} u_x & u_y & u_z & 0 \\\\ v_x & v_y & v_z & 0 \\\\ w_x & w_y & w_z & 0 \\\\ 0 & 0 & 0 & 1 \\end{bmatrix} \\times \\begin{bmatrix} 1 & 0 & 0 & -\\text{cam}_x \\\\ 0 & 1 & 0 & -\\text{cam}_y \\\\ 0 & 0 & 1 & -\\text{cam}_z \\\\ 0 & 0 & 0 & 1 \\end{bmatrix} \\\\ \\large &\\text{M}_\\text{per} = \\begin{bmatrix} -\\frac{1}{\\text{aspect} \\times \\tan(\\frac{\\text{fov}}{2})} & 0 & 0 & 0 \\\\ 0 & -\\frac{1}{\\tan(\\frac{\\text{fov}}{2})} & 0 & 0 \\\\ 0 & 0 & \\frac{n+f}{n-f} & -\\frac{2nf}{n-f} \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\\\ &\\large \\text{M}_\\text{viewport}= \\begin{bmatrix} \\frac{width}{2} & 0 & 0 & \\frac{width}{2} \\\\ 0 & \\frac{height}{2} & 0 & \\frac{height}{2} \\\\ 0 & 0 & 1 & 0 \\\\ 0 & 0 & 0 & 1 \\end{bmatrix} \\end{align*}è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬è®¨è®ºçš„ $n$ å’Œ $f$ è¢«å®šä¹‰ä¸ºåæ ‡å€¼ï¼Œå®ƒä»¬æ˜¯å°äº 0 çš„ã€‚ä¸€äº›åœ°æ–¹æŠŠ $n$ å’Œ $f$ å®šä¹‰ä¸ºåˆ°è¿‘/è¿œå¹³é¢çš„è·ç¦»ï¼Œè¿™æ˜¯å¤§äº 0 çš„ï¼Œè¿™ä¼šå¼•èµ·æŠ•å½±çŸ©é˜µçš„å˜åŒ–ã€‚å¦å¤–ï¼Œä¸åŒçš„åæ ‡ç³»çº¦å®šä¹Ÿä¼šå¼•èµ·çŸ©é˜µçš„å˜åŒ–ã€‚ æ¯”å¦‚åœ¨OpenGLä¸­ï¼Œ $n$ å’Œ $f$ è¢«å®šä¹‰ä¸ºåˆ°è¿‘/è¿œå¹³é¢çš„è·ç¦»ï¼Œè¿™æ˜¯å¤§äº 0 çš„ï¼Œè€Œä¸”ä»–ä»¬çš„ projection transformation æŠŠæ‹æ‘„å†…å®¹ä»å³æ‰‹åæ ‡ç³»çš„è§†å›¾ç©ºé—´æ˜ å°„åˆ°å·¦æ‰‹åæ ‡ç³»çš„æ ‡å‡†è®¾å¤‡åæ ‡ï¼ˆNDCï¼‰ç©ºé—´ã€‚ç‰¹åˆ«åœ°ï¼Œ$z$ è½´çš„ $[ -n,-f]$ è¢«æ˜ å°„åˆ° $[-1,1]$ ï¼ˆè¿™ä¼¼ä¹è¯´æ˜åœ¨ NDC ç©ºé—´ä¸­ï¼Œ$z$ å€¼è¾ƒå°çš„å†…å®¹æ¸²æŸ“æ›´é å‰ï¼Ÿï¼‰ ä»–ä»¬çš„ $\\text{M}_\\text{their-per}$ ä¸ºï¼š \\large \\text{M}_\\text{their-per} = \\begin{bmatrix} \\frac{1}{\\text{aspect} \\times \\tan(\\frac{\\text{fov}}{2})} & 0 & 0 & 0 \\\\ 0 & \\frac{1}{\\tan(\\frac{\\text{fov}}{2})} & 0 & 0 \\\\ 0 & 0 & -\\frac{f+n}{f-n} & -\\frac{2fn}{f-n} \\\\ 0 & 0 & -1 & 0 \\end{bmatrix}Godot ä½¿ç”¨å’Œ OpenGL ä¸€æ ·çš„çŸ©é˜µï¼Œä¸‹é¢æ˜¯ä»–ä»¬è®¾ç½® $\\text{M}_\\text{per}$ çš„ä»£ç ã€‚è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œä»–ä»¬ä½¿ç”¨ column-major çš„æ–¹æ³•å­˜å‚¨æ•°æ®ï¼Œå³ M = \\begin{pmatrix} \\text{columns}[0][0] & \\text{columns}[1][0] \\\\ \\text{columns}[0][1] & \\text{columns}[1][1] \\end{pmatrix}void Projection::set_perspective(real_t p_fovy_degrees, real_t p_aspect, real_t p_z_near, real_t p_z_far, bool p_flip_fov) &#123; if (p_flip_fov) &#123; p_fovy_degrees = get_fovy(p_fovy_degrees, 1.0 / p_aspect); &#125; real_t sine, cotangent, deltaZ; real_t radians = Math::deg_to_rad(p_fovy_degrees / 2.0); deltaZ = p_z_far - p_z_near; sine = Math::sin(radians); if ((deltaZ == 0) || (sine == 0) || (p_aspect == 0)) &#123; return; &#125; cotangent = Math::cos(radians) / sine; set_identity(); columns[0][0] = cotangent / p_aspect; columns[1][1] = cotangent; columns[2][2] = -(p_z_far + p_z_near) / deltaZ; columns[2][3] = -1; columns[3][2] = -2 * p_z_near * p_z_far / deltaZ; columns[3][3] = 0; &#125;","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"GAMES101","slug":"å…¬å¼€è¯¾/GAMES101","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/"},{"name":"Notes","slug":"å…¬å¼€è¯¾/GAMES101/Notes","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/Notes/"}],"tags":[]},{"title":"æ€æˆ®å°–å¡”çš„æ¡†æ¶å¦‚æ­¤è‡ªæ´½ï¼Œæˆ‘ä»¬èƒ½ç¦»å¼€å®ƒå—ï¼Ÿ","slug":"game-design/æ€æˆ®å°–å¡”æ¡†æ¶","date":"2025-07-10T12:22:38.000Z","updated":"2025-08-20T11:13:48.877Z","comments":true,"path":"wiki/game-design/æ€æˆ®å°–å¡”æ¡†æ¶/","permalink":"http://rinevard.github.io/wiki/game-design/%E6%9D%80%E6%88%AE%E5%B0%96%E5%A1%94%E6%A1%86%E6%9E%B6/","excerpt":"","text":"img{ width: 70%; } æœ€è¿‘åœ¨è®¾è®¡å¡ç‰Œæ¸¸æˆï¼ˆä½ çŸ¥é“çš„ï¼Œæˆ‘ä¸€ç›´æ˜¯ç‰Œä½¬ï¼‰ï¼Œå‘ç°ä»¥å‰åšçš„ç¿»ç‰Œæ¸¸æˆåŸå‹çš„ç¿»ç‰Œç©æ³•æœ¬èº«éšæœºæ€§è¿‡å¼ºï¼Œä»è€Œæ‹“å±•ç©ºé—´è¿‡å°ï¼Œä½†â€œæ£‹ç›˜ä¸Šçš„éšä»äº¤äº’â€éå¸¸æœ‰è¶£ï¼Œäºæ˜¯å°±æ‰“ç®—ä»å®ƒå‡ºå‘å¼€å§‹è¿›ä¸€æ­¥è®¾è®¡ã€‚åˆæ­¥çš„æƒ³æ³•æ˜¯åšå¡ç‰Œè‚‰é¸½ã€‚ï¼ˆå“‡ï¼Œåˆä¸€ä¸ªå¡ç‰Œè‚‰é¸½ï¼‰ æˆ‘å¯¹è‚‰é¸½å¹¶æ²¡æœ‰ç‰¹åˆ«çš„å–œçˆ±ï¼Œå› ä¸ºæˆ‘ä¸€ç›´æƒ³ç€ï¼Œå¦‚æœæˆ‘ä»¬æ‹¿èµ°äº†ç©å®¶çš„æ—¶é—´ï¼Œèµ·ç è¦è¡¥å¿ä¸€äº›ä»€ä¹ˆï¼Œè€Œè‚‰é¸½ä¼¼ä¹å¹¶æ²¡æœ‰è¡¥å¿ä¸€äº›æˆ‘å¾ˆå–œæ¬¢çš„ä¸œè¥¿ã€‚ä¸è¿‡æ— è®ºå¦‚ä½•ï¼Œæˆ‘è¿˜æ˜¯æŒºå–œæ¬¢æ‰“ç‰Œçš„ï¼Œæ€æˆ®å°–å¡”ã€ç‚‰çŸ³ç‹—å¤´äººå†’é™©ã€é‚ªæ¶å†¥åˆ»éƒ½æ˜¯æˆ‘å¾ˆå–œæ¬¢çš„æ¸¸æˆï¼Œæ‰€ä»¥åšä¸ªå¡ç‰Œè‚‰é¸½ä¹Ÿè¿˜æŒºä¸é”™ã€‚æŒ‰æˆ‘çš„ç†è§£ï¼Œè‚‰é¸½æœ€é‡è¦çš„æ˜¯æ¯ä¸ªå°å…³å¡çš„ä½“éªŒï¼Œå› æ­¤æˆ‘å°±ç€æ‰‹å¼€å§‹åšæ¯å±€ç‰Œå±€çš„åŸå‹äº†ã€‚ ç„¶åè®©æˆ‘ä»¬å¼€å§‹æœ€æœ‰è¶£çš„è®¾è®¡ç¯èŠ‚ï¼ ç°åœ¨æˆ‘ä»¬é¢å‰æœ‰ä¸€ä¸ª3x5çš„ç‰Œæ¡Œï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥è¯¥åšä»€ä¹ˆï¼Ÿæˆ‘ä»¬å…ˆéšä¾¿æ‹¿ç‚¹æ‰‹ç‰Œå§ï¼Œå¯ä»¥æŠŠæ‰‹ç‰Œæ”¾åˆ°ç‰Œæ¡Œä¸Šæ¥å¬å”¤éšä»ï¼Œç„¶åå’Œæ•Œæ–¹éšä»æ‰“æ¶ã€‚ä½†æ‰‹ç‰Œä»å“ªé‡Œæ¥ï¼Œè´¹ç”¨æœºåˆ¶åˆæ€ä¹ˆåšå‘¢ï¼Ÿè¿™å°±å¼•å‡ºäº†æœ¬æ–‡çš„æ ¸å¿ƒå†…å®¹â€”â€”æ€æˆ®å°–å¡”çš„æ¡†æ¶å¦‚æ­¤è‡ªæ´½ï¼Œæˆ‘ä»¬èƒ½ç¦»å¼€å®ƒå—ï¼Ÿ æ€æˆ®å°–å¡”æ€æˆ®å°–å¡”ä¸ºä»€ä¹ˆæ˜¯ç¥ï¼Ÿåœ¨è°ˆè®ºè¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆè¯´è¯´å…¶ä»–å¡ç‰Œæ¸¸æˆç›¸è¾ƒäºçˆ¬å¡”ç©¶ç«Ÿå·®åœ¨äº†å“ªé‡Œï¼ˆè¯¯ æ€»ä¹‹ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹æ€æˆ®å°–å¡”è‡ªæ´½çš„è®¾è®¡å§ã€‚ å•å±€ç‰Œå±€çš„è‡ªæ´½æ€æˆ®å°–å¡”çš„æ‰‹ç‰Œä»å“ªé‡Œæ¥ï¼Œè´¹ç”¨æœºåˆ¶åˆæ˜¯æ€æ ·çš„ï¼Ÿåœ¨æ€æˆ®å°–å¡”ä¸­ï¼Œå¦‚æœä¸è€ƒè™‘ç‰¹æ®Šæ•ˆæœï¼Œæˆ‘ä»¬åœ¨å›åˆå¼€å§‹æ—¶ä¼šä¸¢å¼ƒæ‰€æœ‰æ‰‹ç‰Œå¹¶æŠ½äº”å¼ ç‰Œï¼Œå¹¶ä¸”è´¹ç”¨é‡ç½®ä¸ºä¸‰è´¹ã€‚ æˆ‘ä»¬å…ˆæ¥èŠèŠå‰è€…ã€‚å‰è€…åœ¨ç©èµ·æ¥æ—¶æ„Ÿè§‰ååˆ†è‡ªç„¶ï¼Œä½†ä»è®¾è®¡çš„è§’åº¦ï¼Œå…¶å®æ˜¯ä¸€ä¸ªå¹¶ä¸æ˜¾ç„¶çš„è®¾è®¡ã€‚æˆ‘ç®€å•è°ƒç ”äº†ä¸€ä¸‹ï¼Œå‘ç°å›åˆå¼€å§‹æ—¶åˆ·æ–°æ‰‹ç‰Œä¼¼ä¹æ˜¯DBGæ¸¸æˆçš„æ ‡é…ï¼Œå…¶å¼€å±±é¼»ç¥–æ˜¯ã€Šçš‡èˆ†äº‰éœ¸ã€‹ï¼ˆDominionï¼‰ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒæœ‰æ€æ ·çš„æ•ˆæœã€‚ æˆ‘è®¤ä¸ºæœ€å…³é”®çš„ä¸¤ç‚¹æ˜¯ï¼Œå‡å°‘äº†å¡æ‰‹çš„å¯èƒ½æ€§ã€é™ä½äº†ç­–ç•¥æ€§ã€‚åˆ·æ–°æ‰‹ç‰Œæ˜¾ç„¶èƒ½å‡å°‘å¡æ‰‹ï¼Œä½†ä¸ºä»€ä¹ˆé™ä½äº†ç­–ç•¥æ€§å‘¢ï¼Œä»¥åŠè¿™æ˜¯å¥½äº‹å—ï¼Ÿ ä¸ºä»€ä¹ˆå®ƒé™ä½äº†ç­–ç•¥æ€§ï¼Ÿå› ä¸ºæ‰‹ç‰Œçš„åˆ·æ–°å°±æ„å‘³ç€ç©å®¶å‡å°‘äº†å¯¹ä¸‹ä¸€å›åˆçš„é¢„æœŸã€‚å›åˆåˆ¶æ¸¸æˆçš„å¾ˆå¤§ä¸€éƒ¨åˆ†ç­–ç•¥æ€§æ˜¯ç”±å¯¹ä¸‹ä¸€å›åˆçš„é¢„æœŸå¼•èµ·çš„ã€‚å¯¹ç‚‰çŸ³ï¼ˆä»¥åŠå¾ˆå¤šCCGï¼‰æ¥è¯´ï¼Œæˆ‘ä¼šæ ¹æ®åœºé¢è€ƒè™‘æ¯å¼ ç‰Œä»€ä¹ˆæ—¶å€™æ‰“å‡ºæœ‰æœ€å¤§æ”¶ç›Šï¼Œç”šè‡³çŒœæµ‹å¯¹æ‰‹æ¥ä¸‹æ¥çš„è¡ŒåŠ¨å¹¶é¢„ç•™ä¸€äº›å¡ç‰Œã€‚è€Œæ€æˆ®å°–å¡”åˆ™æœç»äº†è¿™ç§é¢„æœŸï¼Œè®©ç©å®¶æ ¹æ®æ•Œäººå½“å‰å›åˆçš„æ„å›¾ï¼Œç»“åˆæ¯å›åˆå‘çš„ç‰Œæ‰“æœ€ä¼˜è§£ã€‚ æ˜¯çš„ï¼Œæœ€ä¼˜è§£ã€‚å¯¹å¾ˆå¤šå¡ç‰Œæ¸¸æˆæ¥è¯´ï¼Œæœ€ä¼˜è§£çš„è®¡ç®—é‡æ˜¯æå¤§çš„ï¼Œè€Œæ€æˆ®å°–å¡”æå¤§åœ°ç®€åŒ–äº†è¿™ä¸ªè®¡ç®—é‡ï¼Œè®©æ¯å›åˆæœ€ä¼˜è§£çš„è®¡ç®—éƒ½å¹¶ä¸å›°éš¾ï¼Œä»è€Œé™ä½äº†æ€ç»´é‡ã€‚è¿™å½“ç„¶ä¸æ˜¯åäº‹ï¼Œæˆ‘è®¤ä¸ºè¿™æ˜¯ç›¸å½“ä¼˜ç§€çš„è®¾è®¡ã€‚æ¸¸æˆå¹¶ä¸æ˜¯ä¸ºäº†éš¾å€’ç©å®¶è€Œå­˜åœ¨çš„ï¼Œæ¯”èµ·éš¾å€’ç©å®¶ï¼Œè®©ç©å®¶é€šè¿‡è‡ªå·±çš„åŠªåŠ›å…‹æœéš¾å…³æ›´é‡è¦ã€‚ å¦‚æœæ‰‹ç‰Œåˆ·æ–°ï¼Œé‚£è´¹ç”¨è‡ªç„¶ä¹Ÿè¦åˆ·æ–°ï¼Œè¿™ä¾¿æ˜¯æ‰‹ç‰Œå’Œè´¹ç”¨çš„è‡ªæ´½äº†ã€‚è€Œç”±æ­¤ä¹Ÿèƒ½æ¨å‡ºæ€æˆ®å°–å¡”ä¸åšéšä»çš„ç†ç”±äº†ã€‚éšä»æ˜¯æŒç»­æ€§çš„ï¼Œè€Œæ³•æœ¯æ˜¯ä¸€æ¬¡æ€§çš„ã€‚å¦‚æœæ‰‹ç‰Œåœ¨åˆ·æ–°ï¼Œé‚£æ€ä¹ˆå’Œéšä»æ‰“comboå‘¢ï¼Ÿ æ‰€ä»¥æˆ‘è®¤ä¸ºæ€ªç‰©ç«è½¦å¹¶ä¸å¦‚æ€æˆ®å°–å¡”è‡ªæ´½ã€‚æˆ‘è¿™å›åˆè´¹ç”¨ä¸è¶³ä»¥æ‰“å‡ºæ‰€æœ‰çš„æ²»ç–—ç‰Œï¼Œç„¶åå›åˆç»“æŸæ²»ç–—ç‰Œå°±å…¨è¢«æ‰”åˆ°å¼ƒç‰Œå †é‡Œäº†ï¼Œé‚£æˆ‘ç¼ºçš„comboè°ç»™æˆ‘è¡¥å•ŠğŸ˜­ å¦‚æœæ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘ä¼šè¯´æ€æˆ®å°–å¡”çš„æ¯ä¸€å±€éƒ½ç»™æˆ‘å¸¦æ¥äº†ç‚‰çŸ³é‡Œå¥¥ç§˜æ³•èˆ¬çš„ä½“éªŒï¼Œä¾é æ³•æœ¯è½°ç‚¸åˆ›æ­»å¯¹é¢ï¼Œä½†æ²¡æœ‰å¾ˆå¤šçš„åŒæ—¶ä¾é å¤šå¼ å¡ç‰Œçš„comboï¼Œå•å±€ç‰Œå±€è¿è¥ä¸å¤šã€‚ æ¯å±€æ¸¸æˆçš„è‡ªæ´½æ¯å±€æ¸¸æˆçš„è‡ªæ´½åˆå¯ä»¥åˆ†ä¸ºæ€ç»´é‡è¦æ±‚çš„å¼ å¼›æœ‰åº¦ï¼Œä»¥åŠæ¸¸æˆæœºåˆ¶æœ¬èº«çš„è‡ªæ´½ã€‚ å…ˆè¯´å‰è€…ã€‚å•å±€ç‰Œå±€ç­–ç•¥æ€§è¾ƒä½ï¼Œä½†ä¸€æ•´å±€æ¸¸æˆä¸­è¿è¥æ˜¯ä¸€ä¸ªç­–ç•¥æ€§å¾ˆé«˜çš„æ“ä½œï¼Œä¹Ÿå› æ­¤æ—¢ä¸ä¼šç©å¾—å¤ªç´¯ï¼Œä¹Ÿä¸ä¼šå¤ªç®€å•ã€‚ å†è¯´åè€…ã€‚ä¸»è¦è¦è¯´çš„æ˜¯â€œè¡€é‡ä¿æŒâ€çš„æœºåˆ¶ã€‚å¦‚æœå•å±€ç‰Œå±€çš„åŒæ–¹å§‹ç»ˆå¼ºåº¦æ¥è¿‘ï¼ˆæ¯”å¦‚å¯¹ç§°å¼å¡ç‰Œæ¸¸æˆï¼‰ï¼Œé‚£è¡€é‡æ˜¾ç„¶ä¹Ÿæ˜¯éœ€è¦åœ¨æ¯å±€åˆ·æ–°çš„ã€‚ä¸è¿‡å¯¹éå¯¹ç§°æ¸¸æˆæ¥è¯´ï¼Œæ§åˆ¶å¼ºåº¦æ¥è¿‘å®åœ¨æœ‰ç‚¹å›°éš¾ï¼Œè¡€é‡ä¿æŒå’Œæ¯ä¸€å¤§å±‚çš„è¡€é‡å›å¤æ˜¯ä¸€ä¸ªç®€å•çš„å¹³è¡¡æ‰‹æ®µã€‚ åŸæœ¬è¿˜æƒ³è¯´è¯´æ˜“è¿›éš¾å‡ºçš„å¡ç»„ï¼Œä½†å®åœ¨æ²¡æ„Ÿè§‰å®ƒå’Œåˆ«çš„ä¸œè¥¿å¾ˆâ€œè‡ªæ´½â€ã€‚æˆ‘å¯¹æœºåˆ¶â€œè‡ªæ´½â€çš„ç†è§£æ˜¯æŠŠè¿™ä¸ªæœºåˆ¶æ¢æˆåˆ«çš„ï¼Œæ¸¸æˆå°±å¾ˆéš¾å·¥ä½œäº†ã€‚æ¯”å¦‚æŠŠæŠ½å¡æ¢æˆæ¯å›åˆæŠ½ä¸€å¼ ï¼Œé‚£è´¹ç”¨é‡ç½®å°±ä¼šå¯¼è‡´ä¸€ä¸‹å°±æŠŠç‰Œæ‰“å®Œï¼›æŠŠè¡€é‡æ¢æˆæ¯å±€é‡ç½®ï¼Œé‚£æ¸¸æˆå°±ç®€å•ä¸€å¤§æˆªäº†ã€‚ è€Œå¡ç»„çš„æ˜“è¿›éš¾å‡ºçœ‹èµ·æ¥æ˜¯ä¸€ä¸ªæ§åˆ¶å¼ºåº¦çš„è‡ªç„¶æ‰‹æ®µï¼Œç®€å•åœ°æŠŠå®ƒæ”¹ä¸ºé™åˆ¶å¡ç»„æœ€å°‘åäº”å¼ ï¼Œå…è®¸è‡ªç”±å¢åˆ ï¼Œä¼¼ä¹ä¹Ÿä¸ä¼šç ´åæ•´ä¸ªæ¸¸æˆã€‚è™½ç„¶æ²¡æœ‰åŸæ¥å¥½ï¼Œä½†è‡³å°‘ä¸æ˜¯æ¯ç­æ€§çš„ã€‚ æœ‰è¶£çš„æ˜¯ï¼Œæ€æˆ®å°–å¡”ä¼¼ä¹å¹¶æ²¡æœ‰å¾ˆå¤šæé«˜å•å¡å¼ºåº¦çš„æ‰‹æ®µï¼Œè€Œè®¸å¤šç±»ä¼¼çš„å¡ç‰Œè‚‰é¸½ä¼šåšå¤§é‡çš„å•å¡å¼ºåº¦çš„æé«˜ã€‚æ¯”å¦‚â€”â€”é‚ªæ¶å†¥åˆ»ã€‚ é‚ªæ¶å†¥åˆ»æˆ‘ä»¬èŠèŠè±è¥¿æ¨¡ç»„ï¼Œè¿™æœ€æ¥è¿‘å¡ç‰Œè‚‰é¸½ã€‚ å•å±€ç‰Œå±€çš„è‡ªæ´½é‚ªæ¶å†¥åˆ»æ¯å›åˆæŠ½ä¸€å¼ ç‰Œï¼ˆå¯é€‰æŠ½ç‰Œç»„çš„ç‰Œæˆ–è€…æ¾é¼ ç‰Œï¼‰ï¼Œè´¹ç”¨ä¸è‡ªç„¶å›å¤ï¼Œè€Œæ˜¯ä¾é çŒ®ç¥­éšä»è·å¾—ã€‚å®ƒçš„åŸå‹æ¥è‡ªludum dare 43è¿™åœºgamejamï¼ŒçŒ®ç¥­æœºåˆ¶åœ¨é‚£é‡Œå°±è¢«å®šä¸‹æ¥äº†ã€‚çŒ®ç¥­æœºåˆ¶ç¡®å®éå¸¸å¥½ç©ï¼Œæ‰€ä»¥æ•´ä¸ªæ¸¸æˆéƒ½æ˜¯ä»¥å®ƒä¸ºæ ¸å¿ƒå‘å±•å‡ºå»çš„ã€‚ çŒ®ç¥­æ˜¯è´¹ç”¨æœºåˆ¶ï¼Œé‚£æŠ½ç‰Œæœºåˆ¶æ˜¯æ€ä¹ˆæ ¹æ®çŒ®ç¥­è¢«ç¡®å®šçš„å‘¢ï¼ŸæŠ½ç‰Œæ— éä¸¤ç§ï¼Œä¸€ç§æ˜¯åˆ·æ–°ï¼Œä¸€ç§æ˜¯ä¿ç•™æ‰‹ç‰Œæ¯å›åˆæŠ½å¡ã€‚çŒ®ç¥­æœºåˆ¶å¯¼è‡´é«˜è´¹ç‰Œéš¾ä»¥ç«‹å³æ‰“å‡ºï¼Œæ¯•ç«Ÿå¦‚æœæŠŠé«˜è´¹ç‰Œåˆ·æ‰ï¼Œä¸‹æ¬¡æŠ½åˆ°å°±ä¸çŸ¥é“æ˜¯ä»€ä¹ˆæ—¶å€™äº†ã€‚æ‰€ä»¥æ˜¾ç„¶ä¿ç•™æ‰‹ç‰Œæ›´åˆé€‚ã€‚ æ¯”èµ·æ€æˆ®å°–å¡”ï¼Œé‚ªæ¶å†¥åˆ»çš„å•å±€ç‰Œå±€æ›´å…·â€æŒç»­æ€§â€œï¼Œæˆ‘ä»¬ä¸ä»…èƒ½è€ƒè™‘åˆ°ä¸‹ä¸€å›åˆï¼Œè¿˜èƒ½è€ƒè™‘åˆ°ä¸‹ä¸‹å›åˆã€‚éšä»ç«™åœºã€æ‰‹ç‰Œä¸åˆ·æ–°ã€çŒ®ç¥­æœºåˆ¶éƒ½æ˜¯æŒç»­æ€§çš„ä½“ç°ã€‚ ä½†è¿æ°”æˆåˆ†å®åœ¨æ˜¯å¤ªé«˜äº†ï¼è¿‡ç‰Œçš„ç¼ºä¹å¯¼è‡´æˆ‘ä»¬æåº¦ä¾èµ–äºèµ·æ‰‹ï¼Œè´¹ç”¨ä¸è‡ªç„¶å›å¤å’Œäº”ç‚¹ä¼¤å®³å·®å°±è¾“åˆå¼ºåŒ–äº†è¿™ä¸€ç‚¹ã€‚ ä¸è¿‡è¯´åˆ°åº•ï¼Œè¿™äº›é—®é¢˜éƒ½æ˜¯å› ä¸ºæ¯å›åˆåªæŠ½ä¸€å¼ ç‰Œå¯¹å¡ç»„æ„ç­‘æå‡ºäº†æé«˜çš„è¦æ±‚ã€‚å¥½ç‰Œå¯èƒ½æ²‰åº•ï¼Œæ–°ç‰Œä¹Ÿå¯èƒ½æ²‰åº•ï¼Œä¸€æ²‰åº•è¿™å±€å°±æ²¡æ³•ç©äº†ã€‚ ä½œè€…Danielç”¨å¥‡å¦™çš„æ–¹å¼è§£å†³äº†é—®é¢˜â€”â€”åœ¨åœ°å›¾ä¸Šæä¾›å¤§é‡çš„ç‰Œç»„æ”¹é€ èŠ‚ç‚¹ï¼Œå¹¶é¼“åŠ±è¶…æ¨¡å•å¡ã€‚æˆ‘ä»¬ä¼šåœ¨ä¸‹ä¸€èŠ‚è®¨è®ºè¿™ä¸€ç‚¹ã€‚ åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹é‚ªæ¶å†¥åˆ»çš„åŸå‹å§ï¼šhttps://dmullinsgames.itch.io/sacrifices-must-be-made æ¯å±€æ¸¸æˆçš„è‡ªæ´½ å¦‚æˆ‘ä»¬ä¹‹å‰æ‰€è¨€ï¼Œæ¯å›åˆåªæŠ½ä¸€å¼ ç‰Œå¯¹å¡ç»„æ„ç­‘æå‡ºäº†æé«˜çš„è¦æ±‚ã€‚ä¸€ä¸ªè‡ªç„¶çš„æ€è·¯æ˜¯å…è®¸ç©å®¶è‡ªç”±è°ƒæ•´å¡ç»„ï¼Œåªæ˜¯è®¾ç½®äº›è®¸é™åˆ¶ï¼Œæ¯”å¦‚æ¯å¼ ç‰Œæœ€å¤šå¸¦ä¸¤å¼ ã€è‡³å°‘äºŒåå¼ ç‰Œä»€ä¹ˆçš„ã€‚ä½†é‚ªæ¶å†¥åˆ»å¹¶ä¸æ˜¯è¿™ä¹ˆåšçš„ã€‚ åœ¨é‚ªæ¶å†¥åˆ»ä¸­ï¼Œåˆ å¡å¹¶ä¸æ˜¯å¾ˆå›°éš¾çš„äº‹ï¼Œé€ è¶…æ¨¡å•å¡ä¹Ÿéå¸¸ç®€å•ã€‚ç¥­å›ã€çœŸèŒå­¦å®¶èŠ‚ç‚¹å¯ä»¥åŒæ—¶å®ç°è¿™ä¸¤ç‚¹ï¼Œéª¨ç‹å¯ä»¥åˆ å¡ï¼Œç”»å®¶å¯ä»¥å¤åˆ¶è¶…æ¨¡å•å¡ï¼Œæ¯å±‚å¯ä»¥æ‹¿ä¸¤ä¸‰å¼ ç¨€æœ‰å¡ã€‚è¿™å°±è®©ç©å®¶èƒ½å¤Ÿè¿…é€Ÿæå‡å•å¡è´¨é‡ï¼Œé è¶…æ¨¡å•å¡å’Œå¯¹é¢æ‰“æ¶ã€‚ ä¹Ÿå› æ­¤åœ¨é‚ªæ¶å†¥åˆ»ä¸­ç»å¸¸ä¼šå‡ºç°ä¸€å›åˆç§’å¯¹é¢çš„å±€ï¼Œè¯´å®è¯æˆ‘è§‰å¾—è¿™å¹¶ä¸æ˜¯å¤ªå¥½çš„è®¾è®¡ï¼Œä¸è¿‡ç¡®å®æŒºè‡ªæ´½çš„ã€‚ æˆ‘çš„æ¸¸æˆï¼ˆå“‡ï¼Œä½ çš„æ¸¸æˆå’Œæ€æˆ®å°–å¡”ã€é‚ªæ¶å†¥åˆ»éƒ½æ˜¯ä¸€çº§æ ‡é¢˜ï¼Œé‚£ä¸€å®šå’Œä»–ä»¬ä¸€æ ·å‰å®³å§ ç°åœ¨æˆ‘ä»¬é¢å‰æœ‰ä¸€ä¸ª3x5çš„ç‰Œæ¡Œï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥è¯¥åšä»€ä¹ˆï¼Ÿæˆ‘ä»¬å…ˆéšä¾¿æ‹¿ç‚¹æ‰‹ç‰Œå§ï¼Œå¯ä»¥æŠŠæ‰‹ç‰Œæ”¾åˆ°ç‰Œæ¡Œä¸Šæ¥å¬å”¤éšä»ï¼Œç„¶åå’Œæ•Œæ–¹éšä»æ‰“æ¶ã€‚ä½†æ‰‹ç‰Œä»å“ªé‡Œæ¥ï¼Œè´¹ç”¨æœºåˆ¶åˆæ€ä¹ˆåšå‘¢ï¼Ÿ éšä»æ˜¯ç«™åœºçš„æŒç»­æ€§çš„ä¸œè¥¿ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ä¸åˆ·æ–°æ‰‹ç‰Œäº†ï¼Œè€Œæ˜¯æ¯å›åˆæŠ½ä¸€å¼ ç‰Œã€‚è´¹ç”¨åˆ·æ–°ä¹Ÿæœªå°ä¸å¯ï¼Œä¸è¿‡æˆ‘æŒºå–œæ¬¢é‚ªæ¶å†¥åˆ»çš„çŒ®ç¥­æœºåˆ¶çš„ï¼Œæ‰€ä»¥å°±ç›´æ¥æ¬è¿‡æ¥ç”¨äº†ã€‚é‚ªæ¶å†¥åˆ»å¤ªå¡æ‰‹äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¯å›åˆå†ç»™ç©å®¶å¡ä¸€å¼ æ¾é¼ ç‰Œã€‚ ä¸è¿‡è¦è¯´æ˜çš„æ˜¯ï¼Œè¿™äº›åªæ˜¯ç†è®ºæ¨å¯¼ã€‚åœ¨å®é™…åšåŸå‹çš„æ—¶å€™æˆ‘ä¹Ÿæµ‹è¯•äº†åˆ·æ–°æ‰‹ç‰Œã€åˆ·æ–°è´¹ç”¨ï¼Œå‘ç°ç¡®å®è¿˜æ˜¯æ¯å›åˆæŠ½ä¸€å¼ ç‰Œ+çŒ®ç¥­æœºåˆ¶å’Œè¿™ä¸ªéšä»äº¤äº’æœºåˆ¶çš„å¥‘åˆåº¦æœ€é«˜ã€‚ç†è®ºå’Œå®é™…ç›¸ç¬¦è¯´æ˜ç†è®ºæœ‰ä¸€å®šæŒ‡å¯¼æ„ä¹‰ï¼Œä»¥åå¯ä»¥æ¥ç€ç”¨ï¼Œç†è®ºä¸å®é™…ä¸ç¬¦è¯´æ˜ç†è®ºåœ¨èƒ¡æ‰¯ï¼Œå°±è¦è°ƒæ•´äº†ã€‚ è‡³æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†å•å±€ç‰Œå±€çš„è®¾è®¡ã€‚ä¹‹åæˆ‘æŠŠç‰Œæ¡Œæ”¹æˆäº†4x5ï¼Œå‘ç°æ›´æœ‰ç­–ç•¥ä¹Ÿæ›´å¥½ç©äº†ï¼Œæ‰¾äººè¯•ç©äº†ä¸€ä¸‹ä¹‹åæ¿€è¿›åœ°æ”¹æˆäº†5x7ï¼Œå±…ç„¶åˆæ›´æœ‰ç­–ç•¥æ›´å¥½ç©äº†ï¼Œé‚£æš‚æ—¶å°±è¿™æ ·å§ã€‚ è¿™é‡Œæ˜¯è¯•ç©é“¾æ¥ï¼š å¼€å§‹æ¸¸æˆï¼ˆå°†åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€ï¼‰ å–œæ¬¢çš„è¯å¯ä»¥å¡«ä¸ªé—®å·ï¼Œè°¢è°¢å–µï¼ é—®å·ï¼ˆå°†åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€ï¼‰ é‚£ä¹ˆæ¯å±€æ¸¸æˆè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿç”±äºæˆ‘ä»¬çš„æœºåˆ¶å’Œé‚ªæ¶å†¥åˆ»ç›¸ä¼¼ï¼Œæ‰€ä»¥å®ƒä¼šé‡åˆ°çš„é—®é¢˜æˆ‘ä»¬ä¹Ÿéƒ½ä¼šé‡åˆ°ã€‚æœ€å…³é”®çš„ä¸¤ç‚¹å°±æ˜¯ç‰Œè¶Šå¤šè¶Šèœå’Œå…³é”®ç‰Œæ²‰åº•ã€‚ ä¸€å¼€å§‹æˆ‘å°è¯•è§£å†³å‰è€…ï¼Œç„¶åå¶ç„¶é—´å¾—åˆ°äº†ä¸€ä¸ªæˆ‘è§‰å¾—è¿˜ä¸é”™çš„ï¼Œèƒ½åŒæ—¶è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜çš„æ–¹æ¡ˆã€‚ è§£å†³é—®é¢˜æ— éä»å•å±€ç‰Œå±€å’Œæ•´å±€æ¸¸æˆè€ƒè™‘ï¼Œæˆ‘æƒ³äº†åŠå¤©æ²¡æƒ³åˆ°æ€ä¹ˆç”¨åœ¨å•å±€å†…è§£å†³é—®é¢˜ï¼Œäºæ˜¯å°±æƒ³ç ”ç©¶ä¸‹é€šè¿‡è°ƒæ•´æ•´å±€æ¸¸æˆçš„è¿è¥æ¥è§£å†³é—®é¢˜ã€‚ åœ¨ç©å¡ç‰Œè‚‰é¸½çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°é€‰ç‰ŒåŠ å…¥ç‰Œç»„ä¸å¦‚è·³è¿‡çš„æƒ…å†µï¼Œè¿™å°±æ˜¯å…¸å‹çš„â€œç‰Œè¶Šå¤šè¶Šèœâ€ã€‚é‚£æ€ä¹ˆä¿è¯æ¯æ¬¡é€‰ç‰Œéƒ½æœ‰è¡¥å¼ºå‘¢ï¼Ÿè€ƒè™‘åˆ°æˆ‘ä»¬çš„çŒ®ç¥­æœºåˆ¶ï¼Œæˆ‘å°±æƒ³åˆ°æŠŠå¯é€‰ç‰ŒçŒ®ç¥­æˆéšæ—¶å¯ä»¥ä½¿ç”¨çš„ä¸€æ¬¡æ€§é“å…·ï¼Œè¿™æ ·æ¯æ¬¡é€‰ç‰Œéƒ½è‡³å°‘èƒ½è®©ç©å®¶å˜å¼ºä¸€ç‚¹ã€‚ é“å…·æ€ä¹ˆåšå‘¢ï¼Ÿåˆæ­¥æƒ³æ³•æ˜¯æŠŠç‰Œçš„è´¹ç”¨å‡åŠï¼Œæ³•æœ¯ç‰Œä¸å˜ï¼Œéšä»ç‰Œåœ¨ä¸‹ä¸ªå›åˆå¼€å§‹æ—¶è‡ªåŠ¨è¢«çŒ®ç¥­ã€‚ æœ‰è¶£çš„æ˜¯ï¼Œå®ƒä¹Ÿç¼“è§£äº†å…³é”®ç‰Œæ²‰åº•çš„é—®é¢˜ï¼Œæ¯•ç«Ÿä¸€æ–¹é¢é“å…·èƒ½å¸®åŠ©æˆ‘ä»¬è¿‡æ¸¡ï¼Œå¦ä¸€æ–¹é¢æˆ‘ä»¬ä¹Ÿèƒ½ç›´æ¥æŠŠå…³é”®ç‰ŒçŒ®ç¥­æˆé“å…·ï¼Œç„¶åå°±ä¸ç”¨æ‹…å¿ƒæ²‰åº•äº†ã€‚","categories":[{"name":"æ¸¸æˆè®¾è®¡","slug":"æ¸¸æˆè®¾è®¡","permalink":"http://rinevard.github.io/categories/%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[]},{"title":"_æˆ‘ä¹Ÿæƒ³åšå‡ºä¼˜ç§€çš„ä½œå“","slug":"others/thoughts/æˆ‘ä¹Ÿæƒ³åšå‡ºä¼˜ç§€çš„ä½œå“","date":"2025-06-16T14:03:30.000Z","updated":"2025-07-18T15:06:40.639Z","comments":true,"path":"wiki/others/thoughts/æˆ‘ä¹Ÿæƒ³åšå‡ºä¼˜ç§€çš„ä½œå“/","permalink":"http://rinevard.github.io/wiki/others/thoughts/%E6%88%91%E4%B9%9F%E6%83%B3%E5%81%9A%E5%87%BA%E4%BC%98%E7%A7%80%E7%9A%84%E4%BD%9C%E5%93%81/","excerpt":"","text":"æœ€è¿‘åšäº†ç‰Œç”Ÿä¸‡ç‰©ï¼Œæ„Ÿè§‰æŒºéš¾å—çš„ã€‚ä¸€ç›´ä»¥æ¥æˆ‘éƒ½å¸Œæœ›æ¯ä¸€éƒ¨ä½œå“éƒ½åšå¾—æ¯”ä¸Šä¸€éƒ¨æ›´å¥½ï¼Œè¿™ä¸€éƒ¨çœ‹èµ·æ¥æ¯”undertetriså¥½ä¸€ç‚¹å—ï¼Ÿæˆ–è®¸å§ï¼Œä½†æˆ‘å°±æ˜¯æ„Ÿè§‰ä¸å¼€å¿ƒã€‚ æƒ³æ¥å¯èƒ½æ˜¯å› ä¸ºè¿™ä¸æ˜¯æˆ‘å–œæ¬¢çš„ä½“éªŒå§ã€‚æˆ‘æƒ³åšå‡ºèƒ½æ‰“åŠ¨ç©å®¶çš„ä½œå“ï¼Œèƒ½è®©ç©å®¶è®°ä½ä¸€è¾ˆå­ï¼Œè‡³å°‘æ˜¯ä¸€å¹´çš„ä½œå“ï¼Œè€Œä¸æ˜¯è¿™æ ·çš„è«åå…¶å¦™çš„â€œèåˆå¡ç‰Œâ€ã€‚ç©ç€è¿™ä¸ªæ¸¸æˆæ—¶ï¼Œæ¯”èµ·å¯¹ä½œå“çš„æ»¡æ„ï¼Œæ›´å¤šçš„æ˜¯çƒ¦èºã€‚ä¹Ÿå¯èƒ½æ˜¯å› ä¸ºç°åœ¨æ˜¯è€ƒè¯•å‘¨å‹åŠ›å¤§å§ï¼Œæˆ‘ä¹Ÿä¸æ¸…æ¥šã€‚ æˆ‘æƒ³å’ŒLLMä¸€èµ·åˆ›é€ ä¸€ä¸ªä¸–ç•Œå•Šï¼Œä¸€ä¸ªæ ©æ ©å¦‚ç”Ÿçš„ä¸–ç•Œã€‚æ¯ä¸ªäº‹ä»¶éƒ½è®©äººæ€è€ƒï¼Œæ¯ä¸ªè§’è‰²éƒ½ç»™äººæ·±åˆ»å°è±¡ï¼Œè€Œä¸æ˜¯ç°åœ¨çš„åè¯å †ç Œã€æ•°å€¼è†¨èƒ€ã€‚LLMä¸ä¼šå†™æ•…äº‹ä»æ¥éƒ½ä¸æ˜¯å€Ÿå£ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯æœ¬å¯ä»¥åšå¾—æ›´å¥½ï¼Ÿ æˆ‘è¯¥æ€ä¹ˆåšæ‰å¥½ï¼Ÿæˆ‘è¯¥å‰å¾€ä½•æ–¹ï¼Ÿ æˆ‘çŸ¥é“ï¼Œè®©LLMç”Ÿæˆçš„ä¸–ç•Œåƒã€Šè‹ä¸¹çš„æ¸¸æˆã€‹ä¸€æ ·æœ¬èº«å°±æ˜¯ä¸€ä»¶ä¸ç°å®çš„äº‹æƒ…ã€‚ä½†èµ·ç å®ƒè¦åƒæ˜¯ä¸€ä¸ªä¸–ç•Œå§ï¼Œæ•´ä¸ªå†’é™©æ˜¯æœ‰æ•…äº‹æ€§çš„å§ï¼Œç°åœ¨æ˜¯ä¸ªä»€ä¹ˆç©æ„ï¼Ÿï¼Ÿï¼Ÿæ›´å¯æ°”çš„æ˜¯è¿™ç©æ„è¿˜çœŸæœ‰å¯ç©æ€§ï¼Œåšäº†ä¸€ä¸ªé å¼ºåŒ–ç¨‹åºå’Œæ•°å€¼è†¨èƒ€å †ç Œèµ·æ¥çš„ä¸œè¥¿çœŸåƒæ˜¯å¯¹è‡ªå·±çš„ä¾®è¾±ï¼ è‡³å°‘ï¼Œå®ƒçš„ä½“éªŒä¸è¯¥æ˜¯æ•°å€¼è†¨èƒ€ã€‚è‡³å°‘ï¼Œè®©ç©å®¶ç©ä¸‹å»çš„åŠ¨åŠ›ä¸è¯¥æ˜¯å¼ºåŒ–ç¨‹åºã€‚å¦‚æœæˆ‘ä»¬æ‹¿èµ°äº†ç©å®¶çš„æ—¶é—´ï¼Œæˆ‘ä»¬èµ·ç åº”å½“è¡¥å¿ä¸€äº›ä»€ä¹ˆæ‰å¯¹ï¼Œè€Œä¸è¯¥å¾’ç•™æ‚”æ¨æ„Ÿã€‚ å¯èƒ½ä¹Ÿæœ‰ç‚¹åæ¿€äº†ï¼Œå¯èƒ½åªæ˜¯æˆ‘è‡ªå·±ä¸å–œæ¬¢è¿™ç§ç±»å‹è€Œå·²â€¦â€¦ç”šè‡³æˆ‘è‡ªå·±ä¹Ÿè§‰å¾—è¿˜ç®—å¯ä»¥ï¼Œè‡³å°‘ç¡®å®æœ‰è®©æˆ‘å°è±¡æ·±åˆ»çš„æ—¶åˆ»ã€‚ä½†æˆ‘è¿˜æ˜¯æ„Ÿè§‰ä¸å¼€å¿ƒï¼Œæ¯•ç«Ÿï¼Œâ€œæˆ‘ä»¬æ˜¯ä¸æ˜¯æœ¬å¯ä»¥åšå¾—æ›´å¥½ï¼Ÿâ€","categories":[{"name":"æ‚è°ˆ","slug":"æ‚è°ˆ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/"},{"name":"ç¢ç¢å¿µ","slug":"æ‚è°ˆ/ç¢ç¢å¿µ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/%E7%A2%8E%E7%A2%8E%E5%BF%B5/"}],"tags":[]},{"title":"ç¬¬ä¸€ç« â€”â€”ç³»ç»Ÿæ¥å£","slug":"learning/open-course/MIT-6.S081/Notes/note1-sys-interface","date":"2025-06-01T03:18:38.000Z","updated":"2025-08-22T03:14:43.992Z","comments":true,"path":"wiki/learning/open-course/MIT-6.S081/Notes/note1-sys-interface/","permalink":"http://rinevard.github.io/wiki/learning/open-course/MIT-6.S081/Notes/note1-sys-interface/","excerpt":"","text":"img{ width: 70%; } å¸¸ç”¨çš„ç³»ç»Ÿæ¥å£ ç³»ç»Ÿè°ƒç”¨ æè¿° fork() åˆ›å»ºè¿›ç¨‹ exit() ç»“æŸå½“å‰è¿›ç¨‹ wait() ç­‰å¾…å­è¿›ç¨‹ç»“æŸ kill(pid) ç»“æŸ pid æ‰€æŒ‡è¿›ç¨‹ getpid() è·å¾—å½“å‰è¿›ç¨‹ pid sleep(n) ç¡çœ  n ç§’ exec(filename, *argv) åŠ è½½å¹¶æ‰§è¡Œä¸€ä¸ªæ–‡ä»¶ sbrk(n) ä¸ºè¿›ç¨‹å†…å­˜ç©ºé—´å¢åŠ  n å­—èŠ‚ open(filename, flags) æ‰“å¼€æ–‡ä»¶ï¼Œflags æŒ‡å®šè¯»/å†™æ¨¡å¼ read(fd, buf, n) ä»æ–‡ä»¶ä¸­è¯» n ä¸ªå­—èŠ‚åˆ° buf write(fd, buf, n) ä» buf ä¸­å†™ n ä¸ªå­—èŠ‚åˆ°æ–‡ä»¶ close(fd) å…³é—­æ‰“å¼€çš„ fd dup(fd) å¤åˆ¶ fd pipe( p) åˆ›å»ºç®¡é“ï¼Œ å¹¶æŠŠè¯»å’Œå†™çš„ fd è¿”å›åˆ°p chdir(dirname) æ”¹å˜å½“å‰ç›®å½• mkdir(dirname) åˆ›å»ºæ–°çš„ç›®å½• mknod(name, major, minor) åˆ›å»ºè®¾å¤‡æ–‡ä»¶ fstat(fd) è¿”å›æ–‡ä»¶ä¿¡æ¯ link(f1, f2) ç»™ f1 åˆ›å»ºä¸€ä¸ªæ–°åå­—(f2) unlink(filename) åˆ é™¤æ–‡ä»¶ è¿›ç¨‹ ç³»ç»Ÿè°ƒç”¨ æè¿° fork() åˆ›å»ºè¿›ç¨‹ exit() ç»“æŸå½“å‰è¿›ç¨‹ wait() ç­‰å¾…å­è¿›ç¨‹ç»“æŸ kill(pid) ç»“æŸ pid æ‰€æŒ‡è¿›ç¨‹ getpid() è·å¾—å½“å‰è¿›ç¨‹ pid exec(filename, *argv) åŠ è½½å¹¶æ‰§è¡Œä¸€ä¸ªæ–‡ä»¶ sbrk(n) ä¸ºè¿›ç¨‹å†…å­˜ç©ºé—´å¢åŠ  n å­—èŠ‚ I/O ç³»ç»Ÿè°ƒç”¨ æè¿° open(filename, flags) æ‰“å¼€æ–‡ä»¶ï¼Œflags æŒ‡å®šè¯»/å†™æ¨¡å¼ read(fd, buf, n) ä»æ–‡ä»¶ä¸­è¯» n ä¸ªå­—èŠ‚åˆ° buf write(fd, buf, n) ä» buf ä¸­å†™ n ä¸ªå­—èŠ‚åˆ°æ–‡ä»¶ close(fd) å…³é—­æ‰“å¼€çš„ fd dup(fd) å¤åˆ¶ fd ä»£ç ç¤ºä¾‹ï¼š char buf[512]; void cat(int fd) &#123; int n; while ((n = read(fd, buf, sizeof(buf))) > 0) &#123; // å†™å…¥æ ‡å‡†è¾“å‡º if (write(1, buf, n) != n) &#123; fprintf(2, \"cat: write error\\n\"); exit(1); &#125; &#125; if (n &lt; 0) &#123; fprintf(2, \"cat: read error\\n\"); exit(1); &#125; &#125; int main(int argc, char *argv[]) &#123; int fd, i; if (argc &lt;= 1) &#123; cat(0); exit(0); &#125; for (i = 1; i &lt; argc; i++) &#123; if ((fd = open(argv[i], O_RDONLY)) &lt; 0) &#123; fprintf(2, \"cat: cannot open %s\\n\", argv[i]); exit(1); &#125; cat(fd); close(fd); &#125; exit(0); &#125; ä¸å¦¨å†æ¥çœ‹çœ‹CSAPPçš„ä¸¤å¼ å›¾ openä¸¤æ¬¡ï¼š forkï¼š ç®¡é“ ç³»ç»Ÿè°ƒç”¨ æè¿° pipe( p) åˆ›å»ºç®¡é“ï¼Œ å¹¶æŠŠè¯»å’Œå†™çš„ fd è¿”å›åˆ°pï¼Œå…¶ä¸­pæ˜¯ int p[2] p[0]: è¯»ç«¯(read end)çš„æ–‡ä»¶æè¿°ç¬¦ p[1]: å†™ç«¯(write end)çš„æ–‡ä»¶æè¿°ç¬¦ æ ·ä¾‹ï¼š grep fork sh.c | wc -l å‘½ä»¤å°†ç¬¬ä¸€ä¸ªå‘½ä»¤(grep)çš„è¾“å‡ºä½œä¸ºç¬¬äºŒä¸ªå‘½ä»¤(wc)çš„è¾“å…¥ï¼Œ| å°±æ˜¯ç®¡é“ç¬¦å·ã€‚ ä¸‹é¢çš„ä»£ç æ˜¯ | çš„å®ç°ç¤ºä¾‹ï¼Œå¤§ä½“æ€è·¯æ˜¯æŠŠ | å·¦è¾¹çš„æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°pipeçš„å†™ç«¯ï¼ŒæŠŠ | å³è¾¹çš„æ ‡å‡†è¾“å…¥é‡å®šå‘åˆ°pipeçš„è¯»ç«¯ã€‚ æ³¨æ„è¦å…³é—­ç®¡é“çš„æ‰€æœ‰å†™å…¥ç«¯æ¥è®© read è¿”å›ï¼Œå› ä¸ºå½“ pipe ä¸­æ²¡æœ‰æ•°æ®æ—¶ï¼Œread ä¼šé˜»å¡ç­‰å¾…æ–°æ•°æ®å†™å…¥ï¼Œæˆ–æ˜¯å†™å…¥ç«¯éƒ½å…³é—­ï¼Œå¦‚æœæœ‰æ–°æ•°æ®å†™å…¥å°±è¯»å–ï¼Œå¦‚æœæ‰€æœ‰å†™å…¥ç«¯éƒ½å…³é—­å°±è¿”å› 0ï¼ˆå¯¹åº”EOFï¼‰. // å‡è®¾æˆ‘ä»¬çš„å‘½ä»¤æ˜¯ grep fork sh.c | wc -l case PIPE: pcmd = (struct pipecmd *)cmd; if (pipe(p) &lt; 0) panic(\"pipe\"); if (fork1() == 0) &#123; close(1); // é‡Šæ”¾æ–‡ä»¶æè¿°ç¬¦1ï¼Œä»è€Œè®©dupæŠŠæ–‡ä»¶æè¿°ç¬¦1ç»‘å®šåˆ°p[1]æŒ‡å‘çš„ä¸œè¥¿ dup(p[1]); //æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬åœ¨é‡å®šå‘æ ‡å‡†è¾“å‡ºåˆ°pipeçš„å†™ç«¯ close(p[0]); close(p[1]); runcmd(pcmd->left); // å¯¹åº” grep fork sh.c &#125; if (fork1() == 0) &#123; close(0); // ä¸ä¸Šé¢ç±»ä¼¼ï¼Œé‡å®šå‘æ ‡å‡†è¾“å…¥åˆ°pipeçš„è¯»ç«¯ dup(p[0]); close(p[0]); close(p[1]); runcmd(pcmd->right); // å¯¹åº” wc -l &#125; close(p[0]); close(p[1]); wait(0); wait(0); break; æ–‡ä»¶ç³»ç»Ÿ ç³»ç»Ÿè°ƒç”¨ æè¿° chdir(dirname) æ”¹å˜å½“å‰ç›®å½• mkdir(dirname) åˆ›å»ºæ–°çš„ç›®å½• mknod(name, major, minor) åˆ›å»ºè®¾å¤‡æ–‡ä»¶ fstat(fd) è¿”å›æ–‡ä»¶ä¿¡æ¯ link(f1, f2) ç»™ f1 åˆ›å»ºä¸€ä¸ªæ–°åå­—(f2) unlink(filename) åˆ é™¤æ–‡ä»¶ æˆ‘ä»¬é€šå¸¸è®¤ä¸ºæ–‡ä»¶åå°±æ˜¯æ–‡ä»¶æœ¬èº«ï¼Œä½†å®é™…ä¸Šåç§°æ˜¯ä¸€ä¸ªç¡¬é“¾æ¥(hard link)ã€‚ä¸€ä¸ªæ–‡ä»¶å¯ä»¥æœ‰å¤šä¸ªç¡¬é“¾æ¥â€”â€”ä¾‹å¦‚ï¼Œä¸€ä¸ªç›®å½•è‡³å°‘æœ‰ä¸¤ä¸ªç¡¬é“¾æ¥ï¼šç›®å½•åå’Œ . ï¼ˆåœ¨ç›®å½•å†…æ—¶ï¼‰ã€‚å®ƒè¿˜æœ‰æ¥è‡ªæ¯ä¸ªå­ç›®å½•çš„ä¸€ä¸ªç¡¬é“¾æ¥ï¼ˆæ¯ä¸ªå­ç›®å½•ä¸­çš„ .. æ–‡ä»¶ï¼‰ã€‚ é‚£æ–‡ä»¶æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸€ä¸ªæ–‡ä»¶å’Œä¸€ä¸ª inode ä¸€ä¸€å¯¹åº”ï¼Œinodeå­˜æ”¾ç€è¿™ä¸ªæ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯ xv6ç³»ç»Ÿçš„inodeç»“æ„åŒ…æ‹¬ä¸‹é¢è¿™äº›å†…å®¹ï¼š struct dinode &#123; short type; // File type short major; // Major device number (T_DEVICE only) short minor; // Minor device number (T_DEVICE only) short nlink; // Number of links to inode in file system uint size; // Size of file (bytes) uint addrs[NDIRECT + 1]; // Data block addresses &#125;; å¯ä»¥é€šè¿‡ fstat è·å–æ–‡ä»¶æè¿°ç¬¦æŒ‡å‘çš„æ–‡ä»¶çš„ä¿¡æ¯ã€‚dinodeæ˜¯ç£ç›˜ä¸Šå­˜å‚¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œstatæ˜¯æš´éœ²ç»™ç”¨æˆ·çš„æ–‡ä»¶ä¿¡æ¯æ¥å£ struct stat &#123; int dev; // File system's disk device uint ino; // Inode number short type; // Type of file short nlink; // Number of links to file uint64 size; // Size of file in bytes &#125;; ä»…å½“æˆ‘ä»¬æŠŠæ‰€æœ‰æŒ‡å‘æŸä¸ªinodeçš„é“¾æ¥éƒ½åˆ é™¤ï¼Œè¿™ä¸ªinodeæ‰ä¼šè¢«åˆ é™¤ã€‚ åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ç”¨ ln åˆ›å»ºäº†ä¸¤ä¸ªè¿æ¥ file2 å’Œ file3ï¼Œå®ƒä»¬éƒ½å’Œ file1 æŒ‡å‘çš„ inode ç›¸åŒã€‚å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœç”¨ echo ä¿®æ”¹ file2ï¼Œé‚£ä¹ˆ file1 ä¹Ÿä¼šè¢«ä¿®æ”¹ï¼Œå› ä¸ºæˆ‘ä»¬ä¿®æ”¹çš„å®é™…ä¸Šæ˜¯ inodeï¼Œè€Œå®ƒä»¬æŒ‡å‘åŒä¸€ä¸ªinodeã€‚ls -l åˆ—å‡ºç›®å½•ä¸­çš„æ–‡ä»¶å’Œç›®å½•çš„è¯¦ç»†ä¿¡æ¯ï¼Œç¬¬äºŒä¸ªå€¼æ˜¯inodeçš„linkæ•°ã€‚æˆ‘ä»¬å¯ä»¥æŠŠé“¾æ¥è§†ä½œæ–‡ä»¶çš„â€œåˆ«åâ€ã€‚ $ echo &quot;What&#39;s in a name? That which we call a rose, by any other word would smell as sweet.&quot; &gt; file1.txt $ ls file1.txt open-course programs $ cat file1.txt What&#39;s in a name? That which we call a rose, by any other word would smell as sweet. $ ln file1.txt file2.txt $ ln file1.txt file3.txt $ ls -l total 20 -rw-r--r-- 3 rinevard rinevard 85 May 29 11:37 file1.txt -rw-r--r-- 3 rinevard rinevard 85 May 29 11:37 file2.txt -rw-r--r-- 3 rinevard rinevard 85 May 29 11:37 file3.txt drwxr-xr-x 3 rinevard rinevard 4096 May 28 11:00 open-course drwxr-xr-x 2 rinevard rinevard 4096 May 28 10:19 programs $ echo &quot;-- William Shakespeare&quot; &gt;&gt; file2.txt $ cat file1.txt What&#39;s in a name? That which we call a rose, by any other word would smell as sweet. -- William Shakespeare ä½ å¯èƒ½ä¼šå¥½å¥‡ç›®å½•çš„é“¾æ¥æ•°æ€ä¹ˆè®¡ç®—ï¼Œæ˜¯è¿™æ ·çš„ï¼š æ¯ä¸ªç›®å½•é»˜è®¤æœ‰2ä¸ªé“¾æ¥ï¼Œä¸€ä¸ªæ˜¯ç›®å½•è‡ªèº«çš„â€.â€ï¼Œå¦ä¸€ä¸ªæ˜¯çˆ¶ç›®å½•ä¸­æŒ‡å‘è¯¥ç›®å½•çš„é“¾æ¥ ç›®å½•ä¸­æ¯åŒ…å«ä¸€ä¸ªå­ç›®å½•ï¼Œé“¾æ¥æ•°å°±ä¼š+1ï¼Œå› ä¸ºæ¯ä¸ªå­ç›®å½•éƒ½ä¼šåˆ›å»ºâ€..â€é“¾æ¥æŒ‡å‘çˆ¶ç›®å½• åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œrootdir çš„é“¾æ¥æ•°æ˜¯ 4ï¼Œå› ä¸ºçˆ¶ç›®å½•æœ‰ä¸€ä¸ªæŒ‡å‘å®ƒçš„é“¾æ¥â€rootdirâ€ï¼Œå®ƒè‡ªå·±æœ‰ä¸€ä¸ªæŒ‡å‘è‡ªå·±çš„é“¾æ¥â€.â€ï¼Œå®ƒçš„ä¸¤ä¸ªå­ç›®å½•dir1å’Œdir2åˆ†åˆ«æœ‰æŒ‡å‘å®ƒçš„é“¾æ¥â€..â€ ~/open-course/rootdir$ ls dir1 dir2 file1.md file2.md file3.md ~/open-course/rootdir$ ls ../ -l total 8 drwxr-xr-x 11 rinevard rinevard 4096 May 31 16:40 mit-6.828 drwxr-xr-x 4 rinevard rinevard 4096 Jun 1 10:58 rootdir æ–‡ä»¶è·¯å¾„æ ¼å¼ï¼šä»¥ â€œ/â€ å¼€å¤´çš„æ˜¯ä»æ ¹ç›®å½•å‡ºå‘çš„è·¯å¾„ï¼Œå¦åˆ™æ˜¯ä»å½“å‰æ–‡ä»¶å¤¹å‡ºå‘çš„è·¯å¾„ ~/open-course$ ls mit-6.828 ~/open-course$ ls mit-6.828/ LICENSE Makefile README conf grade-lab-util gradelib.py kernel mkfs user ~/open-course$ ls /home/rinevard/ open-course programs unix shellçš„è®¸å¤šå‘½ä»¤éƒ½æ˜¯ç”¨æˆ·çº§åˆ«çš„ï¼Œè€Œéå†…ç½®çš„ã€‚shellé€šè¿‡forkå­è¿›ç¨‹å¹¶è°ƒç”¨execæ¥æ‰§è¡Œå®ƒä»¬ã€‚ä½†cdæ˜¯å†…ç½®çš„ï¼Œå› ä¸ºcdæ”¹å˜äº†shellè‡ªèº«çš„å·¥ä½œç›®å½•ã€‚ // Read and run input commands. while (getcmd(buf, sizeof(buf)) >= 0) &#123; if (buf[0] == 'c' &amp;&amp; buf[1] == 'd' &amp;&amp; buf[2] == ' ') &#123; // Chdir must be called by the parent, not the child. buf[strlen(buf) - 1] = 0; // chop \\n if (chdir(buf + 3) &lt; 0) fprintf(2, \"cannot cd %s\\n\", buf + 3); continue; &#125; if (fork1() == 0) runcmd(parsecmd(buf)); wait(0); &#125;","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"MIT-6.S081","slug":"å…¬å¼€è¯¾/MIT-6-S081","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/"},{"name":"Notes","slug":"å…¬å¼€è¯¾/MIT-6-S081/Notes","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/Notes/"}],"tags":[]},{"title":"Lab 1 Xv6 and Unix utilities","slug":"learning/open-course/MIT-6.S081/Labs/lab1-util","date":"2025-05-31T03:18:38.000Z","updated":"2025-10-15T08:09:56.939Z","comments":true,"path":"wiki/learning/open-course/MIT-6.S081/Labs/lab1-util/","permalink":"http://rinevard.github.io/wiki/learning/open-course/MIT-6.S081/Labs/lab1-util/","excerpt":"","text":"img{ width: 80%; } åœ¨å¼€å§‹ lab ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆæˆ‘ä»¬å†™çš„ä»£ç èƒ½ç›´æ¥åœ¨ xv6 çš„ shell é‡Œæ‰§è¡Œã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ sh.c çš„éƒ¨åˆ†ä»£ç ï¼š // Read and run input commands. while (getcmd(buf, sizeof(buf)) >= 0) &#123; if (buf[0] == 'c' &amp;&amp; buf[1] == 'd' &amp;&amp; buf[2] == ' ') &#123; // Chdir must be called by the parent, not the child. buf[strlen(buf) - 1] = 0; // chop \\n if (chdir(buf + 3) &lt; 0) fprintf(2, \"cannot cd %s\\n\", buf + 3); continue; &#125; if (fork1() == 0) runcmd(parsecmd(buf)); wait(0); &#125; ä»è¿™é‡Œæˆ‘ä»¬çœ‹å‡ºï¼Œshellé€šè¿‡forkå­è¿›ç¨‹æ¥æ‰§è¡Œå‘½ä»¤ã€‚å¦‚æœè¿›ä¸€æ­¥çœ‹çœ‹ runcmd å‡½æ•°ï¼Œå°±ä¼šå‘ç°å®ƒè°ƒç”¨äº† execï¼Œå› æ­¤ shell èƒ½æ‰§è¡Œç”¨æˆ·å†™çš„ä»£ç ã€‚ æœ‰è¶£çš„æ˜¯ï¼Œä»è¿™æ®µä»£ç é‡Œæˆ‘ä»¬ä¹Ÿèƒ½çœ‹å‡º cd æ˜¯å†…ç½®åœ¨ shell é‡Œçš„å‘½ä»¤ï¼Œè¿™æ˜¯å› ä¸º cd æ”¹å˜äº†shellè‡ªèº«çš„å·¥ä½œç›®å½•ã€‚ sleepè¿™é¢˜è®©æˆ‘ä»¬ç®€å•ç†Ÿæ‚‰ä¸‹æ¥å£ã€‚å…¶å®è¿™é‡Œç”¨ printf æ›´æ˜“è¯»ï¼Œä¸è¿‡æˆ‘å½“æ—¶åšçš„æ—¶å€™æ²¡å‘ç°æœ‰ printf #include \"kernel/types.h\" #include \"user/user.h\" #include \"kernel/fcntl.h\" int main(int argc, char *argv[]) &#123; char *errmsg = \"sleep: missing operand\\n\"; if (argc != 2) &#123; write(1, errmsg, strlen(errmsg)); exit(1); &#125; sleep(atoi(argv[1])); exit(0); &#125; pingpongè¿™é¢˜è®©æˆ‘ä»¬æ¥è§¦ä¸€ä¸‹ç®¡é“çš„ä½¿ç”¨ï¼Œéš¾è€…ä¸ä¼šï¼Œä¼šè€…ä¸éš¾ #include \"kernel/types.h\" #include \"user/user.h\" #include \"kernel/fcntl.h\" int main() &#123; char buf[512]; int p_parent_sender[2]; int p_child_sender[2]; pipe(p_parent_sender); pipe(p_child_sender); if (fork() == 0) &#123; // å­è¿›ç¨‹å…ˆè¯» read(p_parent_sender[0], buf, 2); printf(\"%d: received ping\\n\", getpid()); write(p_child_sender[1], buf, 2); close(p_parent_sender[0]); close(p_parent_sender[1]); close(p_child_sender[0]); close(p_child_sender[1]); exit(0); &#125; // çˆ¶è¿›ç¨‹å…ˆå†™ write(p_parent_sender[1], buf, 2); read(p_child_sender[0], buf, 2); printf(\"%d: received pong\\n\", getpid()); close(p_parent_sender[0]); close(p_parent_sender[1]); close(p_child_sender[0]); close(p_child_sender[1]); exit(0); &#125; primesè¿™é¢˜å¾ˆæœ‰è¶£ï¼Œæ˜¯ä¸€ä¸ªå¹¶å‘ç´ æ•°ç­›æ³•ã€‚è¿™ä¸ªç®—æ³•ç†è®ºä¸Šæ˜¯å¯ä»¥æé«˜æ•ˆç‡çš„ï¼Œæ¯•ç«Ÿåœ¨è¿è¡Œäº†ä¸€æ®µæ—¶é—´åï¼Œå„ä¸ªè¿›ç¨‹é‡Œéƒ½æœ‰ä¸€äº›æ•°ç­‰å¾…ç­›é€‰ï¼Œè¿™æ—¶å„ä¸ªè¿›ç¨‹åœ¨åŒæ—¶ç”¨è‡ªå·±çš„ç´ æ•°ç­›é€‰è¾“å…¥çš„æ•°ã€‚ ç½‘ä¸Šå¾ˆå¤šä»£ç éƒ½æ˜¯2020ç‰ˆçš„ï¼Œå½“æ—¶çš„è¦æ±‚æ˜¯æ‰¾å‡º 2-35 é—´çš„ç´ æ•°ã€‚è¿™äº›ä»£ç èƒ½è¿‡è€ç‰ˆæœ¬çš„è¦æ±‚ï¼Œä½†è¿‡ä¸äº†2024ç‰ˆè¦æ±‚çš„ 2-280ã€‚æˆ‘è®¤çœŸçœ‹äº†ä¸€ä¸¤ä»½ä»£ç ï¼Œå‘ç°å®ƒä»¬åœ¨ç”¨ fork åˆ›å»ºå­è¿›ç¨‹çš„å­è¿›ç¨‹åï¼Œå¿˜äº†å…³é—­å­å­è¿›ç¨‹çš„è¿æ¥åˆ°çˆ¶è¿›ç¨‹çš„æè¿°ç¬¦ã€‚å¯ä»¥çœ‹ä¸‹é¢ç¤ºæ„å›¾çš„ç¬¬ä¸‰ä¸ªæ¡†ï¼Œè¿™äº›ä»£ç å¿˜äº†å…³é—­ child child process çš„ fd_read. æˆ‘ç”»äº†ç¤ºæ„å›¾æ¥è§£é‡Šæˆ‘çš„ä»£ç ~ #include \"kernel/types.h\" #include \"kernel/stat.h\" #include \"user/user.h\" const int NUM = 280; int connected_fork(int *); void do_child(int); int main() &#123; int pid; int fd = -1; if ((pid = connected_fork(&amp;fd)) == 0) &#123; do_child(fd); exit(0); &#125; int n; for (n = 2; n &lt;= NUM; n++) &#123; write(fd, (void *)&amp;n, sizeof(int)); &#125; close(fd); wait(0); exit(0); &#125; /* * åˆ›å»ºå­è¿›ç¨‹. çˆ¶è¿›ç¨‹çš„ fd å’Œå­è¿›ç¨‹çš„ fd ä¼šè¢«åˆ†åˆ«è®¾ç½®ä¸ºä¸€ä¸ª pipe çš„ä¸¤ç«¯. * å¯¹çˆ¶è¿›ç¨‹, fd è¢«è®¾ç½®ä¸ºå†™ç«¯. * å¯¹å­è¿›ç¨‹, fd è¢«è®¾ç½®ä¸ºè¯»ç«¯. * * return 0 if is child else child's pid */ int connected_fork(int *fd) &#123; int p[2]; pipe(p); int pid; if ((pid = fork()) == 0) &#123; // child close(p[1]); *fd = p[0]; &#125; else &#123; // parent close(p[0]); *fd = p[1]; &#125; return pid; &#125; /* * ä» fd_read ä¸­è¯»å–æ•°å­—, æ‰“å°ç¬¬ä¸€ä¸ªæ•°, * ç­›é€‰å…¶ä»–æ•°å¹¶æ–°å»ºå­è¿›ç¨‹æŠŠè¢«ç­›é€‰åçš„æ•°å†™å…¥å­è¿›ç¨‹. åœ¨è¿è¡Œå®Œæˆåå…³é—­ fd_read. */ void do_child(int fd_read) &#123; int n = -1; int prime = -1; int fd = -1; while (read(fd_read, (void *)&amp;n, sizeof(int)) > 0) &#123; if (prime == -1) &#123; prime = n; printf(\"prime %d\\n\", prime); &#125; if ((n % prime) != 0) &#123; if (fd == -1 &amp;&amp; connected_fork(&amp;fd) == 0) &#123; // fd == -1 ç­‰ä»·äºæ²¡æœ‰å­è¿›ç¨‹ // å¦‚æœæ²¡æœ‰å­è¿›ç¨‹å°±åˆ›å»ºå­è¿›ç¨‹å¹¶è®©å®ƒå¼€å§‹å·¥ä½œ close(fd_read); do_child(fd); return; &#125; write(fd, (void *)&amp;n, sizeof(int)); &#125; &#125; close(fd_read); // fd == -1 ç­‰ä»·äºæ²¡æœ‰å­è¿›ç¨‹, è¯´æ˜å®ƒæ˜¯æœ€åä¸€ä¸ªè¿›ç¨‹ // æœ€åä¸€ä¸ªè¿›ç¨‹ä¸éœ€è¦å…³é—­æè¿°ç¬¦, ä¹Ÿä¸éœ€è¦ç­‰å¾… if (fd == -1) &#123; return; &#125; close(fd); wait(0); &#125; /* * ä¸ªäººè®¤ä¸ºå…³é—­ fd_read ä¸åº”è¯¥æ˜¯ do_child çš„å·¥ä½œ, æˆ‘è§‰å¾—\"è°åˆ›å»º, * è°å…³é—­\"ä¼šæ›´åˆé€‚. ä¹Ÿå°±æ˜¯è¯´, æˆ‘è§‰å¾—è®©è°ƒç”¨ do_child çš„å‡½æ•°å…³é—­ fd_read * æ›´åˆé€‚. * * ä½†å¦‚æœ do_child ä¸å…³é—­ fd_read, å­å­™è¿›ç¨‹å°±ä¼šä¿ç•™çˆ¶è¿›ç¨‹æœªå…³é—­çš„æè¿°ç¬¦, * ä»è€Œè€—å°½ xv6 çš„èµ„æº. */ findåœ¨ ls.c çš„åŸºç¡€ä¸Šç¨å¾®æ”¹æ”¹å°±å¥½äº†ï¼Œè¦æ³¨æ„çš„æ˜¯é€’å½’æ—¶ä¸è¦é€’å½’è¿› â€œ.â€ å’Œ â€œ..â€ ä¸¤ä¸ªæ–‡ä»¶å¤¹ æˆ‘ä»¬å®ç°çš„ find &lt;path&gt; &lt;name&gt; çš„åŠŸèƒ½å’Œ Linux é‡Œçš„ find &lt;path&gt; -name &lt;name&gt; ä¸€è‡´ #include \"kernel/types.h\" #include \"kernel/stat.h\" #include \"user/user.h\" #include \"kernel/fs.h\" #include \"kernel/fcntl.h\" void find(const char *path, const char *name); const char *basename(const char *path); int main(int argc, char *argv[]) &#123; if (argc != 3) &#123; printf(\"usage: find &lt;path> &lt;filename>\\n\"); &#125; find(argv[1], argv[2]); exit(0); &#125; /* * åœ¨ä»¥ path ä¸ºæ ¹èŠ‚ç‚¹çš„æ–‡ä»¶æ ‘ä¸‹æœç´¢åä¸º name çš„æ–‡ä»¶, * å¦‚æœæ‰¾åˆ°åˆ™æ‰“å°å…¶è·¯å¾„. */ void find(const char *path, const char *name) &#123; int fd; if ((fd = open(path, O_RDONLY)) &lt; 0) &#123; fprintf(2, \"find: cannot open %s\\n\", path); return; &#125; struct stat st; if (fstat(fd, &amp;st) &lt; 0) &#123; fprintf(2, \"find: cannot stat %s\\n\", path); close(fd); return; &#125; if (strcmp(basename(path), name) == 0) &#123; printf(\"%s\\n\", path); &#125; // åªæœ‰æ–‡ä»¶å¤¹æœ‰é€’å½’çš„å¿…è¦ if (st.type != T_DIR) &#123; close(fd); return; &#125; char buf[512], *p; struct dirent de; // ç¬¬ä¸€ä¸ª +1 å¯¹åº” '/', ç¬¬äºŒä¸ª +1 å¯¹åº”ç»“å°¾çš„ '\\0' if (strlen(path) + 1 + DIRSIZ + 1 > sizeof(buf)) &#123; printf(\"ls: path too long\\n\"); &#125; strcpy(buf, path); p = buf + strlen(buf); *p++ = '/'; while (read(fd, &amp;de, sizeof(de)) == sizeof(de)) &#123; if (de.inum == 0 || strcmp(de.name, \".\") == 0 || strcmp(de.name, \"..\") == 0) continue; memmove(p, de.name, DIRSIZ); p[DIRSIZ] = 0; if (stat(buf, &amp;st) &lt; 0) &#123; printf(\"ls: cannot stat %s\\n\", buf); continue; &#125; find(buf, name); &#125; &#125; /* * è·å–è·¯å¾„ path çš„æœ€åä¸€éƒ¨åˆ† */ const char *basename(const char *path) &#123; const char *p; for (p = path + strlen(path); p >= path &amp;&amp; *p != '/'; --p) ; ++p; return p; &#125; xargsxargs å°†æ ‡å‡†è¾“å…¥ï¼ˆstdinï¼‰æ•°æ®è½¬æ¢æˆå‘½ä»¤è¡Œå‚æ•°ï¼Œä¸€èˆ¬å’Œç®¡é“ä¸€èµ·ä½¿ç”¨ã€‚åœ¨ linux ä¸­ï¼Œxargs é»˜è®¤çš„å‘½ä»¤æ˜¯ echo. ä¸Šé¢çš„è§£é‡Šå¯èƒ½ä¸å¤ªæ¸…æ™°ï¼Œé€šè¿‡ä¸¤ä¸ªä¾‹å­å°±èƒ½çœ‹å‡ºæ¥å®ƒåœ¨åšä»€ä¹ˆäº†ï¼š ç¬¬ä¸€ä¸ªä¾‹å­æ˜¯ç›´æ¥ä½¿ç”¨ xargs $ xargs -n 1 echo Im prefix 111 Im prefix 111 222 Im prefix 222 ï¼ˆæŒ‰ ctrl+D ç»ˆæ­¢è¾“å…¥) ç¬¬äºŒä¸ªä¾‹å­æ˜¯å’Œç®¡é“è”ç”¨ $ (echo 1 ; echo 2) | xargs -n 1 echo 1 2 $ æˆ‘ä»¬å®ç°çš„ xargs &lt;command&gt; çš„åŠŸèƒ½å’Œ Linux é‡Œçš„ xargs -n 1 &lt;command&gt; ä¸€è‡´ #include \"kernel/types.h\" #include \"kernel/param.h\" #include \"user/user.h\" int main(int argc, char *argv[]) &#123; if (argc &lt; 2) &#123; fprintf(2, \"usage: xargs command\\n\"); exit(1); &#125; char *cmd = argv[1]; char *cmdargs[MAXARG]; int cmdargc = 0; // åœ¨æ›´æ”¹ cmdargc å‰, æœ€å¥½æ£€æŸ¥ cmdargc &lt; MAXARG, // ä¸è¿‡ä¸ºäº†ç®€åŒ–ä»£ç , æˆ‘ä»¬å°±ä¸æ£€æŸ¥äº† // argv[0] æ˜¯ 'xargs', argv[1] æ˜¯ command, ä¹‹åæ˜¯å‚æ•° // cmdargs åº”å½“å½¢å¦‚ [command, arg1, arg2, ..., addition_arg1, ...] cmdargc = argc - 1; for (int i = 0; i &lt; cmdargc; i++) &#123; cmdargs[i] = argv[i + 1]; &#125; char buf[512]; // è¾“å…¥è¡Œ char *p = buf; // è¾“å…¥è¡Œçš„æœ«å°¾ while (read(0, p, 1) > 0) &#123; if (p[0] == '\\n') &#123; p[0] = '\\0'; cmdargs[cmdargc] = buf; ++cmdargc; cmdargs[cmdargc] = 0; ++cmdargc; if (fork() == 0) &#123; exec(cmd, cmdargs); &#125; wait(0); // é‡ç½® p = buf; cmdargc = argc - 1; &#125; else &#123; ++p; &#125; &#125; exit(0); &#125;","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"MIT-6.S081","slug":"å…¬å¼€è¯¾/MIT-6-S081","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/"},{"name":"Labs","slug":"å…¬å¼€è¯¾/MIT-6-S081/Labs","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/Labs/"}],"tags":[]},{"title":"æ…¢æ…¢åœ°å†²æµª","slug":"others/thoughts/ç½‘ä¸Šå†²æµª","date":"2025-05-28T03:50:11.000Z","updated":"2025-08-19T07:08:07.564Z","comments":true,"path":"wiki/others/thoughts/ç½‘ä¸Šå†²æµª/","permalink":"http://rinevard.github.io/wiki/others/thoughts/%E7%BD%91%E4%B8%8A%E5%86%B2%E6%B5%AA/","excerpt":"","text":"åœ¨äº’è”ç½‘ä¸Šå†²æµªæ—¶ï¼Œå¶å°”ä¼šçœ‹åˆ°ä¸€äº›åšå®¢ï¼Œè‹¥æ˜¯å®ƒä»¬å¸®åˆ°äº†æˆ‘ï¼Œæˆ‘ç»å¸¸ä¹Ÿä¼šç‚¹è¿›ä¸»é¡µçœ‹çœ‹ä½œè€…éƒ½å†™äº†æ€æ ·çš„æ–‡ç« ï¼Œéƒ½æœ‰æ€æ ·çš„æ•…äº‹ã€‚ å¾ˆå¤šäººçš„ç½‘ç«™é‡Œå…¨æ˜¯æŠ€æœ¯æ–‡ç« ï¼Œæˆ‘å¯¹è¿™æ ·çš„ç½‘ç«™ç¡®å®æ²¡ä»€ä¹ˆå…´è‡´ã€‚æˆ‘æ›´å–œæ¬¢æ‚è°ˆç±»çš„æ–‡ç« ï¼Œé‚£ç§åƒæ˜¯åœ¨å¤œæ·±äººé™æ—¶ï¼Œç‹¬è‡ªä¸€äººåœ¨ç”µè„‘å‰æ…¢æ…¢å†™ä¸‹çš„æ–‡ç« ã€‚è¯»è¿™æ ·ç‹¬å¤„æ—¶å†™ä¸‹çš„æ–‡ç« ï¼Œæ€»è®©æˆ‘è§‰å¾—è‡ªå·±å’Œä½œè€…çš„çµé­‚æ›´è¿‘äº†ä¸€ç‚¹ã€‚ åœ¨äº’è”ç½‘ä¸Šéšæœºæ¼«æ¸¸ï¼Œå¯¹ç€å®Œå…¨ä¸è®¤è¯†è‡ªå·±çš„äººäº§ç”Ÿå•ç®­å¤´ï¼Œå¦‚æœè¿æ°”å¥½çš„è¯è¯´ä¸å®šä¼šæ˜¯åŒç®­å¤´ï¼ŒçœŸçš„éå¸¸æœ‰è¶£ã€‚æˆ‘å¯èƒ½è¿˜æ˜¯å–œæ¬¢æ…¢ä¸€ç‚¹çš„æ•…äº‹ï¼Œå–œæ¬¢æœ‰ç€å¾ˆé•¿å¾ˆé•¿å›å¤çš„è´´å­ï¼Œå–œæ¬¢æŠŠè‡ªå·±é‡è§çš„è¶£äº‹åˆ†äº«åˆ°ç½‘ä¸Šçš„è§†é¢‘ï¼Œå–œæ¬¢éšæ„çš„ã€çœŸè¯šçš„æ–‡ç« ã€‚å®ƒä»¬åªæ˜¯è¢«æ”¾åœ¨é‚£é‡Œï¼Œç­‰ç€åå¹´åè¢«å¦ä¸€ä¸ªäººå¶ç„¶å‘ç°ï¼Œé‚£æ˜¯ç—•è¿¹ã€‚ /* éšè—è‰ä¹¦ */ .hidden-text { font-size: 18px; text-align: center; margin: 20px 0; /* padding: 20px; */ line-height: 1.5; color: transparent; cursor: default } .hidden-fancy-text::selection { color: black; background: white; } å°±åƒè¿™é‡Œçš„ç—•è¿¹ã€‚","categories":[{"name":"æ‚è°ˆ","slug":"æ‚è°ˆ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/"},{"name":"ç¢ç¢å¿µ","slug":"æ‚è°ˆ/ç¢ç¢å¿µ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/%E7%A2%8E%E7%A2%8E%E5%BF%B5/"}],"tags":[]},{"title":"åœ¨å¼€å§‹ä¹‹å‰","slug":"learning/open-course/MIT-6.S081/BeforeStory","date":"2025-05-27T07:20:38.000Z","updated":"2025-08-22T03:14:43.982Z","comments":true,"path":"wiki/learning/open-course/MIT-6.S081/BeforeStory/","permalink":"http://rinevard.github.io/wiki/learning/open-course/MIT-6.S081/BeforeStory/","excerpt":"","text":"æœ€è¿‘å‘ç°äº† Arthal çš„ç¬”è®°ï¼Œæ„Ÿè§‰å†™å¾—éå¸¸ç²¾ç¾ï¼å›å¤´çœ‹çœ‹è‡ªå·±å¯¹ 15213 labs çš„ç¬”è®°ï¼Œæ„Ÿè§‰å†™å¾—ç¡®å®å¤ªç²—ç³™äº†ï¼Œå¸Œæœ›æˆ‘çš„ 6.S081 çš„ç¬”è®°ä¹Ÿèƒ½å†™å¾—è¯¦ç»†ä¸€äº›ã€‚ å’³å’³ï¼Œæˆ‘çŸ¥é“æˆ‘è¿˜æ²¡å†™ 15213 çš„ proxylabï¼Œä¸è¿‡æˆ‘æ„Ÿè§‰csappç½‘ç»œé‚£ä¸€ç« å†™å¾—æœ‰ç‚¹å«ç³Šï¼Œæ‰€ä»¥æ™šç‚¹å†åšå§ã€‚","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"MIT-6.S081","slug":"å…¬å¼€è¯¾/MIT-6-S081","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/"}],"tags":[]},{"title":"Ludum Dareå‚åŠ æŒ‡å—","slug":"game-design/ldjamå‚èµ›æŒ‡å—","date":"2025-04-13T01:36:38.000Z","updated":"2025-07-20T09:55:53.012Z","comments":true,"path":"wiki/game-design/ldjamå‚èµ›æŒ‡å—/","permalink":"http://rinevard.github.io/wiki/game-design/ldjam%E5%8F%82%E8%B5%9B%E6%8C%87%E5%8D%97/","excerpt":"","text":"é›¶ã€åœ¨æ–‡ç« å¼€å§‹ä¹‹å‰æœ¬æ–‡åŒ…å«äº†å¯¹ Ludum Dare çš„ä»‹ç»ã€å‚ä¸æµç¨‹åŠä¸ªäººçœ‹æ³•ã€‚å†™ä½œçš„å¥‘æœºæ˜¯å‚ä¸ Ludum Dare åä½“éªŒå¾ˆå¥½ï¼Œä½†åœ¨ä¸­æ–‡äº’è”ç½‘ä¸Šæ²¡æœ‰æ‰¾åˆ°å¾ˆå…¨é¢çš„ä»‹ç»èµ„æ–™ï¼Œåªæ‰¾åˆ°äº† è§„åˆ™ä»‹ç»ã€‚åœ¨è§„åˆ™ä»‹ç»ä¹‹å¤–ï¼Œæˆ‘å¸Œæœ›èŠèŠ Ludum Dare çš„ä½“éªŒä¸ºä»€ä¹ˆå¥½ï¼ˆæ¯”èµ·æˆ‘å‚åŠ è¿‡çš„å…¶ä»– gamejamï¼‰ï¼Œå¹¶æŒ‰æ—¶é—´çº¿ä»‹ç»ä¸€ä¸‹å‚ä¸æµç¨‹ã€‚ ä¸€ã€ä»€ä¹ˆæ˜¯ Ludum Dareå®˜ç½‘å†™åˆ°ï¼Œâ€Ludum Dare is an event where you create a game from scratch in a weekend based on a theme.â€ï¼ˆå‡ºè‡ª rulesï¼‰ï¼Œå³â€œLudum Dare æ˜¯ä¸€ä¸ªå›´ç»•æŸä¸ªä¸»é¢˜åœ¨ä¸€ä¸ªå‘¨æœ«ä»é›¶å¼€å§‹åšå‡ºä¸€ä¸ªæ¸¸æˆçš„æ´»åŠ¨ã€‚â€æ›´å…·ä½“ä¸€ç‚¹ï¼ŒLudum Dare ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªèµ›é“ï¼Œåˆ†åˆ«æ˜¯å•äºº 48 å°æ—¶åšä¸€ä¸ªæ¸¸æˆå’Œç»„é˜Ÿ 72 å°æ—¶åšä¸€ä¸ªæ¸¸æˆã€‚ è¿™æ—¶å€™æœ‰ç»éªŒçš„è¯»è€…å°±ä¼šé—®äº†ï¼Œè¿™ä¸å°±æ˜¯ gamejam å—ï¼Ÿæ­£æ˜¯å¦‚æ­¤ï¼Ludum Dare æ˜¯éå¸¸æ—©æœŸçš„ gamejamï¼Œå®ƒè‡ª 2002 å¹´å¼€å§‹ä¸¾åŠï¼Œæ¯å¹´ä¸¾åŠä¸¤æ¬¡ï¼Œåˆ°ä»Šå¤©å·²ç»åŠäº† 57 å±Šã€‚æ¯å±Š Ludum Dare éƒ½ä¼šå¸å¼•å…¨çƒæ•°ä»¥ä¸‡è®¡çš„å¼€å‘è€…ï¼Œå¦‚ 2021 å¹´çš„ 49 å±Šæ”¶åˆ°äº†è¿‘ 3000 æ¬¾æ¸¸æˆæäº¤ï¼Œ 2023 å¹´çš„ç¬¬ 52 å±Šæ”¶åˆ°äº† 1632 æ¬¾æ¸¸æˆæäº¤ï¼ˆæ•°æ®æ¥æºï¼‰ã€‚åœ¨è¿™å¤§é‡çš„æäº¤æ¸¸æˆä¸­ï¼Œä¹Ÿæœ‰è®¸å¤šç²¾å“ä½œå“ä»æ­¤å‘æºï¼Œæ¯”å¦‚é‚ªæ¶é“­åˆ»ï¼ˆinscryptionï¼‰çš„åŸå‹ Sacrifices Must Be Made å°±äº Ludum Dare 43 åˆ¶ä½œã€‚ äºŒã€ä¸ºä»€ä¹ˆå‚åŠ  Ludum Dareä¸­å›½æœ‰é‚£ä¹ˆå¤šæœ¬åœŸçš„ gamejamï¼Œé‚£ä¸ºä»€ä¹ˆè¦é¡¶ç€è¯­è¨€éšœç¢å‚åŠ  Ludum Dare å‘¢ï¼Ÿæˆ‘è®¤ä¸ºæœ€é‡è¦çš„ä¸¤ç‚¹æ˜¯æ¸¸æˆè´¨é‡é«˜ã€æ”¶è·åé¦ˆå¤šã€‚ å…ˆè¯´å‰è€…ï¼Œgamejam æ€»æ˜¯æœ‰ç«èµ›æ€§è´¨çš„ï¼Œåœ¨ Ludum Dare é‡Œæˆ‘ä»¬è¦å’Œå…¨ä¸–ç•Œçš„ä¼˜ç§€å¼€å‘è€…ç«äº‰ï¼Œå•æ˜¯çœ‹ç€è¿™äº›å¼€å‘è€…å›´ç»•ä¸»é¢˜çš„å¥‡æ€å¦™æƒ³å°±å·²ç»è®©äººè§‰å¾—å€¼å›ç¥¨ä»·äº†ï¼ˆå¹¶æ²¡æœ‰ç¥¨ä»·ï¼Œè¿™æ˜¯å…è´¹æ´»åŠ¨ï¼‰ï¼Œè€Œå¦‚æœå–å¾—äº†å¥½æ’ååˆ™æ›´æ˜¯ä¼šç»™äººç›¸å½“çš„æˆå°±æ„Ÿã€‚ å†è¯´åè€…ï¼Œä»‹äº Ludum Dare çš„ç®—æ³•ï¼Œæ¯ä¸ªæ¸¸æˆåŸºæœ¬éƒ½ä¼šè·å¾— 20 ä¸ªä»¥ä¸Šçš„è¯„åˆ†ï¼Œè€Œä¸”ä½ ç©çš„æ¸¸æˆè¶Šå¤šï¼ŒLudum Dare å°±ä¼šæŠŠä½ çš„æ¸¸æˆæ”¾åœ¨æ¨èæ¦œè¶Šé å‰çš„ä½ç½®ï¼Œä»è€Œå°±ä¼šæœ‰è¶Šå¤šäººç©ä½ çš„æ¸¸æˆã€‚ä»¥æˆ‘çš„ç»éªŒæ¥çœ‹ï¼Œç©çš„æ¸¸æˆæ•°é‡å’Œæ”¶è·çš„è¯„åˆ†æ•°é‡åŸºæœ¬æ¥è¿‘ï¼Œè€Œä¸”å¾ˆå¤šç©äº†æˆ‘ä»¬æ¸¸æˆçš„å¼€å‘è€…ä¼šåœ¨æ¸¸æˆä¸‹ç»™å‡ºè¯„è®ºæ¥åé¦ˆï¼Œéå¸¸åˆ©äºæˆ‘ä»¬äº†è§£è‡ªå·±æ¸¸æˆçš„ä¼˜ç§€ä¹‹å¤„ï¼ˆå¯æƒœçš„æ˜¯è¯„è®ºä¸€èˆ¬ä¸è¯´ç¼ºç‚¹ï¼Œä»¥å¤¸å¤¸å±…å¤šï¼‰ã€‚ ä¸‹é¢å†ä¸¾å‡ ä¸ª Ludum Dare çš„å…¶ä»–ä¼˜åŠ¿ï¼š è¶³ä¸å‡ºæˆ·ï¼šä¸çº¿ä¸‹ gamejam ä¸åŒï¼Œå‚åŠ  Ludum Dare æ— éœ€æŠ¥åï¼Œåªè¦æ³¨å†Œè´¦å·å¹¶åœ¨æäº¤æ—¶é—´æˆªæ­¢å‰æäº¤æ¸¸æˆå³å¯ã€‚ ç©æ¸¸æˆæ–¹ä¾¿ï¼šå¤§éƒ¨åˆ†å¼€å‘è€…éƒ½ä¼šæä¾›æ¸¸æˆçš„ web ç‰ˆæœ¬ï¼Œå³ä½¿ä¸æä¾› web ç‰ˆæœ¬ä¹Ÿå¯ä»¥ç›´æ¥åœ¨å¯¹åº”çš„æ¸¸æˆé¡µé¢ä¸‹è½½æ¸¸æˆã€‚ äº¤æµæœºä¼šï¼šæˆ‘ä»¬å¯ä»¥ç»™åˆ«çš„æ¸¸æˆæä¾›åé¦ˆï¼Œä¹Ÿå¯ä»¥åœ¨åˆ«çš„æ¸¸æˆè¯„è®ºåŒºé‡Œè¯¢é—®å¼€å‘è€…çš„è®¾è®¡æ€è·¯ï¼Œä¸€èˆ¬éƒ½ä¼šæ”¶åˆ°ç§¯æçš„å›å¤ã€‚ å’Œå¤§ç¥åˆå½±ï¼šæ¯å±Šçš„ Ludum Dare éƒ½ä¼šæœ‰ä¸€äº›å¤§ç¥æ¥å‚åŠ ï¼Œå¦‚æœæ°å·§ç¢°ä¸Šäº†è‡ªå·±æ„Ÿå…´è¶£çš„å¤§ç¥ï¼Œå°±æœ‰äº†åœ¨ä»–ä»¬çš„æ¸¸æˆè¯„è®ºåŒºå¤¸å¤¸çš„åˆå½±æœºä¼šï¼ ä¸‰ã€å‚ä¸æµç¨‹Ludum Dare çš„æµç¨‹å¤§æ¦‚æ˜¯ä¸»é¢˜æŠ•ç¥¨ã€åˆ¶ä½œã€è¯„åˆ†ä¸åé¦ˆã€ç»“æœå…¬å¸ƒã€‚ä¸ºäº†é¡ºåˆ©å‚èµ›ï¼Œé¦–å…ˆæˆ‘ä»¬è¦åœ¨ Ludum Dare ä¸Šæ³¨å†Œä¸€ä¸ªè´¦å·ã€‚æ³¨å†Œè´¦å·éœ€è¦é‚€è¯·ç ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Google ä¸Šç”¨ ludum dare invitation code ä¹‹ç±»çš„å…³é”®è¯æˆ–è€…åœ¨ä¸¾åŠè€…çš„ä¸»é¡µä¸Šæ‰¾åˆ°é‚€è¯·ç ã€‚æˆ‘æ‰¾åˆ°çš„ç¬¬ 57 å±Šçš„é‚€è¯·ç æœ‰ Time4LD57 å’Œ BirdSiteLD57ã€‚ åœ¨æ³¨å†ŒæˆåŠŸä¹‹åï¼Œæˆ‘ä»¬è¦æƒ³æƒ³è¿™æ¬¡æ˜¯å•äººå‚èµ›è¿˜æ˜¯ç»„é˜Ÿå‚èµ›ã€‚Ludum Dare æœ‰ä¸‰æ¡èµ›é“ï¼ŒCompoã€Jam å’Œ Extra. Compo æ˜¯ç»å…¸æ¨¡å¼ï¼Œè¦æ±‚å•äºº 48 å°æ—¶å†…åšæ¸¸æˆï¼Œæ‰€æœ‰å†…å®¹åŒ…æ‹¬ç¾æœ¯ã€éŸ³æ•ˆç­‰éƒ½éœ€è¦åœ¨ 48 å°æ—¶å†…ä»é›¶å¼€å§‹åšå‡ºï¼Œè€Œä¸”å¿…é¡»å¼€æºæºä»£ç ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»»ä½•å·²ç»å†™è¿‡çš„åŸºç¡€ä»£ç å’Œä»»ä½•å·¥å…·ã€‚å¦‚æœä½ çš„æ¸¸æˆæ”¶åˆ°äº† 20 ä¸ªä»¥ä¸Šçš„è¯„åˆ†ï¼Œä¼šå¾—åˆ°æœ€ç»ˆè¯„åˆ†ã€‚ Jam ç›¸å¯¹å®½æ¾ï¼Œåªè¦æ±‚ç»„é˜Ÿ 72 å°æ—¶å†…åšæ¸¸æˆï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•å·²ç»å†™è¿‡çš„åŸºç¡€ä»£ç ï¼Œä¹Ÿå…è®¸ä½¿ç”¨éƒ¨åˆ†é¢„åˆ¶ç´ æã€‚è‹¥ç¾æœ¯æˆ–éŸ³æ•ˆéåŸåˆ›ï¼Œéœ€è¦åœ¨æäº¤æ—¶å…³é—­å¯¹åº”ç±»åˆ«çš„æ‰“åˆ†ã€‚æ¯”å¦‚å¦‚æœæˆ‘ä»¬ç”¨äº†ç¬¬ä¸‰æ–¹ç¾æœ¯ï¼Œå°±è¦åœ¨æäº¤æ—¶å…³é—­ Graphics çš„æ‰“åˆ†ã€‚å¦‚æœä½ çš„æ¸¸æˆæ”¶åˆ°äº† 20 ä¸ªä»¥ä¸Šçš„è¯„åˆ†ï¼Œä¼šå¾—åˆ°æœ€ç»ˆè¯„åˆ†ã€‚ Extra åˆ™æ˜¯è½»æ¾ç»„ï¼Œæ—¶é—´å®½è£•è‡³ 3 å‘¨ï¼Œå•äººæˆ–å›¢é˜Ÿå‡å¯ï¼Œå†…å®¹ä»¥åŸåˆ›ä¸ºä¸»ä½†å…è®¸é¢„åˆ¶ç´ æï¼Œç¾æœ¯æˆ–éŸ³æ•ˆéåŸåˆ›å¯é€€å‡ºå¯¹åº”è¯„åˆ†ç±»åˆ«ï¼Œæºä»£ç æäº¤å¯é€‰ï¼Œä½†æ— æœ€ç»ˆæ’åã€‚ èµ›é“åœ¨æäº¤æ—¶æ‰éœ€è¦ç¡®å®šï¼Œæ‰€ä»¥å¦‚æœä½ åŸæœ¬æ‰“ç®—å‚åŠ  Compoï¼Œä½†æ²¡æ¥å¾—åŠèµ¶ä¸Š Compo çš„æˆªæ­¢æäº¤æ—¶é—´ï¼Œä¹Ÿå¯ä»¥è½¬å» Jam çš„æäº¤ã€‚ æƒ³å¥½äº†èµ›é“åï¼Œå°±èƒ½è¿›å…¥ä¹‹åçš„ç¯èŠ‚äº†ã€‚ ä¸»é¢˜æŠ•ç¥¨å®˜æ–¹ä¼šæä¾›å¤§é‡çš„ä¸»é¢˜ï¼ˆç¬¬ 57 å±Šæœ‰ 1000 å¤šä¸ªï¼‰ï¼Œç»è¿‡åˆé€‰è½®ã€å¤é€‰è½®ã€å†³èµ›è½®ï¼Œæœ€ç»ˆå¾—å‡ºä¸€ä¸ªç»“æœä¸»é¢˜ã€‚æˆ‘ä»¬å½“ç„¶ä¸å¿…ç»™æ¯ä¸ªä¸»é¢˜éƒ½æŠ•ç¥¨ï¼Œæˆ‘çš„ä¸ªäººå»ºè®®æ˜¯åœ¨å†³èµ›è½®æŠ•ä¸€ä¸‹å°±è¡Œã€‚è€Œä¸”å³ä½¿ä¸æŠ•ç¥¨ä¹Ÿæ˜¯èƒ½å‚èµ›çš„ï¼å‚èµ›çš„å”¯ä¸€è¦æ±‚å°±æ˜¯åœ¨æäº¤æ—¶é—´æˆªæ­¢å‰æäº¤ä½œå“ã€‚ æ˜¯å¦å›´ç»•ä¸»é¢˜åšæ¸¸æˆä¹Ÿæ˜¯å¯é€‰çš„ï¼Œä¸»é¢˜åªæ˜¯æœ€ç»ˆè¯„åˆ†ä¸­çš„ä¸€éƒ¨åˆ†ï¼ŒLudum Dare çš„å®—æ—¨æ˜¯é¼“åŠ±å¼€å‘è€…æŠŠæ¸¸æˆåšå‡ºæ¥ã€‚ åˆ¶ä½œé˜¶æ®µè¿›å…¥åˆ¶ä½œé˜¶æ®µåï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹åšæ¸¸æˆäº†ï¼ç‚¹å‡»å³ä¸Šè§’çš„ join eventï¼Œå°±èƒ½åˆ›å»ºæ¸¸æˆè‰ç¨¿é¡µã€‚æˆ‘ä»¬ä¼šåœ¨ä¸Šä¼ é˜¶æ®µå¡«å……è¿™ä¸ªè‰ç¨¿é¡µã€‚ åˆ¶ä½œæ¸¸æˆéœ€è¦å¤§å®¶å„æ˜¾ç¥é€šï¼Œæˆ‘ç®€å•è°ˆè°ˆä¸ªäººå»ºè®®å§ã€‚ è®¾è®¡ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬è¦å¿«é€Ÿåœ°æ‰¾åˆ°å¤šä¸ªæƒ³æ³•ï¼Œç„¶åé€‰æ‹©è‡ªå·±è§‰å¾—æœ€æœ‰å‰é€”çš„æƒ³æ³•åšä¸‹å»ã€‚ç”±äºåˆ¶ä½œæ—¶é—´å¾ˆç´§ï¼Œæˆ‘ä»¬æ³¨å®šä¸èƒ½åšå¤§åšå…¨ã€‚æ¯”èµ·å¤§è€Œå…¨ï¼Œå°è€Œç¾æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ä¸€ä¸ªåªæœ‰ä¸‰å…³çš„è®¤çœŸæ‰“ç£¨è¿‡çš„ä½œå“æ¯”ä¸€ä¸ªæœ‰åå…³çš„æ¯å…³éƒ½å¾ˆç²—ç³™çš„ä½œå“è¦å¥½å¾—å¤šã€‚ ç¨‹åºå°½ç®¡ Ludum Dare å…è®¸è®¾è®¡æ¡Œæ¸¸ä¹ƒè‡³æ›´ä¸è¢«å®šä¹‰çš„æ¸¸æˆï¼ˆæˆ‘è§è¿‡ä¸€ä¸ªç¿»æ–‡ä»¶å¤¹çš„æ¸¸æˆï¼‰ï¼Œä½†æˆ‘ä»¬è¿™é‡Œåªè®¨è®ºç”µå­æ¸¸æˆã€‚ç¨‹åºæ–¹é¢ï¼Œé€‰ç”¨è‡ªå·±æœ€ç†Ÿæ‚‰çš„å·¥å…·å³å¯ã€‚æœ‰ç†Ÿç»ƒçš„æ¸¸æˆå¼•æ“å°±é€‰æ¸¸æˆå¼•æ“ï¼Œå–œæ¬¢ä¸ç”¨å¼•æ“å¼€å‘å°±ä¸ç”¨å¼•æ“å¼€å‘ã€‚ éŸ³ä¹æˆ‘æ˜¯éŸ³ä¹èŒæ–°ï¼Œè™½ç„¶å¬è¯´è¿‡ FL studio ä¹‹ç±»çš„å·¥ä½œç«™ï¼Œä½†æˆ‘ç°åœ¨è¿˜æ²¡å­¦ä¼šã€‚æ‰€ä»¥æˆ‘è¿™é‡Œæ¨èä¸€ä¸ªç®€å•çš„éŸ³ä¹åˆ¶ä½œç½‘ç«™â€”â€”Musiclabï¼Œæˆ‘ä½¿ç”¨é‡Œé¢çš„SongMakeråšå‡ºäº†èƒ½å¬çš„ä¸œè¥¿ã€‚ éŸ³æ•ˆsfxræ˜¯å¾ˆç®€å•çš„éŸ³æ•ˆåˆ¶ä½œç½‘ç«™ï¼Œæˆ‘çœ‹ä¸æ‡‚å‚æ•°ï¼Œæ‰€ä»¥æˆ‘çš„å·¥ä½œæµæ˜¯æŠŠæˆ‘æƒ³è¦çš„æ•ˆæœå‘Šè¯‰ AIï¼ŒAI å‘Šè¯‰æˆ‘æ€ä¹ˆè°ƒå‚ï¼Œæ•ˆæœå‡ºä¹æ„æ–™åœ°è¿˜ç®—ä¸é”™ã€‚ ç¾æœ¯æˆ‘ç”¨Piskelç”»ç®€å•çš„åƒç´ ç”»ï¼Œå¶å°”ä¹Ÿç”¨Kritaæ¥ç”»åˆ«çš„ä¸œè¥¿ã€‚ æŠ›å¼€ Extra èµ›é“ä¸è°ˆï¼Œè¿™ä¸ªé˜¶æ®µæŒç»­ 48 å°æ—¶æˆ– 72 å°æ—¶ï¼Œæˆ‘æœ€åçš„å»ºè®®æ˜¯åœ¨å‚ä¸çš„åŒæ—¶ä¿æŒå……è¶³çš„ç¡çœ ï¼Œå¥½å¥½ç¡è§‰å¥½å¥½åƒé¥­å¾ˆé‡è¦ï¼ ä¸Šä¼ é˜¶æ®µåœ¨åˆ¶ä½œé˜¶æ®µç»“æŸåï¼Œä¼šç»™é¢å¤–çš„ä¸€å°æ—¶æ¥ä¸Šä¼ ã€‚å°½ç®¡å®˜ç½‘ç»™äº†é¢å¤–ä¸€å°æ—¶çš„ä¸Šä¼ æ—¶é—´ï¼Œæˆ‘è¿˜æ˜¯å»ºè®®å¤§å®¶åœ¨åˆ¶ä½œé˜¶æ®µçš„æœ«å°¾å°±å¼€å§‹ç ”ç©¶æ€ä¹ˆä¸Šä¼ æ¸¸æˆï¼Œä»¥é˜²ä¸‡ä¸€å˜›ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨è¿™æ®µæ—¶é—´é‡Œå¡«å……å³ä¸Šè§’ My Game çš„è‰ç¨¿é¡µï¼ŒæŒ‰ç€é¡µé¢è¦æ±‚å¡«å†™å³å¯ã€‚ æˆ‘ä»¬å¯ä»¥æŠŠæ¸¸æˆå‹ç¼©åŒ…ä¸Šä¼ åˆ°é¡µé¢ä¸Šï¼ŒåŒæ—¶ Ludum Dare æ”¯æŒ Embed HTML5ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥æ ¹æ®Embedding Guideç›´æ¥æŠŠæ¸¸æˆçš„ç½‘é¡µç‰ˆä¸Šä¼ åˆ°å®˜ç½‘çš„æ¸¸æˆé¡µé¢ä¸Šã€‚å»ºè®®å¤§å®¶åŒæ—¶æŠŠç½‘é¡µç‰ˆä¸Šä¼ åˆ° itch ä¸Šï¼Œæ¯•ç«Ÿå®˜ç½‘çš„ç½‘é¡µç‰ˆæ¸¸æˆæ”¯æŒåšå¾—ä¸ç®—å¾ˆå®Œç¾ã€‚ è®°å¾—é€€å‡ºè‡ªå·±ä¸ç¬¦åˆ/ä¸æƒ³è¦çš„æ‰“åˆ†é€‰é¡¹ã€‚ è¯„åˆ†é˜¶æ®µè‡³æ­¤ï¼Œæ­å–œä½ åšå‡ºäº†è‡ªå·±çš„æ¸¸æˆï¼ è¯„åˆ†é˜¶æ®µæŒç»­ä¸‰å‘¨ï¼Œåœ¨è¯„åˆ†é˜¶æ®µï¼Œæˆ‘ä»¬å¯ä»¥è¯•ç©åˆ«äººçš„æ¸¸æˆå¹¶æ‰“åˆ†ï¼Œä½ æ‰“åˆ†çš„æ¸¸æˆè¶Šå¤šï¼Œæ¨èç®—æ³•ç»™ä½ çš„æ¸¸æˆçš„æ¨èä¼˜å…ˆçº§å°±è¶Šé«˜ã€‚åŒæ—¶é«˜è´¨é‡è¯„è®ºä¹Ÿèƒ½æé«˜ä½ æ¸¸æˆçš„æ¨èä¼˜å…ˆçº§ã€‚ è¯„åˆ†é˜¶æ®µå…è®¸ç»§ç»­ç¼–è¾‘é¡µé¢ï¼Œæ¯”å¦‚å¦‚æœä½ å‘ç°æ¸¸æˆé¡µé¢çš„æè¿°æœ‰é—®é¢˜ï¼Œéšæ—¶å¯ä»¥è¿›è¡Œä¿®æ”¹ã€‚ä¿®æ¸¸æˆå†…çš„ bug ä¹Ÿæ˜¯è¢«å…è®¸çš„ï¼Œä½†è¦æ±‚åœ¨ä¿® bug ä»¥åæ˜¾å¼åœ°åœ¨æ¸¸æˆé¡µé¢æ ‡å‡ºè‡ªå·±åšçš„ä¿®æ”¹ï¼ˆå†™ä¸€ä¸ªç®€è¦çš„ devlogï¼‰ï¼Œè€Œä¸”ä¸èƒ½å¢åŠ æ–°åŠŸèƒ½ã€‚ ç»“æœå…¬å¸ƒæ¸¸æˆä¼šæ ¹æ®æ‰“åˆ†æ¥æ’åã€‚æ²¡æœ‰å¥–å“ï¼Œä½ çš„æ¸¸æˆå°±æ˜¯æœ€å¥½çš„å¥–å“ï¼ å››ã€å…¶ä»–èµ„æ–™å¯ä»¥åœ¨rulesé¡µé¢æ‰¾åˆ°è¯¦ç»†çš„å‚åŠ è§„åˆ™ï¼Œå¼ºçƒˆå»ºè®®åœ¨å‚åŠ å‰é˜…è¯»ã€‚ å¯ä»¥åœ¨è¿™ç¯‡è§„åˆ™ä»‹ç»æ‰¾åˆ°ä¸­æ–‡çš„è§„åˆ™ä»‹ç»ï¼Œä½†ä¸å¦‚ä¸Šé¢é‚£ä¸ªå…¨é¢ã€‚ æœ¬æ–‡çš„ç»“æ„å‚è€ƒäº† Google ç¼–ç¨‹ä¹‹å¤(GSoC)ï¼šæµ·é‡ä¼˜è´¨é¡¹ç›®ï¼Œä¸°åšæŠ¥é…¬ï¼Œä½ ç«Ÿç„¶è¿˜ä¸çŸ¥é“ï¼Ÿ","categories":[{"name":"gamejam","slug":"gamejam","permalink":"http://rinevard.github.io/categories/gamejam/"}],"tags":[]},{"title":"_ç©ä¹çš„äºº","slug":"others/thoughts/ç©ä¹çš„äºº","date":"2025-03-24T11:09:30.000Z","updated":"2025-07-18T15:09:38.986Z","comments":true,"path":"wiki/others/thoughts/ç©ä¹çš„äºº/","permalink":"http://rinevard.github.io/wiki/others/thoughts/%E7%8E%A9%E4%B9%90%E7%9A%84%E4%BA%BA/","excerpt":"","text":"æ•…äº‹ä¹‹å‰æœ€è¿‘åœ¨å­¦æŸ¥ç†è€å¸ˆçš„ç¼–å‰§è¯¾ï¼Œè¯¾å¾ˆæœ‰è¶£ï¼Œä¸è¿‡ä¿¡æ¯å¯†åº¦ä¼¼ä¹æœ‰ç‚¹ä½ï¼Œæˆ‘å°±å½“å•å£ç›¸å£°å¬äº†ã€‚è¿™ç¯‡æ–‡ç« è®°å½•äº†ç¬¬äº”è¯¾è€å¸ˆå¸ƒç½®çš„ä½œä¸šï¼Œæ•…äº‹çš„å…«è¦ç´ ã€æ”¯ç‚¹å’Œå¤§çº²æ˜¯æˆ‘è‡ªå·±å†™çš„ï¼Œå…·ä½“å†…å®¹æ˜¯ AI å¡«å……çš„ï¼Œæˆ‘æŠŠ AI ç”Ÿæˆçš„å¤šä¸ªç‰ˆæœ¬æ‹¼æ‹¼å‡‘å‡‘å¾—åˆ°äº†ä¸‹é¢çš„æ•…äº‹ï¼ˆä»€ä¹ˆæ‹¼å¥½æ–‡ï¼‰ã€‚ æœ€è¿‘çš„æ€ç»ªæŒºä¹±çš„ã€‚å‰ä¸¤å¤©åšäº†ä¸ªæ¸¸æˆåŸå‹ï¼Œæ„Ÿè§‰å¤§ä½“ä¸Šè¿˜ç®—å€¼å¾—åšï¼Œæš‚å‘½åå«ã€Šç¿»å‘½å¸ˆã€‹ã€‚è¿™æ ·çš„è¯ï¼Œæƒ³åšçš„äº‹æƒ…å®åœ¨æ˜¯æœ‰ç‚¹å¤šäº†ã€‚æƒ³å‚åŠ  GSoC æ¥æ¥è§¦ä¸‹å¼€å‘ï¼Œé¡ºä¾¿æå‡ä¸‹ cpp æ°´å¹³ï¼›æƒ³ç»§ç»­å­¦å…¬å¼€è¯¾ï¼Œäº†è§£ä¸‹åº•å±‚çŸ¥è¯†ï¼›è¿˜æƒ³èŠ± 100 å¤©å®Œæ•´åœ°åšä¸€ä¸ªèƒ½æ”¾åˆ° itch ç”šè‡³ steam ä¸Šçš„å°æ¸¸æˆï¼Œè·‘ä¸€éæµç¨‹ã€‚ è¯´æ¥æœ‰äº›å‡¡å°”èµ›ï¼Œä½†ä¸Šå­¦æœŸçš„æˆç»©å¥½å¾—æœ‰ç‚¹è«åå…¶å¦™ï¼Œä»¥è‡³äºæˆ‘çœŸçš„å¼€å§‹è€ƒè™‘å¤–ä¿ä¹‹ç±»çš„äº‹æƒ…ã€‚è¿™å°±å¯¼è‡´æˆ‘ä»¬çœŸçš„é™·å…¥äº†ä¸€ä¸ªå¥‡æ€ªçš„â€œä¿ç ”å¼€å‘ä¸¤æ‰‹æŠ“â€çš„å¢ƒåœ°ï¼Œä½†æˆ‘çš„æ°´å¹³å´ä¸è¶³ä»¥æ”¯æŒæˆ‘æŠŠå®ƒä»¬å…¨éƒ¨æŠ“ç‰¢ï¼Œäºæ˜¯ä¾¿æ·±æ„Ÿæ—¶é—´ç´§å¼ ã€‚å…¨æŠ“ç‰¢çœŸçš„ä¸å¯èƒ½å—ï¼Ÿå¦‚æœæ˜¯æˆ‘çš„è¯è¯´ä¸å®šä¹Ÿèƒ½åšåˆ°å‘¢ï¼Œä½†è¿™æ ·çš„ç”Ÿæ´»æ˜¯å¦ç¼ºä¹äº†ä¸€æŠ¹å¥‡å¹»è‰²å½©å‘¢ï¼Ÿæ¯”èµ·æŠŠç»å¤§å¤šæ•°æ—¶é—´éƒ½èŠ±åœ¨è‡ªæˆ‘å®ç°å’Œæå‡è‡ªå·±çš„æ°´å¹³ä¸Šï¼Œæˆ‘è¿˜æ˜¯æƒ³æŠ½å‡ºæ—¶é—´æ¥å­¦å­¦æ–°ä¸œè¥¿ï¼Œçœ‹çœ‹ç•ªå‰§ï¼Œæ‰“æ‰“æ¸¸æˆã€‚å†è¯´äº†ï¼Œç°åœ¨çš„ç¤¾äº¤æ°´å¹³ä»ç„¶æ˜¯è´Ÿçš„ï¼Œæ˜¯ä¸æ˜¯è¯¥å»æå‡ä¸€ä¸‹ï¼ŸåŸæœ¬æƒ³ç€é æ‰¾äººæ¥è¯•ç©æ¥å’Œäººä»¬äº¤æµï¼Œä½†è¿™åˆå›åˆ°äº†å¼€å‘ä¸Šã€‚è™½ç„¶è¿™çœ‹èµ·æ¥æ˜¯æ¡å¯è¡Œçš„è·¯ï¼Œä½†æ„Ÿè§‰æœ‰ç‚¹ç‚¹å¥‡æ€ªã€‚ äººç”ŸçŸ­åˆ™äºŒåå¹´ï¼Œé•¿åˆ™ä¸€ç™¾å¹´ï¼Œæˆ‘ä»¬ç©¶ç«Ÿæƒ³åšä»€ä¹ˆï¼Œæƒ³å»å¾€ä½•æ–¹ï¼Œæƒ³æˆä¸ºä»€ä¹ˆæ ·çš„äººï¼Ÿ å‰è·¯æœªå®šå´ä»è¯•å›¾çœ‹å‘æœªæ¥ï¼Œè‡ªä¼šç„¦è™‘ã€‚ä¸è¿‡æˆ‘å–œæ¬¢çš„ä¸€ä¸ªè™šæ‹Ÿè§’è‰²åœ¨è¿™ç§æƒ…å†µä¸‹æƒ³å¿…ä¼šè¯´ï¼šâ€œç„¦è™‘ä¹Ÿæ˜¯ä¸€ç§ä¸å¯å¤šå¾—çš„ä½“éªŒå‘¢â€ã€‚å–œæ‚¦å’Œå¹³é™è‡ªç„¶æ˜¯å¤§å®¶éƒ½å–œæ¬¢çš„ä½“éªŒï¼Œä½†ç„¦è™‘ã€æ‚²ä¼¤è¿™äº›è´Ÿé¢æƒ…ç»ªä¼¼ä¹ä¹Ÿæ˜¯å¥‡å¦™çš„ä½“éªŒã€‚äººç±»ï¼Œå¾ˆç¥å¥‡å§ã€‚ è¯è¯´å›æ¥ï¼Œç¿»å‘½å¸ˆè¿™ä¸ªåå­—å¬èµ·æ¥å°±å¾ˆæœ‰è¶£å§ã€‚å¬è¯´ä¸ºè‡ªå·±æ‘†ä¸ªâ€è¿‡è·¯ç‰Œé˜µâ€ï¼Œä¸€è¡Œä¸‰ç‰Œï¼Œä¾¿èƒ½è§£ä¸€æ—¶ä¹‹å›°ã€‚æˆ‘å›å»æ‘†ä¸€ä¸‹è¯•è¯•ã€‚ åœ¨ 101 å‘äº†ä¸ªæ²¡é‚£ä¹ˆå‡¡å°”èµ›çš„ç‰ˆæœ¬ã€‚æˆ‘åœ¨è®¤çœŸæ€è€ƒï¼ŒBIT101 å¯¹æˆ‘æ¥è¯´ç©¶ç«Ÿæ„å‘³ç€ä»€ä¹ˆã€‚æˆ‘ä»æœªæƒ³è¿‡ç«‹ä¸€ä¸ªå¾ˆå‰å®³çš„äººè®¾ï¼Œä½†æˆ‘åœ¨å‘å¸–æ—¶æ€»ä¼šä¸è‡ªè§‰åœ°åªå±•ç¤ºçœ‹èµ·æ¥ä¸é”™çš„ä¸€é¢ï¼Œäºæ˜¯æ¸æ¸åœ°å°±åªå†™å‡ºäº†ä¸€äº›â€œå±€éƒ¨çš„çœŸå®â€ã€‚ é‚£æˆ‘æ˜¯æ€ä¹ˆå‘ç°è¿™ä¸ªç‰ˆæœ¬æœ‰ç‚¹å‡¡å°”èµ›çš„å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è®© AI å†™äº†ä¸€ä¸ªç¿»ç‰ˆã€‚æˆ‘è¦æ±‚ AI æŠŠå’Œæ¸¸æˆã€ç¼–ç¨‹ç›¸å…³çš„å†…å®¹æ¢æˆåˆ«çš„é¢†åŸŸçš„å†…å®¹ï¼Œå°±å¾—åˆ°äº†æœ¬æ–‡ä¸­â€œæ•…äº‹ä¹‹åâ€”â€”AI çš„å‡¡å°”èµ›â€é‚£ä¸€èŠ‚çš„å†…å®¹ã€‚çœ‹äº†çœ‹ï¼Œæ„Ÿè§‰çœŸçš„å¥½å‡¡å°”èµ›å•Š=) äºæ˜¯å°±æ”¹äº†æ”¹ã€‚å¦‚æœæˆ‘çœŸçš„å¾ˆå‰å®³å°±å¥½äº†ï¼Œå¯æƒœæˆ‘å¹¶ä¸ã€‚ä½†æˆ‘ä¼šå˜å¼ºçš„ã€‚ æ•…äº‹â€”â€”ç©ä¹çš„äººâ€œå§“åï¼Ÿâ€ â€œææ˜ã€‚â€ â€œå¹´é¾„ï¼Ÿâ€ â€œå‘ƒâ€¦â€¦åä¸ƒå²ï¼Ÿâ€ æ£€ç¥¨å‘˜æ‰«äº†ä»–ä¸€çœ¼ï¼Œæœ€ååªæ˜¯å¹äº†å£æ°”ï¼ŒæŒ¥æ‰‹æ”¾è¡Œã€‚ ææ˜ç°å¹´ 32 å²ï¼Œèº«é«˜ 169 å˜ç±³ï¼Œä½“é‡ 61.5 å…¬æ–¤ï¼Œæ²¡æœ‰å¥³æœ‹å‹ï¼Œæ²¡æœ‰å® ç‰©ï¼Œæ²¡æœ‰ä¸è‰¯å—œå¥½ã€‚åœ¨ææ˜å±…ä½çš„åŸå¸‚é‡Œï¼Œæ‰€æœ‰ 20 å²ä»¥ä¸Šçš„æˆå¹´äººéƒ½æŒ‰ç…§åŒæ ·çš„ç¨‹åºç”Ÿæ´»ï¼šèµ·åºŠã€å·¥ä½œã€åƒé¥­ã€ç¡è§‰ï¼Œå¶å°”å‚åŠ åŸ¹è®­ã€ä¼šè®®å’Œå›¢å»ºæ´»åŠ¨ã€‚æ”¿åºœé¢å¸ƒçš„ã€Šæˆå¹´äººè¡Œä¸ºå‡†åˆ™ã€‹æ˜ç¡®è§„å®šï¼Œæˆå¹´äººçš„é¦–è¦ä»»åŠ¡æ˜¯å·¥ä½œï¼Œæ¬¡è¦ä»»åŠ¡æ˜¯ä¸ºå›½å®¶åŸ¹å…»åˆæ ¼å…¬æ°‘ï¼Œç¬¬ä¸‰ä»»åŠ¡æ˜¯ç…§é¡¾è€äººï¼Œç¬¬å››ä»»åŠ¡æ˜¯è‡ªæˆ‘æå‡ã€‚ç¬¬åä¸ƒæ¡ç‰¹åˆ«å¼ºè°ƒï¼šæˆå¹´äººä¸¥ç¦è¿›å…¥æ¸¸ä¹è®¾æ–½ã€‚ ç°åœ¨ä»–ç«™åœ¨æ¸¸ä¹å›­å…¥å£å¤„ï¼Œèº«ä¸Šè£¹ç€ä¸€ä»¶å°ç€å¡é€šæé¾™çš„ T æ¤ï¼Œä¸‹åŠèº«ç©¿ç€ä¸€æ¡æ˜æ˜¾çŸ­äº†ä¸€æˆªçš„èƒŒå¸¦è£¤ï¼Œè„šä¸Šæ˜¯ä¸€åŒå¸¦ç¯çš„è¿åŠ¨é‹ã€‚ä»–çš„è„¸ä¸Šè´´ç€ä¸¤å—å¤§å·åˆ›å¯è´´ï¼Œè¯•å›¾æ©ç›–èƒ¡èŒ¬çš„ç—•è¿¹ã€‚ ææ˜å°å¿ƒç¿¼ç¿¼åœ°èµ°è¿›æ¸¸ä¹å›­ï¼Œæ‰‹é‡Œæ¡ç€ä¸€æ ¹æ£’æ£’ç³–ï¼Œæ—¶ä¸æ—¶ç´§å¼ åœ°èˆ”ä¸€å£ï¼Œå‡è£…è‡ªå·±å¯¹ç³–æœå¾ˆæ„Ÿå…´è¶£ã€‚å®é™…ä¸Šï¼Œä»–ä¸Šä¸€æ¬¡åƒæ£’æ£’ç³–è¿˜æ˜¯åœ¨åä¸‰å²é‚£å¹´ã€‚ â€œå˜¿ï¼ä½ åœ¨è¿™é‡Œå¹²å˜›å‘€ï¼Ÿä½ å®¶å¤§äººå‘¢ï¼Ÿâ€ä¸€ä¸ªæ¸¸ä¹å›­å·¥ä½œäººå‘˜èµ°è¿‡æ¥é—®é“ã€‚ â€œæˆ‘çˆ¸çˆ¸å»ä¹°é¥®æ–™äº†ï¼Œè®©æˆ‘åœ¨è¿™é‡Œç­‰ä»–ã€‚â€ææ˜èƒŒäº†äº”éçš„æ ‡å‡†ç­”æ¡ˆè„±å£è€Œå‡ºã€‚ å·¥ä½œäººå‘˜ä¸Šä¸‹æ‰“é‡äº†ä»–å‡ çœ¼ï¼šâ€ä½ å¤šå¤§äº†ï¼Ÿçœ‹èµ·æ¥æŒºé«˜çš„ã€‚â€ â€œæˆ‘å‘è‚²å¾—æ—©ï¼Œåä¸ƒå²ã€‚â€ææ˜æå‡ºäº‹å…ˆå‡†å¤‡å¥½çš„å­¦ç”Ÿè¯ï¼Œé‚£æ˜¯ä»–ä»ç½‘ä¸Šç‰¹æ„å®šåˆ¶çš„ã€‚ å·¥ä½œäººå‘˜å‹‰å¼ºç›¸ä¿¡äº†ä»–çš„è¯´æ³•ï¼Œè½¬èº«ç¦»å¼€ã€‚ææ˜æ¾äº†ä¸€å£æ°”ï¼Œè¿…é€Ÿå¾€æ—‹è½¬æœ¨é©¬æ–¹å‘èµ°å»ã€‚ æ—‹è½¬æœ¨é©¬ä¸Šï¼Œææ˜ç´§ç´§æŠ“ä½é‡‘è‰²çš„æ‰¶æ‰‹ï¼Œæ„Ÿå—ç€ä¸Šä¸‹èµ·ä¼çš„èŠ‚å¥ã€‚éŸ³ä¹å“èµ·ï¼Œæœ¨é©¬å¼€å§‹æ—‹è½¬ï¼Œææ˜çš„å¿ƒè·³åŠ é€Ÿï¼Œä¸€ç§å¥‡æ€ªçš„å¿«æ„Ÿä»è„šåº•è”“å»¶åˆ°å…¨èº«ã€‚ä»–å·²ç»è®°ä¸æ¸…ä¸Šä¸€æ¬¡æœ‰è¿™ç§æ„Ÿè§‰æ˜¯ä»€ä¹ˆæ—¶å€™äº†ã€‚ â€œä½ ä¹Ÿæ˜¯ä¸€ä¸ªäººæ¥çš„å—ï¼Ÿâ€æ—è¾¹çš„æœ¨é©¬ä¸Šï¼Œä¸€ä¸ªå¤§çº¦ä¹å²çš„å°å¥³å­©é—®é“ã€‚ ææ˜åƒµç¡¬åœ°ç‚¹ç‚¹å¤´ã€‚ â€œæˆ‘ä¹Ÿæ˜¯ï¼æˆ‘å¦ˆå¦ˆåœ¨é‚£è¾¹ï¼Œâ€å°å¥³å­©æŒ‡ç€è¿œå¤„ä¸€ä¸ªçœ‹æ‰‹æœºçš„å¥³äººï¼Œâ€å¥¹è¯´è‡ªå·±å¤ªå¿™äº†ï¼Œæ²¡æ—¶é—´é™ªæˆ‘ç©ã€‚å¤§äººä»¬æ€»æ˜¯å¾ˆå¿™ã€‚â€ ææ˜æƒ³èµ·è‡ªå·±çš„çˆ¶æ¯ã€‚ä»–ä»¬åœ¨ææ˜å…«å²æ—¶å°±å‘Šè¯‰ä»–ï¼šâ€ç©æ˜¯æ²¡æœ‰å‡ºæ¯çš„è¡¨ç°ã€‚â€åäºŒå²æ—¶ï¼Œä»–ä»¬å–æ‰äº†ä»–æ‰€æœ‰çš„ç©å…·ï¼Œæ¢æˆäº†å„ç§å­¦ä¹ èµ„æ–™ã€‚åå…«å²æ—¶ï¼Œä»–ä»¬ä¸ºä»–åˆ¶å®šäº†â€æˆåŠŸäººç”Ÿè§„åˆ’è¡¨â€ï¼Œä¸Šé¢æ²¡æœ‰ä¸€é¡¹ä¸å¨±ä¹æœ‰å…³ã€‚ä¸‰åå²æ—¶ï¼Œä»–ä»¬é€ç»™ä»–ä¸€å¥—â€å‹çˆ±å…¬å¯“â€çš„é¦–ä»˜æ¬¾ï¼Œæ¡ä»¶æ˜¯ä»–å¿…é¡»åœ¨åå¹´å†…è·å¾—ä¸‰æ¬¡èŒä½æ™‹å‡ã€‚ æœ¨é©¬åœä¸‹æ¥åï¼Œææ˜è¿«ä¸åŠå¾…åœ°è·‘å‘è¿‡å±±è½¦ã€‚æ’é˜Ÿæ—¶ï¼Œä»–æ•…æ„å¼¯ç€è…°ï¼Œè£…ä½œæ¯”å®é™…èº«é«˜çŸ®ä¸€äº›ã€‚è½®åˆ°ä»–æ—¶ï¼Œæ£€æŸ¥èº«é«˜çš„å·¥ä½œäººå‘˜ç‹ç–‘åœ°çœ‹äº†ä»–ä¸€çœ¼ï¼šâ€ä½ ç¡®å®šè¦ç©å—ï¼Ÿçœ‹èµ·æ¥æœ‰ç‚¹ç´§å¼ ã€‚â€ â€œæˆ‘å½“ç„¶è¦ç©ï¼â€ææ˜ç”¨ä»–ç»ƒä¹ è¿‡çš„ç«¥å£°è¯´ï¼Œå£°éŸ³å› ä¸ºç´§å¼ è€Œæœ‰äº›å‘æŠ–ã€‚ è¿‡å±±è½¦å¯åŠ¨äº†ï¼Œç¼“ç¼“çˆ¬å‡ã€‚ææ˜æ­»æ­»æŠ“ä½å®‰å…¨æ†ï¼Œå¿ƒè„å‡ ä¹è¦è·³å‡ºèƒ¸è†›ã€‚é£å‘¼å•¸ç€æ è¿‡è€³è¾¹ï¼Œææ˜æ„Ÿåˆ°ä¸€ç§å‰æ‰€æœªæœ‰çš„è‡ªç”±ã€‚å½“è½¦å¢ä¿¯å†²è€Œä¸‹æ—¶ï¼Œä»–æ”¾å£°å°–å«ï¼Œé‚£æ˜¯ä»– 32 å¹´äººç”Ÿä¸­ç¬¬ä¸€æ¬¡å¦‚æ­¤è‚†æ— å¿Œæƒ®åœ°å°–å«ã€‚ ä¸‹äº†è¿‡å±±è½¦ï¼Œææ˜å¤´æ™•ç›®çœ©ï¼Œä½†è„¸ä¸ŠæŒ‚ç€éš¾ä»¥æŠ‘åˆ¶çš„ç¬‘å®¹ã€‚ä»–æ„Ÿè§‰è„–å­æœ‰ç‚¹åƒµç¡¬ï¼Œä¸‹æ„è¯†åœ°å·¦å³è½»è½»æ™ƒåŠ¨äº†ä¸€ä¸‹ï¼Œç¼“è§£é‚£è‚¡ç†Ÿæ‚‰çš„é…¸ç—›ã€‚è¿™æ˜¯ä»–å·¥ä½œåå¹´å…»æˆçš„ä¹ æƒ¯â€”â€”æ¯å¤©ç›¯ç€ç”µè„‘åå°æ—¶ï¼Œé¢ˆæ¤æ—©å·²ä¸å ªé‡è´Ÿã€‚ ææ˜å†³å®šæ¥ç€å»ç©ç¢°ç¢°è½¦ã€‚åè¿›å°è½¦é‡Œï¼Œä»–åƒä¸ªçœŸæ­£çš„åä¸ƒå²å°‘å¹´ä¸€æ ·å…´å¥‹åœ°æŠ“ç´§æ–¹å‘ç›˜ã€‚ç”µæµæ¥é€šï¼Œè½¦å­å¯åŠ¨ï¼Œææ˜çŒ›è¸©æ²¹é—¨å†²å‘å‰æ–¹ã€‚å·¦å†²å³æ’é—´ï¼Œä»–åˆæ„Ÿåˆ°è„–å­ä¸€é˜µåˆºç—›ã€‚ä»–æ¡ä»¶åå°„åœ°åšèµ·äº†åŠå…¬å®¤ä¿å¥æ“ç¬¬ä¸‰å¼ï¼šåŒæ‰‹æ‰˜ä½åè„‘å‹ºï¼Œç¼“æ…¢å‘åæ‹‰ä¼¸ã€‚ ä¸€ä½æ¸¸ä¹å›­çš„åŒ»æŠ¤äººå‘˜æ°å¥½è·¯è¿‡ï¼Œçœ‹åˆ°äº†ææ˜æ ‡å‡†çš„é¢ˆæ¤æ“åŠ¨ä½œã€‚å¥¹é©»è¶³è§‚å¯Ÿäº†å‡ ç§’ï¼Œç„¶åèµ°åˆ°ç¢°ç¢°è½¦åœºåœ°è¾¹ç¼˜ã€‚ â€œè¿™å¥—é¢ˆæ¤ç—…ä¿å¥æ“åšå¾—ä¸é”™å•Šï¼Œå…ˆç”Ÿã€‚â€åŒ»æŠ¤äººå‘˜åœ¨ææ˜ç»è¿‡æ—¶å¤§å£°è¯´é“ï¼Œâ€æ˜¯èŒä¸šåŒ»å¸ˆæ•™çš„å§ï¼Ÿâ€ ææ˜ä¸€æƒŠï¼ŒçŒ›åœ°å›å¤´ï¼Œè½¦å­å¤±æ§æ’ä¸Šäº†åœºåœ°è¾¹ç¼˜ã€‚ â€œä»€ä¹ˆï¼Ÿä¸ä¸ä¸ï¼Œæˆ‘åªæ˜¯â€¦â€¦â€ææ˜æ…Œä¹±åœ°æ‘†æ‰‹ï¼Œâ€æˆ‘â€¦â€¦â€ä»–å¼ äº†å¼ å˜´ï¼Œæœ€ç»ˆè¿˜æ˜¯åƒæ³„äº†æ°”çš„æ°”çƒä¸€æ ·ç˜«åœ¨ç¢°ç¢°è½¦é‡Œï¼Œæ”¾å¼ƒäº†è¾©è§£ã€‚ åŒ»æŠ¤äººå‘˜æŒ‰ä¸‹å¯¹è®²æœºï¼šâ€å®‰ä¿éƒ¨ï¼ŒA åŒºæœ‰ä¸€ä½è¿è§„è¿›å…¥çš„æˆå¹´äººã€‚â€ ä¸¤åä¿å®‰èµ¶åˆ°ï¼Œæ¶èµ·ææ˜å°±å¾€å¤–èµ°ã€‚è·¯è¿‡æ—‹è½¬æœ¨é©¬æ—¶ï¼Œææ˜å¿ä¸ä½å›å¤´çœ‹äº†ä¸€çœ¼ï¼Œé‚£äº›äº”é¢œå…­è‰²çš„å°é©¬ä¾ç„¶åœ¨éŸ³ä¹å£°ä¸­æ—‹è½¬ï¼Œä»¿ä½›åœ¨å‘ä»–å‘Šåˆ«ã€‚ä»–çš„çœŸå®èº«ä»½è¢«ç¡®è®¤ï¼šâ€ææ˜ï¼Œ32 å²ï¼Œå·¥ç¨‹å¸ˆï¼Œè¿åã€Šæˆå¹´äººè¡Œä¸ºå‡†åˆ™ã€‹ç¬¬åä¸ƒæ¡ã€‚â€ ä¸¤ä¸ªå°æ—¶åï¼Œä»–è¢«ç›´æ¥é€å¾€äº†â€æˆå¹´äººå†æ•™è‚²ä¸­å¿ƒâ€ã€‚ åœ¨é‚£é‡Œï¼Œä»–è¢«è¿«å­¦ä¹ å¦‚ä½•åšä¸€ä¸ªâ€æˆç†Ÿçš„å¤§äººâ€ï¼šæ¯å¤©å·¥ä½œåå°æ—¶ï¼Œä¸¥è‚ƒé˜…è¯»è´¢ç»æ–°é—»ï¼Œå‘¨æœ«å¿…é¡»å»å…¬å›­é›ç‹—æˆ–è€…å–å’–å•¡ï¼Œä»¥å¡‘é€ â€ç¬¦åˆç¤¾ä¼šæœŸå¾…çš„æˆå¹´å½¢è±¡â€ã€‚ æ•…äº‹ä¹‹åâ€”â€”AI çš„å‡¡å°”èµ›æœ€è¿‘åœ¨å­¦ä½™è€å¸ˆçš„è¯—æ­Œåˆ›ä½œè¯¾ï¼Œè¯¾å¾ˆæœ‰è¶£ï¼Œä¸è¿‡ä¿¡æ¯å¯†åº¦ä¼¼ä¹æœ‰ç‚¹ä½ï¼Œæˆ‘å°±å½“å•å£ç›¸å£°å¬äº†ã€‚è¿™ç¯‡æ–‡ç« è®°å½•äº†ç¬¬äº”è¯¾è€å¸ˆå¸ƒç½®çš„ä½œä¸šï¼Œè¯—æ­Œçš„æ„è±¡ã€ç»“æ„å’Œæƒ…æ„Ÿæ˜¯æˆ‘è‡ªå·±æ„æ€çš„ï¼Œå…·ä½“å†…å®¹æ˜¯å€ŸåŠ©å†™ä½œè½¯ä»¶æ¶¦è‰²çš„ï¼Œæˆ‘æŠŠå‡ ä¸ªç‰ˆæœ¬æ‹¼æ‹¼å‡‘å‡‘å¾—åˆ°äº†ä¸‹é¢çš„ä½œå“ï¼ˆä»€ä¹ˆæ‹¼å¥½è¯—ï¼‰ã€‚ æœ€è¿‘çš„æ€ç»ªæŒºä¹±çš„ã€‚å‰ä¸¤å¤©æ„æ€äº†ä¸ªæ‘„å½±ä¸“è¾‘åˆ›æ„ï¼Œæ„Ÿè§‰å¤§ä½“ä¸Šè¿˜ç®—å€¼å¾—åšï¼Œæš‚å‘½åå«ã€Šæ—¶å…‰å¸ˆã€‹ã€‚è¿™æ ·çš„è¯ï¼Œæƒ³åšçš„äº‹æƒ…å®åœ¨æ˜¯æœ‰ç‚¹å¤šäº†ã€‚æƒ³æŠ•ç¨¿ä¸€äº›æ–‡å­¦æœŸåˆŠæ¥æ¥è§¦æ–‡å›ï¼Œé¡ºä¾¿æå‡ä¸‹æ–‡ç¬”æ°´å¹³ï¼›æƒ³ç»§ç»­ç ”è¯»ä¸€äº›ç»å…¸è‘—ä½œï¼Œäº†è§£ä¸‹æ–‡å­¦ç†è®ºï¼›è¿˜æƒ³èŠ± 100 å¤©å®Œæ•´åœ°åšä¸€ä¸ªèƒ½æ”¾åˆ°è±†ç“£ç”šè‡³å‡ºç‰ˆç¤¾æŠ•ç¨¿çš„è¯—é›†ï¼Œè·‘ä¸€éæµç¨‹ã€‚ è¯´æ¥æœ‰äº›å‡¡å°”èµ›ï¼Œä½†ä¸Šå­¦æœŸçš„æ–‡å­¦ç«èµ›æˆç»©æ„å¤–åœ°å¥½ï¼Œä»¥è‡³äºæˆ‘çœŸçš„å¼€å§‹è€ƒè™‘è€ƒç ”ä¸­æ–‡ç³»æˆ–è€…å»æ‚å¿—ç¤¾å®ä¹ ä¹‹ç±»çš„äº‹æƒ…ã€‚è¿™å°±å¯¼è‡´æˆ‘ä»¬çœŸçš„é™·å…¥äº†ä¸€ä¸ªå¥‡æ€ªçš„â€å­¦æœ¯ä¸åˆ›ä½œä¸¤æ‰‹æŠ“â€çš„å¢ƒåœ°ï¼Œä½†æˆ‘çš„æ°´å¹³å´ä¸è¶³ä»¥æ”¯æŒæˆ‘æŠŠå®ƒä»¬å…¨éƒ¨æŠ“ç‰¢ï¼Œäºæ˜¯ä¾¿æ·±æ„Ÿæ—¶é—´ç´§å¼ ã€‚å…¨æŠ“ç‰¢çœŸçš„ä¸å¯èƒ½å—ï¼Ÿå¦‚æœæ˜¯æˆ‘çš„è¯è¯´ä¸å®šä¹Ÿèƒ½åšåˆ°å‘¢ï¼Œä½†è¿™æ ·çš„ç”Ÿæ´»æ˜¯å¦ç¼ºä¹äº†ä¸€æŠ¹å¥‡å¹»è‰²å½©å‘¢ï¼Ÿæ¯”èµ·æŠŠç»å¤§å¤šæ•°æ—¶é—´éƒ½èŠ±åœ¨è‡ªæˆ‘å®ç°å’Œæå‡è‡ªå·±çš„æ°´å¹³ä¸Šï¼Œæˆ‘è¿˜æ˜¯æƒ³æŠ½å‡ºæ—¶é—´æ¥é˜…è¯»æ–°ä¹¦ï¼Œçœ‹çœ‹ç•ªå‰§ï¼Œå»å’–å•¡é¦†å‘å‘†ã€‚å†è¯´äº†ï¼Œç°åœ¨çš„ç¤¾äº¤æ°´å¹³ä»ç„¶æ˜¯è´Ÿçš„ï¼Œæ˜¯ä¸æ˜¯è¯¥å»æå‡ä¸€ä¸‹ï¼ŸåŸæœ¬æƒ³ç€é åŠè¯»ä¹¦ä¼šæ¥å’Œäººä»¬äº¤æµï¼Œä½†è¿™åˆå›åˆ°äº†æ–‡å­¦ä¸Šã€‚è™½ç„¶è¿™çœ‹èµ·æ¥æ˜¯æ¡å¯è¡Œçš„è·¯ï¼Œä½†æ„Ÿè§‰æœ‰ç‚¹ç‚¹å¥‡æ€ªã€‚ äººç”ŸçŸ­åˆ™äºŒåå¹´ï¼Œé•¿åˆ™ä¸€ç™¾å¹´ï¼Œæˆ‘ä»¬ç©¶ç«Ÿæƒ³åšä»€ä¹ˆï¼Œæƒ³å»å¾€ä½•æ–¹ï¼Œæƒ³æˆä¸ºä»€ä¹ˆæ ·çš„äººï¼Ÿ å‰è·¯æœªå®šå´ä»è¯•å›¾çœ‹å‘æœªæ¥ï¼Œè‡ªä¼šç„¦è™‘ã€‚ä¸è¿‡æˆ‘å–œæ¬¢çš„ä¸€ä¸ªè™šæ‹Ÿè§’è‰²åœ¨è¿™ç§æƒ…å†µä¸‹æƒ³å¿…ä¼šè¯´ï¼šâ€ç„¦è™‘ä¹Ÿæ˜¯ä¸€ç§ä¸å¯å¤šå¾—çš„ä½“éªŒå‘¢â€ã€‚å–œæ‚¦å’Œå¹³é™è‡ªç„¶æ˜¯å¤§å®¶éƒ½å–œæ¬¢çš„ä½“éªŒï¼Œä½†ç„¦è™‘ã€æ‚²ä¼¤è¿™äº›è´Ÿé¢æƒ…ç»ªä¼¼ä¹ä¹Ÿæ˜¯å¥‡å¦™çš„ä½“éªŒã€‚äººç±»ï¼Œå¾ˆç¥å¥‡å§ã€‚ è¯è¯´å›æ¥ï¼Œæ—¶å…‰å¸ˆè¿™ä¸ªåå­—å¬èµ·æ¥å°±å¾ˆæœ‰è¯—æ„å§ã€‚å¬è¯´ä¸ºè‡ªå·±æ‘†ä¸ªâ€è¯—æ„ä¸‰è¡Œâ€ï¼Œè®°å½•ä¸‰ä¸ªç¬é—´ï¼Œä¾¿èƒ½è§£ä¸€æ—¶ä¹‹å›°ã€‚æˆ‘å›å»è¯•è¯•ã€‚ ç¿»å‘½å¸ˆè¿™æ±Ÿæ¹–ä¹‹ä¸Šï¼Œæœ‰ä¸€é—¨ç„é—¨å¥‡æœ¯ï¼Œå«åšâ€ç¿»å‘½ä¸€æœ¯â€ï¼Œä¿®ä¹ æ­¤æœ¯ä¹‹äººï¼Œä¸–äººå”¤ä½œâ€ç¿»å‘½å¸ˆâ€ã€‚ è¿™ç¿»å‘½å¸ˆä¸æ¯”å¯»å¸¸æ±Ÿæ¹–æœ¯å£«ï¼Œæ—¢ä¸æ˜¯ææŒ‡ä¸€ç®—çš„ç®—å‘½å…ˆç”Ÿï¼Œä¹Ÿä¸æ˜¯æ•²ç›†é—®å¦çš„æ¸¸æ–¹é“äººã€‚ä»–ä»¬ä¿®çš„ï¼Œä¹ƒæ˜¯ä¸Šå¤ä¼ ä¸‹æ¥çš„ç¿»å‘½ç§˜æœ¯ã€‚ä½†å‡¡æœ‰äººæ±‚é—®å‘½é€”ï¼Œè¿™ç¿»å‘½å¸ˆä¾¿èƒ½æ–½å±•å¼‚æœ¯ï¼Œå°†é‚£äººå‰ç¨‹åŒ–ä½œä¸€å¼ å¼ å‘½è¿ç¬¦ç‰Œï¼Œä¸€ä¸€æ‘†åœ¨æ¡ˆä¸Šã€‚ è¿™ç‰Œé˜µå¤§å°ä¸ä¸€ï¼Œå…¨çœ‹æœºç¼˜æ·±æµ…ã€‚å°åˆ™ä¸€è¡Œä¸‰ç‰Œï¼Œç§°ä¸ºâ€è¿‡è·¯ç‰Œé˜µâ€ï¼Œå¤šè§£ä¸€æ—¶ä¹‹å›°ï¼›ä¸­åˆ™ä¸‰è¡Œäº”ç‰Œï¼Œåå”¤â€ä¸‰æ˜Ÿç…§å‘½â€ï¼Œä¸ºé‚£å‘½é€”å¤šèˆ›ä¹‹äººå¯»è§…è½¬æœºï¼›è‹¥é‡å‘½æ ¼å¤æ‚ä¹‹äººï¼Œæˆ–æ˜¯ç‰µè¿å¤šäººçš„å¤§äº‹ï¼Œå®šè¦æ‘†ä¸‹äº”è¡Œä¸ƒåˆ—çš„â€å¤©ç½—åœ°ç½‘é˜µâ€ï¼Œæ–¹èƒ½çª¥å¾—å‘½è¿å…¨è²Œã€‚ å´è¯´è¿™ç¬¦ç‰Œç„å¦™éå¸¸ã€‚ç¿»å¼€ä¸€å¼ ï¼Œæˆ–æ˜¾å‡¶é™©ï¼Œæˆ–ç°å‰ç¥¥ã€‚ç¿»å‘½å¸ˆè§‚ä¹‹ï¼Œä¾¿çŸ¥é‚£äººå‘½ä¸­è¯¥æœ‰ä½•ç­‰æœºç¼˜ã€‚å…¶æŠ€é«˜è€…ï¼Œè¿˜èƒ½å°†é‚£ä¸åˆ©çš„å‘½æ•°é‡æ–°å°å›ç‰Œä¸­ï¼Œæš‚æ—¶å°ä½é‚£çœ¼çœ‹å°±è¦é™ä¸´çš„ç¾ç¥¸ï¼ æ±Ÿæ¹–ä¼ é—»ï¼Œç¿»å‘½å¸ˆä¹‹æœ¯ï¼Œéæ˜¯é€†å¤©æ”¹å‘½ï¼Œä¹ƒæ˜¯å·§å€Ÿå¤©æœºã€‚å¦‚åŒæ£‹ç›˜æ®‹å±€ï¼Œçœ‹ä¼¼å·²æ— ç”Ÿè·¯ï¼Œç¿»å‘½å¸ˆå´èƒ½å¯»é‚£ç¼éš™é—´å¾®å¦™ä¸€ç€ï¼Œå¼•å¾—å‘½è¿æš—æµè½¬å‘ã€‚æ˜æ˜¯å‘½ä¸­æ³¨å®šï¼Œå®åˆ™çš†ç”±äººå¿ƒä¸€å¿µä¹‹å·®ã€‚é«˜æ˜çš„ç¿»å‘½å¸ˆï¼Œä¸è¿‡æ˜¯å°†é‚£æœ¬å°±å­˜åœ¨çš„å¯èƒ½ï¼Œå‘æ˜å¤„è½»æ¨ç½¢äº†ã€‚ æ— è®ºå¦‚ä½•åœ¨åšåŸå‹ä¹‹å‰éƒ½ä¸åº”è¯¥å†™å‰§æƒ…ã€‚ä¸è¿‡æˆ‘åšäº†åŸå‹ï¼æ‰€ä»¥æˆ‘å¯ä»¥å†™ä¸€ç‚¹ç‚¹å‰§æƒ…äº†å§ï¼Œè™½ç„¶è¿™æ®µèƒŒæ™¯æ•…äº‹ä¹Ÿå¤§å¤šæ˜¯ AI å†™çš„ã€‚","categories":[{"name":"æ‚è°ˆ","slug":"æ‚è°ˆ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/"},{"name":"ç¢ç¢å¿µ","slug":"æ‚è°ˆ/ç¢ç¢å¿µ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/%E7%A2%8E%E7%A2%8E%E5%BF%B5/"}],"tags":[]},{"title":"æŠ€å·§çš„åˆ†ç±»ï¼Œå†°å±±ä¹‹ä¸‹çš„æ·±åº¦","slug":"game-design/å†°å±±ä¹‹ä¸‹çš„æ·±åº¦","date":"2025-03-08T04:22:38.000Z","updated":"2025-08-20T11:13:48.877Z","comments":true,"path":"wiki/game-design/å†°å±±ä¹‹ä¸‹çš„æ·±åº¦/","permalink":"http://rinevard.github.io/wiki/game-design/%E5%86%B0%E5%B1%B1%E4%B9%8B%E4%B8%8B%E7%9A%84%E6%B7%B1%E5%BA%A6/","excerpt":"","text":"img{ width: 70%; } ã€Šä½“éªŒå¼•æ“ã€‹é‡Œæåˆ°ï¼Œâ€œæ·±åº¦æ¸¸æˆèƒ½å¤Ÿé€šè¿‡é«˜æ°´å¹³çš„æŠ€å·§åˆ›é€ æœ‰æ„ä¹‰çš„ç©æ³•ã€‚æ·±åº¦ï¼ˆdepthï¼‰è¿™ä¸ªæ¦‚å¿µç”¨äºæè¿°æ¸¸æˆä¸­éœ€è¦å­¦ä¹ çš„å†…å®¹æœ‰å¤šå°‘ã€‚â€åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†æ¢è®¨ä¸€ä¸‹å¦‚ä½•å¯¹æŠ€å·§çš„ç±»å‹è¿›è¡ŒåŒºåˆ†ï¼Œä»¥åŠå¦‚ä½•åˆ›é€ è¿™äº›æŠ€å·§æ¥æé«˜æ¸¸æˆæ·±åº¦ï¼ŒåŒæ—¶ä¸è®©æ¸¸æˆé—¨æ§›è¿‡é«˜ã€‚ æ—¢ç„¶è¦æ±‚æœ‰æ·±åº¦ï¼Œé‚£æ¸¸æˆé‡Œå¿…ç„¶æœ‰å¾ˆå¤šæŠ€å·§ã€‚æˆ‘ä»¬æœ‰å¿…è¦å¯¹æŠ€å·§åšä¸€ä¸ªåŒºåˆ†â€”â€”æŠ€å·§å¯ä»¥è¢«åˆ†ä¸ºâ€œè§„åˆ™æ¶Œç°çš„æŠ€å·§â€å’Œâ€œé¢„è®¾çš„æŠ€å·§â€ã€‚å›´æ£‹çš„å„ç§æŠ€å·§å°±æ˜¯å‰è€…çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼ˆuh actuallyâ˜ï¸ğŸ¤“ æ•°å­¦æ˜¯æ›´å¥½çš„ä¾‹å­ï¼‰ï¼Œè€Œâ€œç‚¸å¼¹èƒ½ç‚¸å¼€æœ‰è£‚ç¼çš„å¢™â€å°±æ˜¯åè€…çš„ä¸€ä¸ªä¾‹å­ã€‚ åŸºäºè§„åˆ™çš„æŠ€å·§åˆ›é€ â€œåŸºäºè§„åˆ™çš„æŠ€å·§â€æ˜¯ç›¸å¯¹å›°éš¾çš„ï¼Œå› ä¸ºè¿™è¦æ±‚æˆ‘ä»¬åˆ›é€ èƒ½æ¶Œç°å‡ºè®¸å¤šæŠ€å·§çš„è§„åˆ™ã€‚è¿™ç§çº¯ç²¹çš„åˆ›é€ æ€§æ´»åŠ¨ææ€•æ²¡æœ‰ä»€ä¹ˆç»éªŒå¯ä»¥å†™ï¼Œæˆ‘èƒ½è¯´çš„ä¹Ÿåªæ˜¯å¤šå»å­¦å­¦ä¸åŒé¢†åŸŸçš„çŸ¥è¯†ã€‚å¦‚æœè¦åšå‡ºæœ‰çµæ€§çš„è§„åˆ™ï¼Œå½“ç„¶ä¸èƒ½åªæ˜¯ç©å„ä¸ªæ¸¸æˆå¹¶å°è¯•â€œå­¦ä¹ ç»éªŒâ€ï¼ˆä½ å­¦çš„éƒ½æ˜¯åˆ«äººåšè¿‡çš„è§„åˆ™ï¼ï¼‰ï¼Œè€Œæ˜¯è¦æ›´å¤šå»çœ‹çœ‹è‡ªå·±ä»æœªè§è¿‡çš„é¢†åŸŸã€‚æ¯”å¦‚è¯´ï¼Œæ¯”èµ·ç›¯ç€ã€Šbaba is youã€‹å­¦ï¼Œä¸å¦‚å»å­¦å­¦ç¼–ç¨‹ã€‚ç¼–ç¨‹çš„â€œèµ‹å€¼â€è¢« baba åšæ‰äº†ï¼Œä½†ç¼–ç¨‹çš„â€œè¯­å¥æ‰§è¡Œé¡ºåºâ€æ˜¯ä¸æ˜¯å°±å¯ä»¥åšæˆ noita çš„é­”æ–ï¼Ÿç¼–ç¨‹çš„â€œæŠ½è±¡â€æ€æƒ³ä¼šä¸ä¼šä¹Ÿå¯ä»¥åšæˆå¦ä¸€ä¸ªæœ‰è¶£çš„è§„åˆ™ï¼Ÿ è™½ç„¶è¯´â€œè¿™ç§åˆ›é€ æ€§æ´»åŠ¨ææ€•æ²¡ä»€ä¹ˆç»éªŒå¯å†™â€ï¼Œä½†è¿˜æ˜¯å†™äº†ä¸€å †ä¸œè¥¿ã€‚æˆ‘ç¡®å®å¯¹åŸºäºè§„åˆ™çš„æŠ€å·§æ›´æ„Ÿå…´è¶£ï¼Œè¿™å®Œç¾å®ç°äº†â€œå†°å±±ä¹‹ä¸‹çš„æ·±åº¦â€ï¼ˆæˆ‘åœ¨è¿™é‡Œç‚¹é¢˜äº†ï¼ï¼‰ã€‚ä¸è¿‡æ¥ä¸‹æ¥æˆ‘ä»¬è¿˜æ˜¯èŠèŠæ²¡æœ‰çµæ„Ÿæ—¶ä¹Ÿèƒ½åšçš„ä¸œè¥¿å§ã€‚ é¢„è®¾çš„æŠ€å·§æ¯”èµ·åˆ›é€ åŸºäºè§„åˆ™çš„æŠ€å·§ï¼Œåˆ›é€ é¢„è®¾çš„æŠ€å·§åˆ™ç®€å•å¾ˆå¤šã€‚æˆ‘ä»¬å¯ä»¥éšä¾¿å£èƒ¡ä¸€äº›é¢„è®¾çš„æŠ€å·§ï¼Œæ¯”å¦‚â€œåœŸç‹¼è·³â€ã€â€œæ”»å‡»è¿‡ç¨‹ä¸­æŒ‰å†²åˆºèƒ½å–æ¶ˆæ”»å‡»â€ã€â€œåœ¨å¼€å¯æŠ€èƒ½çš„å‰æ‘‡æ—¶ç§»åŠ¨æ¥æ¶ˆé™¤å‰æ‘‡è€Œç›´æ¥å¼€å¯æŠ€èƒ½â€ï¼ˆå”‰ï¼Œå–æ¶ˆï¼‰ï¼Œå®é™…ä¸Šä¸ºäº†ä¿è¯æ‰‹æ„Ÿï¼Œå‡ ä¹æ‰€æœ‰æ¸¸æˆéƒ½ç”¨äº†å¤§é‡çš„é¢„è®¾çš„æŠ€å·§ã€‚å¯¹é¢„è®¾çš„æŠ€å·§æ¥è¯´ï¼Œå®é™…éš¾ç‚¹åœ¨äºå¦‚ä½•æŠŠæ·±åº¦è—åœ¨å†°å±±ä¹‹ä¸‹ï¼Œä¸è®©ç©å®¶å› ç›´é¢å¤§é‡æŠ€å·§è€Œæ„Ÿåˆ°æ— æ‰€é€‚ä»ã€‚ æŠŠæ·±åº¦è—åœ¨å†°å±±ä¹‹ä¸‹å¬ç€å¾ˆé«˜å¤§ä¸Šï¼Œå®é™…ä¸Šæœ€å¥½ç”¨çš„è—æ·±åº¦çš„åšæ³•å°±æ˜¯æŠŠé¢„è®¾çš„æŠ€å·§é€æ¸å‘ˆç°ç»™ç©å®¶ã€‚æ¯è¿‡å‡ å…³ç»™ç©å®¶ä¸€ä¸ªæ–°èƒ½åŠ›å°±æ˜¯è¿™ç§åšæ³•ã€‚æ›´å·§å¦™çš„åšæ³•æ˜¯æŠŠå¤šä¸ªé¢„è®¾çš„æŠ€å·§èå…¥åˆ°åŒä¸€ä¸ªæ“ä½œä¹‹ä¸­ï¼Œç”¨æ°å½“çš„å…³å¡è®¾è®¡è®©æŠ€å·§é€æ¸å‘ˆç°å‡ºæ¥ã€‚å…¸å‹çš„ä¾‹å­æ˜¯ã€Šé—°è·ƒä¹‹å¹´ã€‹ï¼Œå¼€å±€è·³ä¸€ä¸‹å°±æ­»äº†ï¼Œé‚£æ€æ ·è·³æ‰èƒ½æ´»ä¸‹æ¥å‘¢ï¼Ÿè¿™å°±æ˜¯è¢«è—åœ¨å†°å±±ä¸‹çš„é¢„è®¾çš„æŠ€å·§äº†ã€‚ æœ‰çš„æ¸¸æˆè¿˜ä¼šæŠŠé¢„è®¾çš„æŠ€å·§ä¼ªè£…æˆè§„åˆ™æ¶Œç°çš„æŠ€å·§ï¼Œè¿™è®©æŠ€å·§æ˜¾å¾—æ›´ä¼˜é›…ï¼Œä½†å®é™…ä¸Šä¸æ˜¯å¾ˆæœ¬è´¨çš„æ”¹è¿›ã€‚å›´ç»•ä¸€ä¸ªæ‘¸æ£±ä¸¤å¯çš„ä¸»é¢˜è®¾è®¡ä¸€äº›é¢„è®¾çš„æŠ€å·§ï¼Œå°±èƒ½åšåˆ°è¿™ä¸€ç‚¹ã€‚æˆ‘èƒ½æƒ³åˆ°çš„æœ€å¥½çš„ä¾‹å­å°±æ˜¯ã€Šè”šè“ã€‹ã€‚è”šè“æŠŠè¹­å¢™è·³ã€å‡Œæ³¢å¾®æ­¥è¿™äº›é¢„è®¾çš„æŠ€å·§è—åœ¨äº†â€œæƒ¯æ€§â€çš„åé¢ï¼Œè®©å„ä¸ªæŠ€å·§çœ‹èµ·æ¥éƒ½æ˜¯æ¶Œç°çš„ã€‚è™½ç„¶è¿™äº›æŠ€å·§çœ‹èµ·æ¥éƒ½å’Œæƒ¯æ€§æœ‰è”ç³»ï¼Œä½†å®é™…ä¸Šç©å®¶å¹¶ä¸èƒ½æ ¹æ®è§„åˆ™æœ¬èº«æ¨ç†å‡ºè¿™äº›æŠ€å·§çš„å­˜åœ¨ï¼Œå› æ­¤è¿™æ˜¯â€æŠŠé¢„è®¾çš„æŠ€å·§ä¼ªè£…æˆè§„åˆ™æ¶Œç°çš„æŠ€å·§â€œã€‚ ç»“å°¾åŸºäºè§„åˆ™çš„æŠ€å·§å’Œé¢„è®¾çš„æŠ€å·§å¹¶éæˆªç„¶å¯¹ç«‹ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½é€æ¸å­¦åˆ°æ‰€æœ‰çš„é¢„è®¾çš„æŠ€å·§ï¼Œå†æŠŠé¢„è®¾çš„æŠ€å·§ä½œä¸ºè§„åˆ™ç»„åˆèµ·æ¥å½¢æˆåŸºäºè§„åˆ™çš„æŠ€å·§ã€‚ è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§æŠ€å·§çš„åŒºåˆ†æ˜¯åœ¨å‘ˆç°ç»™ç©å®¶çš„å±‚é¢ä¸Šï¼Œè€Œéåœ¨å®ç°å±‚é¢ä¸Šã€‚å¦‚æœä½ ç¡¬ç¼–ç å‡º noita çš„æ‰€æœ‰å¯èƒ½çš„æ³•æœ¯æ­é…å¹¶å†™å‡ºå¯¹åº”æ•ˆæœï¼Œè¿™åœ¨å®ç°å±‚é¢ä¸Šæ˜¾ç„¶æ˜¯â€œé¢„è®¾â€çš„ï¼Œä½†å¯¹ç©å®¶æ¥è¯´ï¼Œè¿™ä»ç„¶æ˜¯â€œåŸºäºè§„åˆ™â€çš„ï¼Œæ¯•ç«Ÿç©å®¶å¯ä»¥åŸºäºè§„åˆ™æ¨ç†å‡ºå¯èƒ½çš„æŠ€å·§ã€‚ç›¸è¾ƒè€Œè¨€ï¼Œå¦‚æœæˆ‘ä»¬è®¾è®¡ä¸€ä¸ªå’Œæ³•æœ¯ç›¸å…³çš„æ¸¸æˆï¼Œæ¯ä¸ªæ³•æœ¯åœ¨ä»£ç å±‚é¢ä¸Šéƒ½æ˜¯å‡ ä¸ªå°æ³•æœ¯çš„ç»„åˆï¼Œä½†ç©å®¶çœ‹åˆ°çš„åªæ˜¯ç»„åˆå¥½çš„å„ä¸ªæ³•æœ¯è€Œä¸èƒ½è‡ªå·±å»ç»„åˆæ³•æœ¯ï¼Œè¿™åœ¨å®ç°å±‚é¢ä¸Šæ˜¯â€œåŸºäºè§„åˆ™â€çš„ï¼Œä½†å¯¹ç©å®¶æ¥è¯´æ˜¯â€œé¢„è®¾â€çš„ã€‚ å¤šè¯´ä¸€å¥ï¼Œâ€œåœ¨å®ç°å±‚é¢ä¸ŠåŸºäºè§„åˆ™ï¼Œä½†å‘ˆç°å‡ºæ¥çš„æ•ˆæœæ˜¯é¢„è®¾çš„â€å®é™…ä¸Šæ˜¯å¾ˆé€‚åˆåšæˆæ¢ç´¢ç±»æ¸¸æˆçš„ã€‚æ ¸å¿ƒæ€è·¯æ˜¯ï¼Œé¦–å…ˆæŠŠå¤§é‡çš„é¢„è®¾çš„ç°è±¡å‘ˆç°ç»™ç©å®¶ï¼Œå†è®©ç©å®¶é€æ­¥æ¢ç´¢ç°è±¡èƒŒåçš„è§„åˆ™ã€‚è¿™ç§æ€è·¯åœ¨åˆ«çš„æ¸¸æˆé‡Œä¹Ÿæœ‰ï¼Œä¸è¿‡å…¨æ˜¯è§£è°œæ¸¸æˆï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åšä¸€ä¸ªæ›´æœ‰è¶£çš„æ¢ç´¢ç±»æ¸¸æˆã€‚æ¯”å¦‚è¯´ç©å®¶çœ‹åˆ°äº†ç«çƒæœ¯ï¼Œä¹‹åæˆ‘ä»¬é€æ¸å¼•å¯¼ç©å®¶å‘ç°ç«çƒæœ¯æœ¬è´¨ä¸Šæ˜¯ç«ç„°é­”æ³•+ç§»åŠ¨é­”æ³•ï¼Œç©å®¶å°±èƒ½è¿›è€ŒåŸºäºè§„åˆ™æ„å»ºå‡ºæ–°é­”æ³•äº†ã€‚","categories":[{"name":"æ¸¸æˆè®¾è®¡","slug":"æ¸¸æˆè®¾è®¡","permalink":"http://rinevard.github.io/categories/%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[]},{"title":"è¿™é‡Œæœ‰ä»€ä¹ˆï¼Ÿ","slug":"learning/open-course/è¿™æ˜¯å“ªé‡Œ","date":"2025-03-02T06:28:38.000Z","updated":"2025-08-22T03:16:04.281Z","comments":true,"path":"wiki/learning/open-course/è¿™æ˜¯å“ªé‡Œ/","permalink":"http://rinevard.github.io/wiki/learning/open-course/%E8%BF%99%E6%98%AF%E5%93%AA%E9%87%8C/","excerpt":"","text":"æœ¬æ¥åªæ‰“ç®—åœ¨åšå®¢é‡Œå†™æ‚è°ˆå’Œæ¸¸æˆè®¾è®¡ç›¸å…³æ–‡ç« çš„ï¼Œä¸è¿‡æƒ³æƒ³çœ‹æŠŠå­¦ä¹ ç¬”è®°åœ¨è¿™é‡Œè®°ä¸€è®°ä¼¼ä¹ä¹Ÿä¸é”™ã€‚é‚£è¿™é‡Œå°±æ˜¯å­¦ä¹ è®°å½•äº†ï¼Œä¸»è¦æ˜¯å†™ç»™æœªæ¥çš„è‡ªå·±ç”¨çš„ã€‚ğŸ«  åº”è¯¥åªæœ‰æœ‹å‹ä»¬ï¼ˆcyber friendsï¼‰ä¼šçœ‹åˆ°è¿™ä¸ªç½‘ç«™ï¼Œæ‰€ä»¥è®°å½•ä¸€ä¸‹ä¹Ÿæ˜¯åœ¨è¡¨æ˜æˆ‘è¿˜åœ¨è®¤çœŸå­¦ä¹ ï¼Œæ²¡æœ‰è¿›å…¥æ‘¸é±¼æ€ã€‚è¯»è€…ä¹Ÿåˆ«å¿˜äº†ç»ˆèº«å­¦ä¹ ã€‚","categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"}],"tags":[]},{"title":"_Datalabå’Œæˆ‘","slug":"others/thoughts/datalabå’Œæˆ‘","date":"2025-02-21T11:49:30.000Z","updated":"2025-07-18T15:00:02.472Z","comments":true,"path":"wiki/others/thoughts/datalabå’Œæˆ‘/","permalink":"http://rinevard.github.io/wiki/others/thoughts/datalab%E5%92%8C%E6%88%91/","excerpt":"","text":"ä¸€ä¸ªå¯’å‡è¿‡å»ï¼ŒæŠŠæ‰‹å¤´ä¸Šæœ€å–œæ¬¢çš„è®¾è®¡ç®€å•åšäº†ä¸ªåŸå‹ï¼Œç¡®å®ä¸é”™ã€‚ä¸è¿‡ç”±äºä»£ç æ°´å¹³å¤ªä½ï¼Œå¦ä¸€ä¸ªåŒæ ·å–œæ¬¢çš„è®¾è®¡æ²¡èƒ½å®ç°å‡ºæ¥ã€‚åŸæœ¬æƒ³åœ¨è¿™å­¦æœŸåšä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„æ¸¸æˆçš„ï¼Œä½†è®¤çœŸæƒ³äº†æƒ³ï¼Œå‡­æˆ‘ç°åœ¨çš„ä»£ç æ°´å¹³ï¼Œææ€•æ ¹æœ¬åšä¸äº†ã€‚è¿˜æ˜¯è¦æé«˜ä¸€ä¸‹è‡ªå·±çš„ä»£ç æ°´å¹³æ‰è¡Œï¼Œäºæ˜¯è¿™å­¦æœŸæ‰“ç®—è®¤çœŸæ‰“æ‰“åŸºç¡€ï¼Œä» 15213 å¼€å§‹ã€‚ ä»Šå¤©å†™æ‰äº† datalabã€‚å‡­å€Ÿè‡ªå·±çš„åŠªåŠ›åšå®Œäº†ä¸€ä¸ªå¾ˆéš¾çš„ä½œä¸šï¼Œå½“ç„¶ä¼šæ„Ÿåˆ°å¾ˆæ¬¢å–œï¼Œå¯ç«™èµ·æ¥å‡†å¤‡å›å¯æ—¶ï¼Œçªç„¶æ„Ÿåˆ°å¾ˆå­¤å•ã€‚â€œæ²¡æœ‰å­¦åˆ†ï¼Œæ²¡æœ‰ç»©ç‚¹ï¼Œæ²¡æœ‰è€å¸ˆï¼Œæ²¡æœ‰åŒå­¦ï¼Œåªæœ‰ä¸€ä¸ªä¿¡å¿µ â€”â€” ä½ åœ¨å˜å¼ºã€‚â€æˆ–è®¸å§ï¼Œæˆ‘åœ¨å˜å¼ºã€‚å˜å¼ºä¹‹åå‘¢ï¼Ÿåº”è¯¥å°±èƒ½å†™å‡ºæ›´æ¼‚äº®çš„ä»£ç ï¼Œä¸å¸¦å¦¥ååœ°å®ç°è‡ªå·±çš„æƒ³æ³•äº†å§ã€‚ æ›´æ–°ï¼šä»Šå¤©ï¼ˆ2025.3.1ï¼‰åœ¨å¯å®¤å†™å®Œäº† bomblabï¼Œæ„Ÿè§‰å¾ˆå¼€å¿ƒï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå­¤å•çš„æ„Ÿè§‰ã€‚é¡ºä¾¿çœ‹äº†çœ‹æ¯é¸¡å¡çš„æ–°å‡è¯ï¼ŒèŒæˆ˜å§çš„å§å‹ä»¬å³ä½¿åœ¨æ»‘å¡å¤§ç¯å¢ƒä¸‹ä¹ŸåšæŒé€ è¯ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„é»„é‡‘ç²¾ç¥ï¼ /* éšè—è‰ä¹¦ */ .hidden-text { font-size: 18px; text-align: center; margin: 20px 0; /* padding: 20px; */ line-height: 1.5; color: transparent; cursor: default } .hidden-fancy-text::selection { color: black; background: white; } å‡è§†æˆ‘æ›¾å‡è§†çš„å…‰èŠ’ï¼Œè§¦æ‘¸ä½ å°†è§¦æ‘¸çš„è¿œæ–¹ã€‚","categories":[{"name":"æ‚è°ˆ","slug":"æ‚è°ˆ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/"},{"name":"ç¢ç¢å¿µ","slug":"æ‚è°ˆ/ç¢ç¢å¿µ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/%E7%A2%8E%E7%A2%8E%E5%BF%B5/"}],"tags":[]},{"title":"æ¯é¸¡å¡çš„å„ç§ç¥å¥‡å‡è¯","slug":"others/animation/æ¯é¸¡å¡çš„å„ç§ç¥å¥‡å‡è¯","date":"2025-02-15T13:31:31.000Z","updated":"2025-08-20T11:13:48.877Z","comments":true,"path":"wiki/others/animation/æ¯é¸¡å¡çš„å„ç§ç¥å¥‡å‡è¯/","permalink":"http://rinevard.github.io/wiki/others/animation/%E6%AF%8D%E9%B8%A1%E5%8D%A1%E7%9A%84%E5%90%84%E7%A7%8D%E7%A5%9E%E5%A5%87%E5%81%87%E8%8D%AF/","excerpt":"","text":"img{ width: 50%; } æ•´ç†ä¸€ä¸‹æˆ‘è§‰å¾—å¾ˆæœ‰è¶£çš„å‡è¯ï¼Œå¤ªçœŸçš„å’Œæˆ‘ä¸æ„Ÿå…´è¶£çš„å°±ä¸æ”¾è¿›æ¥äº†ã€‚ ä½ çŸ¥é“çš„ï¼Œæ¯é¸¡å¡å·²ç»çƒ‚å®Œäº†ï¼Œä½†è¿½ç•ªè¿‡ç¨‹ä¸­çœ‹å§å‹å‡è¯çš„ä½“éªŒè¿˜æ˜¯å¾ˆæœ‰è¶£çš„ã€‚è¿½ç•ªæ—¶çš„æ€’æ°”å€¼ä»ç¬¬ä¹é›†å¼€å§‹ç§¯ç´¯ï¼Œåœ¨ç¬¬åäºŒé›†è¾¾åˆ°å·…å³°ï¼Œä¹Ÿæœ‰äº†åˆ æ‰è¿™ç¯‡æ–‡ç« çš„æƒ³æ³•ã€‚ä½†æƒ³äº†æƒ³çœ‹å‡è¯çš„ä½“éªŒç¡®å®è¶³å¤Ÿæœ‰è¶£ï¼Œäºæ˜¯å°±è¿™æ ·å§ã€‚é‡Šæ€€æ˜¯ä¸å¤ªèƒ½é‡Šæ€€çš„ï¼Œæ•´éƒ¨åŠ¨ç”»çš„å‰²è£‚æ„Ÿå®åœ¨ä»¤äººæ„Ÿåˆ°æ¶å¿ƒã€‚ï¼ˆ2025.3.21 æ›´æ–°ï¼‰ å…³äºæ•´ä½“èµ°å‘çš„å‡è¯æ—¶é—´è½®å›è¯´æ—¶é—´è½®å› æ˜¯ç¬¬ä¹é›†å‡ºç°çš„å‡è¯ ç¬¬ä¹é›†ç¾éš¾èˆ¬çš„çˆ†çˆ†çˆ†è®©è®¸å¤šå‡è¯çš„è®¨è®ºåº¦éƒ½å¤§å¹…ä¸‹é™ï¼Œä¸è¿‡æ—¶é—´ä¹±åºè¯´é‡æ–°ç™»åœºï¼Œæ›´æ˜¯å‡ºç°äº†æ—¶é—´è½®å›è¯´ã€‚ï¼ˆè‡´æ•¬ä¼ å¥‡ç¬¬åè¯â€”â€”æˆ‘çš„æˆ˜åœºä¸åœ¨è¿™é‡Œï¼‰ æˆ‘æ„Ÿè§‰æ—¶é—´è½®å›ä¸å¤ªå¯èƒ½ï¼Œä¸è¿‡è¿™ä¸ªæƒ³æ³•å¤ªé…·äº†ï¼è‡³äºæ—¶é—´ä¹±åºï¼Œæœ€æ˜æ˜¾çš„è¯æ®æ˜¯ç¬¬ä¹é›† 18:40 å’Œç¬¬äºŒé›† 13:34 èƒ½è¿èµ·æ¥ã€‚æˆ–è®¸å¯ä»¥ç»“åˆç³å­”å˜åŒ–è¯´æ¥çœ‹çœ‹ç¬¬äºŒé›†æ˜¯ mortis è¿˜æ˜¯ç¦å¤´ï¼Ÿ é‚£ä¹ˆè´¯ç©¿å…¨å‰§ï¼ŒæŠŠæ—¶é—´é‡æ’èµ·æ¥çš„çº¿ç´¢æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸€ç§è¯´æ³•æ˜¯æ‰‹æœºç”µé‡ å™è¯¡è¯´å™è¯¡è¯´ æ˜¯ç¬¬äºŒé›†å‡ºç°çš„å‡è¯ï¼Œåœ¨ä¸‰å››é›†å¾—åˆ°å®Œå–„ï¼Œç¬¬äº”é›†åè®¨è®ºåº¦å¤§å¹…ä¸‹é™ã€‚ å‰å››é›†å‰§æƒ…è·³è·ƒã€æ—ç™½ç”±åˆåå£°ä¼˜å¿µå‡ºæ˜¯å› ä¸ºè¿™æ˜¯åˆååœ¨å™è¿°æ•…äº‹ï¼é‚£ä¹ˆï¼Œæ˜¯åœ¨å¯¹è°è®²è¿°å‘¢ï¼Ÿ ä¸€ç§å‡è¯æ˜¯åˆåå¯¹å¤±å¿†çš„ç¥¥å­è®²è¿°æ•…äº‹ï¼Œåœ¨å™è¿°ä¸­ç¾åŒ–è‡ªå·±ï¼Œå¥½è®©ç¥¥å­å¾…åœ¨è‡ªå·±èº«è¾¹ã€‚ç†ç”±æ˜¯ç¥¥å­åœ¨å‰å››é›†å”¯ç‹¬å¯¹åˆåæ€åº¦æ¯”è¾ƒå¥½ï¼Œè¿™æ˜¯åˆåå¯¹è‡ªå·±çš„ç¾åŒ–ã€‚ å¦ä¸€ç§æ˜¯åˆåå¯¹è‡ªå·±è®²è¿°æ•…äº‹ï¼Œåªæ˜¯åœ¨è‡ªæˆ‘æ¬ºéª—â€œä¹é˜Ÿä¾ç„¶å­˜åœ¨â€ï¼Œå› æ­¤å‰§æœ¬æ¼æ´ç™¾å‡ºã€‚ä½†æ— è®ºå™è¿°å¤šå°‘æ¬¡ï¼Œä¹é˜Ÿéƒ½é€ƒä¸æ‰è§£æ•£çš„ç»“å±€ã€‚ ä¸Šé¢çš„è“è‰²é“¾æ¥æ˜¯â€œåˆåå¯¹è‡ªå·±è®²è¿°æ•…äº‹â€ã€‚ å†…é¬¼å†…é¬¼è¯´ æ˜¯ç¬¬å››é›†å‡ºç°çš„å‡è¯ï¼Œä¸»è¦ç”¨äºè§£é‡Šè§‚æ„Ÿå¥‡æ€ªçš„è§£æ•£ã€‚ æ¯é¸¡å¡è§£æ•£çš„å‰§æƒ…é€»è¾‘æ··ä¹±ï¼Œè¿™æ˜¯å› ä¸ºé˜Ÿé‡Œæœ‰å†…é¬¼ï¼Œå†…é¬¼åªè¦æŠŠé˜Ÿè§£æ•£æ‰å°±è¡Œäº†ã€‚ç”±äºæˆ‘æ¯”è¾ƒå–œæ¬¢ç¥¥å­ï¼Œæ‰€ä»¥æˆ‘æ¥ä¸‹æ¥è®²å…¨é˜Ÿå†…é¬¼ï¼Œç¥¥å­ 1vn çš„å‰§æƒ…ã€‚ æ•´ä¸ªäº‹åŠ¡æ‰€éƒ½æ˜¯ä¸°å·å®¶æ—å®‰æ’çš„å†…é¬¼ï¼Œä¸Šåˆ°å…¶ä»–ä¹é˜Ÿæˆå‘˜ä¸‹åˆ°å·¥ä½œäººå‘˜ï¼Œéƒ½å¯¹â€œä¸°å·å®¶å¸Œæœ›ç¥¥å­å›å®¶â€è¿™ä»¶äº‹æˆ–å¤šæˆ–å°‘æœ‰äº†è§£ï¼Œå› æ­¤å·¥ä½œäººå‘˜æµ‘æ°´æ‘¸é±¼ï¼Œé™¤äº†ç¥¥å­ä»¥å¤–çš„ä¹é˜Ÿæˆå‘˜éƒ½ä¸åœ¨ä¹ä¹é˜Ÿã€‚ç¥¥å­ 1vn ç¡¬ç”Ÿç”ŸæŠŠæ¯é¸¡å¡å¸¦åˆ°äº†æ­¦é“é¦†ï¼Œä¸æ„§æ˜¯ç¾å¼ºæƒ¨å¤§å¥³ä¸»ï¼Œæ•°å€¼å¤ªé«˜äº†ã€‚ è¿™å¤ªæ•°å€¼æ€ªå•¦ï¼Œä¸åˆç†çš„ï¼ä¸è¿‡å†…é¬¼è¯´è¿˜æ˜¯å¾ˆæœ‰è¶£è€Œä¸”å¾ˆé è°±çš„ï¼Œæˆ‘è§‰å¾—æ¯”è¾ƒçœŸçš„æ˜¯åˆåå–µæ¢¦å†…é¬¼ï¼Œç¦å’Œæµ·ç²çŸ¥æƒ…ã€‚ äººå¶äººå¶è¯´ æ˜¯ç¬¬ä¸ƒé›†å‡ºç°çš„å‡è¯ã€‚ mujica ç»“å°¾å…¨å‘˜äººå¶åŒ–ã€‚â€œåœ¨ mujica çš„çŸ­æš‚æœˆå…‰ä¸‹ï¼Œäº”ä¸ªäººå¶çŸ­æš‚çš„å¤æ´»äº†ï¼Œåœ¨èˆå°ä¸Šé«˜æ­Œä¸€æ›²ã€‚ç»™å‡ºäº†ä¸€åœºå®Œç¾ liveã€‚â€ å…³äºä¸ªäººçš„å‡è¯åˆåèœ˜è››ä¾ èœ˜è››ä¾  å…¶å®åˆåçš„çœŸå®èº«ä»½æ˜¯èœ˜è››ä¾ ï¼Œå„ç§èœ˜è››æ„è±¡æ˜¯æš—ç¤ºåˆåè¢«èœ˜è››å’¬è¿‡ã€‚èƒ½åŠ›è¶Šå¤§ï¼Œè´£ä»»è¶Šå¤§ï¼Œèœ˜è››ä¾ è¦æ‰“å‡»çŠ¯ç½ªï¼Œæ‰€ä»¥æ—¢ä¸å» Mujica æ’ç»ƒï¼Œä¹Ÿä¸å» sumimi æ’ç»ƒï¼Œè¿˜è¯´è‡ªå·±å¿™ã€‚åˆåè®©ç¥¥å­åœ¨é—¨å£ç­‰ 10 ç§’å…¶å®æ˜¯åœ¨è—èœ˜è››æˆ˜è¡£ï¼Œå¥¹ 10 ç§’å°±èƒ½æ”¶æ‹¾å¥½æˆ¿é—´ã€ç¬¬ä¸‰é›†éš”ç€å‡ åç±³å¬åˆ°ç¥¥å­å’Œç¦çš„å¯¹è¯éƒ½æ˜¯å› ä¸ºå¥¹æœ‰è¶…èƒ½åŠ›ã€‚ä¼—æ‰€å‘¨çŸ¥ç¥¥å­æ˜¯è“è‰²ç« é±¼ï¼ŒåˆåæŠŠç¥¥å­å¸¦åˆ°è‡ªå·±å®¶å®é™…ä¸Šæ˜¯ä¸ºäº†ç›‘è§†ç« é±¼åšå£«ã€‚è€Œä¸”ï¼Œæ—¢ç„¶æœ‰åŒé¢äººç¦ã€ä¼é¹…äººé«˜æ¾ç¯ã€ç« é±¼åšå£«ç¥¥å­ï¼Œæœ‰èœ˜è››ä¾ åˆåä¹Ÿä¸å¥‡æ€ªã€‚ å™è¯¡å™è¯¡è¯´ ä¹‹å‰å·²ç»æè¿‡ï¼Œè¿™é‡Œçš„é“¾æ¥æ˜¯ç¬¬äºŒé›†æ’­å‡ºåçš„åˆç‰ˆå‡è¯ã€‚ ä¹‹å‰å·²ç»è¯´è¿‡äº†ï¼Œæ—ç™½ç”±åˆåçš„å£°ä¼˜å¿µå‡ºã€å‰å‡ é›†é€»è¾‘è¯¡å¼‚ï¼Œéƒ½æ˜¯å› ä¸ºè¿™æ˜¯åˆåè®²è¿°çš„æ•…äº‹ã€‚åˆåæ˜¯æ¯é¸¡å¡æ•…äº‹çš„å™è¿°è€…ã€‚ ç¼“å­˜ä¸è¶³ç¼“å­˜ä¸è¶³è¯´ æ˜¯ç¬¬å››é›†å‡ºç°çš„å‡è¯ã€‚ â€œåˆåå¯¹æŸäº›è®°å¿†çš„æ·±åˆ»ç¨‹åº¦ï¼Œå¯èƒ½ä¸ä¼šè¢«æ—¶é—´å†²æ·¡ï¼Œè€Œä¸€äº›æ—¥å¸¸è®°å¿†å¯èƒ½ä¼šè¢«å¾ˆå¿«çš„å¿˜å´ã€‚åœ¨å¥¹å¿ƒç›®ä¸­ï¼Œè‡ªå·±å’Œå¿ƒçˆ±çš„ç¥¥å­åº¦è¿‡çš„æ¯ä¸ªå¤å¤©ã€å‡ºé“æ—¶ç¥¥å­å‘æ¥çš„çŸ­ä¿¡é¼“åŠ±å¯èƒ½ä¸€ç›´å æ®ç€å¥¹è„‘å†…éå¸¸éå¸¸å¤šçš„ç¼“å­˜ã€‚è¿™äº›å’Œç¥¥å­ä¸€èµ·çš„å¿«ä¹çš„è®°å¿†å¯¹åˆåæ¥è¯´å¯èƒ½å°±åƒæ˜¯åˆšåˆšç»å†çš„ä¸€æ ·ï¼Œé‚£ä»½å–œæ‚¦ã€ç”œèœœã€é¥¥æ¸´å°±åƒå†°ä¸€æ ·æ— æ—¶æ— åˆ»ä¸åœ¨ä¾µèš€åˆåçš„å¤§è„‘ï¼Œæ‰€ä»¥åˆåæ‰ä¼šç»™äººä¸€ç§éš¾ä»¥å½¢å®¹çš„è¶…é‡å¥³å°è±¡ã€‚â€ è®¤çŸ¥éšœç¢åˆåè®¤çŸ¥éšœç¢è¯´ æ˜¯ç¬¬ä¸€é›†å‡ºç°çš„å‡è¯ã€‚ åˆåçš„çœ¼é‡Œä¸€ç›´éƒ½åªæœ‰ç¥¥å­ï¼Œåˆ«äººçš„å½¢è±¡åœ¨å¥¹çœ¼é‡Œæ˜¯æ‰­æ›²çš„ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼ŒMyGO ç¬¬å…«é›†é‡Œæœ‰åˆåçš„å›å¿†ï¼Œå›å¿†é‡Œæ˜æ˜¾èƒ½çœ‹å‡ºåˆåè§è¿‡ç¥¥å­çš„äººå¶ã€‚ç„¶è€Œåœ¨æ¯é¸¡å¡ç¬¬äºŒé›†é‡Œï¼Œå¥¹å´å¥½åƒæ˜¯ä¸è®¤è¯†äººå¶çš„æ ·å­ã€‚ç­”æ¡ˆæ˜¯åˆååœ¨å°æ—¶å€™å°†ç¦è®¤çŸ¥æˆäº†äººå¶ã€‚ å¤±å¿†åˆåå¤±å¿†è¯´ æ˜¯ç¬¬äºŒé›†å‡ºç°çš„å‡è¯ã€‚ ä¸ºä»€ä¹ˆåˆåå¦‚æ­¤ç©ºæ´ï¼Ÿä¸ºä»€ä¹ˆåˆåçš„ç«¥å¹´è®°å¿†å’Œç¥¥å­æœ‰åå·®ï¼Ÿä¸ºä»€ä¹ˆåˆåå¿˜äº†ç¥¥å­çš„ç©å¶ï¼Ÿå› ä¸ºåˆåç»å†è¿‡ä¸€æ¬¡å¤±å¿†ã€‚åˆåæ‹¿ç€ä»¥å‰çš„æ—¥è®°æœ¬ï¼ŒåŠªåŠ›æ‰®æ¼”â€œçœŸæ­£çš„åˆåâ€ã€‚ ç¥¥å­â­ å‹æŠ‘ä¸°å·ç¥¥å­ â­ å‹æŠ‘è¯´ ç¥¥å­å¯¹å¤§é›·æƒ…æœ‰ç‹¬é’Ÿï¼Œç»„ä¹é˜Ÿæ˜¯ä¸ºäº†æ¥è¿‘å¤§é›·ã€‚ äººå¶ç¥¥å­äººå¶è¯´ æ˜¯ç¬¬ä¸ƒé›†å‡ºç°çš„å‡è¯ï¼Œä¸»è¦ç”¨äºè§£é‡Šç¬¬ä¸ƒé›†ç¥¥å­çš„å½¢è±¡å˜åŒ–ã€‚ ç¬¬ 7 é›†çš„ç¥¥å­ä¸ºäº†ç¦æˆä¸ºäº†èˆå¼ƒè‡ªæˆ‘çš„äººå¶ï¼Œå¥¹è£…å‡ºäº†ç™½ç¥¥çš„æ ·å­ï¼Œå› ä¸ºâ€œåªè¦ç¦èƒ½å›æ¥å°±å¥½äº†â€ã€‚ ç¥¥çˆ¹æ¼”æˆç¥¥çˆ¹æ¼”æˆè¯´ æ˜¯ç¬¬äº”é›†å‡ºç°çš„å‡è¯ã€‚ ç¥¥çˆ¹æ¼”æˆæŠŠç¥¥å­æ°”èµ°ï¼Œè®©ç¥¥å­å›å½’å®¶æ—ã€‚ ç¦è£…åŒé‡äººæ ¼ç¦è£…åŒé‡äººæ ¼è¯´ æ˜¯ç¬¬å››é›†å‡ºç°çš„å‡è¯ã€‚ å¦‚é¢˜ï¼Œä¸»è¦ä¾æ®æ˜¯ç¬¬å››é›†ç¦åœ¨åˆåè½¦ä¸Šçš„ç¬¬ä¸€å¥â€œå—¯â€æ˜¯ç¦çš„å£°çº¿ã€‚ mortis å°å°ç¥¥mortis å°å°ç¥¥è¯´ åº”è¯¥æ˜¯ç¬¬å…­é›†å‡ºç°çš„å‡è¯ã€‚ ç¦å°æ—¶å€™åªæœ‰ç¥¥å­ä¸€ä¸ªæœ‹å‹ï¼Œmortis æ˜¯ç¦ä»¥ç™½ç¥¥ä¸ºæ¨¡æ¿å¡‘é€ çš„äººæ ¼ï¼Œæ‰®æ¼”å°ç¥¥ã€‚ å†™æ–‡ç« æ—¶æ•´ç†çš„å‡è¯é“¾æ¥ å™è¯¡ å†…é¬¼è¯´ äººå¶è¯´ ç¦ç¥¥é»‘æ‰‹è¯´ åœ£ç»è¯´ å…ƒç´ è¯´ èœ˜è››ä¾  å™è¯¡è¯´ ç¼“å­˜ä¸è¶³è¯´ åˆåè®¤çŸ¥éšœç¢è¯´ åˆåå¤±å¿†è¯´ ç¥¥å­å¤±èªè¯´ ç¥¥å­äººå¶è¯´ ç¥¥çˆ¹æ¼”æˆè¯´ ç¦è£…åŒé‡äººæ ¼è¯´ mortis å°å°ç¥¥è¯´ mortis é”¡å…µè¯´ é›¨ä¼é¢œè‰² ç¥¥ç¦å§å¦¹è¯´ å¤©å¤©åƒå‡è¯åƒå‚»äº†åšå‡ºæ¥çš„å†°å±±å›¾ å››æ¼” mortis å››æ¼”ç¥¥å­ æ­Œå‰§é­…å½±è¯´","categories":[{"name":"æ‚è°ˆ","slug":"æ‚è°ˆ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/"},{"name":"äºŒæ¬¡å…ƒ","slug":"æ‚è°ˆ/äºŒæ¬¡å…ƒ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/%E4%BA%8C%E6%AC%A1%E5%85%83/"}],"tags":[]},{"title":"å¯¹æ¢ç´¢ç±»æ¸¸æˆçš„æ€è€ƒ","slug":"game-design/å¯¹æ¢ç´¢ç±»æ¸¸æˆçš„æ€è€ƒ","date":"2025-02-14T12:36:38.000Z","updated":"2025-08-19T07:50:56.136Z","comments":true,"path":"wiki/game-design/å¯¹æ¢ç´¢ç±»æ¸¸æˆçš„æ€è€ƒ/","permalink":"http://rinevard.github.io/wiki/game-design/%E5%AF%B9%E6%8E%A2%E7%B4%A2%E7%B1%BB%E6%B8%B8%E6%88%8F%E7%9A%84%E6%80%9D%E8%80%83/","excerpt":"","text":"ä¸ºä»€ä¹ˆè¦æ¢ç´¢å‘¢ï¼Ÿè®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬ä¹˜ä¸Šäº†é£èˆ¹ï¼Œé£å…¥å¤ªç©ºï¼Œå¿½ç„¶å‘ç°ä¸€é¢—è¡Œæ˜Ÿæœç€åæ–¹å‘è½¬åŠ¨äº†ã€‚è¿™æ—¶ä½ ä¼šä¸ä¼šæƒ³å»é‚£é‡Œï¼Ÿå¦‚æœæˆ‘ä»¬åœ¨ç½‘ä¸Šå‘ç°äº†ä¸€ä¸ªç½‘ç«™ï¼Œç‚¹å¼€ç¬¬ä¸€ä¸ªé“¾æ¥å‘ç°é‡Œé¢æ˜¯ä½ çš„å®¶åº­ä½å€ï¼ˆæˆ‘è¶…ï¼Œç›’ï¼ï¼‰ï¼Œä½ ä¼šä¸ä¼šæƒ³ç»§ç»­ç¿»åˆ«çš„é“¾æ¥ï¼Ÿäººç±»æ¢ç´¢çš„åŠ¨åŠ›è¢«å‘½åä¸ºå¥½å¥‡å¿ƒï¼Œå¥½å¥‡é©±åŠ¨æ¢ç´¢ã€‚ å¥½å§ï¼Œæˆ‘ä»¬ä¸å¦¨æŠŠè¯è¯´å¾—æ›´æ˜ç™½ä¸€äº›ï¼Œå¥½å¥‡é©±åŠ¨æ¢ç´¢çš„æ„æ€å°±æ˜¯ï¼šâ€œæˆ‘ç›¸ä¿¡é‚£é‡Œæœ‰å€¼å¾—å…³æ³¨çš„ä¸œè¥¿ï¼Œä½†ä¸ç¡®åˆ‡çŸ¥é“æ˜¯ä»€ä¹ˆï¼Œæ‰€ä»¥æˆ‘è¦å»æ¢ç´¢ã€‚â€ è¿™å¬èµ·æ¥çœŸçš„æ˜¯å†å¹³å‡¡ä¸è¿‡çš„äº‹æƒ…äº†ï¼Œé‚£å°±æ¥åˆ†æä¸€ä¸‹æ€ä¹ˆæ¿€å‘ç©å®¶çš„å¥½å¥‡å¿ƒï¼Œå†è®©å¥½å¥‡é©±åŠ¨æ¢ç´¢å§ã€‚ ç›¸ä¿¡æœ‰å€¼å¾—å…³æ³¨çš„ä¸œè¥¿åœ¨æ¢ç´¢ä¹‹å‰ï¼Œé¦–å…ˆè¦è®©ç©å®¶ç›¸ä¿¡â€œé‚£é‡Œæœ‰å€¼å¾—å…³æ³¨çš„ä¸œè¥¿â€ã€‚å€¼å¾—å…³æ³¨çš„ä¸œè¥¿å¹¶ä¸éš¾åšï¼Œå®ƒä»¬å¯ä»¥æ˜¯å¥‡è§‚ã€å¥–åŠ±ä¹ƒè‡³æŒ‘æˆ˜ï¼Œå…³é”®æ˜¯æ€æ ·è®©ç©å®¶ç›¸ä¿¡â€œé‚£é‡Œæœ‰ä¸œè¥¿â€ã€‚ åšæ³•å¾ˆå¤šï¼Œæˆ‘ä»¬æ¥æ‰¾å‡ ä¸ªä¾‹å­ï¼Œçœ‹çœ‹å…³æ³¨æ¢ç´¢æ„Ÿçš„æ¸¸æˆéƒ½æ˜¯æ€ä¹ˆåšåˆ°è¿™ä¸€ç‚¹çš„ã€‚ é¦–å…ˆæ¥çœ‹ç±»é“¶æ²³åŸæ¸¸æˆï¼Œå¯¹æœ‰ç»éªŒçš„ç©å®¶ï¼Œè·å¾—æ–°èƒ½åŠ›å°±è‡ªç„¶æƒ³åˆ°â€œä»¥å‰æœ‰ä¸ªè¿‡ä¸å»çš„è·¯èƒ½é è¿™ä¸ªèƒ½åŠ›è¿‡å»â€ï¼Œç„¶åä¹Ÿå°±æƒ³åˆ°â€œé‚£é‡Œæœ‰å€¼å¾—å…³æ³¨çš„ä¸œè¥¿â€ï¼›çœ‹åˆ°å¢™å°±è‡ªç„¶æƒ³åˆ°å‡å¢™ï¼Œç„¶åå°±æƒ³åˆ°â€œé‚£é‡Œæœ‰å€¼å¾—å…³æ³¨çš„ä¸œè¥¿â€äº†ã€‚ç„¶è€Œï¼Œè¿™ç§åšæ³•è¿‡åº¦ä¾èµ–ç©å®¶çš„å…ˆéªŒçŸ¥è¯†ã€‚å¯¹ä¸€ä¸ªæ–°æ¥è§¦ç±»é“¶æ²³åŸçš„ç©å®¶æ¥è¯´ï¼Œåˆ°å¤„è¿·è·¯æ‰æ˜¯æ›´å¯èƒ½å‘ç”Ÿçš„äº‹æƒ…ï¼Œä»–ä»¬æ ¹æœ¬ä¸çŸ¥é“â€œå“ªé‡Œæœ‰å€¼å¾—å…³æ³¨çš„ä¸œè¥¿â€ã€‚ æˆ‘æƒ³è¿™ä¹Ÿæ˜¯ç±»é“¶æ²³åŸæ¸¸æˆç›¸å¯¹å°ä¼—çš„åŸå› ï¼Œå®ƒåªç»™æœ‰ç»éªŒçš„ç©å®¶æä¾›äº†æ¢ç´¢æ„Ÿï¼Œè€Œç»™æ–°ç©å®¶æä¾›äº†è¿·è·¯æ„Ÿã€‚èƒ½åŠ›é”å°šä¸”å¥½è¯´ï¼Œå‡å¢™å°±å®åœ¨æ˜¯ä¸åˆ©äºæ¢ç´¢æ„Ÿçš„å¡‘é€ äº†ï¼Œæ¯•ç«Ÿå¤§å¤šæ•°ç©å®¶çš„å…ˆéªŒçŸ¥è¯†æ˜¯â€œå¢™ä½“ä¸å¯ç ´åâ€ï¼Œæ ¹æœ¬å°±ä¸ä¼šæƒ³åˆ°â€œå¢™åé¢æœ‰å€¼å¾—å…³æ³¨çš„ä¸œè¥¿â€ã€‚ä¸è¿‡å‡å¢™å¹¶éä¸€æ— æ˜¯å¤„ï¼Œå®ƒèƒ½ç»™ç©å®¶ä¸€ç§â€œç§˜å¯†â€çš„æ„Ÿè§‰ï¼Œè¿™å°±æ˜¯é¢˜å¤–è¯äº†ã€‚æ‰€ä»¥è¯´å¦‚æœåšç±»é“¶æ²³åŸï¼Œèµ·ç è¦æé†’ä¸€ä¸‹ç©å®¶è¿™äº›è®¾è®¡çš„å­˜åœ¨ï¼Œè€Œä¸æ˜¯ç›²ç›®åœ°æŠ„åˆ«çš„é“¶æ²³åŸçš„åšæ³•ã€‚åœ¨ç©ºæ´éª‘å£«å¼€å±€çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¿…é¡»æ‰“ç¢ä¸€é¢å¢™æ‰èƒ½å‰è¿›ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªä¸é”™çš„æé†’ã€‚ æ¥ä¸‹æ¥çœ‹çœ‹æ¸…å•å¼å¼€æ”¾ä¸–ç•Œã€‚è™½ç„¶åœ¨åœ°å›¾ä¸Šåˆ°å¤„å¡é—®å·çš„æ–¹æ³•ä¸ºäººè¯Ÿç—…ï¼Œä½†è¿™ä¹Ÿç¡®å®éå¸¸æ¸…æ™°åœ°æŠŠâ€œé‚£é‡Œæœ‰ä¸œè¥¿â€ä¼ è¾¾ç»™äº†ç©å®¶ã€‚é‚£ä¸ºä»€ä¹ˆä¸ºäººè¯Ÿç—…å‘¢ï¼Ÿä¸»è¦æ˜¯å› ä¸ºé—®å·é‡Œçš„ä¸œè¥¿åƒç¯‡ä¸€å¾‹ï¼Œè¿â€œå€¼å¾—å…³æ³¨çš„ä¸œè¥¿â€éƒ½æ²¡åšåˆ°ã€‚é‚£å¦‚æœæŠŠæ¯ä¸ªé—®å·éƒ½å¡ä¸€ä¸ªç²¾ç¾çš„æ”¯çº¿ï¼Œä¼šå¥½ç‚¹å—ï¼Ÿææ€•ä¹Ÿä¸ä¸€å®šï¼Œå› ä¸ºè¢«åŠ¨åœ°æ¥å—é—®å·å’Œä¸»åŠ¨å‘ç°é—®å·å¸¦æ¥çš„â€œå€¼å¾—å…³æ³¨æ„Ÿâ€æ˜¯ä¸ä¸€æ ·çš„ã€‚è‡ªå·±æ‰¾åˆ°çš„ä¸œè¥¿ï¼Œå°±ç®—å†æ— èŠä¹Ÿä¼šæƒ³çœ‹å®Œã€‚ è¿™é‡Œå°±ä¸è°ˆå¡å°”è¾¾äº†ã€‚è¯´èµ·æ¥ä¸å¤ªå¥½æ„æ€ï¼Œä½†æˆ‘åœ¨ç©çš„æ—¶å€™ç¡®å®æ²¡æ„Ÿåˆ°ä»€ä¹ˆæ¢ç´¢æ¬²æœ›ã€‚ä¸€æ˜¯æˆ‘æ²¡æ„Ÿè§‰åˆ°å“ªé‡Œæœ‰ä¸œè¥¿ï¼ŒäºŒæ˜¯å› ä¸ºæˆ‘ä¹Ÿæ²¡æ„Ÿè§‰æœ‰ä»€ä¹ˆå€¼å¾—æˆ‘å…³æ³¨çš„ä¸œè¥¿ã€‚ï¼ˆçƒçƒäº†ï¼Œä¸è¦å¼€é™¤æˆ‘çš„ç©å®¶ç±ï¼‰ ç„¶åè°ˆè°ˆæ˜Ÿé™…æ‹“è’å§ï¼Œè¿™ç¯‡æ–‡ç« å¯ä»¥è¯´å°±æ˜¯ä¸ºäº†æ˜Ÿé™…æ‹“è’è€Œå†™çš„ã€‚æ˜Ÿé™…æ‹“è’çš„åšæ³•ä¸»è¦æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯å¥‡è§‚ï¼Œå¦ä¸€ç§æ˜¯éå¸¸ç›´ç™½åœ°ç”¨æ–‡å­—å‘Šè¯‰ä½ â€œé‚£é‡Œæœ‰ä¸œè¥¿â€ã€‚å‰è€…ä¸å¿…å¤šè¯´ï¼Œåè€…çš„æ–‡å­—æè¿°æœ¬èº«ä¹Ÿè¶³ä»¥è®©ç©å®¶è§‰å¾—é‚£é‡Œâ€œå€¼å¾—å…³æ³¨â€ã€‚ ä¸ç¡®åˆ‡çŸ¥é“æœ‰ä»€ä¹ˆè¿™ä¸€ç‚¹çœ‹èµ·æ¥ä¸éš¾å®ç°ï¼Œä½†å’Œå‰ä¸€ç‚¹ç»“åˆèµ·æ¥å°±å¾ˆéš¾äº†ã€‚ç©å®¶ç©äº†ä¸€æ®µæ—¶é—´æ¸¸æˆåï¼Œå¾ˆå¿«å°±ä¼šå¯¹å¥–åŠ±æœ‰ä¸€å®šé¢„æœŸï¼Œå¦‚æœåšä¸åˆ°æ‰“ç ´è¿™ç§é¢„æœŸï¼Œå°±ä¼šè®©ç©å®¶ä¸§å¤±å¥½å¥‡å¿ƒï¼Œä¸§å¤±æ¢ç´¢æ¬²ã€‚ è¿™ä¸€ç‚¹åœ¨æœ‰ç»éªŒçš„ç©å®¶èº«ä¸Šä½“ç°çš„å°¤å…¶æ˜æ˜¾ã€‚å¯¹ä¸€ä¸ªæ™®æ™®é€šé€šçš„æ¢ç´¢ç±»æ¸¸æˆï¼Œä»–ä»¬å¯¹ä¸€åˆ‡å‡ ä¹éƒ½æœ‰é¢„æœŸï¼Œå› æ­¤ä¹Ÿä¼šä¸§å¤±æ¢ç´¢æ¬²ã€‚ å…¶å®ï¼Œç»å¤§å¤šæ•°æ¸¸æˆéƒ½è®©ç©å®¶ä¸§å¤±äº†æ¢ç´¢æ¬²ï¼Œè®©æˆ‘ä»¬ä»¥æ¸…å•å¼å¼€æ”¾ä¸–ç•Œä¸ºä¾‹ï¼Œçœ‹çœ‹é—®å·æ˜¯å¦‚ä½•è®©ç©å®¶å¤±å»æ¢ç´¢æ¬²çš„ã€‚ å‡è®¾æˆ‘ä»¬é¢å‰æœ‰ä¸€ä¸ªç©å®¶åœ¨ç©æ¸¸æˆï¼Œæˆ‘ä»¬çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚ç©å®¶åˆ°äº†ç¬¬ä¸€ä¸ªé—®å·ï¼Œæ˜¯ä¸€ä¸ªæœ‰è¶£çš„æˆ˜æ–—ï¼ç©å®¶å¾ˆå¼€å¿ƒã€‚ç©å®¶åˆ°äº†ç¬¬äºŒä¸ªé—®å·ï¼Œæ˜¯ä¸€ä¸ªé«˜çº§æ­¦å™¨ï¼ç©å®¶å¾ˆå¼€å¿ƒã€‚â€¦â€¦ç©å®¶åˆ°äº†ç¬¬ 16 ä¸ªé—®å·ï¼Œæ˜¯ä¸€ä¸ªå·²ç»é‡å¤è¿‡ä¸çŸ¥é“å¤šå°‘éçš„çš„æˆ˜æ–—ï¼Œåœ¨æˆ˜æ–—ç»“å°¾è¿˜å¥–åŠ±äº†ä¸€ä¸ªé«˜çº§æ­¦å™¨ï¼ç©å®¶å¯¹æ­¤æ—©æœ‰é¢„æœŸï¼Œä¸å†æƒ³å»ä¸‹ä¸€ä¸ªé—®å·äº†ã€‚ çœ‹è§äº†å—ï¼Œç©å®¶å°±æ˜¯è¿™æ ·ä¸§å¤±æ¢ç´¢æ¬²ï¼Œæ²¦ä¸ºæ¸…é—®å·æœºå™¨çš„ã€‚ å¼€æ”¾ä¸–ç•Œé‡Œçš„é—®å·è¿™ä¹ˆè¯´æ¥ï¼ŒæŠŠæ¯ä¸ªé—®å·çš„å†…å®¹éƒ½æ¢æˆä¸€ä¸ªç©å®¶çŒœä¸åˆ°æ˜¯ä»€ä¹ˆçš„ç²¾ç¾çš„æ”¯çº¿å°±èƒ½æ¿€å‘æ¢ç´¢æ¬²ï¼Ÿè¿™ç¡®å®èƒ½æ”¹å–„ç°çŠ¶ï¼Œä½†ä¹Ÿå¹¶éå…¨ç„¶å¦‚æ­¤ã€‚é—®å·å§‹ç»ˆæ²¡æœ‰å®Œå…¨åšåˆ°è®©ç©å®¶è§‰å¾—é‚£ä¸ªåœ°æ–¹â€œå€¼å¾—å…³æ³¨â€ï¼Œæ¯•ç«Ÿé—®å·æ˜¯è®¾è®¡å¸ˆåœ¨åœ°å›¾ä¸Šæ ‡å‡ºæ¥çš„ï¼Œè€Œä¸æ˜¯ç©å®¶ä¸»åŠ¨æ ‡å‡ºçš„ã€‚ è®¸å¤šç±»é“¶æ²³åŸé‡Œä¹Ÿæä¾›äº†åœ¨åœ°å›¾ä¸Šæ‰“æ ‡è®°çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æ¨ªå‘å¯¹æ¯”ä¸€ä¸‹ã€‚å¾ˆæ˜æ˜¾ï¼Œä¸€å¼ å…¨æ˜¯è‡ªå·±æ ‡å‡ºçš„é—®å·çš„åœ°å›¾å’Œä¸€å¼ å…¨æ˜¯æ¸¸æˆè‡ªå¸¦çš„é—®å·çš„åœ°å›¾ç›¸æ¯”ï¼Œå‰è€…æ›´èƒ½æ¿€å‘æ¢ç´¢æ¬²ã€‚ç©¶å…¶æ ¹æœ¬ï¼Œå°±åœ¨äºå‰è€…çš„æ¯ä¸ªé—®å·éƒ½çœŸçš„è®©ç©å®¶ç›¸ä¿¡â€œé‚£é‡Œæœ‰å€¼å¾—å…³æ³¨çš„ä¸œè¥¿â€ã€‚ é‚£ä¹ˆæ€ä¹ˆæ”¹è¿›å¼€æ”¾ä¸–ç•Œé‡Œçš„é—®å·å‘¢ï¼Ÿæˆ‘ä¹Ÿä¸ç¡®å®šã€‚è¯´åˆ°åº•é—®å·è¿™ä¸ªä¸œè¥¿æ ¹æœ¬å°±æ²¡è®©ç©å®¶è§‰å¾—â€œé‚£é‡Œæœ‰å€¼å¾—å…³æ³¨çš„ä¸œè¥¿â€ä¸æ˜¯å—ï¼Ÿç»ˆç©¶è¦è®©ç©å®¶è§‰å¾—è‡ªå·±æ˜¯ä¸»åŠ¨å…³æ³¨åˆ°é‚£é‡Œçš„æ‰è¡Œï¼Œé—®å·è¿˜æ˜¯å¤ªè¢«åŠ¨äº†ã€‚ æ–‡æœ«å†™åˆ°è¿™é‡Œï¼Œå…³äºæ¢ç´¢çš„å†…å®¹å°±åŸºæœ¬å†™å®Œäº†ï¼Œæœ€åæ˜¯ä¸€äº›è®©æ¢ç´¢æ›´æœ‰è¶£çš„å°æŠ€å·§ï¼Œæˆ‘éšä¾¿åˆ—ä¸€äº›ï¼Œä¸å†è¯¦è°ˆã€‚ èƒ½åŠ›è½¯é”ï¼šå¸¸è§äºç±»é“¶æ²³åŸã€‚èƒ½åŠ›è½¯é”ä¸ä»…æ˜¯å…³å¡è®¾è®¡æ‰‹æ®µï¼Œä¹Ÿæ˜¯æ§åˆ¶å¯é€‰è·¯çº¿æ•°é‡çš„å·¥å…·ã€‚é™åˆ¶é€‰é¡¹æ•°é‡çš„é‡è¦æ€§ä¸å¿…å¤šè¯´ã€‚ çº¿ç´¢ï¼šå¥½çš„ç§˜å¯†éœ€è¦æç¤ºï¼Œè€Œééšæœºä¹±é€›ã€‚æˆ‘å®åœ¨æ˜¯æ¬£èµä¸äº†åˆ°å¤„ä¹±è—ä¸œè¥¿çš„é“¶æ²³åŸã€‚è¿™è¿˜ä¼šæ¶‰åŠåˆ°ç”µæ³¢å¼è°œé¢˜ï¼ˆæˆ‘æ„Ÿè§‰æ¯”â€œç‚¹å‡»å¼è°œé¢˜â€æ›´å¥½ç†è§£ï¼‰å’Œé€»è¾‘è°œé¢˜çš„å·®å¼‚ï¼Œä¸è¯¦è°ˆã€‚ çŸ¥è¯†ç§¯ç´¯ï¼šæ¸¸æˆåº”è¯¥é€æ­¥æ•™ä¼šç©å®¶è¯†åˆ«æ¢ç´¢æœºä¼šçš„èƒ½åŠ›ï¼Œä¹Ÿè¢«ç§°ä½œâ€œçŸ¥è¯†é”â€ã€‚ ä¸€ä¸ªç›¸å½“æœ‰è¶£çš„ä½“éªŒæ˜¯â€œæ–°è§†è§’â€ï¼Œå³å‘ç°äº†è¿‡å»æ²¡æœ‰å‘ç°çš„æ¢ç´¢æœºä¼šã€‚èƒ½åŠ›æˆé•¿ã€ç¯å¢ƒå˜åŒ–ã€çŸ¥è¯†ç§¯ç´¯éƒ½èƒ½å¸¦æ¥æ–°è§†è§’ã€‚å…¶ä¸­æˆ‘æœ€å–œæ¬¢çš„æ˜¯ç¯å¢ƒå˜åŒ–å’ŒçŸ¥è¯†ç§¯ç´¯å¸¦æ¥çš„æ–°è§†è§’ï¼Œå¤§æ¦‚æ˜¯å› ä¸ºä¸å¸¸è§å§ã€‚ è®©æˆ‘ä»¬è¯•è¯•ä¸€ä¸ªç®€å•çš„ä¼ è¾¾æ¢ç´¢çš„ä½“éªŒçš„ demo ã€‚æˆ‘ä»¬çœ‹åˆ°äº†ä¸‹é¢çš„ä¸œè¥¿ï¼š æ‰€ä»¥ï¼Œè¿™å°±æ˜¯æ¢ç´¢äº†ï¼Ÿ ä½ å¥½å¥‡é‚£é‡Œæœ‰ä»€ä¹ˆå—ï¼Ÿæ—¢ç„¶ä½ è¯»å®Œäº†æ–‡ç« ï¼Œå¸Œæœ›ä½ ä¹Ÿä¼šå¥½å¥‡ä½œè€…è¿˜èƒ½æ•´å‡ºä»€ä¹ˆæ–°æ´»å§ã€‚æˆ‘æœ¬æ¥åº”è¯¥åœ¨é‡Œé¢æ”¾ç½®ä¸€äº›æœ‰è¶£çš„ä¸œè¥¿æ¥æ»¡è¶³ä½ çš„å¥½å¥‡å¿ƒï¼Œä¸è¿‡è€ƒè™‘åˆ°æ—¶é—´æœ‰é™ï¼Œå°±åªèƒ½æ”¾ä¸ªæ™®é€šçš„å½©è›‹äº†ã€‚ /* éšè—è‰ä¹¦ */ .hidden-fancy-text { font-family: 'Brush Script MT', cursive; font-size: 20px; /* text-align: center; */ margin: 20px 0; /* padding: 20px; */ line-height: 1.5; color: transparent; cursor: default } .hidden-fancy-text::selection { color: darkred; background: white; } å¦‚æœä½œè€…åœ¨è®¤çœŸåšæ¸¸æˆçš„è¯ï¼Œæˆ‘ä»¬ä¹Ÿåº”è¯¥ä¼šè§é¢çš„ã€‚","categories":[{"name":"æ¸¸æˆè®¾è®¡","slug":"æ¸¸æˆè®¾è®¡","permalink":"http://rinevard.github.io/categories/%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[]},{"title":"æ¬¢è¿ï¼","slug":"æ¬¢è¿ï¼","date":"2025-02-06T02:25:53.000Z","updated":"2025-08-20T11:13:48.854Z","comments":true,"path":"wiki/æ¬¢è¿ï¼/","permalink":"http://rinevard.github.io/wiki/%E6%AC%A2%E8%BF%8E%EF%BC%81/","excerpt":"","text":"è¿™æ˜¯ä¸€ç¯‡æ¬¢è¿æ–‡ç« ï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„ç½‘ç«™ï¼ å¦‚ä½ æ‰€è§ï¼Œå·¦è¾¹æ˜¯ç½‘ç«™çš„æ–‡ç« åˆ—è¡¨ï¼Œä»¥æ–‡ä»¶å¤¹çš„å½¢å¼æ’å¸ƒï¼›å·¦ä¸Šæ–¹çš„â€œé¦–é¡µâ€å°±æ˜¯è¿™é‡Œçš„ç½‘é¡µï¼Œâ€œæ–‡ç« å†å²â€è®°å½•äº†æ–‡ç« çš„è¯ç”Ÿæ—¶é—´çº¿ï¼Œâ€œå…³äºâ€æ˜¯æˆ‘çš„è‡ªæˆ‘ä»‹ç»ï¼›å³è¾¹æ˜¯æ–‡ç« çš„ç›®å½•ï¼Œæ‚¬åœä¼šå±•å¼€ç›®å½•ï¼Œç‚¹å‡»å°±èƒ½è·³è½¬åˆ°å¯¹åº”ä½ç½®ã€‚ æœ¬ç«™ä½¿ç”¨äº†æˆ‘å’Œ LLM åŸºäº Hexo çš„ Wikitten åšçš„è‡ªåˆ¶ä¸»é¢˜ï¼ æˆ‘åº”è¯¥ä¸»è¦ä¼šåœ¨è¿™é‡Œæ”¾ä¸€äº›æ‚è°ˆå’Œæ¸¸æˆç›¸å…³çš„æ–‡ç« ï¼Œæ¬¢è¿æ¥çœ‹ï¼","categories":[],"tags":[]}],"categories":[{"name":"å…¬å¼€è¯¾","slug":"å…¬å¼€è¯¾","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/"},{"name":"MIT-6.S081","slug":"å…¬å¼€è¯¾/MIT-6-S081","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/"},{"name":"Labs","slug":"å…¬å¼€è¯¾/MIT-6-S081/Labs","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/Labs/"},{"name":"æ‚è°ˆ","slug":"æ‚è°ˆ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/"},{"name":"ç¢ç¢å¿µ","slug":"æ‚è°ˆ/ç¢ç¢å¿µ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/%E7%A2%8E%E7%A2%8E%E5%BF%B5/"},{"name":"ç¿»è¯‘","slug":"æ‚è°ˆ/ç¿»è¯‘","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/%E7%BF%BB%E8%AF%91/"},{"name":"GAMES101","slug":"å…¬å¼€è¯¾/GAMES101","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/"},{"name":"Assignments","slug":"å…¬å¼€è¯¾/GAMES101/Assignments","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/Assignments/"},{"name":"Notes","slug":"å…¬å¼€è¯¾/GAMES101/Notes","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/GAMES101/Notes/"},{"name":"æ¸¸æˆè®¾è®¡","slug":"æ¸¸æˆè®¾è®¡","permalink":"http://rinevard.github.io/categories/%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1/"},{"name":"Notes","slug":"å…¬å¼€è¯¾/MIT-6-S081/Notes","permalink":"http://rinevard.github.io/categories/%E5%85%AC%E5%BC%80%E8%AF%BE/MIT-6-S081/Notes/"},{"name":"gamejam","slug":"gamejam","permalink":"http://rinevard.github.io/categories/gamejam/"},{"name":"äºŒæ¬¡å…ƒ","slug":"æ‚è°ˆ/äºŒæ¬¡å…ƒ","permalink":"http://rinevard.github.io/categories/%E6%9D%82%E8%B0%88/%E4%BA%8C%E6%AC%A1%E5%85%83/"}],"tags":[]}